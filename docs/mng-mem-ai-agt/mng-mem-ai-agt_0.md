# 引言

你是否曾与一位经理交谈过，尽管开始时很愉快，但最终变成了挫败，因为他们简单地无法记住上周的一个关键细节？也许你花了一个小时解释一个新项目，你对时间表的担忧，你决定的具体方法——结果他们在一周后问：“等等，你又在做什么？”你只能尽力不带着挫败感离开。

对于我们这些与智能体合作的人来说，这种场景感觉痛苦地熟悉。你今天合作的智能体可能非常擅长理解你的当前请求，甚至在长时间的对话中保持完美的上下文。但提到上周的那个项目——你精心概述的，所有的要求和限制——你会遇到数字版的茫然。

这不仅仅是不便，这是一个基本的限制，它塑造了我们如何与这些系统合作的方式。新的会话可能感觉像是从头开始，迫使你重新解释应该被记住的上下文，重建应该持续的理解。智能体的健忘症迫使我们在重新情境化的循环中——将本应持续的协作变成一系列脱节的遭遇。

事实上，智能体记忆的扩展性远远没有达到应有的水平。虽然这些系统可以在单次对话中处理大量信息，但它们在时间上保留和有意义地回忆这些信息的能力仍然令人沮丧地有限。

好消息是，这种限制并没有被忽视。研究人员和工程师正在不懈地努力扩大内存容量，改进存储和检索机制，并创建能够维持上下文（而不仅仅是几个小时，而是几周和几个月）的系统。他们从多个角度解决这个问题——从对注意力机制的实质性改进到模拟长期记忆的巧妙解决方案。

这本书是关于理解这些努力，更重要的是，它们对我们未来如何与智能体合作意味着什么。因为那些想出如何让他们的智能体拥有有效长期记忆的组织或个人，不仅会拥有更好的工具——他们还会拥有一个真正的合作伙伴。

# 智能体记忆：它只是数据……直到它不再是

在其核心，智能体记忆正是任何软件工程师都会预期的：数据、存储和检索。当你听到“智能体内存管理”时，你会正确地想到“数据管理”。我们在数据库、缓存系统和存储架构方面有着数十年的经验。那么，为什么我们需要关于智能体记忆的整本书呢？

答案是欺骗性地简单：虽然数据存储可能是一个熟悉的话题，但智能体如何使用这些数据与工程师之前构建的任何系统都存在根本性的不同。

考虑一个传统的数据库。当你查询客户记录时，你每次都会得到那些记录。数据库不会决定昨天关于客户#12345 的查询今天就不那么重要了。它不会将旧交易压缩成模糊的摘要。它当然不会根据你如何措辞查询来检索不同的结果。

但智能体？它们本质上是非确定性的。同一个查询可能会根据措辞的微妙变化而检索不同的信息。存储的不仅仅是数据——它被嵌入到向量中，其中“银行”（金融）和“银行”（河畔）可能位于完全不同的意义社区。检索不是一个精确的`SELECT`语句；它是在语义空间中进行模糊搜索，其中相关性是计算的，而不是保证的。

这也是为什么我们如此大量地从人类记忆中借用隐喻。像人类一样，智能体必须在约束条件下工作：有限的上下文窗口而不是无限的存储。智能体更重视近期信息而非旧信息。它们会决定保留什么、压缩什么和忘记什么。它们根据相似性和上下文检索信息，而不是完美的匹配。

即使这种比较也有其局限性。正如我们将要探讨的，智能体不像人类那样持续学习。它们无法更新其核心知识。它们被冻结在时间中，依赖于巧妙的工程来模拟我们视为理所当然的动态记忆。

这种紧张关系——在我们所知的数据管理与非确定性系统的奇特新要求之间——定义了我们构建智能体记忆的方方面面。这就是为什么简单的对话可能变成一个复杂的嵌入、向量数据库、重要性评分和语义缓存的舞蹈。这就是为什么给智能体相同的任务两次可能得到不同的结果，即使记忆是相同的。

# 您将从本书中获得什么

本书带您从基本决策到实际实施的过程，始终将记忆作为对话的中心。以下是每一章的内容：

第一章

本报告的技术基础，本章介绍了智能体记忆管理。智能体本质上是非确定性的，那么我们如何教它们保留和使用重要的用户信息呢？使用重要性评分、级联记忆系统和检查点等策略，我们为本报告的其余部分建立了概念基础。

第二章

深入探讨智能体记忆系统。这是本书的技术核心，讨论了情景记忆、语义记忆和程序记忆之间的区别。智能体记忆实际上是如何工作的——从上下文窗口到持久化策略，重要性评分到语义缓存。本章从理论到行业实践，涵盖了常见的智能体框架，如 Redis 和 LangGraph。

第三章

介绍了代理的经济学、模型的使用和选择。记忆不是免费的。每个存储的标记都会花费金钱。了解为什么记忆管理的经济学不断变化，以及这对你的架构意味着什么。

第四章

讨论了代理权衡的导航——定制构建、框架和托管解决方案。你应该从头开始构建、采用框架，还是使用托管解决方案？你的选择将决定你如何管理记忆。

第五章

讨论了集体记忆——团队和组织如何通过人工智能代理共享知识。这一章节涵盖了从个体代理到组织智能的内容。它介绍了交易记忆系统在实际中的工作方式，为什么新手从共享知识中获益最大，以及像 Zep 和 MCP 这样的平台如何连接组织记忆。

为了结束本次讨论，我们将探讨代理记忆的未来。在结论部分，你将了解到记忆为何如此重要——以及对于组织来说，正确处理代理记忆意味着什么。

在整本书中，我们将回到一个基本真理：最重要的代理始终是人类代理。我们是引导这些强大乐团的指挥。我们将探讨的系统——从向量数据库到语义缓存，从重要性评分到集体记忆平台——都是我们手中的工具。它们可以存储大量数据，以巧妙的方式检索数据，甚至可以就保留什么、忘记什么做出智能决策。但决定成功构成、哪些记忆最重要以及这些系统应如何服务于我们的目标的是我们。

本书不仅会教你代理记忆管理中哪些是重要的，还会解释为什么这些是重要的。因为最终，那些能够繁荣发展的组织和个人不会是那些拥有最大上下文窗口或最快检索算法的。他们将是有能力指导这些系统的人——以恰当的方式指导它们保留重要的信息，忘记不重要的信息，并将原始数据转化为真正的智慧。让我们开始吧。
