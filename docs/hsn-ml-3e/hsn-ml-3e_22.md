# 附录A. 机器学习项目清单

此清单可以指导您完成机器学习项目。有八个主要步骤：

1.  构建问题并全局看问题。

1.  获取数据。

1.  探索数据以获得见解。

1.  准备数据以更好地暴露底层数据模式给机器学习算法。

1.  探索许多不同的模型并列出最佳模型。

1.  微调您的模型并将它们组合成一个出色的解决方案。

1.  展示您的解决方案。

1.  启动，监控和维护您的系统。

显然，您应该随时根据自己的需求调整此清单。

# 构建问题并全局看问题

1.  用业务术语定义目标。

1.  您的解决方案将如何使用？

1.  当前的解决方案/变通方法是什么（如果有的话）？

1.  应该如何框定这个问题（监督/无监督，在线/离线等）？

1.  应如何衡量性能？

1.  性能度量是否与业务目标一致？

1.  达到业务目标所需的最低性能是多少？

1.  有哪些可比较的问题？您能重复使用经验或工具吗？

1.  是否有人类专业知识？

1.  您如何手动解决问题？

1.  列出到目前为止您（或其他人）已经做出的假设。

1.  验证假设（如果可能）。

# 获取数据

注意：尽可能自动化，以便您可以轻松获得新鲜数据。

1.  列出您需要的数据以及需要多少数据。

1.  找到并记录您可以获取数据的位置。

1.  检查它将占用多少空间。

1.  检查法律义务，并在必要时获得授权。

1.  获取访问授权。

1.  创建一个工作空间（具有足够的存储空间）。

1.  获取数据。

1.  将数据转换为您可以轻松操作的格式（而不更改数据本身）。

1.  确保敏感信息被删除或受到保护（例如，匿名化）。

1.  检查数据的大小和类型（时间序列，样本，地理等）。

1.  对测试集进行抽样，将其放在一边，永远不要查看（不要窥探数据！）。

# 探索数据

注意：尝试从领域专家那里获得这些步骤的见解。

1.  为探索创建数据副本（如果需要，将其采样到可管理的大小）。

1.  创建一个Jupyter笔记本来记录您的数据探索。

1.  研究每个属性及其特征：

    +   名称

    +   类型（分类，整数/浮点数，有界/无界，文本，结构化等）

    +   缺失值的百分比

    +   噪声和噪声类型（随机的，异常值，舍入误差等）

    +   任务的实用性

    +   分布类型（高斯，均匀，对数等）

1.  对于监督学习任务，识别目标属性。

1.  可视化数据。

1.  研究属性之间的相关性。

1.  研究您如何手动解决问题。

1.  识别您可能要应用的有前途的转换。

1.  识别可能有用的额外数据（返回到“获取数据”步骤）。

1.  记录您学到的东西。

# 准备数据

注：

+   在数据的副本上工作（保持原始数据集完整）。

+   为您应用的所有数据转换编写函数，有五个原因：

    +   这样您可以在下次获得新数据时轻松准备数据

    +   这样您可以在未来项目中应用这些转换

    +   清理和准备测试集。

    +   在解决方案上线后，清理和准备新数据实例

    +   使您的准备选择易于视为超参数

1.  清理数据：

    +   修复或删除异常值（可选）。

    +   填补缺失值（例如，用零，平均值，中位数...）或删除它们的行（或列）。

1.  执行特征选择（可选）：

    +   删除为任务提供无用信息的属性。

1.  在适当的情况下进行特征工程：

    +   离散化连续特征。

    +   分解特征（例如，分类，日期/时间等）。

    +   添加有前途的特征转换（例如，对数（* x *），平方根（* x *），* x *²等）。

    +   将特征聚合成有前途的新特征。

1.  执行特征缩放：

    +   标准化或归一化特征。

# 列出有前途的模型

注：

+   如果数据很大，您可能希望对较小的训练集进行抽样，以便在合理的时间内训练许多不同的模型（请注意，这会惩罚复杂模型，如大型神经网络或随机森林）。

+   再次尝试尽可能自动化这些步骤。

1.  使用标准参数从不同类别（例如线性、朴素贝叶斯、SVM、随机森林、神经网络等）训练许多快速而粗糙的模型。

1.  测量并比较它们的性能：

    +   对于每个模型，使用*N*折交叉验证，并计算*N*折上性能指标的均值和标准差。

1.  分析每个算法的最重要变量。

1.  分析模型所犯的错误类型：

    +   人类会使用什么数据来避免这些错误？

1.  进行一轮快速的特征选择和工程。

1.  再进行一两次快速迭代，按照之前五个步骤。

1.  列出前三到五个最有前途的模型，更喜欢产生不同类型错误的模型。

# 微调系统

注意：

+   在这一步骤中，您将希望尽可能使用更多数据，特别是在朝着微调的最后阶段。

+   像往常一样，尽可能自动化。

1.  使用交叉验证微调超参数：

    +   将数据转换选择视为超参数，特别是在您不确定时（例如，如果您不确定是用零还是中位数替换缺失值，或者只是删除行）。

    +   除非要探索的超参数值非常少，否则更喜欢随机搜索而不是网格搜索。如果训练时间很长，您可能更喜欢贝叶斯优化方法（例如，使用高斯过程先验，如[Jasper Snoek等人所述](https://homl.info/134)^([1](app01.html#idm45720157724336))）。

1.  尝试集成方法。将您最好的模型组合在一起通常会比单独运行它们产生更好的性能。

1.  一旦您对最终模型有信心，请在测试集上测量其性能以估计泛化误差。

###### 警告

在测量泛化误差后不要调整模型：您只会开始过拟合测试集。

# 呈现您的解决方案

1.  记录您所做的工作。

1.  创建一个漂亮的演示文稿：

    +   确保首先突出整体情况。

1.  解释为什么您的解决方案实现了业务目标。

1.  不要忘记呈现您沿途注意到的有趣点：

    +   描述哪些工作了，哪些没有。

    +   列出您的假设和系统的限制。

1.  确保通过美丽的可视化或易于记忆的陈述传达您的关键发现（例如，“收入中位数是房价的头号预测因子”）。

# 启动！

1.  准备好将您的解决方案投入生产（连接到生产数据输入，编写单元测试等）。

1.  编写监控代码，定期检查系统的实时性能，并在性能下降时触发警报：

    +   注意缓慢退化：随着数据的演变，模型往往会“腐烂”。

    +   测量性能可能需要一个人类管道（例如，通过众包服务）。

    +   还要监控输入的质量（例如，故障传感器发送随机值，或者另一个团队的输出变得陈旧）。这对在线学习系统尤为重要。

1.  定期在新数据上重新训练您的模型（尽可能自动化）。

^([1](app01.html#idm45720157724336-marker)) Jasper Snoek等人，“机器学习算法的实用贝叶斯优化”，《第25届国际神经信息处理系统会议论文集》2（2012）：2951–2959。
