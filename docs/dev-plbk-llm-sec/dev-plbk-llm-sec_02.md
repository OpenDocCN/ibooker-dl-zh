# 第二章. LLM 应用的 OWASP Top 10

2023 年春季，我开始研究针对 LLM 的特定安全漏洞。当时，关于 AI 的一般安全研究相对较多，但关于 LLM 的组织化研究却非常少。然而，我确实找到了一些涵盖该领域一些想法的研究论文和博客。我开始收集这些研究论文，并使用 ChatGPT 进行总结。最终，我从当前 Web 应用漏洞 Top 10 列表中提供了一些例子，并要求 ChatGPT 以类似格式为 LLM 生成一个草拟的 Top 10。

我认为结果看起来很有趣，所以我把东西发给了 OWASP 的创始人之一，杰夫·威廉姆斯，看看他的看法。杰夫是 Contrast Security 的首席技术官，他在 2001 年编写了第一个 OWASP Top 10 列表。他的目标是创建一个对开发者来说易于获取的资源，详细说明了 Web 应用中最关键的风险和易受攻击的区域。当时，万维网还只有几年历史，大多数开发者对如何创建安全的 Web 应用几乎一无所知。那个原始的 Top 10 列表成为了一项开创性的工作，并在应用安全领域成为了一个基础资源。

我没有告诉杰夫我的列表主要是机器生成的。作为原始 Top 10 列表的作者，我认为他可以给我一个想法，看看我的 Top 10 列表是否新颖且值得追求。杰夫鼓励我向 OWASP 董事会请愿，以获得批准将其作为新项目启动。几周后，OWASP 董事会批准了该项目，我宣布了它，并附上了一个链接，链接到一个我用 ChatGPT 生成的精炼版草拟的 Top 10。

我原本以为这将是一个晦涩难懂的研究项目，只是一点乐趣，结果却变得更大。当我在我个人的 LinkedIn 页面上宣布项目组建时，我希望找到一打或更多对 LLM 安全这个晦涩主题感兴趣的志同道合的人。结果，我的最初博客文章几乎有 10,000 次浏览量，在接下来的几周里有数百人自愿加入专家团队。

这本书不是 OWASP 的产品，这里提到的漏洞和风险不会精确地映射到任何公开的 LLM 应用 Top 10 列表版本。相反，你应该期待看到我对这些风险的观点。然而，我对这个主题的学习和思考受到了我领导项目以及创建和发布 OWASP LLM 应用 Top 10 列表的初期工作的极大影响。从那时起，许多人向我询问我们如何运行项目以及我们如何在如此短的时间内创建这样一个有影响力的框架的细节。因此，在我们检查个别风险和漏洞之前，我将给你一些 OWASP 和 LLM 应用项目的背景故事。

# 关于 OWASP

Open Worldwide Application Security Project 是一个专注于提高软件安全的非营利组织。成立于 2001 年，OWASP 为安全专家提供了一个分享关于网络安全知识与实践的平台，从应用级漏洞到新兴威胁。如今，它拥有数万名活跃成员和全球 250 多个地方分会。

该组织是由社区驱动的，并鼓励志愿者参与各种项目，包括文档、工具和论坛。它采用开源模式，使资源对公众免费开放。多年来，OWASP 在安全社区中积累了强大的支持者，其指南和工具在许多情况下被视为行业标准。

除了定期更新（最近在 2021 年更新）的原始 Web 应用 Top 10 列表之外，OWASP 在这些年里还涌现出了一些专门的 Top 10 列表。这些包括：

OWASP 移动 Top 10

列出 Android 和 iOS 移动应用的关键风险，包括不安全的数据存储、不充分的加密和不安全的通信

OWASP API 安全 Top 10

突出 API 特定的风险，如不当的资产管理和不完整的对象级安全

OWASP 物联网 Top 10

识别顶级物联网（IoT）安全关注点，例如不安全的网络服务、缺乏物理加固和不安全的软件/固件

OWASP 云原生 Top 10

专注于云原生应用风险，涵盖数据泄露、破坏性身份验证和不安全的部署配置

OWASP Top 10 服务器端无服务器

解决无服务器架构的独特安全关注点，这是一个越来越受欢迎但风险较高的模型

OWASP Top 10 隐私风险

促进良好的隐私实践，解决诸如数据加密不足和审计和日志记录不足等问题

# LLM 应用 Top 10 项目

在我发布关于 LLM 应用 Top 10 项目成立的公告一周后，超过 200 人加入了该项目，我们通过 Zoom 举办了启动活动。在第一次会议上，我概述了希望小组能够实现的目标，并提出了一个激进的路线图：我们将在八周内构建列表的第一版。典型的 OWASP Top 10 列表可能需要一年或更长时间来开发，但我们决定这个领域发展如此迅速，这种类型的资源如此急需，我们必须加快工作速度。

我们决定以两周、敏捷风格的冲刺来运行项目。由于小组中的大多数专家都熟悉敏捷开发，因此每个人都很快适应了这种节奏。

## 项目执行

项目的第一个冲刺是头脑风暴和评论。每个人都审查了列表的原始版本，我称之为版本 0.1。那个初始版本有很多问题，团队积极指出这些问题。同时，我们开始创建一个维基页面，其中包含小组在 LLM 安全问题方面找到的所有资源的链接。结果发现已经有很多相关内容，但这是第一次有人收集这些信息并使其易于访问。这个新的精选资源集合是小组的第一个胜利。

第二个冲刺的目标是生成列表的新版本。这次，它不再是单个人和人工智能的产物，而是我们专家团队集体智慧的结晶，这个团队每周都在不断壮大。在第一周，小组专注于为“十大”列表生成想法。我们发布了一个模板，并要求小组提交候选漏洞。在那周，我们开发了 43 个可能的领域的详细描述。然后，我们使用 Google Forms 进行了两轮投票，利用团队的集体智慧将列表缩小到 10 项，并发布了版本 0.5。这个版本比版本 0.1 更加详细和全面。来自更广泛社区的积极反响给了小组继续工作的动力。

下一个冲刺用于完善每个条目。我们为每种漏洞类型创建了 Slack 频道，并为每个条目选择了一名志愿者作为条目负责人。10 到 30 人的子团队随后完善和调整了每个条目。同样，我们进行了一轮投票，让整个团队参与并指出需要更多关注的薄弱环节。在这个过程中，我们发现一些条目有重叠，并将它们合并。这一变化为提升一些低于 10 项门槛的条目腾出了空间。这次冲刺的结果是列表的版本 0.9。有趣的是，版本 0.9 的词数比 0.5 短约 33%；额外的时间和改进让子团队能够集中思考，使条目更加简洁有力。

最后，我们进行了最后的冲刺，以审查、调整和清理每个条目。我们通过 Google Forms 收集了另一轮反馈，以确保一切准备就绪。这时，我们有了专门的设计负责人，他设计了整个文档，并制作了一个吸引人的 PDF 文件用于发布。

## 反响

我发布的列表 1.0 版本的公告在 LinkedIn 上被浏览超过 40,000 次。这还不包括小组成员在自己的页面和博客上发布的许多帖子。在公告发布后的几天里，记者们报道了这一消息，它被媒体机构如《Wired》、《SD Times》、《The Register》、《Infosecurity》杂志和《Diginomica》等报道。可以说，仅在最初的几周内，就有数十万人意识到了我们的工作。

除了接触到的人数之外，令我惊讶的是，反馈普遍积极。我们也看到美国和欧洲的第一批政府机构将我们的工作作为基础性文件进行引用。虽然我们专家团队中的每个人都同意还有更多工作要做，但似乎全世界对这一领域的建议如此饥渴，我们的文件正好击中了要点。虽然我们收到了许多问题和评论，但可以肯定的是，所有参与的人都对我们的工作感到满意和自豪。

## 成功的关键

许多人问我我们如何能够如此迅速地将这个项目推向成功的结局。回顾过去，我相信有几个因素起了作用。我希望在这里分享它们，希望未来运行类似项目的人可能从中受益。

时间无疑发挥了相当大的作用。ChatGPT 发布后对 LLM 的兴趣浪潮是巨大的。它吸引了我的注意，无数其他人也感到兴奋。这有助于吸引一个庞大而多样化的专家团队，并激励一小部分人在紧迫的截止日期下投入大量时间进行项目。 

从一开始就有一个明确的计划和时间是至关重要的。我在项目开始时对 LLM 安全的了解有限，但我已经通过管理许多贡献者的复杂项目来建立职业生涯。创建一个具有具体阶段和日程安排的清晰路线图，让人们知道我们在做什么以及何时进行。每个人都能够看到不远处的目标，这保持了人们的动力。每隔两周，我们通过 Zoom 进行全球会议，并将录像发布在 YouTube 上，供无法现场参加的人观看。会议和录像对于协调全球分布的团队至关重要。

在开始阶段进行一个自由但简短的头脑风暴阶段是至关重要的。LLM 安全是一个全新的领域，让人们在前两周时间里提出想法并在 Slack 上进行争论是至关重要的。这也使我们能够收集和推广该领域现有的研究成果。这让我们能够从每个人都能够接触到最佳现有研究的地方开始。

然而，保持这个阶段简短同样至关重要。通过将头脑风暴限制在两周内并迅速转向创作阶段，我们可以保持势头。我见过其他项目陷入困境，无法在人们失去兴趣之前超越头脑风暴阶段。

创建项目核心团队并不是我最初计划的事情，但它变得至关重要。拥有一个大型专家团队是一笔巨大的财富。在我们发布 1.0 版本时，团队人数增长到了近 500 人。如此庞大的团队将难以管理。在项目的前几周，我正在寻找积极和知识渊博的人。我接触了大约一打这样的人，并询问他们是否愿意加入项目的核心领导团队。我告诉他们这将是一项额外的工作，但他们将成为项目的核心。这个角色不会有具体的奖励。大多数人立即接受了。我相信，认可人们并正式请求他们的支持，激励他们在这个项目上投入更多的时间和精力。他们都投入了！

短期冲刺并具有可见交付成果是敏捷开发的核心原则，这也是它发光的地方。使用敏捷发布列车模型，我能够在存在不同意见的情况下继续推动团队前进。如果某些成员对某个领域有顾虑，我们不会让它让我们陷入困境。我们承认了这个问题，并同意在下一个冲刺中解决它。当我们达到列表的 1.0 版本时，仍然有一些地方人们希望做更多的事情，所以我们只是同意列表会有更多版本。这将是一个活文档，最重要的是将这个资源的版本交给需要的开发者。

# 本书和 Top 10 列表

正如我提到的，这本书不是 OWASP 基金会的产物。然而，与这个团队合作的经验对我的 LLM 安全理解和观点产生了巨大的影响。这种心态意味着以下章节中的大部分指导都受到了构建和维护 Top 10 项目的优秀团队的巨大影响。通过这种方式，读者应该感到放心，他们得到的建议不是单一作者的产品，而是由一个更大的专家社区所指导。

在接下来的几章中，我们将回顾 LLMs 的最高风险和漏洞领域。我们讨论的风险将包含许多与 OWASP Top 10 共同的地方，但不会与任何官方 Top 10 列表的版本完全相同。Top 10 列表是一个快速阅读的列表，突出了关键区域；在这里，我们将更深入地探讨风险、补救措施和扩展的真实案例研究。

我们将在第十章 OWASP 版本的 Top 10 列表中回顾，我们将简要回顾 2023 年的列表版本，并将其映射到本书的章节中。然后，我们将展示如何使用 Top 10 框架来记录和分享对安全漏洞和成功攻击的分析。

在第三章中，我们将探讨典型 LLM 应用的整体结构，并讨论信任边界和风险。随后的章节将深入探讨个别风险领域，并检查漏洞、攻击和示例，以便您可以为保护自己的用例制定策略。

让我们出发吧！
