- en: 5 Crafting a data story using the DIKW pyramid
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This chapter covers
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: A homelessness tale, our scenario for this chapter
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: What a data story is and how it relates to the DIKW pyramid
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: How to incorporate generative AI into the DIKW pyramid
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Creating stories is the most exciting part of data storytelling. It’s really
    about following a plot with a beginning, a main point, and a conclusion—just like
    in the stories at the cinema or theater. Here, however, there are constraints
    imposed by the data. In this chapter, we will focus on using the DIKW pyramid
    by describing two examples. The first example will analyze the problem of homelessness
    in Italy, and the second will examine the problem of fake news on a hypothetical
    website. We will also describe the concept of a data story and how it relates
    to the DIKW pyramid already discussed in the previous chapters. Finally, we will
    describe some strategies to incorporate generative AI in the DIKW pyramid, based
    on how to write specific prompts for ChatGPT to generate the context of a chart
    and for DALL-E to generate contextual images to incorporate into the chart.
  prefs: []
  type: TYPE_NORMAL
- en: '5.1 Breaking the ice: The homelessness tale'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Imagine that Angelica works for a humanitarian organization that wants to apply
    for funding from a foundation to help reduce the population of homeless people
    in Italy. Humanitarian interventions can be applied to up to four Italian regions.
    The call for funds involves preparing a data visualization chart motivating the
    selected regions and detailing reasons to fund the proposal.
  prefs: []
  type: TYPE_NORMAL
- en: Angelica’s boss asks her to complete a study on which regions to invest in and
    to motivate her choice. Angelica starts a web search for possible datasets on
    homelessness in Italy. After several searches, she comes across the ISTAT dataset
    on homelessness in 2021 ([https://mng.bz/Bd6J](https://mng.bz/Bd6J)). She downloads
    the dataset and starts analyzing it. Table 5.1 shows a simplified version of an
    extract of the homelessness dataset. The original dataset column names are in
    Italian. They are translated into English to improve readability.
  prefs: []
  type: TYPE_NORMAL
- en: Table 5.1 An extract of the ISTAT dataset on homelessness in 2021
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: '| ITTER107 | Territory | Sex | Age | Citizenship | Value |'
  prefs: []
  type: TYPE_TB
- en: '| --- | --- | --- | --- | --- | --- |'
  prefs: []
  type: TYPE_TB
- en: '| ITC1  | Piemonte  | M  | TOTAL  | ITL  | 4,218  |'
  prefs: []
  type: TYPE_TB
- en: '| ITC1  | Piemonte  | F  | TOTAL  | ITL  | 1,496  |'
  prefs: []
  type: TYPE_TB
- en: '| ITC2  | Valle d''Aosta  | M  | TOTAL  | ITL  | 41  |'
  prefs: []
  type: TYPE_TB
- en: '| ITC2  | Valle d''Aosta  | F  | TOTAL  | ITL  | 17  |'
  prefs: []
  type: TYPE_TB
- en: The ISTAT dataset on homelessness
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: 'The dataset has the following columns:'
  prefs: []
  type: TYPE_NORMAL
- en: '*ITTER107*—The region ID'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*Territory*—The region name'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*Sex*—One of Male (M), Female (F), or Total (T)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*Age*—One of Sum of All Ages (TOTAL), Under 17 (Y_UN17), Between 18 and 34
    (Y18-34), Between 35 and 54 (Y35-54), and Greater Than 55 (''Y_GE55)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*Citizenship*—One of Italian (ITL), Foreign (FRGAPO), or Total (TOTAL)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*Value*—The actual number of homeless people'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: At the end of her analysis, Angelica produces the chart shown in figure 5.1
    by writing the code in the following listing, using Altair. You can find the full
    code in the GitHub repository for the book under CaseStudies/homeless-people/raw-chart.py.
  prefs: []
  type: TYPE_NORMAL
- en: Listing 5.1 The map in Altair
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: '#1 Data cleaning'
  prefs: []
  type: TYPE_NORMAL
- en: '#2 Focus on total age, total sex, and total citizenship.'
  prefs: []
  type: TYPE_NORMAL
- en: '#3 Load the TopoJSON file by URL.'
  prefs: []
  type: TYPE_NORMAL
- en: '![figure](../Images/5-1.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.1 A map showing the homeless people in Italy in 2021
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: Note  The chart builds a map using an underlying `topoJSON` object containing
    the map of Italy. To build the map, use the `mark_geoshape()` marker, and specify
    the projection through the `project(`) method. In addition, combine the homeless
    dataset (`df`) and the map through the `transform_lookup()` method. Map the `properties.reg_name`
    variable of the `topoJSON` file with the `Territory` variable of the `df` DataFrame.
    We’ll discuss how to build a geographical map more deeply in the next chapter.
  prefs: []
  type: TYPE_NORMAL
- en: 'Angelica shows the chart to her boss, who asks her to answer their question:
    *Which are the four regions for which we must apply for funding?* Angelica looks
    at the chart and gives this answer: *those with the darker color*. Her answer
    is very ambiguous because from the chart she produced, it is not immediately clear
    which exactly are the four regions with the darkest color. In addition, it is
    not clear why to select the four regions. Angelica has to admit that her chart
    has failed in its mission.'
  prefs: []
  type: TYPE_NORMAL
- en: 5.1.1 What was wrong with the chart?
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The main problem with the chart is there is a large discrepancy between what
    Angelica’s boss (audience) expected to see in the chart and what the chart actually
    shows. In practice, Angelica’s chart does not answer the question for which it
    was requested (figure 5.2).
  prefs: []
  type: TYPE_NORMAL
- en: '![figure](../Images/5-2.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.2 Angelica’s boss (audience) requested an answer to a specific question
    (on the left). The chart actually answered generic questions (on the right).
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: 'Here comes the first rule when building a chart: a chart must answer exactly
    the question the intended audience asks. Try not to leave it up to your audience
    to decipher the answer. Do the work for them!'
  prefs: []
  type: TYPE_NORMAL
- en: 'Angelica’s boss asks her to redo the chart. She returns to her office with
    her head down and analyzes her dataset again. Angelica understands that the problem
    is not so much data analysis but rather how to represent data effectively. She
    tries this reasoning: *at a glance, the audience must understand the four regions
    to apply for funding. What could these four regions be? Probably the ones that
    have the highest value of homeless people*. What is missing in her previous chart
    is the *probably* part. She considers making a bar chart that shows the regions
    in descending order based on the number of homeless people present. After a small
    effort, she produces the chart in figure 5.3, writing the code in listing 5.2\.
    You can also find the code in the GitHub repository for the book under CaseStudies/homeless-people/bar-chart.py.'
  prefs: []
  type: TYPE_NORMAL
- en: '![figure](../Images/5-3.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.3 A bar chart showing the number of homeless people in Italy by region
    in 2021
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: Listing 5.2 The bar chart in Altair
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: Note  The code builds a bar chart using the `mark_bar()` method. It also sets
    the bars’ color using the `color` parameter. To order the bars in descending order,
    use the `sort` parameter within the `y` channel, and specify to sort in descending
    order of the `x` encoding channel. Use `configure_title()` to configure the title
    parameters, such as the font size (`fontSize`) and the `offset` between the title
    and the chart.
  prefs: []
  type: TYPE_NORMAL
- en: 'The chart answers the boss’s question: the four regions are Lazio, Lombardia,
    Piemonte, and Campania. Angelica notes that three of the four regions also correspond
    to the most populous regions of Italy. As Angelica reflects on this, she notices
    that her chart contains an underlying error. The most populous regions also have
    the highest number of homeless people precisely because their population is greater.'
  prefs: []
  type: TYPE_NORMAL
- en: Therefore, the chart does not show the situation in a relevant way. She needs
    to normalize the data based on the population—or scale the numbers based on population
    size. Without any normalization, data could be biased. Consider, for example,
    the case of a region with a population of 100 people, of which 30 are homeless.
    Also, consider region with a population of 10 people, of which 8 are homeless.
    If you represent absolute values, you conclude that in the first case, there are
    more homeless people than in the second one. But if you pay more attention to
    the scenario, in the second case, 80% of the population are homeless, while in
    the first case, only 30% are homeless.
  prefs: []
  type: TYPE_NORMAL
- en: Figure 5.4 shows the resulting chart after the normalization process, focusing
    on the regions with the four largest homeless populations. Listing 5.3 describes
    the code written to draw the chart (script CaseStudies/homeless-people/story-chart.py).
  prefs: []
  type: TYPE_NORMAL
- en: '![figure](../Images/5-4.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.4 A bar chart showing the number of homeless people in a region with
    a population of 1,000 in 2021
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: Listing 5.3 Listing 5.3 The improved bar chart in Altair
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: '#1 Data cleaning'
  prefs: []
  type: TYPE_NORMAL
- en: '#2 Focus on total age, total sex, and total citizenship.'
  prefs: []
  type: TYPE_NORMAL
- en: '#3 Normalize the values by popultation.'
  prefs: []
  type: TYPE_NORMAL
- en: Note  The code loads the population dataset, which contains the same fields
    as the homeless dataset, except for the Value column, which indicates the actual
    population. The code merges the two datasets, population (`df_pop`) and homeless
    (`df`), and calculates the ratio between the number of homeless and the population.
    Then, the chart builds a bar chart using the ratio as the `x` encoding channel.
  prefs: []
  type: TYPE_NORMAL
- en: 'Angelica’s chart eventually answers her boss’s question: the four regions are
    Lazio, Liguria, Piemonte, and Sardegna. Finally, Angelica shows her chart to her
    boss, who is very satisfied with her result.'
  prefs: []
  type: TYPE_NORMAL
- en: To apply for funds, Angelica must send her chart to a commission, which will
    decide whether or not to finance her organization’s proposal. However, after a
    careful evaluation, the foundation commission decides not to finance her project
    because the chart lacks motivation.
  prefs: []
  type: TYPE_NORMAL
- en: 5.1.2 What was wrong with the presentation?
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: To understand why the foundation commission refused to fund Angelica’s proposal,
    let’s trace back the path she followed. She started with raw data, analyzed it,
    extracted an insight, and represented it through a chart before she sent it to
    the foundation commission (figure 5.5).
  prefs: []
  type: TYPE_NORMAL
- en: '![figure](../Images/5-5.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.5 Angelica’s journey to chart generation. Angelica presented the results
    of data exploration directly to her audience.
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: What is lacking about her chart is that it contains no context and no motivation
    to push the foundation commission to accept her proposal. Angelica should have
    added an explanatory phase to the exploratory phase of the data, where she could
    have engaged the audience with her data and motivated them to accept her proposal.
    Angelica could have used the DIKW model to move from the exploratory phase of
    her data to the explanatory phase (figure 5.6).
  prefs: []
  type: TYPE_NORMAL
- en: '![figure](../Images/5-6.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.6 Angelica should have transformed her data exploration into a data
    explanation phase.
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: 'In other words, Angelica hasn’t turned data into a story. In his book, *Effective
    Data Storytelling*, Brent Dykes says, “The formation of a data story begins with
    using exploratory data visualizations to discover insights. Once a meaningful
    insight is uncovered, explanatory data visualizations are used to tell a story.”
    (Dykes, 2019) The chart built by Angelica constitutes only the main point of the
    data story. However, to have a complete story, Angelica should have also included
    a background and next steps (figure 5.7). The foundation commission expected Angelica’s
    chart to answer this question: *Why should we fund your project?* Organizing the
    chart as a story would have increased her chances of receiving funding.'
  prefs: []
  type: TYPE_NORMAL
- en: '![figure](../Images/5-7.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.7 The foundation commission expected to see a story with a background,
    a main point, and next steps, inviting them to fund Angelica’s proposal.
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: 'Now, you understand the urgency behind turning data into a story to communicate
    a message to an audience effectively. Next, let’s move to the next step: what
    a data story is and its main components.'
  prefs: []
  type: TYPE_NORMAL
- en: '5.2 Uncovering the narrative: What a data story is'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: According to the *Cambridge Dictionary*, a story is “a description, either true
    or imagined, of a connected series of events.” A story is a way to share information
    or entertainment through a structured, cohesive narrative that engages the audience.
    The goal of a story is always to engage its audience to communicate a message.
  prefs: []
  type: TYPE_NORMAL
- en: 'In his book *Poetics*, the Greek philosopher Aristotle proposed a framework
    to structure a tragedy, also known as the *three-act structure*. The structure
    consists of three main parts: the setup, the confrontation, and the resolution
    (figure 5.8).'
  prefs: []
  type: TYPE_NORMAL
- en: '![figure](../Images/5-8.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.8 The three-act structure proposed by Aristotle to structure a tragedy
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: The setup introduces the audience to the characters, setting, and basic conflict
    of the story. In the confrontation, the main character faces obstacles and struggles
    to overcome them. Finally, in the resolution, the story reaches the point at which
    conflicts are resolved. Aristotle’s tragedy structure is still widely used today
    in literature, film, and other forms of storytelling. Its effectiveness lies in
    its ability to build tension and suspense, leading to a satisfying resolution
    for the audience.
  prefs: []
  type: TYPE_NORMAL
- en: In *Effective Data Storytelling*, Dykes proposes an updated version of the three-act
    tragedy, adapted to the data storytelling scenario (figure 5.9). Dykes calls it
    the *data storytelling arc*.
  prefs: []
  type: TYPE_NORMAL
- en: '![figure](../Images/5-9.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.9 The data storytelling arc proposed by Dykes to structure a data story
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: A data story starts by (a) defining the background behind data and (b) raising
    the audience’s interest. Dykes also proposes including a hook during this initial
    phase. A hook is “a notable observation that acts as a turning point in the story
    and begins to reveal a problem or opportunity” (Dykes, 2019). Then, the data story
    culminates with the main point behind the data by (c) revealing the insight, (d)
    leaving the audience some time to think, and (e) terminating by proposing the
    next steps.
  prefs: []
  type: TYPE_NORMAL
- en: The structure proposed in figure 4.9 might seem abstract and difficult to apply
    when constructing a chart. Using the DIKW pyramid covered in chapter 1, you can
    turn a simple chart into a story.
  prefs: []
  type: TYPE_NORMAL
- en: 5.2.1 Using the DIKW pyramid to streamline a data story
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'In chapter 1, we introduced the data, information, knowledge, wisdom (DIKW)
    pyramid and used it to transform data into wisdom in the practical example of
    an event dedicated to pets. We can generalize the example described in chapter
    2 and use the DIKW to build any data story. Figure 5.10 shows how to map the data
    storytelling arc to the DIKW pyramid:'
  prefs: []
  type: TYPE_NORMAL
- en: Extracting insights from data corresponds to the main point of a data story.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Adding context to the extracted information corresponds to defining the background
    and raising the audience interest.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Adding a call to action corresponds to inviting the audience to think and follow
    the next steps.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![figure](../Images/5-10.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.10 A mapping of the data storytelling arc and the DIKW pyramid
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: It might seem strange to have knowledge before the data. However, here, by *knowledge*,
    we mean of all the elements needed to understand the story and place it in a specific
    context. The described mapping suggests the natural flow when you build a data
    story (figure 5.11). First, identify the main point of your story; then set the
    background; and, finally, set the next steps.
  prefs: []
  type: TYPE_NORMAL
- en: '![figure](../Images/5-11.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.11 The flow to build a data story
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: '5.2.2 DIKW in action: Completing the homelessness tale'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The homelessness example described at the beginning of the chapter stopped at
    the information level of the DIKW pyramid that, in terms of a data story, consisted
    only of the main point. Adding background to the chart involves grabbing your
    audience’s attention and making them interested in the problem you’re describing.
    In chapter 2, you learned that in Altair, you can add textual annotations to a
    chart to transform information into knowledge. In addition, there are other ways
    to add context to a chart, including labels, titles, sources, images, descriptions,
    and comparisons. We’ll describe these in more detail in chapter 6.
  prefs: []
  type: TYPE_NORMAL
- en: In the case of the homeless problem, you can add text describing the situation
    of these people and possibly a photo that gives a face to the people involved.
    We will see how to add a hero to the story in chapter 6\. For now, it’s enough
    to give a face to the people behind the data.
  prefs: []
  type: TYPE_NORMAL
- en: In listing 5.4, we add text describing the context as the chart subtitle. Use
    the `TitleParams()` function to specify the title properties, including the subtitle.
    Set the subtitle to
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: 'Also, add a short description, helping the reader to focus on the data:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: Listing 5.4 Adding the context as the subtitle
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: 'Note  Within the `properties()` method, use the `title` parameter to set the
    chart title. Define the title using the `TitleParams()` function, which can receive
    many parameters as an input. The example passes the following parameters: title
    (`text`), subtitle (`subtitle`), subtitle font size (`subTitleFontSize`), title
    font size (`titleFontSize`).'
  prefs: []
  type: TYPE_NORMAL
- en: 'Listing 5.5 shows how to add two photos to the chart and combine them with
    the original chart to build a dashboard. You must run the code on a web server
    to make it work. If you don’t have a web server, you can run a local and temporary
    web server from the command line, running the following command in the directory
    containing the produced HTML file: `python` `-m` `http.server.` The server should
    listen at port 8000 and serve all the files in the directory from which it is
    started. Point your browser to http://localhost:8000/chart.xhtml to access the
    file chart.xhtml.'
  prefs: []
  type: TYPE_NORMAL
- en: Listing 5.5 Adding the context as images
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: '#1 Build the first image.'
  prefs: []
  type: TYPE_NORMAL
- en: '#2 Build the second image'
  prefs: []
  type: TYPE_NORMAL
- en: Note  Use `mark_image()` to add an image to a chart. Set the path to the image
    file in the DataFrame passed to the chart. Use the `x` and `y` channels to set
    the image position in the chart. Use the same chart to draw `image1` and `image2`
    (`+` operator), and draw the main chart on the right with respect to `image1`
    `+` `image2`.
  prefs: []
  type: TYPE_NORMAL
- en: 'To complete the homelessness story, add a call to action, which includes the
    next steps. In this example, we first modify the title: *Together, Let’s Make
    a Difference: Support Our Project to Help the Homeless!* We’ll see different strategies
    to add a call to action to a chart in chapter 9\. Figure 5.12 shows the resulting
    chart.'
  prefs: []
  type: TYPE_NORMAL
- en: '![figure](../Images/5-12.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.12 The homelessness chart is enriched with a context (images and subtitle).
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: Then, we add a new part to the chart, describing how we will use funds (figure
    5.13). For example, we will use 35% of the funds for shelter and housing, 25%
    for job training, and so on.
  prefs: []
  type: TYPE_NORMAL
- en: '![figure](../Images/5-13.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.13 A possible next step explaining how we will use funds
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: The following listing shows how we implemented the charts in figure 5.13\. We
    assume we have a DataFrame storing the percentage of funds (allocation) for each
    category.
  prefs: []
  type: TYPE_NORMAL
- en: Listing 5.6 Adding a next step
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: '#1 Creates a DataFrame for the current row to use as data for the chart'
  prefs: []
  type: TYPE_NORMAL
- en: '#2 Generates the donut chart using Altair'
  prefs: []
  type: TYPE_NORMAL
- en: '#3 Creates a title for the donut chart'
  prefs: []
  type: TYPE_NORMAL
- en: '#4 Creates a text annotation for the donut chart'
  prefs: []
  type: TYPE_NORMAL
- en: '#5 Sets the size of the donut chart'
  prefs: []
  type: TYPE_NORMAL
- en: '#6 Combines the title, donut chart, and text annotation'
  prefs: []
  type: TYPE_NORMAL
- en: '#7 If it’s the first iteration, assigns the combined chart to donuts'
  prefs: []
  type: TYPE_NORMAL
- en: '#8 If it’s not the first iteration, horizontally concatenates the combined
    chart with the existing donuts'
  prefs: []
  type: TYPE_NORMAL
- en: '#9 Sets the title for the final donuts chart'
  prefs: []
  type: TYPE_NORMAL
- en: Note  Implement each donut chart as a separate chart using `mark_arc()`. For
    each donut, build an ad-hoc DataFrame (`current_ns`) that contains the actual
    allocation value and its complementary value (100 – Actual Allocation Value).
    Then, use different colors to plot the current allocation value and its complementary
    value.
  prefs: []
  type: TYPE_NORMAL
- en: Figure 5.14 shows the resulting chart. If Angelica had submitted the chart in
    figure 5.14 to the commission foundation, she probably would have had more opportunities
    to get funded. Now that you have completed the homelessness tale, let’s describe
    how you can incorporate the power of generative AI in the DIKW pyramid.
  prefs: []
  type: TYPE_NORMAL
- en: '![figure](../Images/5-14.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.14 The final chart for the homeless tale
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: 5.3 Incorporating generative AI into the DIKW pyramid
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Generative AI, as we covered in chapter 4, can help us take things one step
    further by enabling the creation of sophisticated and realistic computer-generated
    content that can revolutionize various industries and domains. Now, armed with
    this knowledge, we can leverage generative AI’s capabilities to augment human
    creativity and automate content generation processes.
  prefs: []
  type: TYPE_NORMAL
- en: 'Figure 5.15 shows where we can incorporate generative AI tools into each step
    of the DIKW pyramid:'
  prefs: []
  type: TYPE_NORMAL
- en: '*Insight extraction* —Use generative algorithms to automate the creation code
    that builds the chart.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*Context adding* —Use text generation to transform basic texts into more engaging
    ones for the audience. Add images, voice, and videos generated by AI to give the
    audience additional context.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*Call to action* —Use text generation to suggest new ideas and engaging text.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![figure](../Images/5-15.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.15 Where we can incorporate generative AI tools into the DIKW pyramid
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: 'It’s important to note that the examples listed are just a few of the ways
    that you can incorporate generative AI into the DIKW pyramid. There are countless
    other ways in which you can take advantage of these tools, such as synthesizing
    large amounts of data, developing personalized, predictive models, and constructing
    personalized recommendations based on data. However, in this book, we will focus
    specifically on the techniques for integrating generative AI into the DIKW pyramid,
    as it can assist in building a data story. Anyway, I encourage you to think outside
    the box and explore new and innovative ways to apply generative AI in your work.
    With so much potential waiting to be unlocked, the possibilities are truly endless!
    Now that you have learned how to incorporate generative AI tools into the DIKW
    pyramid, let’s apply this strategy to our case study: the homelessness tale.'
  prefs: []
  type: TYPE_NORMAL
- en: '5.4 Behind the scenes: The homelessness tale'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In the previous chapters, you saw how to use GitHub Copilot to generate the
    code to build the chart. Now, it’s time to go a step further.
  prefs: []
  type: TYPE_NORMAL
- en: Consider the homelessness tale again, specifically figure 5.12\. The figure
    contains a title, defining the call to action; a subtitle, setting the context;
    and two photos, adding to the context. While you may have thought that we came
    up with the title and created or downloaded the images, in reality, it was ChatGPT
    and DALL-E that worked together to generate the content! Let’s see how we used
    ChatGPT to generate the subtitle and DALL-E to generate the photos. In the next
    chapters, we will see how to use more deeply generative AI tools for data storytelling.
  prefs: []
  type: TYPE_NORMAL
- en: 5.4.1 Creating a compelling subtitle
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: We started a conversation with ChatGPT to extract a possible context that describes
    the situation where homeless individuals live. The context should be a short and
    engaging sentence. Figure 5.16 shows the steps involved in the conversation. *Q*
    refers to user questions (which will form the basis of our prompts), and *A* refers
    to ChatGPT’s answers. You can read the complete conversation in 05/genAI/SubtitleConversation.txt.
  prefs: []
  type: TYPE_NORMAL
- en: '![figure](../Images/5-16.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.16 The steps to generate the text used for context
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: 'ChatGPT generated the text after four steps. We used the following strategy
    to make ChatGPT generate the desired text:'
  prefs: []
  type: TYPE_NORMAL
- en: '*Describe* —Ask ChatGPT to describe your problem in general. In this case,
    ask ChatGPT to describe the homelessness condition in general. As an answer, ChatGPT
    generates a long passage of text.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '*Shorten* —Ask ChatGPT to write a summary of the generated text.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '*Transform* —Ask ChatGPT to make the summary more engaging for the audience.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '*Shorten* —If the text is still long, ask ChatGPT to reduce it.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Without realizing it, we applied the DIKW model to the use of ChatGPT. Starting
    from a long passage of text (data), we extracted the information (summary), and
    then converted it into knowledge and wisdom (engaging text). In other words, when
    you talk to ChatGPT to generate context, organize the conversation as a story
    (figure 5.17).
  prefs: []
  type: TYPE_NORMAL
- en: '![figure](../Images/5-17.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.17 The mapping between the data story structure and the ChatGPT conversation
    to generate context
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: You can generalize the described procedure to generate a variety of possible
    subtitles and then choose the one that fits your needs. Additionally, you can
    add specific keywords that can help appeal to your target audience and increase
    the visibility of your text. We’ll see how to add keywords to the ChatGPT conversation
    in chapter 6\.
  prefs: []
  type: TYPE_NORMAL
- en: 5.4.2 Generating images
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Adding one or more images or photos to your chart helps give a face to the topic
    of your chart. However, images are often subjected to copyright, which means using
    them without permission from the owner can lead to legal consequences. We can
    use DALL-E and other AI tools for images to create unique and original images
    that are free from copyright restrictions.
  prefs: []
  type: TYPE_NORMAL
- en: 'In the chart about homelessness, we have added two photos representing homeless
    individuals. We have generated them using the following simple prompt to DALL-E:
    *a photo of a homeless individual*. DALL-E has generated four images, and we have
    chosen two (figure 5.18). In chapter 6, we will see more advanced techniques to
    generate images.'
  prefs: []
  type: TYPE_NORMAL
- en: '![figure](../Images/5-18.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.18 The photos generated by DALL-E when prompted with a photo of a homeless
    individual
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: Now that you have learned how to use generative AI tools to transform your raw
    data visualization chart into a data story, let’s look at another example, to
    consolidate the concepts.
  prefs: []
  type: TYPE_NORMAL
- en: '5.5 Another example: Fake news'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Imagine that LatestNews is an important website that publishes news from different
    contributors. At a given point, the editor-in-chief receives some complaints from
    different readers because they read a high percentage of fake news. The editor-in-chief
    contacts you to analyze the amount of fake news on the LatestNews website and
    advises the website editors to pay attention to the categories of news that have
    the highest probability of being fake. You already have collected data, and you
    have the dataset shown in table 5.2.
  prefs: []
  type: TYPE_NORMAL
- en: Table 5.2 An extract of the dataset of the example
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: '| Category | Number of Fake Articles | Number of Articles |'
  prefs: []
  type: TYPE_TB
- en: '| --- | --- | --- |'
  prefs: []
  type: TYPE_TB
- en: '| Politics  | 1,235  | 1,300  |'
  prefs: []
  type: TYPE_TB
- en: '| Economy  | 1,456  | 1,678  |'
  prefs: []
  type: TYPE_TB
- en: '| Justice  | 300  | 570  |'
  prefs: []
  type: TYPE_TB
- en: '| Religion  | 30  | 100  |'
  prefs: []
  type: TYPE_TB
- en: The dataset shows the number of fake news stories and the total number of articles
    for each news category. You start by drawing a preliminary chart, paying attention
    to the percentage of fake articles for each category. Figure 5.19 shows the preliminary
    chart, and listing 5.7 shows the associated code. You can also find the code in
    the GitHub repository for the book under CaseStudies/fake-news/raw-chart.py.
  prefs: []
  type: TYPE_NORMAL
- en: '![figure](../Images/5-19.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.19 The raw chart showing the number of fake articles by category
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: Listing 5.7 Building the raw chart
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: '#1 Uses Copilot comments to speed up the chart generation process'
  prefs: []
  type: TYPE_NORMAL
- en: '#2 Uses configure_axis() to configure the axes’ general properties'
  prefs: []
  type: TYPE_NORMAL
- en: '#3 Removes the grid completely'
  prefs: []
  type: TYPE_NORMAL
- en: Note  Use `transform_calculate()` to dynamically add a new column to the DataFrame.
    This method receives the new column name as the first parameter (Percentage of
    Fake Articles, in the example) and the expression to calculate the new column
    as the second parameter.
  prefs: []
  type: TYPE_NORMAL
- en: 'In the remainder of the section, we will apply the DIKW pyramid to transform
    the chart into a data story. Let’s start with the first step: turning data into
    information.'
  prefs: []
  type: TYPE_NORMAL
- en: 5.5.1 From data to information
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Turning data into information means extracting some insights from data, an insight
    that is significant and helps your audience of editors understand which kind of
    news has the highest probability of being fake. Let’s try the rotation strategy.
    This strategy, originally described by Berengueres in his previously quoted book,
    involves rotating the chart to obtain a pyramid and searching for some pyramid
    framework, such as moral, economic, and other similar frameworks. Figure 5.20
    shows the rotation process.
  prefs: []
  type: TYPE_NORMAL
- en: '![figure](../Images/5-20.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.20 The rotation process of the chart in figure 5.19
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: Next, we can flip the chart horizontally and obtain the chart in figure 5.21,
    with corrected labels. You can also rewrite the Altair code directly to draw a
    column chart instead of a bar chart (the code is in the GitHub repository under
    CaseStudies/fake-news/bar-chart.py). We have preferred to show the rotation process
    instead of drawing the chart directly, to show how the rotation strategy works.
  prefs: []
  type: TYPE_NORMAL
- en: '![figure](../Images/5-21.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.21 The rotation process, flipping the chart in figure 5.19 horizontally
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: If you look at labels carefully, you may notice that at the bottom of the pyramid,
    there are categories related to material life (from Education to Business). In
    the middle of the pyramid, there are categories related to moral life (from Human
    Rights to Ethics). At the top of the pyramid, there are categories related to
    spiritual life (from Mysticism to Philosophy). This means that most fake news
    relates to material life (more than 70%) and moral life (more than 30% of fake
    news but less than 60%). You can highlight the model material–moral–spiritual
    life using different colors in the chart based on the different macro categories
    the news belongs to.
  prefs: []
  type: TYPE_NORMAL
- en: First, use Copilot to generate the list of macro categories, as shown in listing
    5.8 and in the GitHub repository for the book under CaseStudies/fake-news/story-chart.py.
    The listing shows only how to generate the material life macro category, but you
    can apply the same strategy also for the other macro categories.
  prefs: []
  type: TYPE_NORMAL
- en: Listing 5.8 Using Copilot to generate a list
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: '#1 The output produced by Copilot'
  prefs: []
  type: TYPE_NORMAL
- en: Note  Describe the elements to include in the list.
  prefs: []
  type: TYPE_NORMAL
- en: Now, ask Copilot to generate the code to add a new column to the DataFrame,
    containing the macro category. The following listing shows the instructions for
    Copilot.
  prefs: []
  type: TYPE_NORMAL
- en: Listing 5.9 Using Copilot to add a new column to a DataFrame
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
- en: '#1 The output produced by Copilot'
  prefs: []
  type: TYPE_NORMAL
- en: Note  Describe how to build the new category of the DataFrame.
  prefs: []
  type: TYPE_NORMAL
- en: Next, use the new column Macro Category to set the color of the bars in the
    chart.
  prefs: []
  type: TYPE_NORMAL
- en: Listing 5.10 Using the new column for the bars’ colors
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: Note  Add the color channel to set the color of the bars.
  prefs: []
  type: TYPE_NORMAL
- en: Figure 5.22 shows the resulting chart. We have used two tonalities of red to
    highlight the urgency of paying attention to material and moral life.
  prefs: []
  type: TYPE_NORMAL
- en: '![figure](../Images/5-22.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.22 The chart of figure 5.21 with macro categories highlighted
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: 'We could improve the chart by simplifying it, for example, by grouping categories.
    However, our audience comprises experts (editors), who need very detailed information
    because they must know precisely which categories they must analyze more deeply.
    For this reason, we keep the chart very detailed. We have removed the legend from
    the chart because we want to replace it with some images, which also act as the
    context for our story. Let’s see how to add these images in the next step: turning
    information into knowledge.'
  prefs: []
  type: TYPE_NORMAL
- en: 5.5.2 From information to knowledge
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'The idea is to add an image for each macro category, more specifically, an
    icon. We can use DALL-E to generate the three images. Use the following prompt
    to generate the spiritual life icon: a black-and-white icon with praying hands.
    DALL-E will generate four images, such as those shown in figure 5.23.'
  prefs: []
  type: TYPE_NORMAL
- en: '![figure](../Images/5-23.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.23 The images generated by DALL-E related to the spiritual life
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: 'Similarly, you can generate icons related to the other categories. We have
    used the following prompts:'
  prefs: []
  type: TYPE_NORMAL
- en: '*A black and white icon with a balance symbol of moral life*'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*A black and white icon with a circle representing the world*'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'If you don’t have any ideas on how to generate an image, you can use ChatGPT
    to get some ideas. For example, you can write the following prompt in ChatGPT:
    *How would you represent material life through an icon?* Among the other suggestions,
    ChatGPT suggests the following: *A circle to represent the world or universe,
    with various smaller icons or symbols placed within it to represent different
    facets of material life.*'
  prefs: []
  type: TYPE_NORMAL
- en: Once you have generated the images, you can incorporate them into the chart.
    The following listing describes how to add the spiritual life image. You can adopt
    the same strategy also for the other images. Also, remember to load the generated
    HTML chart in a web server.
  prefs: []
  type: TYPE_NORMAL
- en: Listing 5.11 Adding an icon to the chart
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs: []
  type: TYPE_PRE
- en: '#1 Add an image to the chart.'
  prefs: []
  type: TYPE_NORMAL
- en: Note  Calibrate the x and y positions manually, based on how the chart appears.
  prefs: []
  type: TYPE_NORMAL
- en: Near the icon, add a text describing the macro category.
  prefs: []
  type: TYPE_NORMAL
- en: Listing 5.12 Adding text to the chart
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: '[PRE13]'
  prefs: []
  type: TYPE_PRE
- en: Note  Calibrate the x and y positions manually, based on how the chart appears.
  prefs: []
  type: TYPE_NORMAL
- en: Finally, combine all the charts.
  prefs: []
  type: TYPE_NORMAL
- en: Listing 5.13 Combining the images, texts, and chart
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: '[PRE14]'
  prefs: []
  type: TYPE_PRE
- en: Note  Use the + operator to combine all the elements of the chart
  prefs: []
  type: TYPE_NORMAL
- en: Figure 5.24 shows the resulting chart. The icons and the text act as the legend.
    In addition, they are the characters of our story.
  prefs: []
  type: TYPE_NORMAL
- en: '![figure](../Images/5-24.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.24 Adding the images related to spiritual life, moral life, and material
    life to the chart
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: 'The next step involves adding a textual background to our chart and setting
    the context. We can add it as the subtitle of our chart. Let’s use ChatGPT to
    generate some ideas. Write the following prompt:'
  prefs: []
  type: TYPE_NORMAL
- en: '*Act as a storyteller. Describe the context of a visual chart showing that
    the highest number of fake news on the LatestNews website is related to material
    life, followed by moral life and finally by spiritual life. Use max 150 characters.*'
  prefs: []
  type: TYPE_NORMAL
- en: 'We have specified three main elements:'
  prefs: []
  type: TYPE_NORMAL
- en: The ChatGPT role (we’ll see this in the next chapter in more detail)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The scenario
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The maximum number of characters to use
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'ChatGPT may produce the following output: *In the intriguing chart, depicting
    fake news trends on the LatestNews website, material life claims the most prominent
    slice, trailed by moral life, and lastly, spiritual life.* We can use it as it
    is, we can modify it, or we can even ask for a new subtitle. In our case, we’ll
    use this output as the context of our chart.'
  prefs: []
  type: TYPE_NORMAL
- en: Let’s add this to our chart, by simply setting the subtitle in the chart properties.
  prefs: []
  type: TYPE_NORMAL
- en: Listing 5.14 Adding a subtitle to the chart
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: '[PRE15]'
  prefs: []
  type: TYPE_PRE
- en: Note  Use `TitleParams()` to specify the title and subtitle parameters.
  prefs: []
  type: TYPE_NORMAL
- en: 'Now that we have turned information into knowledge, let’s proceed with the
    last step: turning knowledge into wisdom.'
  prefs: []
  type: TYPE_NORMAL
- en: 5.5.3 From knowledge to wisdom
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'Wisdom involves adding a call to action to the story. In our case, we can simply
    say to the audience to pay attention to material and moral news because they have
    a high percentage of fake news. Let’s use ChatGPT to generate an engaging title.
    Use the following prompt: *Transform the following text into an engaging title:
    pay attention to material and moral news because they have a high percentage of
    fake news. Generate 5 titles.* Figure 5.25 shows a possible output generated by
    ChatGPT.'
  prefs: []
  type: TYPE_NORMAL
- en: '![figure](../Images/5-25.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.25 A possible output generated by ChatGPT
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: 'The generated titles do not contain a call to action. To add it, let’s improve
    the title by writing the following new prompt for ChatGPT in the same chat: *Transform
    the titles into a call to action that invites the audience to pay attention to
    news related to material and moral life*. Figure 5.26 shows a possible output
    produced by ChatGPT.'
  prefs: []
  type: TYPE_NORMAL
- en: '![figure](../Images/5-26.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.26 A possible output generated by ChatGPT when asked to add a call
    to action
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: 'As an example, select the third title, *Your Truth Guardian: Take a Stand Against
    Fake News in Material and Moral Narratives*, and add it to the chart, simply setting
    the text parameter, as shown in the following listing. Figure 5.27 shows the final
    chart.'
  prefs: []
  type: TYPE_NORMAL
- en: Listing 5.15 Adding a title to the chart
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: '[PRE16]'
  prefs: []
  type: TYPE_PRE
- en: '![figure](../Images/5-27.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.27 The final chart
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: Note  Use the `text` parameter to add a title to the chart.
  prefs: []
  type: TYPE_NORMAL
- en: In this chapter, you have learned the main concepts of building a data story
    using the DIKW pyramid and how to incorporate generative AI tools in the flow.
    We’ve had a high-level overview of implementing the DIKW pyramid as part of our
    data story as well as incorporating generative AI tools to enhance things further.
    In the next few chapters, we will look at traversing the DIKW pyramid in greater
    detail, starting by moving from *data* to *information*.
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: A *story* is a narrative that engages its audience to communicate a message
    and move them to action.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The *data storytelling arc* identifies five moments in a story: background,
    raising interest, main point, audience thinking, and next steps.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Use the DIKW pyramid to implement the data storytelling arc practically.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Use generative AI to assist you when scaling the DIKW pyramid, using prompts
    to produce what you want (text or images).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: References
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Dykes, B. (2019). *Effective Data Storytelling: How to Drive Change with Data,
    Narrative and Visuals*. John Wiley & Sons.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Cambridge Dictionary. (n.d.). *Story*. [https://dictionary.cambridge.org/dictionary/english/story](https://dictionary.cambridge.org/dictionary/english/story).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
