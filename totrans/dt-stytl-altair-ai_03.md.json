["```py\n{\n  \"$schema\": \"https://vega.github.io/schema/vega/v5.json\",\n  \"description\": \"A basic example in Vega\",\n  \"width\": 600,\n  \"height\": 400,\n\n  \"data\": [],\n  \"scales\": [],\n  \"axes\": [],\n  \"marks\": [],\n  \"signals\": []\n}\n```", "```py\n\"data\": [\n    {\n      \"name\": \"myData\",\n      \"values\": [\n        {\"x\": 10, \"y\": 20},\n        {\"x\": 40, \"y\": 60},\n        {\"x\": 70, \"y\": 40},\n        {\"x\": 90, \"y\": 80},\n      ]\n    }\n  ],\n```", "```py\n\"scales\": [\n    {\n      \"name\": \"xScale\",\n      \"type\": \"linear\",\n      \"domain\": {\"data\": \"myData\", \"field\": \"x\"},\n      \"range\": \"width\"\n    },\n    {\n      \"name\": \"yScale\",\n      \"type\": \"linear\",\n      \"domain\": {\"data\": \"myData\", \"field\": \"y\"},\n      \"range\": \"height\"\n    }\n  ],\n```", "```py\n\"axes\": [\n    { \"orient\": \"bottom\", \"scale\": \"xScale\" },\n    { \"orient\": \"left\", \"scale\": \"yScale\" }\n]\n```", "```py\n\"marks\": [\n    {\n      \"type\": \"line\",\n      \"from\": {\"data\": \"myData\"},\n      \"encode\": {\n        \"enter\": {\n          \"x\": {\"scale\": \"xScale\", \"field\": \"x\"},\n          \"y\": {\"scale\": \"yScale\", \"field\": \"y\"},\n          \"stroke\": {\"value\": \"red\"}\n        }\n      }\n    }\n  ],\n```", "```py\n\"signals\": [{\n     \"name\": \"changeColor\",\n     \"on\": [\n        {\"events\": \"mouseover\", \"update\": \"datum\"},\n        {\"events\": \"mouseout\", \"update\": \"null\"}\n      ]\n}]\n```", "```py\n\"marks\": [{\n      \"encode\": {\n        \"enter\": {\n           ...\n       },\n        \"update\": {\n          \"stroke\": {\n              \"signal\": \"changeColor === datum ? 'red' : 'blue'\" \n              }\n          }\n        }\n      }],\n```", "```py\n\"data\": {\n      \"values\": [\n        {\"x\": 10, \"y\": 20},\n        {\"x\": 40, \"y\": 60},\n        {\"x\": 70, \"y\": 40},\n        {\"x\": 90, \"y\": 80}\n      ]\n    },\n```", "```py\n\"encoding\": {\n      \"x\": {\"field\": \"X\", \"type\": \"quantitative\"},\n      \"y\": {\"field\": \"Y\", \"type\": \"quantitative\"}\n    },\n```", "```py\n\"mark\": {\"type\": \"line\"},\n```", "```py\n\"layer\": [\n   {\"mark\": {\"type\": \"line\", }},\n   {\"mark\": {\"type\": \"point\", \"shape\": \"circle\", \"size\": 100}}\n]\n```", "```py\n\"params\": [\n      {\n        \"name\": \"changeColor\",\n        \"select\": {\"type\": \"point\", \"on\": \"mouseover\"}\n      },\n      {\n        \"name\" : \"default\",\n        \"select\": {\"type\": \"point\", \"on\": \"mouseout\"}\n\n      }\n    ],\n```", "```py\n\"stroke\": {\n            \"condition\": [\n            {\n                \"param\": \"changeColor\",\n                \"empty\": false,\n                \"value\": \"red\"\n            },\n            {\n                \"param\": \"default\",\n                \"empty\": false,\n                \"value\": \"blue\"\n            }\n            ],\n            \"value\" : \"blue\"\n        }\n```", "```py\n<!DOCTYPE html>\n<html>\n  <head>          #1\n    <script src=\"https://cdn.jsdelivr.net/npm/vega@5.22.1\"></script>\n    <script src=\"https://cdn.jsdelivr.net/npm/vega-lite@5.6.0\"></script>\n    <script src=\"https://cdn.jsdelivr.net/npm/vega-embed@6.21.0\"></script>\n  </head>\n  <body>\n    <div id=\"vis\"></div>             #2\n    <script type=\"text/javascript\">            #3\n      var request = new XMLHttpRequest();\n      request.open(‘GET’, ‘/path/to/json/file’, false);\n      request.send(null)\n      var data = JSON.parse(request.responseText);\n      vegaEmbed('#vis', data);\n    </script>\n  </body>\n</html>\n```", "```py\nimport altair as alt\nimport pandas as pd\n\ndf = pd.DataFrame(\n    {\"Country\": [\"Japan\", \"USA\", \"Germany\", \"Spain\", \"France\", \"Italy\"], \n     \"Medals\": [4, 6, 10, 3, 7, 8], \n     \"Region\":[\"Asia\",\"Americas\",\"Europe\",\"Europe\",\"Europe\",\"Europe\"]}) \n\nchart = alt.Chart(df).mark_bar().encode(\n    x='Medals',\n    y='Country',\n    color=alt.condition(\n        alt.datum.Region == 'Europe',\n        alt.value('red'),      #1\n        alt.value('blue')      #2\n    )\n)\n\nchart.save('chart.xhtml')\n```", "```py\nbase = alt.Chart(df\n).encode(\n    x='Country',\n    y='Medals'\n).properties(\n    width=300\n)\n\nchart1 = base.mark_bar(\n    color='#636466'\n).properties(\n    title='A bar chart'\n) \n\nchart2 = base.mark_line(\n    color='#80C11E'\n).properties(\n    title='A line chart'\n)\n```", "```py\nimport pandas as pd\nimport altair as alt\n\ndf = pd.DataFrame({\n'X' : [1,2,3,4],\n'Y' : [2,4,5,6],\n'Z' : [3,4,5,6],\n'H' : [5,6,8,9],\n'M' : [3,4,5,3],\n'Country' : ['USA', 'EU', 'EU', 'USA']\n})\n\nfields = df.columns.tolist()\nfields.remove('Country')\n\nchart = alt.Chart(df).mark_circle(color='#80C11E').encode(\n    alt.X(alt.repeat(\"column\"), type='quantitative'),\n    alt.Y(alt.repeat(\"row\"), type='quantitative')\n).properties(\n    width=100,\n    height=100\n).repeat(\n    row=fields,\n    column=fields\n)\n\nchart.save('repeat.xhtml')\n```", "```py\nimport altair as alt\nimport pandas as pd\n\ndf = pd.DataFrame(\n    {\"Country\": [\"Japan\", \"USA\", \"Germany\", \"Spain\", \"France\", \"Italy\"], \n     \"Medals\": [4, 6, 10, 3, 7, 8], \n     \"Region\":[\"Asia\",\"Americas\",\"Europe\",\"Europe\",\"Europe\",\"Europe\"]}) \n\nchart = alt.Chart(df).mark_bar(color='#636466').encode(\n    x='Country',\n    y='Medals',\n    tooltip=['Country', 'Medals', 'Region']\n).properties(\n    width=300, \n    title='A bar chart'\n).interactive()\n\nchart.save('interactive.xhtml')\n```", "```py\nimport pandas as pd\nimport altair as alt\n\ndf = pd.DataFrame(\n    {\"Country\": [\"Japan\", \"USA\", \"Germany\", \"Spain\", \"France\", \"Italy\"], \n     \"Medals\": [4, 6, 10, 3, 7, 8], \n     \"Region\":[\"Asia\",\"Americas\",\"Europe\",\"Europe\",\"Europe\",\"Europe\"]}) \n\nchart = alt.Chart(df).mark_bar(color='#636466').encode(\n    x='Country',\n    y='Medals'\n).properties(width=300, title='A bar chart')\n\nchart.save('chart.xhtml')\n```", "```py\nchart = chart.configure_axis(\n    labelAngle=0,         #1\n    titleFontSize=14,      #2\n    labelFontSize=12    #3\n)\n\nchart.save('configure-axis.xhtml')\n```", "```py\nchart = chart.configure_title(\n    fontSize=20,             #1\n    color='#80C11E',     #2\n    offset=30,         #3\n    anchor='start'     #4\n)\n\nchart.save('configure-title.xhtml')\n```", "```py\nchart = chart.configure_view(\n    strokeWidth=0,           #1\n    stroke='#80C11E',    #2\n    fill='#E0E0E0'    #3\n)\n\nchart.save('configure-view.xhtml')\n```", "```py\nimport pandas as pd\nimport altair as alt\nalt.data_transformers.disable_max_rows()    #1\n\ndf = pd.read_csv('data/population.csv')\ndf = df.melt(id_vars='Country Name',       #2\n             var_name='Year', \n             value_name='Population')\ndf['Year'] = df['Year'].astype('int')     \n\nchart = alt.Chart(df).mark_line().encode(\n    x = 'Year:Q',\n    y = 'Population:Q',\n    color = 'Country Name:N'\n)               #3\n\nchart\n```", "```py\ncontinents = ['Africa Eastern and Southern',\n             'Africa Western and Central',\n             'Middle East & North Africa',\n             'Sub-Saharan Africa',\n             'Europe & Central Asia',\n             'Latin America & Caribbean',\n             'North America',\n             'Pacific island small states',\n             'East Asia & Pacific']       #1\n\ndf = df[df['Country Name'].isin(continents)]   #2\n\nchart = alt.Chart(df).mark_line().encode(\n    x = 'Year:Q',\n    y = 'Population:Q',\n    color = 'Country Name:N'\n)         #3\n\nchart\n```", "```py\nmask = df['Country Name'].isin(['North America'])                 #1\ndf_mean = df[~mask].groupby(by='Year').mean().reset_index()    #2\n\ndf_grouped = pd.DataFrame({ \n    'Year' : df[mask]['Year'].values,\n    'North America' : df[mask]['Population'].values, \n    'World': df_mean['Population'].values\n})    #3\n\ndf_melt = df_grouped.melt(id_vars='Year', var_name='Continent', value_name='Population')\n```", "```py\ncolors=['#80C11E', 'grey']\n\nchart = alt.Chart(df_melt).mark_line().encode(\n    x = alt.X('Year:Q',\n              title=None, \n              axis=alt.Axis(format='.0f',tickMinStep=10)),   #1\n    y = alt.Y('Population:Q', \n              title='Difference of population from 1960',\n              axis=alt.Axis(format='.2s')),    #2\n    color = alt.Color('Continent:N', \n                      scale=alt.Scale(range=colors),       #3\n                      legend=None),    #4\n    opacity = alt.condition(alt.datum['Continent'] == 'North America', alt.value(1), alt.value(0.3))\n).properties(\n    title='Population in the North America over the last 50 years',\n    width=400,\n    height=250\n).configure_axis(\n    grid=False,           #5\n    titleFontSize=14,\n    labelFontSize=12\n).configure_title(\n    fontSize=16,\n    color='#80C11E'\n).configure_view(\n    strokeWidth=0\n)\n\nchart\n```", "```py\nbaseline = df_melt[df_melt['Year'] == 1960]\n\ncontinents = ['North America', 'World']\nfor continent in continents:\n    baseline_value = baseline[baseline['Continent'] == continent]['Population'].values[0]\n    m = df_melt['Continent'] == continent\n    df_melt.loc[m, 'Diff'] = df_melt.loc[m,'Population'] - baseline_value\n```", "```py\nmask = df_melt['Year'] == 2021\nna = df_melt[mask]['Diff'].values[0]\noth = df_melt[mask]['Diff'].values[1]\n\ndf_text = pd.DataFrame({'text' : ['Rest of the world','North America'],\n       'x' : [2023,2023],   #1\n       'y' : [oth,na]})     #2\n\ntext = alt.Chart(df_text).mark_text(fontSize=14, align='left').encode(\n    x = 'x',\n    y = 'y',\n    text = 'text',\n    color = alt.condition(alt.datum.text == 'North America', alt.value('#80C11E'), alt.value('grey'))\n)\n```", "```py\ntotal = (chart + text).configure_axis(\n    grid=False,\n    titleFontSize=14,\n    labelFontSize=12\n).configure_title(\n    fontSize=16,\n    color='#80C11E'\n).configure_view(\n    strokeWidth=0\n)\n\ntotal\n```", "```py\noffset = 10000000                            #1\nmask = df_melt['Year'] == 2021\nna = df_melt[mask]['Diff'].values[0]     #2\noth = df_melt[mask]['Diff'].values[1]     #3\n\ndf_vline = pd.DataFrame({'y' : [oth - offset,na + offset], \n                         'x' : [2021,2021]})\n\nline = alt.Chart(df_vline).mark_line(color='black').encode(\n    y = 'y',\n    x = 'x'\n)     #4\n\ndf_ann = pd.DataFrame({'text' : ['367M'],\n       'x' : [2022],\n       'y' : [na + (oth-na)/2]})     #5\n\nann = alt.Chart(df_ann).mark_text(fontSize=30, align='left').encode(\n    x = 'x',\n    y = 'y',\n    text = 'text'\n)                  #6\n\ntotal = chart + text + line + ann     #7\ntotal = total.configure_axis(\n    grid=False,\n    titleFontSize=14,\n    labelFontSize=12\n).configure_title(\n    fontSize=16,\n    color='#80C11E'\n).configure_view(\n    strokeWidth=0\n)\n\ntotal\n```", "```py\ndf_subtitle= pd.DataFrame({'text' : ['source: World Bank'], \n                            'href' : ' https://data.worldbank.org/indicator/SP.POP.TOTL' })\n\nsubtitle = alt.Chart(df_subtitle\n                    ).mark_text(\n                        y=0\n                    ).encode(\n                        text='text',\n                        href='href'\n                    )\n```", "```py\ndf_context = pd.DataFrame({'text' : ['Why this gap?',\n                            '1\\. Lower Fertility Rate', \n                            '2\\. Lower Immigration Rate', \n                            '3\\. Higher Average Age'],\n                           'y': [0,1,2,3]})\n\ncontext = alt.Chart(df_context).mark_text(fontSize=14, align='left', dy=50).encode(\n    y = alt.Y('y:O', axis=None),\n    text = 'text',\n    stroke = alt.condition(alt.datum.y == 0, alt.value('#80C11E'), alt.value('black')),\n    strokeWidth = alt.condition(alt.datum.y == 0, alt.value(1), alt.value(0))\n)\n\ntotal = (context | (chart + text + line + ann + subtitle)).configure_axis(\n    grid=False,\n    titleFontSize=14,\n    labelFontSize=12\n).configure_title(\n    fontSize=16,\n    color='#80C11E'\n).configure_view(\n    strokeWidth=0\n)\n\ntotal.show()\n```", "```py\ndf_cta = pd.DataFrame({\n    'Strategy': ['Immigration Development', 'Enhance Family-Friendly Policies', 'Revitalize Rural Areas'],\n    'Population Increase': [20, 30, 15]  # Sample population increase percentages\n})\n\ncta = alt.Chart(df_cta).mark_bar(color='#80C11E').encode(\n    x='Population Increase:Q',\n    y=alt.Y('Strategy:N', sort='-x', title=None),\n    tooltip=['Strategy', 'Population Increase']\n).properties(\n    title='Strategies for population growth in North America',\n)\n\ntotal = alt.vconcat((context | (chart + text + line + ann)), cta,center=True).configure_axis(\n    grid=False,\n    titleFontSize=14,\n    labelFontSize=12\n).configure_title(\n    fontSize=20,\n    color='#80C11E',\n    offset=10\n).configure_view(\n    strokeWidth=0\n).configure_concat(\n    spacing=50\n)\n\ntotal.show()\n```"]