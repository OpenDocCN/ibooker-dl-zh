- en: Chapter 4\. Deploying to Test Environments
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第4章\. 部署到测试环境
- en: 'In [Chapter 3](ch03.html#chapter_3_the_build_and_pre_deployment_testing_steps_of_cont_1749354010266208),
    we explored the fundamentals of continuous integration, focusing on early steps
    in a CI/CD pipeline: mainly, building and pre-deployment testing. We walked through
    an example pipeline triggered when a PR is opened, as shown in [Figure 4-1](#chapter_4_figure_1_1749354010437513).'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第3章](ch03.html#chapter_3_the_build_and_pre_deployment_testing_steps_of_cont_1749354010266208)中，我们探讨了持续集成的原理，重点关注CI/CD管道的早期步骤：主要是构建和预部署测试。我们通过一个示例管道进行了说明，该管道在打开PR时触发，如图[图4-1](#chapter_4_figure_1_1749354010437513)所示。
- en: '![](assets/ansd_0401.png)'
  id: totrans-2
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/ansd_0401.png)'
- en: Figure 4-1\. A CI pipeline
  id: totrans-3
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图4-1\. CI管道
- en: This pipeline built and packaged the code, conducted static code analysis, and
    executed early, fast tests including unit and lightweight integration tests, providing
    build and test feedback to the PR. These steps ensure that the code in the pull
    request is merge-ready, providing confidence that the merged code would function
    as intended and would not introduce any regressions. Assuming that the code changes
    in the PR prove ready, the developer can merge the PR.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 此管道构建和打包了代码，进行了静态代码分析，并执行了早期快速测试，包括单元和轻量级集成测试，为PR提供构建和测试反馈。这些步骤确保了PR中的代码是可合并的，提供了信心，即合并的代码将按预期运行，不会引入任何回归。假设PR中的代码更改已证明就绪，开发者可以合并PR。
- en: With our new code merged, the next step is getting ready for production by deploying
    into test environments and then running a battery of tests. AI and ML tools are
    being integrated into the deployment process. These tools help teams make better
    deployment decisions, identify potential issues proactively, and streamline the
    verification process. Rather than adding complexity, well-implemented AI actually
    reduces the cognitive load on developers while improving deployment reliability.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 在将新代码合并后，下一步是准备生产，通过部署到测试环境并运行一系列测试。人工智能和机器学习工具正在集成到部署过程中。这些工具帮助团队做出更好的部署决策，主动识别潜在问题，并简化验证过程。实施良好的AI实际上减少了开发者的认知负荷，同时提高了部署的可靠性。
- en: Between the CI steps and the production release, we are primarily focused on
    testing. We want to learn if the release is ready for our users. If it is safe
    to release, we want to get it to our users quickly, to enhance the user experience
    and potentially drive increased customer engagement and loyalty. If our software
    has a problem, we need to detect and address it quickly. That dynamic is a barrier
    to releasing valuable updates, and the longer the time between the introduction
    of the defect and when it is brought back to the development team, the less likely
    the work will be fresh in the mind of the developers involved. They will have
    to spend more time and effort familiarizing themselves with those sections of
    code, making the remediation more expensive. If a developer is already deep into
    their next task, that task may be interrupted and become more expensive to complete
    as well.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 在CI步骤和生产发布之间，我们主要关注测试。我们想了解发布是否适合我们的用户。如果发布是安全的，我们希望快速将其提供给用户，以增强用户体验，并可能推动客户参与度和忠诚度的提升。如果我们的软件存在问题，我们需要快速检测并解决它。这种动态是发布有价值更新的障碍，缺陷引入和将其反馈给开发团队之间的时间越长，涉及的开发者对工作的记忆就越不清晰。他们需要花费更多的时间和精力熟悉这些代码部分，使得修复成本更高。如果一个开发者已经深入到他们的下一个任务中，那么这个任务可能会被打断，完成成本也会更高。
- en: When the release is ready, we will deploy the release into one or more environments
    where we can test against running code. It is in these pre-production environments
    that we bridge the gap between development and real-world usage, ensuring our
    software not only functions correctly but is ready for real-world scenarios.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 当发布准备就绪时，我们将发布版本部署到一或多个环境中，以便我们可以对运行中的代码进行测试。在这些预生产环境中，我们弥合了开发和实际使用之间的差距，确保我们的软件不仅功能正确，而且为实际场景做好了准备。
- en: '[Figure 4-2](#chapter_4_figure_2_1749354010437547) gives a high-level depiction
    of our entire delivery process. Increasingly, AI is being embedded throughout
    this pipeline to strengthen testing and deployment decisions.'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '[图4-2](#chapter_4_figure_2_1749354010437547)展示了我们整个交付过程的高级概述。越来越多地，人工智能被嵌入到整个管道中，以加强测试和部署决策。'
- en: '![](assets/ansd_0402.png)'
  id: totrans-9
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/ansd_0402.png)'
- en: Figure 4-2\. High-level delivery process
  id: totrans-10
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图4-2\. 高级交付过程
- en: 'In this chapter we’ll look at steps to provision infrastructure, deploy to
    one or more pre-production environments, and test against the software. In addition,
    we will cover key best practices including:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将探讨提供基础设施、部署到一个或多个预生产环境以及针对软件进行测试的步骤。此外，我们还将涵盖以下关键最佳实践：
- en: Using IaC to create the lower environments that are consistent with production,
    but smaller
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用IaC创建与生产环境一致但规模较小的底层环境
- en: Using “production-like” deployments to move your application consistently
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用“类似生产”的部署来一致地移动你的应用程序
- en: Connecting testing to the deployment pipeline
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将测试与部署管道连接
- en: Selecting where to apply AI to deployments and where to remain cautious
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 选择在部署中应用AI的地方以及需要保持谨慎的地方
- en: This stage in the pipeline is a pivotal one, where development and operations
    concerns intersect. By understanding and implementing these best practices, you’ll
    be well-equipped to determine the optimal number and types of test environments
    for your specific project requirements, regardless of project size or complexity.
    You will understand how to balance development velocity and operational stability,
    ensuring your software undergoes thorough testing and is release-ready.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 在管道的这个阶段是一个关键点，开发与运维的关切在此交汇。通过理解和实施这些最佳实践，你将准备好确定适合你特定项目需求的最优测试环境数量和类型，无论项目大小或复杂度如何。你将了解如何平衡开发速度和运营稳定性，确保你的软件经过彻底测试且准备好发布。
- en: Establishing a Unified Deployment Process
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 建立统一的部署流程
- en: As we continue to navigate our delivery pipeline en route to production, we
    need to consider the deployment steps and deployment environments that will be
    necessary. For a delivery process that is predictable and reliable, we need deployment
    steps and environments that are predictable and reliable.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们继续在通往生产的交付管道中导航时，我们需要考虑必要的部署步骤和部署环境。对于一个可预测和可靠的交付流程，我们需要可预测和可靠的部署步骤和环境。
- en: In this section, we’ll cover best practices to give us the predictability and
    reliability we’re after, from test to production. In [Chapter 8](ch08.html#chapter_8_feature_management_and_experimentation_1749354011197288)
    we will cover production releases and production environments in greater detail.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将介绍最佳实践，以提供我们从测试到生产所追求的可预测性和可靠性。在[第8章](ch08.html#chapter_8_feature_management_and_experimentation_1749354011197288)中，我们将更详细地介绍生产发布和生产环境。
- en: Deploy Consistently to Every Environment
  id: totrans-20
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 对每个环境进行一致的部署
- en: Automation is the foundation of DevOps, and a key function of our delivery pipeline
    is to automate both the setup of our pre-production environments and the deployments
    to those environments. Just as we need to validate our software before releasing
    it into the wild, we need to have measures in place to validate how we deploy
    our software.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 自动化是DevOps的基础，我们交付管道的关键功能之一就是自动化我们预生产环境的设置以及向这些环境部署。正如我们需要在将软件发布到野外之前验证我们的软件一样，我们需要有措施来验证我们部署软件的方式。
- en: We do this by consistently using the same methods to deploy to pre-production
    environments as we do to deploy to production. This consistency tests our deployment
    methods and minimizes the risk of unexpected issues when repeating these steps
    to deploy our software into production environments.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 我们通过始终如一地使用与部署到生产环境相同的方法来部署到预生产环境，来实现这一点。这种一致性测试了我们的部署方法，并最小化了在重复这些步骤将我们的软件部署到生产环境时出现意外问题的风险。
- en: The following best practices help provide the predictability we’re after.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 以下最佳实践有助于提供我们追求的可预测性。
- en: Use consistent tooling
  id: totrans-24
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用一致的工具
- en: It’s not unusual for developers to spin up their own lightweight deployment
    processes using simple tooling to deploy to test environments, while the operations
    teams focus on processes geared to production deployments using enterprise tooling.
    This inconsistency between processes leads to changes being communicated on an
    “as broken basis,” where developers will update their process and forget to notify
    operations until something breaks.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 对于开发者使用简单的工具启动自己的轻量级部署流程，将应用程序部署到测试环境，而运维团队则专注于使用企业工具针对生产部署的过程，这种情况并不罕见。这种流程之间的不一致性导致更改以“有问题时”为基础进行沟通，开发者将更新他们的流程，但直到出现问题才会忘记通知运维团队。
- en: This approach should be avoided, as it limits the effectiveness of testing in
    nonproduction environments and leads to duplicated effort in automation scripting.
    Instead, adopt a unified toolset for all deployments.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 应该避免这种方法，因为它限制了非生产环境中测试的有效性，并导致自动化脚本的重复工作。相反，为所有部署采用统一的工具集。
- en: One way to encourage consistency is to offer developers easy, premade template
    pipelines known as “golden pipelines” or “paved roads.” We will examine this in
    more detail in [Chapter 10](ch10.html#chapter_10_a_platform_engineering_approach_to_modern_devops_1749354009763489).
    At a minimum, your developers and operations teams need to agree on a common set
    of tools for performing deployments.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 鼓励一致性的一个方法是为开发者提供简单、预制的模板管道，称为“黄金管道”或“铺路”。我们将在第 [10](ch10.html#chapter_10_a_platform_engineering_approach_to_modern_devops_1749354009763489)
    章中更详细地探讨这一点。至少，你的开发和运维团队需要就执行部署的常用工具达成共识。
- en: Use consistent pipeline steps and deployment strategies
  id: totrans-28
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用一致的管道步骤和部署策略
- en: Whether you’re using your CI/CD tool or custom deployment scripts, the sequence
    of actions should remain consistent across environments. Advanced deployment strategies
    like canary or blue-green deployments are typically selected based on derisking
    production deployments. If your production environment utilizes these strategies,
    replicate them in your pre-production environments. Similarly, if you were to
    use feature flags to release individual features in production, use feature flags
    to roll out the features in test environments. This consistency minimizes the
    chance of introducing discrepancies or oversights during deployment.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 不论你是在使用 CI/CD 工具还是自定义部署脚本，动作的顺序应该在各个环境中保持一致。像金丝雀或蓝绿部署这样的高级部署策略通常是基于降低生产部署的风险来选择的。如果你的生产环境使用这些策略，请在你的预生产环境中复制它们。同样，如果你打算在生产环境中使用功能标志来发布单个功能，请使用功能标志在测试环境中推出这些功能。这种一致性最小化了在部署过程中引入差异或疏忽的可能性。
- en: We’ll cover production deployment and these progressive deployment strategies
    more thoroughly in Chapters [7](ch07.html#chapter_7_deploying_to_production_1749354011062634)
    and [8](ch08.html#chapter_8_feature_management_and_experimentation_1749354011197288).
    For now, note that the steps and strategies you use should be replicated at every
    level. While a test environment may be smaller due to cost or resource constraints,
    deploy as if it were a production environment. For example, a rolling deployment
    in production might deploy two nodes at a time to 10 targets, while in a test
    environment you could deploy one node at a time to 3 targets. This approach ensures
    that your production deployment steps and strategy are thoroughly tested with
    each version deployed to the test environment.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在第 [7](ch07.html#chapter_7_deploying_to_production_1749354011062634) 章和第
    [8](ch08.html#chapter_8_feature_management_and_experimentation_1749354011197288)
    章中更详细地介绍生产部署和这些渐进式部署策略。目前请注意，你使用的步骤和策略应该在每一级都得到复制。虽然测试环境可能因为成本或资源限制而较小，但部署时应该像对待生产环境一样。例如，在生产环境中，滚动部署可能会一次部署两个节点到
    10 个目标，而在测试环境中，你可能一次只部署一个节点到 3 个目标。这种方法确保了你的生产部署步骤和策略在每次部署到测试环境时都得到了彻底的测试。
- en: In [Chapter 7](ch07.html#chapter_7_deploying_to_production_1749354011062634),
    we will examine in depth how AI techniques can verify that a deployment is not
    causing trouble in its new environment. Those same approaches should be used in
    lower environments to validate that they are working and protect our tests from
    being run against a faulty install.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 在第 [7](ch07.html#chapter_7_deploying_to_production_1749354011062634) 章中，我们将深入探讨如何使用
    AI 技术验证部署在其新环境中不会引起问题。这些相同的方法应该在下级环境中使用，以验证它们是否正常工作，并保护我们的测试不会在错误的安装上运行。
- en: Use parameterization for differences
  id: totrans-32
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用参数化来处理差异
- en: Inevitably, variations will exist between environments. Target names, service
    URLs, and passwords may differ. Instead of creating unique deployment scripts
    for each environment, leverage variables to accommodate these differences. This
    allows you to maintain a single, adaptable script or pipeline that can be tailored
    to the specific environment at runtime.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 环境之间不可避免地会有差异。目标名称、服务 URL 和密码可能不同。不要为每个环境创建独特的部署脚本，而是利用变量来适应这些差异。这允许你维护一个单一、可适应的脚本或管道，它可以在运行时针对特定环境进行调整。
- en: By being consistent in deployment, you’ll create a robust and reliable delivery
    pipeline that instills confidence in your team’s ability to release software seamlessly
    and efficiently.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 通过在部署中保持一致性，你将创建一个强大且可靠的交付管道，这会增强你团队无缝且高效发布软件的能力的信心。
- en: Accelerate pipeline creation with AI
  id: totrans-35
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 利用AI加速管道创建
- en: In [Chapter 3](ch03.html#chapter_3_the_build_and_pre_deployment_testing_steps_of_cont_1749354010266208),
    we discussed automatic pipeline creation. Templating remains a good pattern—you
    want your AI to leverage your organization’s templates and pull in the correct
    adjustments and variables for your project and team. Whether you or an AI are
    creating or maintaining pipelines, the less that pipeline code needs to be managed,
    the better.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第3章](ch03.html#chapter_3_the_build_and_pre_deployment_testing_steps_of_cont_1749354010266208)中，我们讨论了自动管道创建。模板化仍然是一个好的模式——你希望你的AI利用你组织的模板，并为你的项目和团队拉入正确的调整和变量。无论是由你还是AI创建或维护管道，管道代码需要管理的越少，越好。
- en: Leverage Infrastructure as Code for deployment consistency
  id: totrans-37
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 利用基础设施即代码实现部署一致性
- en: We want consistent and predictable environments to deliver our release to production.
    IaC gives us an approach to not only achieve consistency but also control our
    configuration with as much care and control as we do our code resources. At its
    core, IaC treats infrastructure configuration like software code.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 我们希望有一个一致且可预测的环境来交付我们的发布到生产环境。基础设施即代码（IaC）为我们提供了一种方法，不仅能够实现一致性，还能像对待代码资源一样，以同样的细心和控制来管理我们的配置。在其核心，IaC将基础设施配置视为软件代码。
- en: Engineers make changes to the IaC code locally and test them in their development
    environment. These changes are then committed to the VCS, just like application
    code. By managing our IaC, we leverage these features of our VCS and CI/CD pipelines.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 工程师在本地对IaC代码进行更改并在他们的开发环境中进行测试。这些更改随后被提交到VCS中，就像应用程序代码一样。通过管理我们的IaC，我们利用了VCS和CI/CD管道的这些功能。
- en: 'The as-code nature has made IaC a DevOps area that quickly benefited from large
    language models. AI coding assistants generate and explain IaC code well, lowering
    the barriers to entry for developers and infrastructure professionals adopting
    new IaC languages. For major cloud providers with access to performance data from
    environments or DevOps platforms that combine cloud cost features with IaC management,
    future code generation tools will likely incorporate the following runtime optimizations
    based on live workloads:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 作为代码的本质使得IaC迅速成为从大型语言模型中受益的DevOps领域。AI编码助手能够很好地生成和解释IaC代码，降低了开发者和管理基础设施的专业人士采用新的IaC语言的门槛。对于能够访问来自环境或结合云成本特征与IaC管理的DevOps平台的云服务提供商，未来的代码生成工具可能会根据实时工作负载整合以下运行时优化：
- en: Collaboration and code review
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 协作和代码审查
- en: Version control enables multiple team members to work on files simultaneously
    and manage conflicts. We can define and enforce policies to require code reviews
    of our infrastructure configuration changes.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 版本控制允许多个团队成员同时工作在文件上，并管理冲突。我们可以定义并强制执行策略，要求对基础设施配置变更进行代码审查。
- en: Branching and experimentation
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 分支和实验
- en: Version control allows you to create branches for experimenting with different
    configurations without affecting the main production environment.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 版本控制允许你创建分支，以实验不同的配置而不影响主生产环境。
- en: Traceability and auditability
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 可追溯性和可审计性
- en: A VCS provides a complete history of changes to your configuration settings.
    The commit messages and change history help you understand why your systems evolve,
    and audit trails are important in supporting compliance with security frameworks.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 版本控制系统（VCS）提供了你配置设置变更的完整历史记录。提交信息和变更历史有助于你理解系统为何会演变，审计跟踪对于支持符合安全框架至关重要。
- en: Rollback and recovery
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 回滚和恢复
- en: If an infrastructure configuration change causes problems, you can quickly revert
    to a previous working version, minimizing downtime and impact on your systems.
    In addition, in the case of a catastrophic failure, you can use your version-controlled
    configurations to restore your systems to a known working state.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 如果基础设施配置更改导致问题，你可以快速回滚到先前的有效版本，最小化停机时间和对系统的影响。此外，在灾难性故障的情况下，你可以使用你的版本控制的配置来恢复系统到一个已知的工作状态。
- en: Automated testing
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 自动化测试
- en: Delivery pipelines can run automated tests on the IaC code, including syntax
    checks, security scans, and compliance tests. The changes are then applied to
    the staging environment for integration testing, and finally, they’re promoted
    to production, typically using a careful rollout strategy.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 交付管道可以对 IaC 代码运行自动化测试，包括语法检查、安全扫描和合规性测试。然后，这些更改将应用于预发布环境进行集成测试，最后，它们通常使用谨慎的发布策略升级到生产环境。
- en: Security
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 安全性
- en: Version control can help enforce security policies and controls around configuration
    changes, ensuring that only authorized personnel can make modifications.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 版本控制可以帮助强制执行配置更改的安全策略和控制，确保只有授权人员才能进行修改。
- en: 'Consider a scenario all too familiar to many in the tech industry: an application
    works flawlessly in development and runs smoothly in staging, but descends into
    chaos when deployed to production. This discrepancy often stems from inconsistencies
    in infrastructure configurations across environments. With IaC configuration definitions
    you can ensure that every environment, from development to production, is provisioned
    identically.'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑一个在技术行业中许多人都非常熟悉的场景：一个应用程序在开发中工作得完美无缺，在预发布中运行顺畅，但部署到生产环境时却陷入混乱。这种差异通常源于环境之间基础设施配置的不一致性。通过
    IaC 配置定义，你可以确保从开发到生产，每个环境都得到相同的配置。
- en: This methodical process ensures that your infrastructure evolves in a controlled,
    predictable manner. It eliminates the “worked in QA” problem by removing unexpected
    differences between environments. By treating your infrastructure with the same
    respect and rigor as your application code, you gain consistency, reliability,
    and agility.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 这种有条理的过程确保你的基础设施以可控、可预测的方式发展。它通过消除环境之间的意外差异来消除“在 QA 中工作”的问题。通过以与你的应用程序代码相同的尊重和严谨对待你的基础设施，你将获得一致性、可靠性和敏捷性。
- en: IaC offers several advantages beyond control and consistency. With a single
    command, you can spin up new environments that are exact replicas of your existing
    infrastructure. This not only makes your processes repeatable but also serves
    as accurate, living documentation. Because environments are easily created and
    destroyed, you can tear them down when not in use, saving resources and reducing
    costs, with the confidence that they can be recreated effortlessly.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: IaC（基础设施即代码）除了控制和一致性之外，还提供了几个优势。只需一个命令，你就可以启动新的环境，这些环境是现有基础设施的精确副本。这不仅使你的流程可重复，还充当了准确、动态的文档。由于环境可以轻松创建和销毁，当不再使用时可以将其拆除，从而节省资源并降低成本，同时有信心可以轻松重建。
- en: To implement IaC effectively, you need the right tools, and several popular
    options are available. Terraform and its more open fork, OpenTofu, use a cloud-agnostic
    approach. If you’re all in on a particular cloud provider, native tools like AWS
    CloudFormation or Azure Resource Manager might be more appropriate.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 要有效地实施 IaC，你需要合适的工具，并且有几种流行的选项可供选择。Terraform 和其更开放的分支 OpenTofu 采用云无关的方法。如果你完全依赖于特定的云提供商，则原生的工具，如
    AWS CloudFormation 或 Azure Resource Manager，可能更合适。
- en: Leverage Git Workflows with GitOps
  id: totrans-57
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 利用 GitOps 中的 Git 工作流程
- en: GitOps is a newer and increasingly popular approach to deploying software that
    builds on the capabilities of code repositories. With a GitOps approach, you describe
    the desired state of infrastructure in version-controlled configuration. This
    description is declarative. GitOps tools include an agent that regularly reconciles
    the actual environment and the desired state described in Git-controlled configurations.
    Instead of running a script to directly deploy software, you instigate a software
    deployment by updating the configuration in your code repository. This approach
    and GitOps tools are typically used in Kubernetes environments to orchestrate
    containerized applications across clusters of machines.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: GitOps 是一种基于代码仓库功能的新兴且越来越受欢迎的软件部署方法。采用 GitOps 方法，你可以在版本控制的配置中描述基础设施的期望状态。这种描述是声明性的。GitOps
    工具包括一个代理，该代理会定期将实际环境和 Git 控制的配置中描述的期望状态进行协调。你不需要运行脚本直接部署软件，而是通过更新代码仓库中的配置来启动软件部署。这种方法和
    GitOps 工具通常用于 Kubernetes 环境，以在机器集群之间编排容器化应用程序。
- en: With this approach, you rely on your code repository to enforce security, provide
    governance, and implement your organization’s policies, such as requiring oversight
    through code reviews and approvals. Your updates are traceable and auditable.
    You can collaborate, experiment, and roll back the configuration updates used
    to deploy software. Once you make an update and merge it, the GitOps reconciliation
    agent does the rest, picking up the updates and implementing the changes to the
    target environment.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 采用这种方法，您依赖代码仓库来执行安全控制、提供治理并实施您组织的政策，例如通过代码审查和批准进行监督。您的更新是可追溯和可审计的。您可以协作、实验，并回滚用于部署软件的配置更新。一旦您进行了更新并将其合并，GitOps
    协调代理就会完成剩余的工作，获取更新并实施对目标环境的更改。
- en: The approach has gained traction because managing the intricate configurations
    describing complex orchestrated cloud systems is an application well suited to
    code repository capabilities. In addition, GitOps addresses the problem of environment
    drift; that is, the environment is changed operationally from the desired state.
    The reconciliation agent automatically detects and remediates, guarding against
    inconsistencies in environments.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 这种方法之所以受到欢迎，是因为管理描述复杂编排云系统的复杂配置是一个非常适合代码仓库功能的用例。此外，GitOps 解决了环境漂移的问题；也就是说，环境从期望状态进行了操作性的改变。协调代理自动检测并修复，以防止环境中出现不一致。
- en: 'While a GitOps approach is powerful, deploying with a GitOps approach within
    a CI/CD delivery pipeline is more complicated than simply pushing your app updates
    with a script. With GitOps, your pipeline must automate the following steps:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然 GitOps 方法很强大，但在 CI/CD 交付管道中使用 GitOps 方法部署比简单地用脚本推送您的应用程序更新要复杂得多。使用 GitOps，您的管道必须自动化以下步骤：
- en: Retrieve configuration from your code repository.
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从您的代码仓库检索配置。
- en: Update the configuration to reference the latest version of your application.
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 更新配置以引用您应用程序的最新版本。
- en: Merge the updated configuration back to Git.
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将更新后的配置合并回 Git。
- en: GitOps reconciliation then takes it from there.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: GitOps 协调随后继续进行。
- en: You may also encounter complexities with applications that are geographically
    replicated across multiple clusters. Maintaining consistency and synchronizing
    across clusters can be difficult due to many GitOps reconcilers being optimized
    for deploying applications to a single cluster. You may need to balance the need
    for a single source of truth with the reality that certain configurations will
    need to be tailored for specific clusters. Commercial GitOps tools often provide
    orchestration and visibility in these more complicated scenarios, extending what
    open source provides.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可能遇到在多个集群中地理复制的应用程序的复杂性。由于许多 GitOps 协调器优化于部署到单个集群，因此保持一致性和跨集群同步可能很困难。您可能需要在单一真相来源的需求与某些配置需要针对特定集群定制的事实之间取得平衡。商业
    GitOps 工具通常在这些更复杂的场景中提供编排和可见性，扩展了开源提供的功能。
- en: Despite these challenges, the benefits in terms of collaboration, traceability,
    and automated reconciliation make GitOps a compelling choice for organizations
    that extensively leverage Kubernetes.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管存在这些挑战，但在协作、可追溯性和自动化协调方面的好处使 GitOps 成为那些广泛利用 Kubernetes 的组织的有吸引力的选择。
- en: Continuous Delivery, Deployment, and Test in the CI/CD Pipeline
  id: totrans-68
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: CI/CD 管道中的持续交付、部署和测试
- en: Now that we have an understanding of the importance of predictable and reliable
    deployment steps and environments, let’s return to our delivery pipeline. With
    our new code merged, we now want to deploy it into one or more environments where
    we can test against running code. [Figure 4-3](#chapter_4_figure_3_1749354010437567)
    shows an example pipeline.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 既然我们已经了解了可预测和可靠的部署步骤和环境的重要性，让我们回到我们的交付管道。随着我们新代码的合并，我们现在希望将其部署到可以测试运行代码的一个或多个环境中。[图
    4-3](#chapter_4_figure_3_1749354010437567) 展示了一个示例管道。
- en: '![](assets/ansd_0403.png)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/ansd_0403.png)'
- en: Figure 4-3\. Testing our code in pre-production environments
  id: totrans-71
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 4-3\. 在预生产环境中测试我们的代码
- en: 'In this section, we’ll focus on the pipeline:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将关注管道：
- en: 1\. Code trigger
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 1. 代码触发
- en: The pull request is reviewed, approved, and merged into the main branch. In
    this pipeline, the PR merge triggers the pipeline.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 拉取请求被审查、批准并合并到主分支。在这个管道中，PR 合并触发管道。
- en: 2\. Continuous integration
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 2. 持续集成
- en: The pipeline repeats the continuous integration steps we reviewed in the last
    chapter, checking out, building, and executing continuous integration tests.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 管道重复我们在上一章中回顾的持续集成步骤，包括检出、构建和执行持续集成测试。
- en: 3\. Provision infrastructure
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 3. 配置基础设施
- en: The pipeline provisions the pre-production environments required for testing.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 管道为测试配置所需的预生产环境。
- en: 4\. Deploy to one or more pre-production environments
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 4. 部署到一个或多个预生产环境
- en: The pipeline deploys the app to one or more pre-production environments.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 管道将应用部署到一个或多个预生产环境。
- en: 5\. Tests against the deployed app
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 5. 对已部署应用的测试
- en: The pipeline tests against the deployed software. Various types of tests can
    be run, depending on the type of software and the priorities of your organization.
    We’ll look at a number of different types of tests in the following section. The
    pipeline can be configured to run multiple types of tests in parallel or sequentially.
    Some tests can reuse the same pre-production environments, while others may necessitate
    pre-production environments tailored to the requirements of the tests. Generally,
    faster tests are prioritized over slower tests.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 管道对已部署的软件进行测试。可以运行各种类型的测试，具体取决于软件类型和您组织的优先级。我们将在下一节中探讨多种不同类型的测试。管道可以配置为并行或顺序运行多种类型的测试。某些测试可以重用相同的预生产环境，而其他测试可能需要根据测试要求定制预生产环境。通常，较快的测试优先于较慢的测试。
- en: 6\. Deploy to production
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 6. 部署到生产环境
- en: The last step is to deploy, or promote, to the production environment. Depending
    on your delivery process, the decision to deploy to production can be automated
    or require manual approval. We’ll look at promotion strategies and steps to deploy
    to production in [Chapter 7](ch07.html#chapter_7_deploying_to_production_1749354011062634).
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一步是将应用部署或升级到生产环境。根据您的交付流程，部署到生产环境的决策可以是自动化的，或者需要手动批准。我们将在第7章（[Chapter 7](ch07.html#chapter_7_deploying_to_production_1749354011062634)）中探讨升级策略和部署到生产的步骤。
- en: Types of Testing
  id: totrans-85
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 测试类型
- en: Test environments are crucial for running tests, but the choice of tests depends
    heavily on the type of application being developed, the intended users, software
    architecture, and budget and time constraints. For example, in general, testing
    priorities for a website will differ significantly from those of embedded software
    or a web API. Testing priorities will vary between software services in a highly
    regulated industry versus software that must be intuitive and compelling to a
    large retail user base. Your selection of tests and their frequency can substantially
    impact application quality, infrastructure costs, and overall delivery speed.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 测试环境对于运行测试至关重要，但测试的选择在很大程度上取决于正在开发的应用程序类型、目标用户、软件架构以及预算和时间限制。例如，一般来说，网站测试的优先级将与嵌入式软件或Web
    API的优先级有显著差异。在高度监管的行业中的软件服务与必须对大型零售用户群直观且吸引人的软件之间，测试优先级会有所不同。您选择的测试及其频率可以极大地影响应用程序质量、基础设施成本和整体交付速度。
- en: AI-powered testing platforms increasingly use ML to optimize testing strategies.
    These platforms analyze historical test data, code changes, application architecture,
    and past deployment issues to intelligently select and prioritize tests. For example,
    AI-driven test selection tools identify the most impactful tests to execute for
    each code change, significantly speeding up test cycles. Vendors such as Harness,
    Tricentis SeaLights, and CloudBees Launchable are using AI and ML techniques to
    optimize test selection.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 人工智能驱动的测试平台越来越多地使用机器学习来优化测试策略。这些平台分析历史测试数据、代码更改、应用程序架构和过去的部署问题，以智能地选择和优先处理测试。例如，人工智能驱动的测试选择工具可以识别出针对每次代码更改执行的最有影响力的测试，从而显著加快测试周期。例如，Harness、Tricentis
    SeaLights和CloudBees Launchable等供应商正在使用人工智能和机器学习技术来优化测试选择。
- en: 'Here are common types of tests that occur during this phase:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 在此阶段，会发生以下常见的测试类型：
- en: End-to-end or functional tests
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 端到端或功能测试
- en: These tests are the most straightforward test type, simulating real-world user
    scenarios and validating the entire application flow from start to finish, to
    determine if the software does what is expected. These tests may be automated
    or performed manually. Modern teams automate more. Selenium is a commonly used
    open source test automation framework that many commercial tools also build upon.
    ML has been present in these tools for quite some time, but we are increasingly
    seeing a shift toward an AI-first approach, which we’ll dive into shortly.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 这些测试是最直接的测试类型，模拟真实世界用户场景，并验证从开始到结束的整个应用程序流程，以确定软件是否按预期工作。这些测试可以是自动化的或手动执行的。现代团队更多地采用自动化。Selenium是一个常用的开源测试自动化框架，许多商业工具也在此基础上构建。这些工具中已经存在机器学习技术，但我们越来越多地看到向以AI为先的方法的转变，我们将在稍后深入探讨。
- en: AI-powered testing
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: AI驱动测试
- en: AI can automatically generate test cases, identify edge cases, and learn from
    previous test runs to focus on areas most likely to have issues. AI testing is
    likely to complement or be a part of your end-to-end (functional) test programs.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: AI可以自动生成测试用例，识别边缘情况，并从之前的测试运行中学习，以关注最有可能出现问题的区域。AI测试可能会补充或成为您的端到端（功能）测试程序的一部分。
- en: API tests
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: API测试
- en: A form of functional testing is API testing, which validates that an API works
    as expected. In distributed systems, services interact over APIs, so ensuring
    that APIs are performing well is important. Common API testing frameworks include
    SoapUI, Postman, Insomnia, and Swagger. AI-enhanced API testing goes beyond simple
    validation to intelligently explore API behaviors and edge cases. These systems
    can automatically generate API test scenarios by analyzing API documentation or
    actual usage patterns.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 功能测试的一种形式是API测试，它验证API按预期工作。在分布式系统中，服务通过API进行交互，因此确保API表现良好非常重要。常见的API测试框架包括SoapUI、Postman、Insomnia和Swagger。AI增强的API测试不仅超越了简单的验证，还能智能地探索API行为和边缘情况。这些系统可以通过分析API文档或实际使用模式自动生成API测试场景。
- en: User experience tests
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 用户体验测试
- en: Developers, testers, and product managers may evaluate new features to make
    sure they are easy and intuitive to use. While this may test the same systems
    as end-to-end testing, the focus is on assessing usability.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 开发者、测试人员和产品经理可能会评估新功能，以确保它们易于使用且直观。虽然这可能测试与端到端测试相同的系统，但重点是评估可用性。
- en: User acceptance tests
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 用户验收测试
- en: These tests are typically done as a final check to ensure that the software
    meets the end user’s needs, that it meets the requirements, and that it functions
    as expected. User acceptance tests can include many other types of tests, from
    end-to-end to user experience and performance. These tests are done from the end
    user’s perspective with the purpose of providing a final and formal acceptance
    of the software release.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 这些测试通常作为最终检查，以确保软件满足最终用户的需求，符合要求，并且按预期工作。用户验收测试可以包括许多其他类型的测试，从端到端测试到用户体验和性能测试。这些测试从最终用户的角度进行，目的是对软件发布进行最终和正式的验收。
- en: Accessibility tests
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 可访问性测试
- en: These tests ensure that our software is usable for people with disabilities
    such as visual, hearing, or cognitive impairments in order to serve our users
    and comply with legal, contractual, and regulatory requirements. Open source accessibility
    scanners include Lighthouse and Pa11Y. Companies, including accessiBe, are beginning
    to offer AI-augmented testing and remediation tooling as well.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 这些测试确保我们的软件对有视觉、听觉或认知障碍等残疾的人是可用的，以便为我们的用户提供服务并符合法律、合同和监管要求。开源的可访问性扫描器包括Lighthouse和Pa11Y。包括accessiBe在内的公司也开始提供AI增强的测试和修复工具。
- en: Localization tests
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 本地化测试
- en: Localization testing is important for software targeting a global audience.
    It involves a comprehensive assessment of the product’s linguistic accuracy, cultural
    appropriateness, and functional correctness within the specific target locale.
    This includes verifying translations, adapting visuals to cultural sensitivities,
    and ensuring the software functions correctly with local formats and regulations.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 本地化测试对于面向全球受众的软件至关重要。它涉及对产品在特定目标地区的语言准确性、文化适宜性和功能正确性的全面评估。这包括验证翻译、调整视觉元素以适应文化敏感性，并确保软件与本地格式和法规正确运行。
- en: Performance tests
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 性能测试
- en: These tests simulate workloads to assess the speed, responsiveness, and stability
    of the application under different conditions. The tests help identify performance
    bottlenecks and ensure the application can handle expected traffic. This type
    of testing is critical for applications with seasonal peaks to ensure that the
    release can withstand peak demand. Apache JMeter, Gatling, and Grafana k6 are
    often used for performance testing. AI can leverage the data from performance
    testing to recommend resilience tests to run. These AI-powered performance testing
    systems can now detect performance anomalies with much greater accuracy than traditional
    threshold-based approaches. The systems establish baseline performance patterns
    and identify subtle deviations that might indicate looming issues. More advanced
    platforms can even pinpoint the specific components or code changes responsible
    for performance degradation by correlating test results with code changes and
    architecture maps.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 这些测试模拟工作负载以评估应用程序在不同条件下的速度、响应性和稳定性。这些测试有助于识别性能瓶颈并确保应用程序能够处理预期的流量。对于有季节性高峰的应用程序，这种类型的测试至关重要，以确保发布版本能够承受高峰需求。Apache
    JMeter、Gatling和Grafana k6常用于性能测试。AI可以利用性能测试的数据来推荐运行弹性测试。这些AI驱动的性能测试系统现在可以比传统的基于阈值的传统方法更准确地检测性能异常。系统建立基线性能模式并识别可能表明即将出现问题的微妙偏差。更高级的平台甚至可以通过将测试结果与代码更改和架构图相关联，来定位导致性能下降的具体组件或代码更改。
- en: Resilience tests
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 弹性测试
- en: In modern distributed systems, a production system has many components. The
    one certainty is that something is going to break somewhere. Resilience testing,
    also known as chaos testing, evaluates if the software can remain useful when
    services it relies on fail. We’ll return to resilience testing in [Chapter 6](ch06.html#chapter_6_chaos_engineering_and_service_reliability_1749354010916149).
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 在现代分布式系统中，生产系统有许多组件。一个确定的事实是，某个地方肯定会出问题。弹性测试，也称为混沌测试，评估当软件所依赖的服务失败时，软件是否仍然有用。我们将在[第6章](ch06.html#chapter_6_chaos_engineering_and_service_reliability_1749354010916149)中回到弹性测试。
- en: Security tests
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 安全测试
- en: These tests identify vulnerabilities and weaknesses in the application that
    could be exploited by attackers. They help ensure the security and integrity of
    the application. Dynamic application security testing (DAST) is a specific type
    of security testing that automates penetration testing, inspecting your running
    application for security flaws. DAST attempts to attack your applications like
    a malicious user would. ZAP is a commonly used free tool, while commercial offerings
    from Veracode and Checkmarx are popular as well. We’ll return to security testing
    in [Chapter 5](ch05.html#chapter_5_securing_applications_and_the_software_supply_chai_1749354010735711).
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 这些测试识别应用程序中可能被攻击者利用的漏洞和弱点。它们有助于确保应用程序的安全性和完整性。动态应用程序安全测试（DAST）是一种特定的安全测试类型，它自动化渗透测试，检查你的运行应用程序是否存在安全漏洞。DAST试图像恶意用户一样攻击你的应用程序。ZAP是一个常用的免费工具，而来自Veracode和Checkmarx的商业产品也非常受欢迎。我们将在[第5章](ch05.html#chapter_5_securing_applications_and_the_software_supply_chai_1749354010735711)中回到安全测试。
- en: While the test types outlined above are commonly used, it’s important to note
    that there is no one-size-fits-all approach to software testing, and terminology
    can vary across organizations. The specific tests you choose and how you categorize
    them will depend on your unique development process, application architecture,
    and risk tolerance.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然上述概述的测试类型被广泛使用，但需要注意的是，软件测试没有一种适合所有情况的方案，术语在不同的组织之间可能有所不同。你选择的特定测试以及如何对它们进行分类将取决于你独特的开发流程、应用程序架构和风险承受能力。
- en: Intent-Based Functional and End-to-End Testing
  id: totrans-110
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 基于意图的功能性和端到端测试
- en: Traditional approaches to automated functional and end-to-end testing often
    rely heavily on scripted tests or simplistic record-and-playback methods. While
    convenient initially, these tests quickly become brittle and difficult to maintain,
    breaking whenever minor UI changes occur. This fragility creates a high maintenance
    burden, slows down development, and frequently results in teams abandoning automated
    testing entirely or limiting its scope.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 传统的自动化功能性和端到端测试方法通常严重依赖脚本测试或简单的录制和回放方法。虽然一开始很方便，但这些测试很快就会变得脆弱且难以维护，一旦发生微小的UI更改就会中断。这种脆弱性创造了高维护负担，减缓了开发速度，并且经常导致团队完全放弃自动化测试或限制其范围。
- en: An emerging AI-first approach to testing, known as intent-based testing, aims
    to overcome these challenges. Instead of explicitly scripting or manually recording
    each test step, teams express the intent of their test scenarios, describing the
    outcome they expect rather than the exact sequence of actions to achieve it. AI-native
    testing tools then dynamically generate and execute these tests by interacting
    with your application, much like a human user would.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 一种新兴的以AI为先的测试方法，称为基于意图的测试，旨在克服这些挑战。而不是明确地编写或手动记录每个测试步骤，团队表达他们的测试场景的意图，描述他们期望的结果而不是实现它的确切动作序列。AI原生测试工具随后通过与您的应用程序交互，动态生成并执行这些测试，就像一个人类用户一样。
- en: 'For example, instead of recording precise clicks and form inputs for an e-commerce
    checkout process, you could simply describe the goal: “Purchase a product using
    a credit card.” The AI would automatically determine the most appropriate paths
    through your application, interacting with buttons, forms, and workflows intelligently.'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，对于电子商务结账过程，你不必记录精确的点击和表单输入，你只需描述目标：“使用信用卡购买产品。”AI会自动确定通过您应用程序的最合适路径，智能地与按钮、表单和工作流程交互。
- en: An important benefit is improved resilience of the tests—addressing the challenge
    of UI-based tests being brittle. If the UI changes later, the AI adapts to the
    new layout or modified interactions, significantly reducing maintenance overhead.
    Test automation tools have tried to automatically repair tests for many years,
    using techniques from tracking DOM objects to implementing ML. Shifting to understand
    the intent behind the test, and attempting to regenerate the entire script in
    response to a UI overhaul, brings a new level of recoverability.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 一个重要的好处是测试的弹性得到了提高——解决了基于UI的测试脆弱性的挑战。如果UI之后发生变化，AI会适应新的布局或修改后的交互，显著减少维护开销。测试自动化工具多年来一直在尝试自动修复测试，使用从跟踪DOM对象到实现ML的技术。转向理解测试背后的意图，并尝试在UI重写后重新生成整个脚本，带来了新的可恢复性水平。
- en: These tools may also help compensate for the shift from professional testers
    toward asking developers to own these tests. The tools can recommend additional
    tests and assertions related to the existing tests, which may help an optimistic
    developer remember to check for corner cases and bad user behavior.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 这些工具也可能有助于弥补从专业测试人员向要求开发者负责这些测试的转变。工具可以推荐与现有测试相关的额外测试和断言，这可能有助于乐观的开发者记住检查边缘情况和不良用户行为。
- en: Advanced use cases for AI include migrating tests written in traditional tools
    such as Selenium and Playwright into intent-based testing tools, and generating
    and running not just individual tests but also entire test cases.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: AI的高级用例包括将用Selenium和Playwright等传统工具编写的测试迁移到基于意图的测试工具，以及生成和运行不仅单个测试，还包括整个测试用例。
- en: Traditional Testing Versus a Hollowing-Out-the-Middle Approach
  id: totrans-117
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 传统测试与中间层空心化方法
- en: 'In traditional software development, testing is often compartmentalized with
    dedicated environments for each type. This ensures, for example, that manual user
    experience testing is never impacted by concurrent automated performance tests.
    However, this isolation comes at a cost: a proliferation of test environments
    is expensive and can be time-consuming to manage. When a single new release must
    clear numerous stages, the approach becomes increasingly unsustainable in the
    face of accelerating release cadences and growing application complexity.'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 在传统的软件开发中，测试通常被分割成独立的各个类型，并为每种类型分配专门的测试环境。这确保了例如，手动用户体验测试不会受到同时进行的自动化性能测试的影响。然而，这种隔离是有代价的：测试环境的激增既昂贵又难以管理。当单个新版本必须通过多个阶段时，面对加速的发布周期和不断增长的应用程序复杂性，这种方法变得越来越不可持续。
- en: As you try to accelerate your release cadences and your application becomes
    more complex, it becomes increasingly unsustainable to test across many stages,
    with each stage requiring a new environment. [Figure 4-4](#chapter_4_figure_4_1749354010437583)
    illustrates this staged approach.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 当你试图加速发布周期，并且应用程序变得更加复杂时，跨多个阶段进行测试变得越来越不可持续，每个阶段都需要一个新的环境。[图4-4](#chapter_4_figure_4_1749354010437583)展示了这种分阶段的方法。
- en: '![](assets/ansd_0404.png)'
  id: totrans-120
  prefs: []
  type: TYPE_IMG
  zh: '![图片](assets/ansd_0404.png)'
- en: Figure 4-4\. Traditional testing through several pre-production environments
  id: totrans-121
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图4-4\. 通过几个预生产环境进行传统测试
- en: On the other hand, a more modern testing approach challenges this model. This
    approach is sometimes referred to as “hollowing out the middle.” Instead of multiple,
    sequential test passes across multiple environments, there are fewer environments
    where tests run concurrently. This practice advocates shifting testing both to
    the left *and to the right*.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 另一方面，一种更现代的测试方法挑战了这种模式。这种方法有时被称为“空心化中间”。不是在多个环境中进行多个连续的测试循环，而是在更少的并发测试环境中进行测试。这种做法主张将测试向左和向右移动。
- en: We introduced shift-left security in [Chapter 3](ch03.html#chapter_3_the_build_and_pre_deployment_testing_steps_of_cont_1749354010266208).
    By moving SAST, SCA, dependency scanning, and secrets detection into pre-deployment
    steps, our sample pipeline exemplified shift-left. We incorporated these crucial
    tests early such that passing them is a prerequisite to merging code. Unit and
    other early testing, completed as part of the merge workflow, also represent a
    shift-left approach. This helps catch issues sooner, reducing the need for extensive
    downstream testing.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在[第 3 章](ch03.html#chapter_3_the_build_and_pre_deployment_testing_steps_of_cont_1749354010266208)中介绍了“左移安全”。通过将
    SAST、SCA、依赖项扫描和秘密检测移入预部署步骤，我们的示例管道展示了左移。我们提前纳入了这些关键测试，使得通过它们成为合并代码的先决条件。单元测试和其他早期测试，作为合并工作流程的一部分完成，也代表了左移方法。这有助于更早地发现问题，减少对下游广泛测试的需求。
- en: A shift-right approach advocates executing some types of tests, traditionally
    late-cycle test types, against the new release in the live, production environment.
    Instead of provisioning and moving a release from one or more pre-production environments
    and using these isolated environments to test, we deploy the app straight to production
    and validate there. For example, load testing can be difficult to execute well
    and the environments may need to be large. Deploying to a portion of prod, applying
    load to that targeted infrastructure, and measuring the impact using production
    observability tooling can be a viable alternative to traditional load testing.
    [Figure 4-5](#chapter_4_figure_5_1749354010437606) illustrates this approach.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 向右偏移的方法主张在实时、生产环境中执行某些类型的测试，这些测试类型传统上是后期测试类型。我们不是为预生产环境配置和移动发布版本，并使用这些隔离的环境进行测试，而是直接将应用程序部署到生产环境中并验证。例如，负载测试可能难以有效执行，并且环境可能需要很大。将应用程序部署到生产环境的一部分，对该目标基础设施应用负载，并使用生产可观察性工具来衡量影响，可以成为传统负载测试的可行替代方案。[图
    4-5](#chapter_4_figure_5_1749354010437606) 说明了这种方法。
- en: '![](assets/ansd_0405.png)'
  id: totrans-125
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/ansd_0405.png)'
- en: Figure 4-5\. A “hollow-out-the-middle” approach to testing
  id: totrans-126
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 4-5\. 一种“空心化中间”的测试方法
- en: We can see that removing the need for pre-production environments that closely
    mirror production can save costs and maintenance toil, but how can extensive testing
    in a production environment be safe? Shift-right relies on new tools and production
    deployment practices. With advanced traffic management, observability tools, and
    containerization, many organizations have found that these tests can in fact be
    performed in the production environment with minimal side effects. Beyond significantly
    cutting infrastructure expenses, this approach has the advantage of yielding more
    accurate results. We’ll discuss these new tools and production deployment practices
    in [Chapter 7](ch07.html#chapter_7_deploying_to_production_1749354011062634).
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以看到，移除需要与生产环境紧密镜像的预生产环境可以节省成本和维护工作量，但在生产环境中进行广泛的测试如何才能保证安全？向右偏移依赖于新的工具和生产部署实践。通过高级流量管理、可观察性工具和容器化，许多组织发现这些测试实际上可以在生产环境中执行，并且副作用最小。除了显著降低基础设施成本之外，这种方法还有产生更准确结果的优点。我们将在[第
    7 章](ch07.html#chapter_7_deploying_to_production_1749354011062634)中讨论这些新工具和生产部署实践。
- en: Hollowing out the middle optimizes testing and is one modern strategy that organizations
    are taking to fuel faster delivery. By redesigning our approach to how we move
    our software between environments, we can similarly accelerate our delivery process.
    In [“Promotion Between Environments”](#chapter_4_promotion_between_environments_1749354010446697),
    we’ll look at how and why we should promote our releases between environments.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 空心化中间优化了测试，这是组织为了加快交付而采取的一种现代策略。通过重新设计我们在环境之间移动软件的方法，我们可以同样加速我们的交付过程。在[“环境间的提升”](#chapter_4_promotion_between_environments_1749354010446697)中，我们将探讨为什么以及我们应该在环境之间提升我们的发布版本。
- en: Promotion Between Environments
  id: totrans-129
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 环境间的提升
- en: In the previous section, we looked at a typical delivery process that required
    moving our software through multiple stages of testing, with each stage of testing
    conducted in a separate pre-production environment. In this process we want to
    promote our release as quickly and intelligently as possible, meaning our new
    version of software should advance to the next environment and stage without any
    undue delay.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一节中，我们查看了一个典型的交付流程，该流程需要将我们的软件通过多个测试阶段进行移动，每个测试阶段都在一个单独的预生产环境中进行。在这个过程中，我们希望尽可能快速和智能地推广我们的发布，这意味着我们的新版本软件应该在没有不必要的延迟的情况下推进到下一个环境和阶段。
- en: AI is beginning to play an increasing role in this promotion process, analyzing
    test results, performance data, and deployment history to make intelligent decisions
    about when and how to promote releases. These systems can evaluate multiple metrics
    simultaneously, detect subtle patterns that might indicate risks, and become increasingly
    accurate over time through ML.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 人工智能开始在这个推广过程中扮演越来越重要的角色，分析测试结果、性能数据和部署历史，以做出关于何时以及如何推广发布的智能决策。这些系统可以同时评估多个指标，检测可能表明风险的微妙模式，并且随着时间的推移通过机器学习变得越来越准确。
- en: 'Ideally, our promotion process is simple: if the tests in one stage pass, our
    release is immediately promoted to the next environment, and that environment
    is ready and available for the next round of testing. The promotion decision is
    automatic and instant and simply based on whether the previous stage of testing
    passed. In practice, release promotion, even between test environments, becomes
    a bottleneck in many delivery processes. This can be attributed to several factors:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 理想情况下，我们的推广流程很简单：如果一个阶段的测试通过，我们的发布将立即被推广到下一个环境，并且该环境已准备好并可供下一轮测试使用。推广决策是自动的并且是即时的，仅基于前一阶段的测试是否通过。在实践中，发布推广，即使在测试环境之间，也成为了许多交付流程的瓶颈。这可以归因于几个因素：
- en: Promotion decision is by committee
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 推广决策由委员会做出
- en: Promotion decisioning is not automated and requires a group review and approval
    of test results.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 推广决策不是自动化的，需要小组审查和批准测试结果。
- en: Promotion relies on tedious manual steps
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 推广依赖于繁琐的手动步骤
- en: Manual intervention to trigger the next deployment creates bottlenecks.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 手动干预以触发下一次部署会形成瓶颈。
- en: Insufficient number of testing environments
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 测试环境数量不足
- en: If the next environment is occupied with testing another version, the new version
    must wait.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 如果下一个环境正忙于测试另一个版本，新版本必须等待。
- en: In this section we’ll look at mitigations to address these issues. The practices
    we’ll introduce help us move our release from one pre-production environment to
    the next, and also apply to promoting our app into production. However, the final
    release into production has some special considerations, which will be addressed
    in more depth in [Chapter 7](ch07.html#chapter_7_deploying_to_production_1749354011062634).
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将探讨缓解这些问题的方法。我们将介绍的一些实践有助于我们将发布从一阶段的预生产环境推进到下一阶段，并且也适用于将我们的应用程序推广到生产环境。然而，最终将发布推入生产环境有一些特殊的考虑因素，这些将在第7章（[Chapter 7](ch07.html#chapter_7_deploying_to_production_1749354011062634)）中更深入地讨论。
- en: From Decisions by Committee to Automated Decisions
  id: totrans-140
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 从委员会决策到自动化决策
- en: Human decision making, whether it’s a committee huddle or a trusted individual’s
    call, inevitably introduces delays in promoting your release from one stage to
    the next. Team members need to be alerted, then take time to analyze testing results
    before reaching a decision and taking action. While this might not always be labor-intensive,
    it undoubtedly slows things down.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 人类的决策过程，无论是委员会的集会还是信任个人的决定，不可避免地会在将您的发布从一阶段推进到下一阶段时引入延迟。团队成员需要被通知，然后需要花时间分析测试结果，在做出决定并采取行动之前。虽然这不一定总是劳动密集型的，但它无疑会减慢事情的速度。
- en: While traditional automation has relied on simple pass/fail criteria, AI systems
    offer more sophisticated decision-making capabilities. Modern AI promotion engines
    can evaluate hundreds of metrics simultaneously, looking beyond simple test results
    to analyze system behavior holistically. These systems might consider factors
    like performance trends, error types, user impact assessments, and even code change
    risk levels based on past deployment patterns. By weighting these factors appropriately,
    AI can make more nuanced decisions than traditional rule-based approaches.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然传统的自动化依赖于简单的通过/失败标准，但AI系统提供了更复杂的决策能力。现代AI推广引擎可以同时评估数百个指标，不仅分析简单的测试结果，还从整体上分析系统行为。这些系统可能会考虑诸如性能趋势、错误类型、用户影响评估，甚至基于过去部署模式的代码更改风险水平等因素。通过适当地权衡这些因素，AI可以做出比传统基于规则的方案更细微的决策。
- en: Our aim is to streamline this process by automating the decision to promote
    your release. We’ll revisit this topic in detail in [Chapter 7](ch07.html#chapter_7_deploying_to_production_1749354011062634).
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的目的是通过自动化推广你的发布决策来简化这一过程。我们将在[第7章](ch07.html#chapter_7_deploying_to_production_1749354011062634)中详细回顾这个话题。
- en: From Manual to Automated Promotion
  id: totrans-144
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 从手动到自动推广
- en: Once you’ve automated the decision-making process, the actual promotion of your
    build becomes significantly easier. The key is to ensure that the deployment to
    the next environment is triggered immediately after the decision to proceed has
    been made, eliminating unnecessary wait times.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你自动化了决策过程，构建的实际推广就会变得显著更容易。关键是要确保在做出继续推进的决定后，立即触发向下一个环境的部署，消除不必要的等待时间。
- en: How you implement this automation depends on your chosen continuous delivery
    tooling. Some tools offer end-to-end pipelines with simple, built-in triggers
    for seamless promotion between stages. Others allow you to call another pipeline
    or job as a step within your current pipeline, offering flexibility but potentially
    requiring more configuration. While the ease of implementation varies, achieving
    this level of automation is almost always possible.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 如何实现这一自动化取决于你选择的持续交付工具。一些工具提供端到端管道，具有简单内置触发器，可实现阶段之间的无缝推广。其他工具允许你在当前管道的步骤中调用另一个管道或作业，提供灵活性，但可能需要更多的配置。虽然实施难度各不相同，但几乎总是可以实现这一级别的自动化。
- en: GitOps-style deployments, however, often present a unique challenge in this
    area, as we discussed in “Leverage Git Workflows with GitOps.” To execute the
    deployment, we need to automate the Git changes to the GitOps configurations instead
    of relying on manual updates. To do so, we will typically automate the pull request
    step and its approval directly within our CI/CD pipeline. We maintain Git as the
    source of truth that GitOps is known for while automating each step of our release
    promotion.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，GitOps风格的部署在这一领域通常是一个独特的挑战，正如我们在“利用GitOps的Git工作流程”中讨论的那样。为了执行部署，我们需要自动化Git更改到GitOps配置，而不是依赖于手动更新。为此，我们通常会在CI/CD管道中自动化拉取请求步骤及其审批。我们保持Git作为GitOps所知的真相来源，同时自动化我们发布推广的每一步。
- en: For example, imagine a scenario where your pipeline has determined that a build
    is ready for promotion to the User Acceptance Testing (UAT) environment. When
    our pipeline is set up to generate the necessary pull request, trigger any required
    approvals, and (once approved) merge the changes into the main branch, our pipeline
    initiates the GitOps deployment to the UAT environment seamlessly.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，想象一个场景，你的管道已经确定构建已准备好推广到用户验收测试（UAT）环境。当我们的管道设置好生成必要的拉取请求、触发任何必要的审批，并在（一旦批准）将更改合并到主分支时，我们的管道将无缝地启动GitOps部署到UAT环境。
- en: Break the Environment Bottleneck
  id: totrans-149
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 打破环境瓶颈
- en: A final challenge in automating promotion between stages and environments in
    your delivery process is determining the “right” number of environments that you’ll
    need. Having too many environments becomes a financial burden due to the cost
    of maintaining their underlying infrastructure, while having too few creates bottlenecks
    and delays in moving releases toward delivery, as the process waits on resources
    to become available.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 在你的交付过程中自动化阶段和环境的推广的最后一个挑战是确定你需要“正确”数量的环境。拥有太多环境会由于维护其底层基础设施的成本而成为财务负担，而拥有太少的环境则会在将发布推向交付时造成瓶颈和延迟，因为该过程等待资源可用。
- en: Ephemeral environments present a common solution to this dilemma. This approach
    involves creating environments on demand when needed for testing and promptly
    dismantling them once tests are complete. In the pre-cloud era, environment creation
    was a laborious process, often taking days. Now, thanks to programmable cloud
    infrastructure, environments can be spun up and torn down in minutes.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 临时环境为这一困境提供了一个常见的解决方案。这种方法涉及在需要时创建环境进行测试，一旦测试完成就立即拆除。在云时代之前，环境创建是一个费力的过程，通常需要几天时间。现在，多亏了可编程的云基础设施，环境可以在几分钟内启动和拆除。
- en: Infrastructure as Code Management (IaCM) tools simplify ephemeral environments.
    These specialized CI/CD platforms automate the provisioning, configuration, and
    deployment of infrastructure resources using code. Unlike traditional CI/CD tools
    focused on applications, IaCM tools manage the underlying infrastructure. With
    IaCM tools, you define your desired infrastructure state using declarative code
    templates, making configurations more manageable, maintainable, and version-controlled.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 基础设施即代码管理（IaCM）工具简化了临时环境。这些专门的CI/CD平台使用代码自动提供、配置和部署基础设施资源。与专注于应用程序的传统CI/CD工具不同，IaCM工具管理底层基础设施。使用IaCM工具，您可以使用声明性代码模板定义所需的基础设施状态，使配置更加易于管理、维护和版本控制。
- en: Ideally, to achieve our goal of “production-like” test environments, the same
    template should be used to create both pre-production test environments and production
    environments, with adjustments made only to variables. When your pipelines seamlessly
    integrate with IaCM tools, deploying to a “Test” stage automatically triggers
    the creation of a corresponding “Test” environment. Once this environment is provisioned
    and configured with necessary details like IP addresses, passwords, and other
    environment-specific variables, the deployment and testing processes can proceed.
    Upon completion, the IaCM tool efficiently dismantles the environment, freeing
    up resources.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 理想情况下，为了实现“类似生产”的测试环境的目标，应该使用相同的模板来创建预生产测试环境和生产环境，只需调整变量即可。当您的管道无缝集成到IaCM工具中时，部署到“测试”阶段会自动触发相应的“测试”环境的创建。一旦这个环境被配置并提供了必要的详细信息，如IP地址、密码和其他特定于环境的变量，部署和测试过程就可以进行。完成之后，IaCM工具高效地拆除环境，释放资源。
- en: While this strategy offers significant benefits in terms of consistency, flexibility,
    and cost reduction, it’s important to note that the environment creation and teardown
    process can add a few minutes to the overall test cycle. Therefore, ephemeral
    environments might not be the ideal solution for pipelines targeting extremely
    rapid delivery cadences, such as those measured in minutes. However, for delivery
    cycles measured in hours, days, or weeks, ephemeral environments provide a powerful
    way to break bottlenecks, improve consistency, and optimize infrastructure costs.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然这种策略在一致性、灵活性和成本降低方面提供了显著的好处，但需要注意的是，环境创建和拆除过程可能会将几分钟添加到整个测试周期中。因此，临时环境可能不是针对极快速交付周期（如以分钟计）的管道的理想解决方案。然而，对于以小时、天或周为单位的交付周期，临时环境提供了一种强大的方式来打破瓶颈、提高一致性和优化基础设施成本。
- en: Summary
  id: totrans-155
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter we continued to navigate our delivery process, focusing on the
    continuous delivery steps that follow continuous integration. These are primarily
    testing steps, and we reviewed the types of tests that are important for validating
    all aspects of our software. We discussed the importance of reliable and predictable
    pre-production environments to testing and the best practices to give us these.
    By automating all aspects of promoting your release between testing stages, including
    promotion decision making, we can dramatically accelerate the delivery of our
    software.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们继续导航我们的交付流程，重点关注在持续集成之后的持续交付步骤。这些主要是测试步骤，我们回顾了验证我们软件所有方面重要性的测试类型。我们讨论了可靠和可预测的预生产环境对测试的重要性以及提供这些环境的最佳实践。通过自动化测试阶段之间推广您的发布的所有方面，包括推广决策，我们可以显著加快我们软件的交付。
- en: 'After completing testing, there’s only one step left to get our latest software
    release into the hands of users: actually deploying to production. We’ll return
    to this step in [Chapter 7](ch07.html#chapter_7_deploying_to_production_1749354011062634).
    Before we get there, we’ll take the next few chapters to discuss how we can fortify
    our releases to be more secure, more resilient, and more reliable.'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 在完成测试后，我们只剩下一步就可以将我们的最新软件版本交付给用户：实际部署到生产环境。我们将在[第7章](ch07.html#chapter_7_deploying_to_production_1749354011062634)中回到这一步。在我们到达那里之前，我们将用接下来的几章来讨论我们如何加强我们的发布版本，使其更加安全、更加有弹性和更加可靠。
