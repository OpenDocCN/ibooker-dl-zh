["```py\nimport os\nimport requests\nimport json\n\napi_host = \"https://api.stability.ai\"\nurl = f\"{api_host}/v1/engines/list\"           #1\n\nresponse = requests.get(url, headers={\n    \"Authorization\": f\"Bearer {api_key}\"      #2\n})\n\npayload = response.json()                     #3\n\n# format the payload for printing\npayload = json.dumps(payload, indent=2)       #4\nprint(payload)\n```", "```py\n[\n  {\n    \"description\": \"Real-ESRGAN_x2plus upscaler model\",\n    \"id\": \"esrgan-v1-x2plus\",\n    \"name\": \"Real-ESRGAN x2\",\n    \"type\": \"PICTURE\"\n  },\n  {\n    \"description\": \"Stability-AI Stable Diffusion XL v1.0\",\n    \"id\": \"stable-diffusion-xl-1024-v1-0\",\n    \"name\": \"Stable Diffusion XL v1.0\",\n    \"type\": \"PICTURE\"\n  },\n  {\n    \"description\": \"Stability-AI Stable Diffusion v1.5\",\n    \"id\": \"stable-diffusion-v1-5\",\n    \"name\": \"Stable Diffusion v1.5\",\n    \"type\": \"PICTURE\"\n  },\n  …\n]\n```", "```py\nimport base64\nimport os\nimport requests\nimport datetime\nimport re\n\nengine_id = \"stable-diffusion-xl-1024-v1-0\"                   #1\napi_host = \"https://api.stability.ai\"\napi_key = os.getenv(\"STABILITY_API_KEY\")\n\nprompt = \"Laughing panda in the clouds eating bamboo\"           #2\n\n# Set the folder to save the image; make sure it exists\nimage_dir = os.path.join(os.curdir, 'images')\nif not os.path.isdir(image_dir):\n    os.mkdir(image_dir)\n\n# Function to clean up filenames\ndef valid_filename(s):                                         #3\n    s = re.sub(r'[^\\w_.)( -]', '', s).strip()\n    return re.sub(r'[\\s]+', '_', s)\n\nresponse = requests.post(                                      #4\n    f\"{api_host}/v1/generation/{engine_id}/text-to-image\",      #5\n    headers={\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"application/json\",\n        \"Authorization\": f\"Bearer {api_key}\"\n    },\n    json={\n        \"text_prompts\": [\n            {\n                \"text\": f\"{prompt}\",\n            }\n        ],\n        \"cfg_scale\": 7,                                         #6\n        \"height\": 1024,                                        #6\n        \"width\": 1024,                                         #6\n        \"samples\": 1,                                          #6\n        \"steps\": 50,                                           #6\n    },\n)\n\ndata = response.json()                                  #7\n\nfor i, image in enumerate(data[\"artifacts\"]):\n    filename = f\"sd_{valid_filename(prompt)}_{i}_{ [CR]\n               datetime.datetime.now().strftime('%Y%m%d_%H%M%S')}.png\"\n    image_path = os.path.join(image_dir, filename)\n    with open(image_path, \"wb\") as f:\n        f.write(base64.b64decode(image[\"base64\"]))            #8\n```", "```py\nimport base64\nimport os\nimport requests\nimport datetime\nimport re\n\nengine_id = \"stable-diffusion-xl-1024-v1-0\"\napi_host = \"https://api.stability.ai\"\napi_key = os.getenv(\"STABILITY_API_KEY\")\n\norginal_image = \"images/serene_vacation_lake_house.jpg\"\n\n#helper functions \n...\n\nresponse = requests.post(\n    f\"{api_host}/v1/generation/{engine_id}/image-to-image\",\n    headers={\n        \"Accept\": \"application/json\",\n        \"Authorization\": f\"Bearer {api_key}\"\n    },\n    files={\n        \"init_image\": open(orginal_image, \"rb\")\n    },\n    data={\n        \"image_strength\": 0.35,\n        \"init_image_mode\": \"IMAGE_STRENGTH\",\n        \"text_prompts[0][text]\": \"A happy panda eating bamboo in the sky\",\n        \"cfg_scale\": 7,\n        \"samples\": 1,\n        \"steps\": 50,\n        \"sampler\": \"K_DPMPP_2M\"\n    }\n)\n\ndata = response.json()\n\nfor i, image in enumerate(data[\"artifacts\"]):\n    filename = f\"{valid_filename(os.path.basename(orginal_image))}_\n        ↪img2img_{i}_{datetime.datetime.now(). \n        ↪strftime('%Y%m%d_%H%M%S')}.png\"\n    image_path = os.path.join(image_dir, filename)\n\n    with open(image_path, \"wb\") as f:\n        f.write(base64.b64decode(image[\"base64\"]))\n```", "```py\nimport base64\nimport os\nimport requests\nimport datetime\nimport re\n\nengine_id = \"stable-inpainting-512-v2-0\"                          #1\napi_host = \"https://api.stability.ai\"\napi_key = os.getenv(\"STABILITY_API_KEY\")\n\norginal_image = \"images/serene_vacation_lake_house.jpg\"            #2\nmask_image = \"images/mask_serene_vacation_lake_house.jpg\"           #3\nprompt = \" boat with a person fishing and a dog in the boat\"\n\n# helper functions\n...\n\nresponse = requests.post(\n    f\"{api_host}/v1/generation/{engine_id}/image-to-image/masking\",   #4\n    headers={\n        \"Accept\": 'application/json',\n        \"Authorization\": f\"Bearer {api_key}\"\n    },\n    files={\n        'init_image': open(orginal_image, 'rb'),\n        'mask_image': open(mask_image, 'rb'),\n    },\n    data={\n        \"mask_source\": \"MASK_IMAGE_BLACK\",                           #5\n        \"text_prompts[0][text]\": prompt,                             #6\n        \"cfg_scale\": 7,\n        \"clip_guidance_preset\": \"FAST_BLUE\",\n        \"samples\": 4,                                        #7\n        \"steps\": 50,  #8\n    }\n)\n\ndata = response.json()                                            #9\n\nfor i, image in enumerate(data[\"artifacts\"]):\n    filename = f\"{valid_filename(os.path.basename(orginal_image))}_ \n                  ↪masking_{i}_{datetime.datetime.now(). \n                  ↪strftime('%Y%m%d_%H%M%S')}.png\"\n    image_path = os.path.join(image_dir, filename)\n    with open(image_path, \"wb\") as f:\n        f.write(base64.b64decode(image[\"base64\"]))                #10\n```", "```py\nimport base64\nimport os\nimport requests\nimport datetime\nimport re\n\nengine_id = \"esrgan-v1-x2plus\"\napi_host = \"https://api.stability.ai\"\napi_key = os.getenv(\"STABILITY_API_KEY\")\n\norginal_image = \"images/serene_vacation_lake_house.jpg\"\n\n# helper functions\n...\n\nresponse = requests.post(\n    f\"{api_host}/v1/generation/{engine_id}/image-to-image/upscale\",\n    headers={\n        \"Accept\": \"image/png\",\n        \"Authorization\": f\"Bearer {api_key}\"\n    },\n    files={\n        \"image\": open(orginal_image, \"rb\")\n    },\n    data={\n        \"width\": 2048,\n    }\n)\n\nfilename = f\"{valid_filename(os.path.basename(orginal_image))}_\n                             ↪upscale_{datetime.datetime.now().\n                             ↪strftime('%Y%m%d_%H%M%S')}.png\"\nimage_path = os.path.join(image_dir, filename)\n\nwith open(image_path, \"wb\") as f:\n    f.write(response.content)\n```"]