["```py\n%pip install langchain==0.3.19\n```", "```py\n%pip install langchain-community\n```", "```py\n#Installing bs4 package\n%pip install bs4==0.0.2 --quiet\n\n#Importing the AsyncHtmlLoader\nfrom langchain_community.document_loaders import AsyncHtmlLoader\n\n#This is the URL of the Wikipedia page on the 2023 Cricket World Cup\nurl=\"https://en.wikipedia.org/wiki/2023_Cricket_World_Cup\"\n\n#Invoking the AsyncHtmlLoader\nloader = AsyncHtmlLoader (url)\n\n#Loading the extracted information\nhtml_data = loader.load()\n```", "```py\nprint(data)\n```", "```py\n>>[Document(page_content='<!DOCTYPE html>\\n<html class=\"client-nojs vector-feature-language-in-header-enabled………………………………………………………………………………………………….of In the knockout stage, India and Australia beat New Zealand and South Africa respectively to advance to the final, played on 19 November at <a href=\"/wiki/Narendra_Modi_Stadium\" title=\"Narendra Modi Stadium\">Narendra Modi Stadium</a>. Australia won by 6 wickets, winning their sixth Cricket World Cup title………………………………………………… \"datePublished\":\"2013-06-29T19:20:08Z\",\"dateModified\":\"2024-05-01T05:16:34Z\",\"image\":\"https:\\\\/\\\\/upload.wikimedia.org\\\\/wikipedia\\\\/en\\\\/e\\\\/eb\\\\/2023_CWC_Logo.svg\",\"headline\":\"13th edition of the premier international cricket competition\"}</script>\\n</body>\\n</html>', metadata={'source': 'https://en.wikipedia.org/wiki/2023_Cricket_World_Cup', 'title': '2023 Cricket World Cup - Wikipedia', 'language': 'en'})]\n```", "```py\n#Install html2text\n%pip install html2text==2024.2.26 –quiet\n\n#Import Html2TextTransformer\nfrom langchain_community.document_transformers import Html2TextTransformer\n\n#Assign the Html2TextTransformer function\nhtml2text = Html2TextTransformer()\n\n#Call transform_documents\nhtml_data_transformed = html2text.transform_documents(data)\n\nprint(html_data_transformed[0].page_content)\n```", "```py\n>>Jump to content  Main menu  Main menu  move to sidebar hide Navigation    * Main page   * Contents   * Current events   * Random article   * About Wikipedia   * Contact us   * Donate  Contribute………….In the knockout stage, India and Australia beat New Zealand and South Africa respectively to advance to the final, played on 19 November at Narendra Modi Stadium. Australia won by 6 wickets, winning their sixth Cricket World Cup title…… * This page was last edited on 1 May 2024, at 05:16 (UTC).   * Text is available under the Creative Commons Attribution-ShareAlike License 4.0; additional terms may apply. By using this site, you agree to the Terms of Use and Privacy Policy. Wikipedia® is a registered trademark of the Wikimedia Foundation, Inc., a non-profit organization.    * Privacy policy   * About Wikipedia   * Disclaimers   * Contact Wikipedia   * Code of Conduct * Developers   * Statistics   * Cookie statement   * Mobile view    *\n```", "```py\n#import libraries\nfrom langchain.text_splitters import CharacterTextSplitter\n#Set the CharacterTextSplitter parameters\ntext_splitter = CharacterTextSplitter(\n    separator=\"\\n\",    #The character that should be used to split\n    chunk_size=1000,   #Number of characters in each chunk\n    chunk_overlap=200, #Number of overlapping characters between chunks\n)\n\n#Create Chunks\nchunks=\ntext_splitter.create_documents(\n[html_data_transformed[0].page_content]\n)\n\n#Show the number of chunks created\nprint(f\"The number of chunks created : {len(chunks)}\")\n\n>>The number of chunks created: 67\n```", "```py\nchunks[4].page_content[-200:]\n\n>> 'on was to be played from 9 February to 26 March\\n2023.[3][4] In July 2020 it was announced that due to the disruption of the\\nqualification schedule by the COVID-19 pandemic, the start of the tournament'\n\nchunks[5].page_content[:200]\n\n>> '2023.[3][4] In July 2020 it was announced that due to the disruption of the\\nqualification schedule by the COVID-19 pandemic, the start of the tournament\\nwould be delayed to October.[5][6] The ICC rele'\n```", "```py\n#Installing lxml\n%pip install lxml==5.3.1 --quiet\n\n# Import the HTMLHeaderTextSplitter library\nfrom langchain_text_splitters import HTMLSectionSplitter\n\n# Set URL as the Wikipedia page link\nurl=\"https://en.wikipedia.org/wiki/2023_Cricket_World_Cup\"\n\nloader = AsyncHtmlLoader (url)\n\nhtml_data = loader.load()\n\n# Specify the header tags on which splits should be made\nsections_to_split_on=[\n    (\"h1\", \"Header 1\"),\n    (\"h2\", \"Header 2\"),\n    (\"table \", \"Table\"),\n    (\"p\", \"Paragraph\")\n]\n\n# Create the HTMLHeaderTextSplitter function\nsplitter = HTMLSectionSplitter(sections_to_split_on)\n\n# Create splits in text obtained from the URL\nSplit_content = splitter.split_text(html_data[0].page_content)\n```", "```py\nlen(split_content)\n\n>> 231\n```", "```py\nfrom langchain.text_splitter import RecursiveCharacterTextSplitter\n\ntext_splitter = RecursiveCharacterTextSplitter(\nseparators=[\"\\n\\n\",\"\\n\",\".\"]\nchunk_size=1000, chunk_overlap=100, \n)\n\nfinal_chunks = text_splitter.split_documents(split_content)\n```", "```py\nlen(chunks)\n\n>> 285\n```", "```py\n# Import HuggingFaceEmbeddings from embeddings library\nfrom langchain_huggingface import HuggingFaceEmbeddings\n\n# Instantiate the embeddings model. The embeddings model_name can be changed as desired\nembeddings = \nHuggingFaceEmbeddings(\nmodel_name=\"sentence-transformers/all-mpnet-base-v2\"\n)\n\n# Create embeddings for all chunks\nhf_embeddings = \nembeddings.embed_documents(\n[chunk.page_content for chunk in final_chunks]\n)\n\n#Check the length(dimension) of the embedding\nlen(hf_embeddings [0])\n>> 768\n```", "```py\n# Install the langchain openai library\n%pip install langchain-openai==0.3.7 --quiet\n\n# Import OpenAIEmbeddings from the library\nfrom langchain_openai import OpenAIEmbeddings\n\n# Set the OPENAI_API_KEY as the environment variable\nimport os\nos.environ[\"OPENAI_API_KEY\"] = <YOUR_API_KEY>\n\n# Instantiate the embeddings object\nembeddings = OpenAIEmbeddings(model=\"text-embedding-3-small\")\n\n# Create embeddings for all chunks\nopenai_embeddings = \nembeddings.embed_documents(\n[chunk.page_content for chunk in chunks]\n)\n\n#Check the length(dimension) of the embedding\nlen(openai_embedding[0])\n\n>> 1536\n```", "```py\n# Install FAISS-CPU\n%pip install faiss-cpu==1.10.0 --quiet\n\n# Import FAISS class from vectorstore library\nfrom langchain_community.vectorstores import FAISS\nfrom langchain_community.docstore.in_memory import InMemoryDocstore\n\n# Import OpenAIEmbeddings from the library\nfrom langchain_openai import OpenAIEmbeddings\n\n# Set the OPENAI_API_KEY as the environment variable\nimport os\nos.environ[\"OPENAI_API_KEY\"] = <YOUR_API_KEY>\n\n# Chunks from Section 3.3\nFinal_chunks=final_chunks\n\n# Instantiate the embeddings object\nembeddings=OpenAIEmbeddings(model=\"text-embedding-3-small\")\n\n# Instantiate the FAISS object\nvector_store = FAISS(\n    embedding_function=embeddings,\n    index=index,\n    docstore=InMemoryDocstore(),\n    index_to_docstore_id={},\n)\n\n# Add the chunks\nvector_store.add_documents(documents=final_chunks)\n\n# Check the number of chunks that have been indexed\nvector_store.index.ntotal\n\n>> 285\n```", "```py\n# Original Question\nquery = \"Who won the 2023 Cricket World Cup?\"\n\n# Ranking the chunks in descending order of similarity\ndocs = vector_store.similarity_search(query)\n\n# Printing one of the top-ranked chunk\nprint(docs[0].page_content)\n```"]