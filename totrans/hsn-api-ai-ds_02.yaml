- en: Chapter 1\. Creating APIs That Data Scientists Will Love
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Application programming interfaces (APIs) are important to data scientists.
    But how often are data scientists considered by API designers and developers?
    Data scientists frequently use APIs as data sources for their work. They have
    some needs that are different than those of software developers or other consumers.
    If API producers want to make data scientists happy, they will do well to serve
    these needs.
  prefs: []
  type: TYPE_NORMAL
- en: How Do Data Scientists Use APIs?
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The [Anaconda State of Data Science Report](https://oreil.ly/anaconda) found
    that data scientists spend the bulk of their time performing three main activities:
    preparing or cleansing data (38%); creating reports, presentations, or data visualizations
    (29%); and selecting, training, and deploying models (27%). This book demonstrates
    how data scientists use APIs for these tasks.'
  prefs: []
  type: TYPE_NORMAL
- en: '*Preparing or cleansing data* often occurs when data scientists perform *exploratory
    data analysis (EDA)* on a new dataset by analyzing its contents, formats, and
    patterns. Other times, this work is part of a scheduled *data pipeline*, which
    is a sequence of software tasks that pull from multiple data sources and reformat
    or remove errors from the data so that it can be used downstream in visualizations,
    reports, or models. *Data engineer* is a another job title for people who specialize
    in these tasks. [Chapter 9](ch09.html#chapter_9) will demonstrate using APIs in
    exploratory data analysis. [Chapter 10](ch10.html#chapter_10) will demonstrate
    using APIs in data pipelines.'
  prefs: []
  type: TYPE_NORMAL
- en: '*Creating reports and visualizations* are important activities to demonstrate
    insights gleaned from data and present the data in a way that enables an organization
    to monitor its operations or make better decisions. These are also referred to
    as *analytics*. Data scientists make calls to APIs to provide data for a variety
    of analytics products. *Data analyst* is another job title for people who specialize
    in these tasks. [Chapter 9](ch09.html#chapter_9) will show how data scientists
    create visualizations using Python in Jupyter Notebooks, and [Chapter 11](ch11.html#chapter_11)
    will show how interactive visualizations can be deployed in applications using
    Python and Streamlit.'
  prefs: []
  type: TYPE_NORMAL
- en: '*Training and deploying data science models* are activities that use machine
    learning or other mathematical techniques to make predictions, cluster data into
    groups, perform natural language processing, and accomplish a variety of other
    tasks. The use of APIs here can be divided into two buckets: API consumers and
    API producers. As consumers, data scientists use APIs as input sources to their
    models and call machine learning APIs to perform tasks. As producers, they deploy
    their own models as APIs for others to use. *Machine learning engineer* is another
    job title for people who specialize in deploying models, and [Chapter 13](ch13.html#chapter_13)
    will demonstrate how to deploy a machine learning model using FastAPI and Python.'
  prefs: []
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: Application programming interface (API) is a term that has a variety of meanings
    in computer programming. This book will focus on web APIs, which are software
    programs that you call using HTTP to retrieve data or execute commands. API producers
    develop and host an API for internal consumers inside their network or for external
    consumers on the internet. API consumers send a request to an API. The API receives
    this request and sends back a response. This is API communication.
  prefs: []
  type: TYPE_NORMAL
- en: What Tools Do Data Scientists Use?
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Data scientists use a range of commercial and open source software tools to
    perform their work, along with commercial cloud platforms. According to the State
    of Data Science report, the most common programming languages that data scientists
    use are Python (58% always or frequently use it) and SQL (42% always or frequently
    use it). The R language did not rank highly in this survey, but in my experience
    it is used by many data scientists. R is popular in football analytics thanks
    to the [nflverse](https://github.com/nflverse) collection of data and R packages.
    The program code in this book will use both Python and SQL.
  prefs: []
  type: TYPE_NORMAL
- en: For a development environment, data scientists typically are comfortable using
    command-line tools (such as the Bash shell for Linux or PowerShell for Windows).
    They use IDEs such as Visual Studio Code (VS Code), PyCharm, or RStudio. Data
    scientists also use notebook environments, which are unique interactive programming
    environments that allow Markdown descriptions to be interlaced with program code
    and output of commands.
  prefs: []
  type: TYPE_NORMAL
- en: Data scientists use a variety of tools to maintain standalone development environments,
    such as the venv and conda libraries. Docker in an important tool for packaging
    environments and deploying applications. *Dev containers* build on Docker to provide
    full-featured virtual environments with an embedded IDE—GitHub Codespaces is an
    example that you will use in this book.
  prefs: []
  type: TYPE_NORMAL
- en: Designing APIs for Data Scientists
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Now that you know a little bit about the tasks data scientists perform and
    the tools they like to use, here are some tips for designing APIs they will love.
    This section will focus on Python, but many of the tips are also appropriate for
    the R language:'
  prefs: []
  type: TYPE_NORMAL
- en: Your API should always return data in JSON format.
  prefs: []
  type: TYPE_NORMAL
- en: Your API endpoints should return data in JSON format, rather than XML. The Python
    ecosystem has strong support for JSON, which is a lightweight data format that
    supports hierarchies and is human-readable. JSON can be converted into lists and
    dictionaries, which are fundamental Python data structures. Most web APIs return
    JSON as a standard already, so this isn’t much of a stretch.
  prefs: []
  type: TYPE_NORMAL
- en: You should provide an SDK to consume the API.
  prefs: []
  type: TYPE_NORMAL
- en: While Python can call APIs directly from within the code, data scientists are
    accustomed to installing Python libraries using commands such as `pip` and `conda`.
    Publishing a Python library will make life easier for the data scientists and
    allow you to enforce good coding practices in the way your API is called.
  prefs: []
  type: TYPE_NORMAL
- en: You should provide standard external identifiers in your data.
  prefs: []
  type: TYPE_NORMAL
- en: Data scientists often combine data from multiple sources in their visualizations
    and data pipelines. If you provide industry-standard identifiers, it will allow
    the data scientist to more easily join data sources.
  prefs: []
  type: TYPE_NORMAL
- en: Your data should conform to data type definitions.
  prefs: []
  type: TYPE_NORMAL
- en: Data scientists use API data for performing calculations and creating models,
    so data type validity is important. Where an invalid character in an API can probably
    display fine on a web page, an invalid number in a numeric field could make a
    record unusable for data science tasks. So, data returned from APIs must conform
    to its definition, such as an OpenAPI Specification (OAS) file.
  prefs: []
  type: TYPE_NORMAL
- en: You should provide a method for bulk downloads.
  prefs: []
  type: TYPE_NORMAL
- en: When data scientists are analyzing a new dataset or training a machine learning
    model, they often examine the full contents. Because a full dataset may be quite
    large, making an API call may strain the resources of the API as well as the data
    scientist’s local environment. Timeouts and memory overflows can cause frustration
    and delays. If the API provider provides a bulk download capability, this streamlines
    this analysis. The bulk download is also useful when a data scientist is performing
    the initial full load of a new data pipeline. Useful data formats for data scientists
    include *comma-separated values* (CSV) and [Apache Parquet](https://oreil.ly/UYELV).
  prefs: []
  type: TYPE_NORMAL
- en: Your API should support querying by last changed date.
  prefs: []
  type: TYPE_NORMAL
- en: After data scientists have performed the initial full load of a data pipeline,
    they want to process regular updates. A typical data pipeline schedule would be
    to run a recurring job daily to process the *deltas*, or records that have changed.
    If the API provides a last changed date query parameter, this allows the data
    pipeline to retrieve any new records or updated records.
  prefs: []
  type: TYPE_NORMAL
- en: Introducing Your Part I Portfolio Project
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: You will address all of these design tips as you build your Part I portfolio
    project, which demonstrates your ability to develop an API and an SDK. Many of
    these are automatically addressed for you by the tools you have chosen, and a
    few you will custom-code yourself.
  prefs: []
  type: TYPE_NORMAL
- en: 'Here is an overview of the work ahead of you:'
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 1](#chapter_1): Understanding your users and selecting the right API'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Chapter 2](ch02.html#chapter_2): Selecting your API architecture and setting
    up your development environment'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Chapter 3](ch03.html#chapter_3): Creating your database'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Chapter 4](ch04.html#chapter_4): Developing the FastAPI code'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Chapter 5](ch05.html#chapter_5): Documenting your API'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Chapter 6](ch06.html#chapter_6): Deploying your API to the cloud'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Chapter 7](ch07.html#chapter_7): Creating an SDK for your API'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'You will follow a realistic scenario in each chapter, with each step building
    on the previous steps. It’s time to dive into that scenario now, from an industry
    that is close to my heart: fantasy sports.'
  prefs: []
  type: TYPE_NORMAL
- en: Every API Has a Story
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Every API has a story and a reason it gets built. The story of some APIs is
    straight out of the movie *Field of Dreams*: “If you build it, they will come.”
    A company builds an API without performing any research on the potential users—sometimes
    customers come, and other times an API languishes unused and unremembered. In
    contrast, successful APIs fulfill the needs of real consumers. That’s the case
    with the API you will build in this book.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Meeting Your Company: SportsWorldCentral'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: You are a software developer working for a website named SportsWorldCentral,
    SWC for short. SWC provides sports news and also hosts fantasy games such as fantasy
    football and fantasy soccer. SWC’s customers are sports fans who join up in a
    league with friends and draft real-world players onto their teams. They watch
    real-world games or matches, and when the players on their teams do well, they
    score points for their fantasy team. SWC helps all those owners keep track of
    their teams and gives live scoring updates each week as fantasy managers win or
    lose.
  prefs: []
  type: TYPE_NORMAL
- en: SWC’s fantasy football website contains information about an entire fantasy
    football league, such as shown in [Figure 1-1](#swc_league_home).
  prefs: []
  type: TYPE_NORMAL
- en: '![SWC League Home](assets/haad_0101.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1-1\. SWC League home page
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: The website also has a large amount of detail about individual fantasy teams,
    as shown in [Figure 1-2](#swc_my_team).
  prefs: []
  type: TYPE_NORMAL
- en: '![SWC My Team page](assets/haad_0102.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1-2\. SWC My Team page
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: SWC is an imaginary company, but fantasy sports is a very real and thriving
    entertainment industry. There are around 40 million fantasy football managers,
    according to fantasy industry estimates, making fantasy football the largest US
    fantasy sport. Fantasy soccer is popular worldwide. For example, more than 10
    million active managers compete on the [Fantasy Premier League website](https://fantasy.premierleague.com),
    which follows just one of the major international soccer leagues. Real-world examples
    of fantasy league host websites include Yahoo.com, Sleeper, MyFantasy​Lea⁠gue.com,
    and many others.
  prefs: []
  type: TYPE_NORMAL
- en: In addition to fantasy league web hosts, fantasy managers pay for subscriptions
    to fantasy advice websites such as [The Fantasy Footballers](https://oreil.ly/Hu6Pn),
    [PFF](https://oreil.ly/qEVlz), and [FantasyPros](https://oreil.ly/-9x4F). These
    websites provide highly customized analytical products such as dashboards, charts,
    predictive models, and recommendation engines to help fantasy managers run their
    teams. To customize this content to a fantasy manager’s team, the fantasy league
    host needs to provide an API that the fantasy advice websites can consume.
  prefs: []
  type: TYPE_NORMAL
- en: SWC Needs an API
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The web team that manages the SWC website has seen a rising amount of traffic
    on the Fantasy Football web pages from *web scrapers*, which are computer programs
    that read websites and extract the data from them. Instead of seeing this as a
    problem, the savvy SWC product owner realizes this is an indicator of a potential
    market: people want to use the SWC Fantasy Football data.'
  prefs: []
  type: TYPE_NORMAL
- en: 'The product owner reaches out across the company to identify any other requests
    received for data access or data sharing. The help desk finds dozens of customer
    support tickets asking why many of the advice websites can’t import their league
    data from SWC—indicating a need to share data with those sites. Additional customer
    tickets are from data scientists and other data-savvy users requesting direct
    access to the football data from the website so they can create custom dashboards
    and metrics. Independent mobile app developers have also offered to develop mobile
    apps to serve SWC users on the mobile app stores if APIs were made available.
    The product owner decides APIs show the potential to increase the company’s reach
    and grow the business. The question is: what type of APIs should SWC create?'
  prefs: []
  type: TYPE_NORMAL
- en: Selecting the First API Products
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The SportsWorldCentral product team performs additional user research by contacting
    the individuals who have placed help desk tickets and requested features. They
    also send a survey to their fantasy customers and reach out to the top five fantasy
    advice websites. They review online message boards and scour social media to find
    complaints or comments related to their website. And then they conduct some competitive
    analyses of other fantasy league hosts to see what APIs they provide.
  prefs: []
  type: TYPE_NORMAL
- en: Identifying Potential Users
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Based on your research, you narrow your focus down to a few users. Your fantasy
    manager customers haven’t asked for APIs, but they want the things that APIs will
    bring. They want to import their teams into the fantasy advice websites so that
    they can get advice on managing their teams. The advice website providers want
    to import SWC leagues into their websites so that SWC managers will subscribe
    to their service. Data science users would like to create analytics dashboards,
    charts, and models using the data from the website, combined with other public
    sources. Mobile app developers would like to create apps in the mobile app stores
    to help SWC managers run their teams. Generative AI developers would also like
    to create chatbots and other applications that can read current SWC data and give
    advice to managers.
  prefs: []
  type: TYPE_NORMAL
- en: '[Table 1-1](#api_user_types_chapter_1) summarizes these users with the tasks
    they are trying to perform and their *pain points*, which are problems they face
    when trying to perform that task.'
  prefs: []
  type: TYPE_NORMAL
- en: Table 1-1\. Potential consumers for your APIs
  prefs: []
  type: TYPE_NORMAL
- en: '| User type | Primary tasks | Pain points |'
  prefs: []
  type: TYPE_TB
- en: '| --- | --- | --- |'
  prefs: []
  type: TYPE_TB
- en: '| Current SWC team managers | Viewing teams and leagues in fantasy advice sites
    | SWC league host is not supported by advice sites, and no mobile apps are available.
    |'
  prefs: []
  type: TYPE_TB
- en: '| Advice website provider | Giving advice and creating analytics products that
    support as many league hosts as possible. APIs are the preferred method. | SWC
    data is not accessible through APIs or any other method. |'
  prefs: []
  type: TYPE_TB
- en: '| Data science users | Creating analytics products | They can’t access SWC
    data reliably. |'
  prefs: []
  type: TYPE_TB
- en: '| Mobile app developers | Creating third-party apps using SWC data | SWC is
    not available for use by mobile apps. |'
  prefs: []
  type: TYPE_TB
- en: '| Generative AI developers | Creating chat agents and LLM apps using SWC data
    | No easy access to current SWC data. |'
  prefs: []
  type: TYPE_TB
- en: 'Although it is exciting to see so many potential users of APIs, the SWC product
    manager needs to select the first APIs to create. You work with the product managers
    to identify the APIs that would satisfy these users, what data would be required
    to support them, and any changes that would need to be made to the existing website.
    With that information, the product managers apply a method from design thinking,
    which is to evaluate the potential products using these three criteria:'
  prefs: []
  type: TYPE_NORMAL
- en: '*User desirability*: Your users want the product.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*Technical feasibility*: Your technical environment and team can create it.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*Economic viability*: You expect it to be worth the investment.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Creating User Stories
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'After applying these criteria, they identify user needs that can be fulfilled
    with existing data without any major changes to the website. To make sure they
    understand what they’ll be building, they create *user stories*, which are informal
    descriptions of a feature or product that are written from the end user’s perspective.
    A common template for user stories is the following:'
  prefs: []
  type: TYPE_NORMAL
- en: As a (*user type*)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: I want to (*goal or intent*)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: So that (*motivation or benefits*)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The SWC product managers create the following user stories to document the
    needs they learned their users have:'
  prefs: []
  type: TYPE_NORMAL
- en: As an *SWC team manager*, I want to *view my fantasy league and team on advice
    websites* so that *I can win my league and beat my friends.*
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: As an *advice website provider*, I want to *create analytics products such as
    roster advice, league analysis, and playoff predictions using current-season SWC
    data* so that *I can increase the number of customers who use my website and increase
    ad or subscription revenue.*
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: As a *data science user*, I want to *create analytics products such as dashboards,
    charts, models, and metrics using SWC data* so that *I can demonstrate and grow
    my data science skills, explore hypotheses and hunches about fantasy data, and
    build my reputation in both fields.*
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: As a *generative AI developer*, I want to *create AI applications such as chatbots
    using generative AI and LLMs* so that *I can provide fantasy management advice
    to SWC fantasy managers.*
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Congratulations! The user research you conducted has proven very valuable. You
    identified several users who need your data and identified ways to serve them
    that should generate new business for your company. The user stories you captured
    make an excellent starting point for your API development, which will begin in
    [Chapter 2](ch02.html#chapter_2).
  prefs: []
  type: TYPE_NORMAL
- en: Additional Resources
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'To learn more about API product management, I recommend *APIs: A Strategy Guide*
    by Daniel Jacobson, Greg Brail, and Dan Woods (O’Reilly, 2011) and *Continuous
    API Management, 2nd Edition*, by Mehdi Medjaoui, Erik Wilde, Ronnie Mitra, and
    Mike Amundsen (O’Reilly, 2021).'
  prefs: []
  type: TYPE_NORMAL
- en: For more details about design thinking and human-centered design, read the [IDEO
    Field Guide to Human-Centered Design](https://oreil.ly/GZW5E).
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'You accomplished a lot in this first chapter, and the fun is just starting.
    Let’s review what you have learned so far:'
  prefs: []
  type: TYPE_NORMAL
- en: You learned the tasks that data scientists perform and the tools they use.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: You learned how to design an API that data scientists will love.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'You identified several potential consumers and found two that you could help
    now: data science users and advice websites.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: You focused on user desirability, technical feasibility, and economic viability
    to select three user stories to begin your API development.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: In [Chapter 2](ch02.html#chapter_2), you will start creating an API to fulfill
    the needs you identified in this chapter. It will, of course, be an API that data
    scientists and AI will love.
  prefs: []
  type: TYPE_NORMAL
