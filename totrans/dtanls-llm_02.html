<html><head></head><body><div id="book-content"><div id="sbo-rt-content"><div class="readable-text" id="p1"> 
   <h1 class=" readable-text-h1" id="ch__chat"> <span class="chapter-title-numbering"><span class="num-string">2</span></span> <span class="title-text"> Chatting with ChatGPT</span> </h1> 
  </div> 
  <div class="introduction-summary"> 
   <h3 class="introduction-header">This chapter covers</h3> 
   <ul> 
    <li id="p2">Accessing the ChatGPT web interface</li> 
    <li id="p3">Using ChatGPT directly for data processing</li> 
    <li id="p4">Using ChatGPT indirectly for data processing</li> 
   </ul> 
  </div> 
  <div class="readable-text" id="p5"> 
   <p>Time to meet ChatGPT! In this chapter, we will have a chat with ChatGPT and start using it for data analysis. If you have never used ChatGPT, this chapter will teach you how to access it and give you a first impression of its capabilities (as well as its limitations). If you have used ChatGPT but have not yet done so for data analysis, this chapter will show you some of the many ways you can exploit ChatGPT in this context.</p> 
  </div> 
  <div class="readable-text" id="p6"> 
   <p>We will first discuss a web interface that will give you access to OpenAI’s ChatGPT. We will go over the OpenAI registration process, discuss the main functions offered by the interface, and use it to have a first dialogue with ChatGPT. After that, we will start using ChatGPT to analyze data in a few example scenarios. We will see two different ways to exploit ChatGPT for data analysis: directly and indirectly. When using ChatGPT directly, we have it do the actual data processing given data and a task description as input. This works for data types that ChatGPT processes natively (such as text data).</p> 
  </div> 
  <div class="readable-text" id="p7"> 
   <p>On the other hand, we can also use ChatGPT to analyze data indirectly. Here, ChatGPT merely serves as a translator, translating descriptions of analysis tasks into formal languages that are understood by external data-processing tools. The actual data processing is then handled by those external tools. In this chapter, you will see that ChatGPT is useful in both scenarios.</p> 
  </div> 
  <div class="readable-text" id="p8"> 
   <h2 class=" readable-text-h2" id="accessing-the-web-interface"><span class="num-string browsable-reference-id">2.1</span> Accessing the web interface</h2> 
  </div> 
  <div class="readable-text" id="p9"> 
   <p>Open your web browser, and type <a href="https://chat.openai.com/">https://chat.openai.com/</a> into the address bar. You will create an OpenAI account that enables you to use ChatGPT. If you already have an account, you can skip the following steps, log in to your account, and proceed with the next section.</p> 
  </div> 
  <div class="readable-text" id="p10"> 
   <p>To create an account, click the Signup button. This brings you to the screen shown in figure <a href="#fig__signup">2.1</a>.</p> 
  </div> 
  <div class="browsable-container figure-container" id="p11">  
   <img alt="figure" src="../Images/CH02_F01_Trummer.png" width="1100" height="1623"/> 
   <h5 class=" figure-container-h5" id="fig__signup"><span class="num-string">Figure <span class="browsable-reference-id">2.1</span></span> Signup page for an OpenAI account. Enter your email address, and click the Continue button, or sign up using a Google account or a Microsoft account.</h5>
  </div> 
  <div class="readable-text" id="p12"> 
   <p>You have several options when signing up for an OpenAI account:</p> 
  </div> 
  <ul> 
   <li class="readable-text" id="p13">Sign up using a Google account (by clicking Continue with Google).</li> 
   <li class="readable-text" id="p14">Sign up using a Microsoft account (by clicking Continue with Microsoft Account).</li> 
   <li class="readable-text" id="p15">Sign up with an arbitrary email address by entering that address into the Email Address field and then clicking Continue. After that, follow the instructions given on the screen.</li> 
  </ul> 
  <div class="readable-text" id="p16"> 
   <p>After creating your account using any of these options, log in to your newly created account, and continue with the steps outlined in the next section.</p> 
  </div> 
  <div class="callout-container sidebar-container"> 
   <div class="readable-text" id="p17"> 
    <h5 class=" callout-container-h5 readable-text-h5">OpenAI subscriptions</h5> 
   </div> 
   <div class="readable-text" id="p18"> 
    <p> OpenAI offers different types of accounts; some are free, and others come with a monthly fee. For the following examples, a free account is sufficient. You may still choose to sign up for the paid subscription to gain access to more models and get faster answers from ChatGPT. Depending on which subscription you choose, your screens may look slightly different from the screenshots in this chapter.</p> 
   </div> 
  </div> 
  <div class="readable-text" id="p19"> 
   <h2 class=" readable-text-h2" id="making-introductions"><span class="num-string browsable-reference-id">2.2</span> Making introductions</h2> 
  </div> 
  <div class="readable-text" id="p20"> 
   <p>After logging in to your OpenAI account, you should see the interface shown in figure <a href="#fig__gptstart">2.2</a>.</p> 
  </div> 
  <div class="browsable-container figure-container" id="p21">  
   <img alt="figure" src="../Images/CH02_F02_Trummer.png" width="1100" height="919"/> 
   <h5 class=" figure-container-h5" id="fig__gptstart"><span class="num-string">Figure <span class="browsable-reference-id">2.2</span></span> ChatGPT web interface. Interact with ChatGPT by clicking predefined example inputs or entering arbitrary text into the input field. Click the New Chat button to reset the conversation.</h5>
  </div> 
  <div class="readable-text" id="p22"> 
   <p>This interface enables you to have a dialogue with ChatGPT by submitting text input and receiving answers. Let’s take a moment to understand the most important interface components in figure <a href="#fig__gptstart">2.2</a>. First, you have a couple of predefined input examples. You can simply click any of those examples to get the conversation started. Besides predefined examples, you have the option to enter arbitrary text into a text field. We will refer to this interface element as the <em>input field</em> in the rest of this chapter. Finally, you can start a new conversation at any point via the New Chat button. Doing so erases ChatGPT’s memory of all prior dialogue steps.</p> 
  </div> 
  <div class="callout-container sidebar-container"> 
   <div class="readable-text" id="p23"> 
    <h5 class=" callout-container-h5 readable-text-h5">Which model should I choose?</h5> 
   </div> 
   <div class="readable-text" id="p24"> 
    <p> Clicking the button labeled Model in figure <a href="#fig__gptstart">2.2</a> enables you to choose between different language models. ChatGPT supports several models from OpenAI’s GPT model series. The examples discussed next should, in principle, work with any of the available models. You might try a few different models to see how the output differs. Depending on your subscription, the number of requests you can send to specific models may be limited.</p> 
   </div> 
  </div> 
  <div class="readable-text" id="p25"> 
   <p>Time to say hello! Click the input field, and say hello to ChatGPT. You can type anything. ChatGPT has been trained to conduct dialogues with human users and should be able to answer most inputs in a reasonable manner. For instance, tell ChatGPT a little about yourself! Ask for opinions or help with upcoming tasks! Or, perhaps, ask it to write a poem about a topic of your choice! You may want to spend a few minutes chatting with ChatGPT to get a better sense of its capabilities as well as its limitations.</p> 
  </div> 
  <div class="readable-text" id="p26"> 
   <p>Note that ChatGPT can refer back to prior inputs. For instance, if you are not satisfied with a prior reply, you may ask ChatGPT to correct it or to change it. No need to repeat the original request. Also, if you are not satisfied with an answer but do not want to provide further clarifications, try the button labeled Regenerate in figure <a href="#fig__regenerate">2.3</a>.</p> 
  </div> 
  <div class="browsable-container figure-container" id="p27">  
   <img alt="figure" src="../Images/CH02_F03_Trummer.png" width="347" height="188"/> 
   <h5 class=" figure-container-h5" id="fig__regenerate"><span class="num-string">Figure <span class="browsable-reference-id">2.3</span></span> After ChatGPT generates an answer, the Regenerate button appears below the generated response. Click this button to receive an alternative answer to your last input.</h5>
  </div> 
  <div class="readable-text" id="p28"> 
   <p>Clicking that button will cause ChatGPT to regenerate its last answer. As ChatGPT uses a certain degree of randomization while generating output, chances are good that the second output will be different (and possibly better) than the first version.</p> 
  </div> 
  <div class="readable-text" id="p29"> 
   <p>Typically, all text you enter is part of the same conversation. If at any time you want to start a new chat (essentially erasing ChatGPT’s “memory” of the prior conversation), simply click the button labeled New Chat in figure <a href="#fig__gptstart">2.2</a>. Note that prior conversations are not lost, even when you start a new one. Instead, OpenAI stores past conversations and enables users to go back and study them (or continue the conversation from where it ended last time). You can access a history of prior conversations by clicking the button labeled History in figure <a href="#fig__gptstart">2.2</a>. Each conversation is assigned a short title, generated automatically based on the conversation content.</p> 
  </div> 
  <div class="readable-text" id="p30"> 
   <p>Using ChatGPT for the first time is often an impressive experience. ChatGPT generates polished and reasonable answers for a variety of topics. This may mislead users into putting too much faith in the information it provides. It’s important to avoid losing sight of the various limitations that apply to the current generation of language models. In general, always verify the output of the language model before relying on it.</p> 
  </div> 
  <div class="callout-container sidebar-container"> 
   <div class="readable-text" id="p31"> 
    <h5 class=" callout-container-h5 readable-text-h5">What are hallucinations?</h5> 
   </div> 
   <div class="readable-text" id="p32"> 
    <p> The term <em>hallucination</em> in language models refers to situations in which a language model invents new content in the absence of information and integrates it into answers. Often the result sounds convincing, and it can be hard to recognize instances of hallucination. Ongoing research [1] explores methods to reduce the chances of hallucinations. However, at the time of writing, no reliable strategies to avoid hallucinations are known. So don’t blindly trust information from language models, and always use alternative sources for corroboration.</p> 
   </div> 
  </div> 
  <div class="readable-text" id="p33"> 
   <h2 class=" readable-text-h2" id="processing-text-with-chatgpt"><span class="num-string browsable-reference-id">2.3</span> Processing text with ChatGPT</h2> 
  </div> 
  <div class="readable-text" id="p34"> 
   <p>Let’s start using ChatGPT for data processing! In this section, we will use ChatGPT to analyze text, a common type of unstructured data. At the same time, text is ChatGPT’s native input and output format. This means we can use ChatGPT directly to analyze our (text) data without involving external analysis tools. That helps keep things simple, and that’s what we want for our first steps toward ChatGPT-supported data analysis.</p> 
  </div> 
  <div class="readable-text" id="p35"> 
   <p>Imagine the following situation: you’re an employee of Banana, a producer of various consumer electronics, including laptops and smartphones. The Banana website enables users to post free-form text comments. It turns out that many users comment on their satisfaction or dissatisfaction with specific Banana products. Users often point out specific aspects of these products that stand out or need improvement. In aggregate, all those reviews should be very helpful to inform the design of future Banana products! But to make that possible, you first need to analyze all of them and extract common points. Your boss asks you to do just that: prepare statistics that summarize reviews for different products and product categories. Also, while you’re reading through reviews, your boss encourages you to write a few nice replies to the product reviews. Ideally, you want to avoid spending the next weeks reading and aggregating reviews. Can’t you automate that? Perhaps ChatGPT can help.</p> 
  </div> 
  <div class="readable-text" id="p36"> 
   <p>Next, we’ll use the ChatGPT web interface to analyze an example review. If that works well, it may be possible to scale up the process to automatically analyze all of them! If you have started a dialogue previously, first click the button labeled New Chat in figure <a href="#fig__gptstart">2.2</a> to start a new conversation. This will make sure that the topics you discussed with ChatGPT previously won’t interfere with the analysis examples we try next.</p> 
  </div> 
  <div class="readable-text" id="p37"> 
   <p>Let’s start by telling ChatGPT about the review that we want to analyze. Click the input field, enter the text after the User marker in the following dialogue, and then press Enter.</p> 
  </div> 
  <div class="callout-container sidebar-container prompt-sidebar"> 
   <div class="readable-text prompt" id="p38"> 
    <p><strong class="prompt-head"><span class="prompt-initials">IT</span><strong><em>User</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p39"> 
    <p>Have a look at the following product review:</p> 
   </div> 
   <div class="readable-text response" id="p40"> 
    <p>“I bought the BananaBook a year ago and I’m super happy with this product! The screen is awesome and allows me to easily read content, even in bright sunshine. It’s fast enough for everything I want to do with it, e.g., coding, office work. The only drawback is its weight, I wish it were a little lighter as I have to carry it around quite a bit. But, for that price, it’s a great offer.”</p> 
   </div> 
   <div class="readable-text response" id="p41"> 
    <p><strong class="response-head"><img alt="chatGpt" height="20" src="../Images/chatGpt.png" style="width: 20px;" width="20"/><strong><em>GPT</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p42"> 
    <p>Based on the review, the BananaBook is a product that the reviewer purchased a year ago and is still satisfied with. The screen of the BananaBook is impressive, allowing the user to read content easily, even in bright sunshine. The device is also fast enough for the user’s needs, including coding and office work. However, the reviewer did mention that the BananaBook is a bit heavy, which can be an inconvenience when carrying it around. Overall, the reviewer seems to think that the BananaBook is a great value for its price.</p> 
   </div> 
  </div> 
  <div class="readable-text" id="p43"> 
   <p>The text after the GPT marker is the answer generated by ChatGPT during a sample session. In this case, ChatGPT simply repeats the review, albeit with slightly different wording, demonstrating that it has accepted and “understood” your input.</p> 
  </div> 
  <div class="callout-container sidebar-container"> 
   <div class="readable-text" id="p44"> 
    <h5 class=" callout-container-h5 readable-text-h5">Why am I getting different output?</h5> 
   </div> 
   <div class="readable-text" id="p45"> 
    <p> ChatGPT uses a certain degree of randomization when generating output. This means you generally won’t see the same output, even when you submit exactly the same input twice. For that reason, the chances of you seeing the precise output shown here are small. However, you are likely to get output of similar quality.</p> 
   </div> 
  </div> 
  <div class="readable-text" id="p46"> 
   <p>Let’s start our text analysis with a simple classification, mapping the review to a category. Specifically, we will try to classify the review into one of three product categories: mobile phones, personal computers, and game consoles.</p> 
  </div> 
  <div class="readable-text print-book-callout" id="p47"> 
   <p> <span class="print-book-callout-head">Warning</span> Do <em>not</em> click the New Chat button before entering the next text! The purpose of the New Chat button is to erase ChatGPT’s memory of prior conversation steps. But that’s not what we want here at all. All of the following analyses refer to the same review that we entered initially. This works only if ChatGPT remembers that review. </p> 
  </div> 
  <div class="callout-container sidebar-container prompt-sidebar"> 
   <div class="readable-text prompt" id="p48"> 
    <p><strong class="prompt-head"><span class="prompt-initials">IT</span><strong><em>User</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p49"> 
    <p>Which product category does the review refer to (mobile phones, personal computers, game consoles):</p> 
   </div> 
   <div class="readable-text response" id="p50"> 
    <p><strong class="response-head"><img alt="chatGpt" height="20" src="../Images/chatGpt.png" style="width: 20px;" width="20"/><strong><em>GPT</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p51"> 
    <p>Based on the information provided in the review, it is not clear which product category the BananaBook belongs to. The reviewer did not specify whether it is a mobile phone, personal computer, or game console. However, based on the fact that the reviewer mentioned using the device for coding and office work, it is more likely that the BananaBook is a personal computer or a laptop rather than a mobile phone or a game console.</p> 
   </div> 
  </div> 
  <div class="readable-text" id="p52"> 
   <p>Not bad! ChatGPT has clearly understood the task and provides a detailed reply. The BananaBook is a fictitious device, and it’s not immediately clear what type of product we’re talking about. However, as ChatGPT rightfully points out, coding and office work are most typically associated with personal computers (more so than with mobile phones or game consoles). Despite the uncertainty, ChatGPT can come up with a reasonable answer and justify it thoroughly. In this instance, the answer from ChatGPT is even more fine-grained than required: although ChatGPT links the review to one of the three provided categories, it additionally hypothesizes that the review refers to a laptop (a subcategory of personal computers). This assumption seems reasonable in this context, given that the user carries the computer regularly (typically associated with laptops rather than desktop machines).</p> 
  </div> 
  <div class="readable-text" id="p53"> 
   <p>The previous answer is reasonable but maybe a bit lengthy. In fact, its length is similar to the original review. No point in using ChatGPT for text analysis if the resulting answer is as long as the source text. Let’s ask ChatGPT to be a little more concise. There’s no need to provide a detailed justification; rather, we want to get only the name of the most likely category for the review.</p> 
  </div> 
  <div class="callout-container sidebar-container prompt-sidebar"> 
   <div class="readable-text prompt" id="p54"> 
    <p><strong class="prompt-head"><span class="prompt-initials">IT</span><strong><em>User</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p55"> 
    <p>Answer concisely, only write the name of the most likely product category (mobile phones, personal computers, game consoles):</p> 
   </div> 
   <div class="readable-text response" id="p56"> 
    <p><strong class="response-head"><img alt="chatGpt" height="20" src="../Images/chatGpt.png" style="width: 20px;" width="20"/><strong><em>GPT</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p57"> 
    <p>Personal computers.</p> 
   </div> 
  </div> 
  <div class="readable-text" id="p58"> 
   <p>That’s much better! Clearly, ChatGPT was able to understand our instructions and adapt its prior answer accordingly. Besides being faster to read, the concise output has another advantage. If, ultimately, we want to analyze many reviews as opposed to a single one, it is important to have homogeneous output across reviews. For instance, having homogeneous output makes it easier to count the number of reviews in each of the three categories.</p> 
  </div> 
  <div class="readable-text" id="p59"> 
   <p>Let’s classify the review according to different categories. This time, we will directly hint at the desired output format (note that our specification “answer concisely” refers back to the previous instructions).</p> 
  </div> 
  <div class="callout-container sidebar-container prompt-sidebar"> 
   <div class="readable-text prompt" id="p60"> 
    <p><strong class="prompt-head"><span class="prompt-initials">IT</span><strong><em>User</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p61"> 
    <p>Which product category out of food, cosmetics, electronics does the review refer to? Answer concisely:</p> 
   </div> 
   <div class="readable-text response" id="p62"> 
    <p><strong class="response-head"><img alt="chatGpt" height="20" src="../Images/chatGpt.png" style="width: 20px;" width="20"/><strong><em>GPT</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p63"> 
    <p>Electronics.</p> 
   </div> 
  </div> 
  <div class="readable-text" id="p64"> 
   <p>Perfect! That is the right category, and the output format is as expected. So far, we have seen that ChatGPT is able to classify reviews according to different criteria. This seems useful, for instance, for creating statistics by counting the number of reviews in each category. But ideally, we also want to analyze the content of those reviews. Which products or product categories need improvement most urgently? To determine that, we need to know whether reviews are positive or negative: that is, whether the user is satisfied or dissatisfied with the product. This is yet another way to categorize the review text. However, this time, our classification refers not to the product being reviewed but to the review content.</p> 
  </div> 
  <div class="callout-container sidebar-container prompt-sidebar"> 
   <div class="readable-text prompt" id="p65"> 
    <p><strong class="prompt-head"><span class="prompt-initials">IT</span><strong><em>User</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p66"> 
    <p>Is the customer satisfied or dissatisfied with the product? Answer with “satisfied” or “dissatisfied”:</p> 
   </div> 
   <div class="readable-text response" id="p67"> 
    <p><strong class="response-head"><img alt="chatGpt" height="20" src="../Images/chatGpt.png" style="width: 20px;" width="20"/><strong><em>GPT</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p68"> 
    <p>Satisfied.</p> 
   </div> 
  </div> 
  <div class="readable-text" id="p69"> 
   <p>Yes, that’s correct! Using the combination of the capabilities seen so far, we could already use ChatGPT to count the number of positive and negative reviews for different product categories. This gives us some information about which product categories urgently need improvements, but that may not be specific enough. For instance, it may be interesting to find out what aspects of a product users are most happy or unhappy with. Let’s try using ChatGPT to extract this information as well.</p> 
  </div> 
  <div class="callout-container sidebar-container prompt-sidebar"> 
   <div class="readable-text prompt" id="p70"> 
    <p><strong class="prompt-head"><span class="prompt-initials">IT</span><strong><em>User</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p71"> 
    <p>Which positive aspects of the product does the review mention? Answer with a numbered list, each aspect is described by maximally three words:</p> 
   </div> 
   <div class="readable-text response" id="p72"> 
    <p><strong class="response-head"><img alt="chatGpt" height="20" src="../Images/chatGpt.png" style="width: 20px;" width="20"/><strong><em>GPT</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p73"> 
    <p>1. Impressive screen</p> 
   </div> 
   <div class="readable-text response" id="p74"> 
    <p>2. Fast performance</p> 
   </div> 
   <div class="readable-text response" id="p75"> 
    <p>3. Suitable for coding</p> 
   </div> 
   <div class="readable-text response" id="p76"> 
    <p>4. Great value</p> 
   </div> 
  </div> 
  <div class="readable-text" id="p77"> 
   <p>Correct again! ChatGPT extracts the most salient product advantages mentioned in the review. Note that the output format complies again with the corresponding instructions: it’s a numbered list, and each entry has at most three words. How about the drawbacks mentioned in the review?</p> 
  </div> 
  <div class="callout-container sidebar-container prompt-sidebar"> 
   <div class="readable-text prompt" id="p78"> 
    <p><strong class="prompt-head"><span class="prompt-initials">IT</span><strong><em>User</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p79"> 
    <p>Which negative aspects of the product does the review mention? Answer with a numbered list, each aspect is described by maximally three words:</p> 
   </div> 
   <div class="readable-text response" id="p80"> 
    <p><strong class="response-head"><img alt="chatGpt" height="20" src="../Images/chatGpt.png" style="width: 20px;" width="20"/><strong><em>GPT</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p81"> 
    <p>1. Heavy weight</p> 
   </div> 
  </div> 
  <div class="readable-text" id="p82"> 
   <p>Indeed, the only drawback of the BananaBook is the weight, according to the user. Note that ChatGPT sticks to the requested output format (a numbered list) even though the result contains only a single entry.</p> 
  </div> 
  <div class="readable-text" id="p83"> 
   <p>Classifying reviews and extracting specific strengths and weaknesses works great if we want to aggregate reviews into statistics. However, doing so may discard information: for example, a more detailed justification for why users do or do not like specific aspects of a product. Sometimes we may just want to read a review sample. But to avoid spending time reading overly long reviews, it would be great to summarize those reviews first. Let’s use ChatGPT to do so.</p> 
  </div> 
  <div class="callout-container sidebar-container prompt-sidebar"> 
   <div class="readable-text prompt" id="p84"> 
    <p><strong class="prompt-head"><span class="prompt-initials">IT</span><strong><em>User</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p85"> 
    <p>Summarize the review in three sentences:</p> 
   </div> 
   <div class="readable-text response" id="p86"> 
    <p><strong class="response-head"><img alt="chatGpt" height="20" src="../Images/chatGpt.png" style="width: 20px;" width="20"/><strong><em>GPT</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p87"> 
    <p>The reviewer purchased the BananaBook electronics product a year ago and remains satisfied with it. The BananaBook has an impressive screen that allows for easy reading in bright sunlight and is fast enough for coding and office work. The only drawback is its heavy weight, but for the price, the BananaBook is a great value.</p> 
   </div> 
  </div> 
  <div class="readable-text" id="p88"> 
   <p>The result is a reasonable summary that uses precisely the number of sentences requested in the instructions. Can we get it even more concisely?</p> 
  </div> 
  <div class="callout-container sidebar-container prompt-sidebar"> 
   <div class="readable-text prompt" id="p89"> 
    <p><strong class="prompt-head"><span class="prompt-initials">IT</span><strong><em>User</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p90"> 
    <p>Summarize the review in one sentence:</p> 
   </div> 
   <div class="readable-text response" id="p91"> 
    <p><strong class="response-head"><img alt="chatGpt" height="20" src="../Images/chatGpt.png" style="width: 20px;" width="20"/><strong><em>GPT</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p92"> 
    <p>The reviewer is happy with the BananaBook electronics product due to its impressive screen, fast performance, and great value, despite it being a bit heavy.</p> 
   </div> 
  </div> 
  <div class="readable-text" id="p93"> 
   <p>Yes, that works as well! Indeed, after initial testing, it seems that ChatGPT may help automate various analysis tasks. Finally, let’s see whether we can exploit it for tasks beyond mere analysis. Maintaining good customer relationships is a priority for Banana! Hence the question from your boss, asking you to write friendly answers to the user comments wherever possible. But doing that takes time as well. Can’t we use ChatGPT to automate that step too? Let’s see ...</p> 
  </div> 
  <div class="callout-container sidebar-container prompt-sidebar"> 
   <div class="readable-text prompt" id="p94"> 
    <p><strong class="prompt-head"><span class="prompt-initials">IT</span><strong><em>User</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p95"> 
    <p>Write a friendly reply to the review from the company producing BananaBook!</p> 
   </div> 
   <div class="readable-text response" id="p96"> 
    <p><strong class="response-head"><img alt="chatGpt" height="20" src="../Images/chatGpt.png" style="width: 20px;" width="20"/><strong><em>GPT</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p97"> 
    <p>Sure, here’s a friendly reply to the review:</p> 
   </div> 
   <div class="readable-text response" id="p98"> 
    <p>Dear valued customer,</p> 
   </div> 
   <div class="readable-text response" id="p99"> 
    <p>We are thrilled to hear that you are still happy with your BananaBook electronics product a year after your purchase! We designed the BananaBook to offer an impressive screen and fast performance for our users, and we are glad to see that these features meet your needs for coding and office work. We appreciate your feedback on the weight of the device and will take it into consideration for future improvements. Thank you for choosing BananaBook, and we hope to continue exceeding your expectations!</p> 
   </div> 
   <div class="readable-text response" id="p100"> 
    <p>Best regards,</p> 
   </div> 
   <div class="readable-text response" id="p101"> 
    <p>[Company Name]</p> 
   </div> 
  </div> 
  <div class="readable-text" id="p102"> 
   <p>Pretty good! ChatGPT answers with a friendly message to the customer, referencing specific points in the review in the appropriate manner (confirming positive points mentioned by the customer and promising improvements with regard to the weaknesses). Note that ChatGPT leaves a placeholder for the name of the corresponding company (marked by square brackets). So far, we haven’t told ChatGPT the name of our company (Banana) yet. Let’s fix that.</p> 
  </div> 
  <div class="callout-container sidebar-container prompt-sidebar"> 
   <div class="readable-text prompt" id="p103"> 
    <p><strong class="prompt-head"><span class="prompt-initials">IT</span><strong><em>User</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p104"> 
    <p>The name of the company is Banana - replace the corresponding placeholder in your answer.</p> 
   </div> 
   <div class="readable-text response" id="p105"> 
    <p><strong class="response-head"><img alt="chatGpt" height="20" src="../Images/chatGpt.png" style="width: 20px;" width="20"/><strong><em>GPT</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p106"> 
    <p>I apologize for the mistake in my previous response. Here’s an updated reply with the correct company name:</p> 
   </div> 
   <div class="readable-text response" id="p107"> 
    <p>Dear valued customer,</p> 
   </div> 
   <div class="readable-text response" id="p108"> 
    <p>We are thrilled to hear that you are still happy with your BananaBook electronics product a year after your purchase! We designed the BananaBook to offer an impressive screen and fast performance for our users, and we are glad to see that these features meet your needs for coding and office work. We appreciate your feedback on the weight of the device and will take it into consideration for future improvements. Thank you for choosing Banana, and we hope to continue exceeding your expectations!</p> 
   </div> 
   <div class="readable-text response" id="p109"> 
    <p>Best regards,</p> 
   </div> 
   <div class="readable-text response" id="p110"> 
    <p>The Banana Team</p> 
   </div> 
  </div> 
  <div class="readable-text" id="p111"> 
   <p>Okay, that works! Based on the additional information, ChatGPT was able to substitute the name of the company for the placeholder in the previous answer.</p> 
  </div> 
  <div class="readable-text print-book-callout" id="p112"> 
   <p> <span class="print-book-callout-head">Warning</span> Language models like ChatGPT may occasionally generate harmful content, even though recent models have significantly decreased the chance of such occurrences. It is recommended to check the text generated by ChatGPT before posting it on public forums. Hence, automatically writing answers to customer reviews is not a good use case without some degree of human oversight. </p> 
  </div> 
  <div class="readable-text" id="p113"> 
   <p>We have seen that we can use ChatGPT for various tasks in text processing. We have used ChatGPT for categorizing text based on different criteria and using custom categories (classification according to review target and according to review content). We have also used it to extract specific pieces of information from a text and to summarize documents (i.e., reviews). Finally, we have used ChatGPT to generate text answering a customer review. In all cases, ChatGPT was able to follow instructions about the task and the desired output format. If you want, try writing a different review, and make sure ChatGPT can still solve all of these tasks.</p> 
  </div> 
  <div class="readable-text" id="p114"> 
   <p>Until recently, each of the different text-processing tasks we discussed in this section would have required a specialized language model. The latest generation of language models is flexible enough to solve a variety of tasks based on a description of the task in plain English (as well as other natural languages).</p> 
  </div> 
  <div class="readable-text" id="p115"> 
   <p>Note that we have processed only one short review so far. Here, using ChatGPT does not really provide a benefit. We could have classified or summarized the review manually and done it much more quickly than with the help of ChatGPT. Of course, the goal of automation is to scale processing up to a large number of (possibly longer) reviews. If we’re talking about hundreds, perhaps thousands, of reviews, manual analysis will take much longer than setting up ChatGPT to do the task. But a crucial component is still missing: How do we inform ChatGPT about all the review text? Can we simply copy and paste the whole collection of reviews into the ChatGPT web interface?</p> 
  </div> 
  <div class="readable-text" id="p116"> 
   <p>That approach won’t work. Language models generally come with restrictions regarding the amount of information they can process at once. Hence, we need a mechanism that automatically “feeds” single reviews (or small collections of reviews) to ChatGPT for processing. We will discuss corresponding approaches in the following chapters. For now, we just want to verify that ChatGPT can be used, in principle, to perform a diverse range of analysis tasks on text documents.</p> 
  </div> 
  <div class="readable-text" id="p117"> 
   <h2 class=" readable-text-h2" id="processing-tables-with-chatgpt"><span class="num-string browsable-reference-id">2.4</span> Processing tables with ChatGPT</h2> 
  </div> 
  <div class="readable-text" id="p118"> 
   <p>In the last section, we used ChatGPT directly for data processing, providing ChatGPT with data as well as a task description as input. This approach is reasonable as long as we’re processing text, the “native” input and output format of ChatGPT. For other types of data, it is much more efficient to use specialized, data type–specific tools for data processing. You may be wondering: If we process data with external tools, how can ChatGPT still be helpful in this context?</p> 
  </div> 
  <div class="readable-text" id="p119"> 
   <p>There are many tools for processing data, specialized for different types of data, processing, and hardware or software platforms. To use such tools, users often need to express the desired analysis operations in tool-specific formal languages. Writing code to analyze data can be tedious for experts and even more so for users with a limited IT background. Here, language models like ChatGPT can help because they understand natural language as well as the formal languages used by data-analysis tools. This means we can use ChatGPT as a sort of “translator,” translating our questions about the data, formulated in plain English, into code in various languages to be executed via external tools. This is what we will do next.</p> 
  </div> 
  <div class="readable-text" id="p120"> 
   <p>You’re back at Banana and have successfully used ChatGPT to analyze all the various reviews submitted by users. It is natural to represent this information as a data table. Each row corresponds to one review, and the columns represent the different types of information extracted from the review. Table <a href="#tab__exampletable_ch2">2.1</a> shows the first few rows.</p> 
  </div> 
  <div class="browsable-container browsable-table-container" id="p121"> 
   <h5 class=" browsable-container-h5" id="tab__exampletable_ch2"><span class="num-string">Table <span class="browsable-reference-id">2.1</span></span> Example table with three columns representing the review ID, a flag indicating whether the reviewer is satisfied with a product, and the product category</h5> 
   <table> 
    <tbody> 
     <tr class="odd"> 
      <td style="text-align: left;"><strong>ReviewID</strong></td> 
      <td style="text-align: left;"><strong>Satisfied</strong></td> 
      <td style="text-align: left;"><strong>Category</strong></td> 
     </tr> 
     <tr class="even"> 
      <td style="text-align: left;">1</td> 
      <td style="text-align: left;">1</td> 
      <td style="text-align: left;">Laptops</td> 
     </tr> 
     <tr class="odd"> 
      <td style="text-align: left;">2</td> 
      <td style="text-align: left;">0</td> 
      <td style="text-align: left;">Phones</td> 
     </tr> 
     <tr class="even"> 
      <td style="text-align: left;">2</td> 
      <td style="text-align: left;">1</td> 
      <td style="text-align: left;">Gaming</td> 
     </tr> 
     <tr class="odd"> 
      <td style="text-align: left;">...</td> 
      <td style="text-align: left;">...</td> 
      <td style="text-align: left;">...</td> 
     </tr> 
    </tbody> 
   </table> 
  </div> 
  <div class="readable-text" id="p122"> 
   <p>To keep the example simple, we use a table with a few columns corresponding to a subset of the analyses described in the previous section. The first table column contains the review ID. The second column contains a flag indicating whether the reviewer is satisfied with the product (1) or dissatisfied with the product (0). The final column contains the category. For this example, we consider only three categories: laptops, phones, and gaming.</p> 
  </div> 
  <div class="readable-text" id="p123"> 
   <p>This table is already a much more concise representation of the original reviews. But the full table has many rows (because we started with many reviews), and reading the raw table data doesn’t provide very much insight. Ideally, we want to aggregate data in interesting ways and present only the high-level trends to our boss. Which tools can we use to do that?</p> 
  </div> 
  <div class="readable-text" id="p124"> 
   <h3 class=" readable-text-h3" id="processing-tables-in-the-web-interface"><span class="num-string browsable-reference-id">2.4.1</span> Processing tables in the web interface</h3> 
  </div> 
  <div class="readable-text" id="p125"> 
   <p>The first option is using the OpenAI web interface directly to analyze tabular data. First, let’s download an example table with the review analysis results. Search for the link named Review Table on the book’s companion website (<a href="http://www.dataanalysiswithllms.com">www.dataanalysiswith</a><a href="http://www.dataanalysiswithllms.com">llms.com</a>), and download the associated file. It contains a table with the structure shown in table <a href="#tab__exampletable_ch2">2.1</a> in .csv format.</p> 
  </div> 
  <div class="callout-container sidebar-container"> 
   <div class="readable-text" id="p126"> 
    <h5 class=" callout-container-h5 readable-text-h5">What is the .csv format?</h5> 
   </div> 
   <div class="readable-text" id="p127"> 
    <p> CSV stands for comma-separated values. It designates a specific format used to represent tabular data. Each table row is stored in a separate line, and values for different columns in the same row are separated by commas.</p> 
   </div> 
  </div> 
  <div class="readable-text" id="p128"> 
   <p>To analyze such data directly in the ChatGPT web interface, we first need to upload it. Click the Upload button shown in figure <a href="#fig__UploadButton">2.4</a> (before doing so, you may also want to start a new chat). Choose the Upload From Computer option, and select the file you just downloaded (reviews_table.csv).</p> 
  </div> 
  <div class="browsable-container figure-container" id="p129">  
   <img alt="figure" src="../Images/CH02_F04_Trummer.png" width="1052" height="460"/> 
   <h5 class=" figure-container-h5" id="fig__UploadButton"><span class="num-string">Figure <span class="browsable-reference-id">2.4</span></span> Click the Upload button, and choose the Upload From Computer option to upload files on disk.</h5>
  </div> 
  <div class="readable-text" id="p130"> 
   <p>After uploading the file, it should appear next to the input text field. You can now enter arbitrary questions about the data into the input text field. When generating its answers, ChatGPT will take into account and analyze the data you provided. For instance, let’s ask about the number of reviews for each product category.</p> 
  </div> 
  <div class="callout-container sidebar-container prompt-sidebar"> 
   <div class="readable-text prompt" id="p131"> 
    <p><strong class="prompt-head"><span class="prompt-initials">IT</span><strong><em>User</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p132"> 
    <p>How many reviews do we have for each product category?</p> 
   </div> 
  </div> 
  <div class="readable-text" id="p133"> 
   <p>You should see output like that shown in figure <a href="#fig__TableAnswer">2.5</a>. ChatGPT shows a table containing the answer to your question (each row counts the number of reviews for one product category) and accompanying text.</p> 
  </div> 
  <div class="browsable-container figure-container" id="p134">  
   <img alt="figure" src="../Images/CH02_F05_Trummer.png" width="1100" height="820"/> 
   <h5 class=" figure-container-h5" id="fig__TableAnswer"><span class="num-string">Figure <span class="browsable-reference-id">2.5</span></span> Answer generated by ChatGPT for a question about the input table. Click the Show Analysis button to see how ChatGPT determined the answer.</h5>
  </div> 
  <div class="readable-text" id="p135"> 
   <p>How did ChatGPT calculate the answer? Did it read the entire table to generate the reply directly? Not quite. In the background, ChatGPT generates and executes Python code on OpenAI’s platform that analyzes the input data (in this scenario, the Python execution engine is the external tool we referred to initially). You can see the generated code by clicking the button labeled Show Analysis in figure <a href="#fig__TableAnswer">2.5</a>. In fact, it is highly recommended to check the generated code instead of relying blindly on an answer. After all, despite their amazing capabilities, language models do regularly make mistakes.</p> 
  </div> 
  <div class="readable-text" id="p136"> 
   <p>Try a few more questions, check the generated code, and possibly even try a few different data sets (you can upload any tabular data on your computer, such as in Excel format). You will find that ChatGPT can handle a variety of data sets and requests.</p> 
  </div> 
  <div class="readable-text" id="p137"> 
   <p>This seems to work pretty well! Why do we need anything else? Well, there are a couple of reasons why we would like to explore other external tools for data analysis. First, there are strict limits on the size of files we can upload (512 MB at the time of writing). Uploading large data sets is not possible. Second, you may have noticed that data analysis with Python can take a few seconds, even for moderately sized data sets (e.g., the table with reviews has only 10,000 rows, which is small according to today’s standards). Analyzing large data sets takes prohibitive amounts of time. Finally, uploading data to OpenAI may not be acceptable for each use case. To preserve privacy for sensitive data, users may prefer analyzing data on their own platforms. In the next section, we will see how we can use ChatGPT to analyze data outside of OpenAI’s web interface.</p> 
  </div> 
  <div class="readable-text" id="p138"> 
   <h3 class=" readable-text-h3" id="processing-tables-on-your-platform"><span class="num-string browsable-reference-id">2.4.2</span> Processing tables on your platform</h3> 
  </div> 
  <div class="readable-text" id="p139"> 
   <p>In some scenarios, analyzing data directly in OpenAI’s web interface is not an option. Instead, ChatGPT can help us use various other tools for data analysis that are directly under our control. Next, we will use a <em>relational database management system</em> (RDBMS). Such systems are specialized for handling data of the type we’re interested in and tend to achieve high processing efficiency. This is just an example: the proposed approach generalizes to various other types of data-analysis systems.</p> 
  </div> 
  <div class="callout-container sidebar-container"> 
   <div class="readable-text" id="p140"> 
    <h5 class=" callout-container-h5 readable-text-h5">Relational database management systems</h5> 
   </div> 
   <div class="readable-text" id="p141"> 
    <p> A relational database management system is specialized for handling relational data: that is, data sets that contain one or multiple tables of the type in table <a href="#tab__exampletable_ch2">2.1</a>. Most of them support variants of Structured Query Language (SQL), a language used to describe data and operations on data. For the following examples, we assume that you are familiar with the basics of SQL and RDBMSs. If you aren’t, you can find a short introduction to SQL in chapter 5. To get more details, consider reading the book <em>Database Management Systems</em> by Gehrke and Ramakrishnan [2], or try the online course by this book’s author at <a href="http://www.databaselecture.com">www.databaselecture.com</a>.</p> 
   </div> 
  </div> 
  <div class="readable-text" id="p142"> 
   <p>We will use SQLite, one of the most popular RDBMSs. To save you the headaches of installing and configuring that system on your machine, go to the book’s companion website, and follow the link to the BananaDB resource. It will lead you to a Google Colab notebook that you can use for the following steps. Figure <a href="#fig__bananadb">2.6</a> shows the notebook you should see after following the link.</p> 
  </div> 
  <div class="browsable-container figure-container" id="p143">  
   <img alt="figure" src="../Images/CH02_F06_Trummer.png" width="1100" height="687"/> 
   <h5 class=" figure-container-h5" id="fig__bananadb"><span class="num-string">Figure <span class="browsable-reference-id">2.6</span></span> Google Colab notebook allowing you to query the BananaDB database via SQLite. Execute the upper cell (Create Database) to create the database, replace the given SQL query (SQL Query) with a query of your choice, and then execute the lower cell (Execute Query) to see the query result. The arrow marks the Run button to execute the upper cell.</h5>
  </div> 
  <div class="callout-container sidebar-container"> 
   <div class="readable-text" id="p144"> 
    <h5 class=" callout-container-h5 readable-text-h5">Google Colab notebooks</h5> 
   </div> 
   <div class="readable-text" id="p145"> 
    <p> We will use Google Colab notebooks to enable you to try the following examples without installing software on your local machine. The following explanations assume that you’re familiar with Colab Notebooks in general. If you want to brush up on your notebook skills, check out the tutorial at <a href="https://colab.research.google.com">https://colab.research.google.com</a>.</p> 
   </div> 
  </div> 
  <div class="readable-text" id="p146"> 
   <p>The notebook already contains code for creating an example database and analyzing data in it. This chapter is about getting the hang of ChatGPT’s web interface. Hence, for the moment, we will not spend time discussing the code in the notebook in detail. For the rest of this chapter, it is sufficient to know what the code is doing and which specific parts of it you need to change in the following paragraphs. At a high level of abstraction, the code in this notebook creates a database with example data and allows you to execute SQL queries that analyze that data via SQLite.</p> 
  </div> 
  <div class="readable-text" id="p147"> 
   <p>You see two cells containing code in the notebook (labeled Create Database and Execute Query in figure <a href="#fig__bananadb">2.6</a>). The upper cell (Create Database) contains code that creates a database containing an extended version of table <a href="#tab__exampletable_ch2">2.1</a>, filling it with data for about 1,000 reviews. Let’s execute that cell first by clicking the Run button in the upper-left corner of the cell (marked with an arrow in figure <a href="#fig__bananadb">2.6</a>). After a couple of seconds, this should create an SQLite database and fill it with corresponding data. You only need to execute this cell once per session. If you do not interact with the notebook for a sufficiently long time, the environment will be reset, and you will need to execute the cell again.</p> 
  </div> 
  <div class="readable-text" id="p148"> 
   <p>We will ask ChatGPT to write SQL queries for us that refer to this database. You can execute SQL queries on the data using the lower cell in figure <a href="#fig__bananadb">2.6</a> (Execute Query). By default, the cell contains an SQL query counting the number of reviews in the Gaming category. Execute the cell (by clicking its Run button) to see whether everything is working. After executing the cell, you should see the number of reviews in the Gaming category: 342. We will replace the current query (<code>select count(*) from reviews where category = ’gaming’;</code>) with the queries proposed by ChatGPT and then re-execute this cell to get the results for the new queries.</p> 
  </div> 
  <div class="readable-text" id="p149"> 
   <p>Okay, it’s time to have ChatGPT do some data analysis for us! First, start a new dialogue by clicking the New Chat button in the ChatGPT web interface. This is important to make sure prior dialogue steps do not interfere with our new task. To use ChatGPT for writing queries, we first need to tell it a little about what our database looks like. In particular, we should describe the table structure, meaning the name of the table (Reviews) and all associated columns. In this case, the table has three columns, and we should probably add some text describing the content in those columns. When writing SQL queries, it is useful to know about the types of data in each column and ideally some information about the specific values we may find and their semantics.</p> 
  </div> 
  <div class="readable-text" id="p150"> 
   <p>Finally, another important piece of information is the specific system we use to analyze data. Although many RDBMSs support SQL, and SQL is fairly standardized, the specific subset of supported SQL features may differ across systems. Furthermore, some of these systems may support SQL syntax that slightly deviates from the SQL standard.</p> 
  </div> 
  <div class="readable-text" id="p151"> 
   <p>Having clarified what matters for writing SQL queries, let’s provide ChatGPT with that information for our BananaDB example database.</p> 
  </div> 
  <div class="callout-container sidebar-container prompt-sidebar"> 
   <div class="readable-text prompt" id="p152"> 
    <p><strong class="prompt-head"><span class="prompt-initials">IT</span><strong><em>User</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p153"> 
    <p>We have an SQLite 3 database with a table (named Reviews) summarizing product reviews. The table has three columns:</p> 
   </div> 
   <div class="readable-text response" id="p154"> 
    <p>- ReviewID (the integer ID of the review)</p> 
   </div> 
   <div class="readable-text response" id="p155"> 
    <p>- Satisfied (1 if the reviewer is satisfied and 0 if the reviewer is not satisfied)</p> 
   </div> 
   <div class="readable-text response" id="p156"> 
    <p>- Category (“laptops,” “phones,” or “gaming”)</p> 
   </div> 
   <div class="readable-text response" id="p157"> 
    <p><strong class="response-head"><img alt="chatGpt" height="20" src="../Images/chatGpt.png" style="width: 20px;" width="20"/><strong><em>GPT</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p158"> 
    <p>That’s great! Having an SQLite database with a table named “Reviews" that summarizes product reviews can be quite useful. With the three columns you mentioned (ReviewID, Satisfied, and Category), you can store and retrieve valuable information about the reviews.</p> 
   </div> 
   <div class="readable-text response" id="p159"> 
    <p>To help you further, I can provide you with some example SQLite queries that you can use to interact with your database. Please let me know what specific operations or information you would like to perform or retrieve from the database.</p> 
   </div> 
  </div> 
  <div class="readable-text" id="p160"> 
   <p>ChatGPT is upbeat about the prospect of analyzing our database and answers with a summary of the database structure that we provide in our input. Also, ChatGPT already has a sense of where this is going and proactively proposes writing some example SQL queries before we even ask it to. Let’s see what ChatGPT has in store.</p> 
  </div> 
  <div class="callout-container sidebar-container prompt-sidebar"> 
   <div class="readable-text prompt" id="p161"> 
    <p><strong class="prompt-head"><span class="prompt-initials">IT</span><strong><em>User</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p162"> 
    <p>Sure! Please provide some example queries!</p> 
   </div> 
   <div class="readable-text response" id="p163"> 
    <p><strong class="response-head"><img alt="chatGpt" height="20" src="../Images/chatGpt.png" style="width: 20px;" width="20"/><strong><em>GPT</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p164"> 
    <p>Certainly! Here are some example queries that you can use to interact with your SQLite database table named “Reviews":</p> 
   </div> 
   <div class="readable-text response" id="p165"> 
    <p>Retrieve all reviews:</p> 
   </div> 
   <div class="readable-text response" id="p166"> 
    <p>SELECT * FROM Reviews;</p> 
   </div> 
   <div class="readable-text response" id="p167"> 
    <p>Retrieve satisfied reviews:</p> 
   </div> 
   <div class="readable-text response" id="p168"> 
    <p>SELECT * FROM Reviews WHERE Satisfied = 1;</p> 
   </div> 
   <div class="readable-text response" id="p169"> 
    <p>Retrieve unsatisfied reviews:</p> 
   </div> 
   <div class="readable-text response" id="p170"> 
    <p>SELECT * FROM Reviews WHERE Satisfied = 0;</p> 
   </div> 
   <div class="readable-text response" id="p171"> 
    <p>Retrieve reviews for laptops:</p> 
   </div> 
   <div class="readable-text response" id="p172"> 
    <p>SELECT * FROM Reviews WHERE Category = ’laptops’;</p> 
   </div> 
   <div class="readable-text response" id="p173"> 
    <p>Retrieve reviews for phones:</p> 
   </div> 
   <div class="readable-text response" id="p174"> 
    <p>SELECT * FROM Reviews WHERE Category = ’phones’;</p> 
   </div> 
   <div class="readable-text response" id="p175"> 
    <p>Retrieve reviews for gaming:</p> 
   </div> 
   <div class="readable-text response" id="p176"> 
    <p>SELECT * FROM Reviews WHERE Category = ’gaming’;</p> 
   </div> 
   <div class="readable-text response" id="p177"> 
    <p>Count the total number of reviews:</p> 
   </div> 
   <div class="readable-text response" id="p178"> 
    <p>SELECT COUNT(*) FROM Reviews;</p> 
   </div> 
   <div class="readable-text response" id="p179"> 
    <p>Count the number of satisfied reviews:</p> 
   </div> 
   <div class="readable-text response" id="p180"> 
    <p>SELECT COUNT(*) FROM Reviews WHERE Satisfied = 1;</p> 
   </div> 
   <div class="readable-text response" id="p181"> 
    <p>Count the number of unsatisfied reviews:</p> 
   </div> 
   <div class="readable-text response" id="p182"> 
    <p>SELECT COUNT(*) FROM Reviews WHERE Satisfied = 0;</p> 
   </div> 
   <div class="readable-text response" id="p183"> 
    <p>These queries should give you a starting point to perform various operations on your “Reviews" table. You can modify them or combine them to suit your specific requirements.</p> 
   </div> 
  </div> 
  <div class="readable-text" id="p184"> 
   <p>Not bad! The queries cover quite a few natural questions; for example, about the number of reviews that fall into specific categories. In general, asking ChatGPT to propose queries is not a bad way to start analyzing a data set.</p> 
  </div> 
  <div class="readable-text" id="p185"> 
   <p>You may notice, by the way, that the web interface displays SQL queries using a specific representation. Figure <a href="#fig__sqlcode">2.7</a> shows how the first query is displayed.</p> 
  </div> 
  <div class="browsable-container figure-container" id="p186">  
   <img alt="figure" src="../Images/CH02_F07_Trummer.png" width="1100" height="318"/> 
   <h5 class=" figure-container-h5" id="fig__sqlcode"><span class="num-string">Figure <span class="browsable-reference-id">2.7</span></span> The ChatGPT web interface uses specialized markup to represent code, including SQL queries. Click the Copy Code button to copy the code (making it convenient to paste it into suitable interfaces for execution).</h5>
  </div> 
  <div class="readable-text" id="p187"> 
   <p>The SQL query is in a box, making it easy to copy it by clicking the Copy Code button. To try any of the proposed queries, copy it (as described before), and then insert it at the appropriate position in the BananaDB notebook (labeled SQL Query in figure <a href="#fig__bananadb">2.6</a>). Finally, execute the surrounding cell in the notebook to obtain the query result.</p> 
  </div> 
  <div class="readable-text" id="p188"> 
   <p>Let’s see whether we can make GPT translate our own questions into queries as well.</p> 
  </div> 
  <div class="callout-container sidebar-container prompt-sidebar"> 
   <div class="readable-text prompt" id="p189"> 
    <p><strong class="prompt-head"><span class="prompt-initials">IT</span><strong><em>User</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p190"> 
    <p>Write an SQL query to retrieve the product category with most reviews!</p> 
   </div> 
   <div class="readable-text response" id="p191"> 
    <p><strong class="response-head"><img alt="chatGpt" height="20" src="../Images/chatGpt.png" style="width: 20px;" width="20"/><strong><em>GPT</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p192"> 
    <p>To retrieve the product category with the most reviews from your SQLite database table “Reviews," you can use the following SQL query:</p> 
   </div> 
   <div class="readable-text response" id="p193"> 
    <p>SELECT Category, COUNT(*) AS ReviewCount</p> 
   </div> 
   <div class="readable-text response" id="p194"> 
    <p>FROM Reviews</p> 
   </div> 
   <div class="readable-text response" id="p195"> 
    <p>GROUP BY Category</p> 
   </div> 
   <div class="readable-text response" id="p196"> 
    <p>ORDER BY ReviewCount DESC</p> 
   </div> 
   <div class="readable-text response" id="p197"> 
    <p>LIMIT 1;</p> 
   </div> 
   <div class="readable-text response" id="p198"> 
    <p>This query uses the GROUP BY clause to group the reviews by the “Category" column. Then, it applies the COUNT(*) function to count the number of reviews in each category. The results are ordered in descending order based on the review count using the ORDER BY clause. Finally, the LIMIT 1 clause ensures that only the category with the highest review count is returned.</p> 
   </div> 
   <div class="readable-text response" id="p199"> 
    <p>The query will return the product category along with the corresponding count of reviews for that category.</p> 
   </div> 
  </div> 
  <div class="readable-text" id="p200"> 
   <p>We are interested in finding the product category associated with most reviews. ChatGPT translates our question into an SQL query that retrieves the corresponding result. If you execute this query on our example database, it should retrieve the Gaming category, along with the number of associated reviews.</p> 
  </div> 
  <div class="callout-container sidebar-container"> 
   <div class="readable-text" id="p201"> 
    <h5 class=" callout-container-h5 readable-text-h5">How to deal with multiline queries</h5> 
   </div> 
   <div class="readable-text" id="p202"> 
    <p> This is the first multiline SQL query generated by ChatGPT. To use that query in our Colab notebook, surround the query with triple quotes (<code>"""</code>) rather than single quotes. Doing so ensures that the entire query is treated as a single string.</p> 
   </div> 
  </div> 
  <div class="readable-text" id="p203"> 
   <p>Strictly speaking, we asked for the category but not the associated count. Here, ChatGPT takes some liberty by adding the count to our query result. In this case, that may be acceptable and even interesting. In general, if you’re using ChatGPT to translate questions into queries, make sure it does not expand your queries in ways that are not acceptable (e.g., if the output is forwarded to another tool that expects a specific input format). Let’s see whether we can make ChatGPT follow our instructions more closely.</p> 
  </div> 
  <div class="callout-container sidebar-container prompt-sidebar"> 
   <div class="readable-text prompt" id="p204"> 
    <p><strong class="prompt-head"><span class="prompt-initials">IT</span><strong><em>User</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p205"> 
    <p>The query result should only return the category.</p> 
   </div> 
   <div class="readable-text response" id="p206"> 
    <p><strong class="response-head"><img alt="chatGpt" height="20" src="../Images/chatGpt.png" style="width: 20px;" width="20"/><strong><em>GPT</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p207"> 
    <p>Apologies for the oversight. If you want the query to return only the category with the most reviews, you can modify the previous query by selecting only the “Category" column:</p> 
   </div> 
   <div class="readable-text response" id="p208"> 
    <p>SELECT Category</p> 
   </div> 
   <div class="readable-text response" id="p209"> 
    <p>FROM Reviews</p> 
   </div> 
   <div class="readable-text response" id="p210"> 
    <p>GROUP BY Category</p> 
   </div> 
   <div class="readable-text response" id="p211"> 
    <p>ORDER BY COUNT(*) DESC</p> 
   </div> 
   <div class="readable-text response" id="p212"> 
    <p>LIMIT 1;</p> 
   </div> 
   <div class="readable-text response" id="p213"> 
    <p>This updated query will retrieve the product category with the highest number of reviews from the “Reviews" table. It groups the reviews by category, orders them based on the count of reviews in descending order, and then selects only the top result using the LIMIT 1 clause. The query will return the category with the most reviews.</p> 
   </div> 
  </div> 
  <div class="readable-text" id="p214"> 
   <p>Perfect! ChatGPT has slightly rewritten the previous query to return only the category but not the associated count. You may notice that ChatGPT’s answers contain the query and an explanation for why the query does what it is doing. Such explanations are helpful to verify that queries generated by ChatGPT are indeed correct. Next, let’s drill down a bit further and see which ratio of reviewers were satisfied with their gaming products.</p> 
  </div> 
  <div class="callout-container sidebar-container prompt-sidebar"> 
   <div class="readable-text prompt" id="p215"> 
    <p><strong class="prompt-head"><span class="prompt-initials">IT</span><strong><em>User</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p216"> 
    <p>What is the ratio of positive reviews in the gaming category?</p> 
   </div> 
   <div class="readable-text response" id="p217"> 
    <p><strong class="response-head"><img alt="chatGpt" height="20" src="../Images/chatGpt.png" style="width: 20px;" width="20"/><strong><em>GPT</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p218"> 
    <p>To calculate the ratio of positive reviews in the gaming category from your SQLite database table “Reviews," you can use the following SQL query:</p> 
   </div> 
   <div class="readable-text response" id="p219"> 
    <p>SELECT (CAST(SUM(Satisfied) AS REAL) / COUNT(*)) AS PositiveRatio</p> 
   </div> 
   <div class="readable-text response" id="p220"> 
    <p>FROM Reviews</p> 
   </div> 
   <div class="readable-text response" id="p221"> 
    <p>WHERE Category = ’gaming’;</p> 
   </div> 
   <div class="readable-text response" id="p222"> 
    <p>This query filters the reviews specifically for the “gaming" category using the WHERE clause. Then, it calculates the sum of the “Satisfied" column, which represents the number of positive reviews, using the SUM() function. The result is then divided by the total number of reviews in the gaming category, obtained using the COUNT(*) function. The CAST() function is used to ensure that the division is performed with decimal precision.</p> 
   </div> 
   <div class="readable-text response" id="p223"> 
    <p>The query will return the ratio of positive reviews (satisfied reviews) in the gaming category as a decimal value.</p> 
   </div> 
  </div> 
  <div class="readable-text" id="p224"> 
   <p>Executing this query, you should find that a ratio of around 50% of reviews is positive (i.e., the corresponding reviewer is satisfied).<a class="footnote-ref" href="#fn1" id="fnref1"><sup>1</sup></a> Finally, let’s see which product category needs improvements most urgently.</p> 
  </div> 
  <div class="callout-container sidebar-container prompt-sidebar"> 
   <div class="readable-text prompt" id="p225"> 
    <p><strong class="prompt-head"><span class="prompt-initials">IT</span><strong><em>User</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p226"> 
    <p>What is the product category with the lowest ratio of positive reviews?</p> 
   </div> 
   <div class="readable-text response" id="p227"> 
    <p><strong class="response-head"><img alt="chatGpt" height="20" src="../Images/chatGpt.png" style="width: 20px;" width="20"/><strong><em>GPT</em> </strong></strong></p> 
   </div> 
   <div class="readable-text response" id="p228"> 
    <p>To determine the product category with the lowest ratio of positive reviews from your SQLite database table “Reviews," you can use the following SQL query:</p> 
   </div> 
   <div class="readable-text response" id="p229"> 
    <p>SELECT Category, (CAST(SUM(Satisfied) AS REAL) / COUNT(*)) AS PositiveRatio</p> 
   </div> 
   <div class="readable-text response" id="p230"> 
    <p>FROM Reviews</p> 
   </div> 
   <div class="readable-text response" id="p231"> 
    <p>GROUP BY Category</p> 
   </div> 
   <div class="readable-text response" id="p232"> 
    <p>ORDER BY PositiveRatio ASC</p> 
   </div> 
   <div class="readable-text response" id="p233"> 
    <p>LIMIT 1;</p> 
   </div> 
   <div class="readable-text response" id="p234"> 
    <p>This query uses the GROUP BY clause to group the reviews by the “Category" column. Then, it calculates the ratio of positive reviews for each category by dividing the sum of “Satisfied" values by the total count of reviews in that category. The results are ordered in ascending order based on the positive ratio using the ORDER BY clause. Finally, the LIMIT</p> 
   </div> 
  
  <div class="readable-text response" id="p235"> 
   <p>1 clause ensures that only the category with the lowest positive ratio is returned.</p> 
  </div> 
  <div class="readable-text response" id="p236"> 
   <p>The query will return the product category along with the corresponding ratio of positive reviews (satisfied reviews). The category with the lowest positive ratio will be presented.</p> 
  </div> </div> 
  <div class="readable-text" id="p237"> 
   <p>Executing this query should return the Phones category, together with the associated ratio of positive reviews.</p> 
  </div> 
  <div class="readable-text" id="p238"> 
   <p>In this section, we have seen a second way to use ChatGPT for analyzing data: instead of applying ChatGPT directly to the data, we use it as a translation mechanism. In this case, we translate questions about the data (formulated in plain English) into SQL queries that we can then execute using a corresponding tool (an RDBMS in this scenario). In later chapters, we will also use it to translate to other formal languages.</p> 
  </div> 
  <div class="readable-text" id="p239"> 
   <p>We entered questions by hand and then copied our queries to a different interface. Clearly, this approach is not the most convenient. In chapter 5, we will see how to build frameworks that automate all those steps.</p> 
  </div> 
  <div class="readable-text" id="p240"> 
   <h2 class=" readable-text-h2" id="summary">Summary</h2> 
  </div> 
  <ul> 
   <li class="readable-text" id="p241">Language models can solve various tasks, given instructions in natural language.</li> 
   <li class="readable-text" id="p242">Although powerful, language models can produce incorrect output.</li> 
   <li class="readable-text" id="p243">You can use ChatGPT via a web interface in your web browser.</li> 
   <li class="readable-text" id="p244">ChatGPT enables users to interact with various GPT model versions.</li> 
   <li class="readable-text" id="p245">To process text with ChatGPT, enter the text and a task description.</li> 
   <li class="readable-text" id="p246">ChatGPT can classify text, given classification categories; it can extract information from text, given corresponding questions; and it can produce text summaries according to user specifications.</li> 
   <li class="readable-text" id="p247">ChatGPT is not suitable for processing large data sets directly. However, it can generate code that processes large data using other tools. To produce code, enter a description of the data, the task, and the output format.</li> 
  </ul> 
  <div class="readable-text" id="p248"> 
   <h2 class=" readable-text-h2" id="references"><span class="num-string browsable-reference-id">2.6</span> References</h2> 
  </div> 
  <ol> 
   <li class="readable-text" id="p249">Ji, Z., Lee, N., Frieske, R., et al. (2023). Survey of Hallucination in Natural Language Generation. <em>ACM Computing Surveys 55</em> (12), 1–38.</li> 
   <li class="readable-text" id="p250">Ramakrishnan, R. and Gehrke, J. (2002). <em>Database Management Systems</em> (3rd ed.). McGraw Hill New York.</li> 
  </ol> 
  <div class="readable-text" id="p251"> 
   <p id="fn1"><sup>1</sup> That is not surprising, given that our test data is generated with a uniform random distribution (i.e., the number of positive and negative reviews should be approximately equal).<a class="footnote-back" href="#fnref1">↩︎</a></p> 
  </div>
 </div></div></body></html>