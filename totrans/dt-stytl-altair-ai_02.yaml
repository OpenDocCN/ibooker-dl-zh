- en: 2 Running your first data story in Altair and GitHub Copilot
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在 Altair 和 GitHub Copilot 中运行您的第一个数据故事
- en: This chapter covers
  id: totrans-1
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 本章涵盖
- en: Introducing Altair
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 介绍 Altair
- en: 'A relevant use case: Describing the scenario'
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 相关用例：描述场景
- en: Using Altair
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Altair
- en: Using Copilot
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Copilot
- en: 'One of my peculiarities is getting my hands dirty right away. If I don’t feel
    something right away, I’m not happy. To start using software, or anything in general,
    I immediately go to the “Getting Started” section. As I need more details, I consult
    the documentation. This chapter was born with the same idea: to see how things
    work immediately. We’ll look at a rough but complete sketch of what you’ll learn
    in the book. In this chapter, we will look at the basic concepts behind Altair,
    and then we will implement a practical use case, which will allow us to transform
    a raw dataset into a story. We will progressively apply the data, information,
    knowledge, wisdom (DIKW) pyramid principles in Altair and see the results achieved
    step by step. In the second part of the chapter, we will use Copilot to automate
    some steps of the story creation process. We will focus only on Copilot as a generative
    AI tool to keep the chapter simple and the flow understandable. In the following
    chapters, we will introduce ChatGPT and DALL-E to the DIKW pyramid.'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 我的独特之处在于立即动手实践。如果我没有立即感受到，我就不会开心。要开始使用软件或任何其他东西，我立即会去“入门”部分。当我需要更多细节时，我会查阅文档。这一章节也是基于同样的想法产生的：立即了解事物的工作原理。我们将查看书中将要学习的大致但完整的草图。在本章中，我们将探讨
    Altair 背后的基本概念，然后我们将实现一个实际的应用案例，这将使我们能够将原始数据集转化为故事。我们将逐步应用数据、信息、知识、智慧（DIKW）金字塔原则于
    Altair，并逐步查看所取得的结果。在章节的第二部分，我们将使用 Copilot 自动化故事创建过程的一些步骤。我们将只关注 Copilot 作为生成式
    AI 工具，以保持章节简单且流程易于理解。在接下来的章节中，我们将介绍 ChatGPT 和 DALL-E 到 DIKW 金字塔。
- en: 2.1 Introducing Altair
  id: totrans-7
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 2.1 介绍 Altair
- en: The Vega-Altair library (Altair, for short) is a declarative Python library
    for statistical visualization based on the Vega and Vega-Lite visualization grammars.
    Vega is a visualization grammar for creating expressive and interactive data visualizations.
    Vega-Lite is a high-level declarative language built on top of Vega, designed
    to simplify the creation of common data visualizations with concise and intuitive
    syntax. We will discuss Vega and Vega-Lite in the next chapter.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: Vega-Altair 库（简称 Altair）是一个基于 Vega 和 Vega-Lite 可视化语法的声明式 Python 库，用于统计可视化。Vega
    是一个用于创建表达性和交互式数据可视化的可视化语法。Vega-Lite 是建立在 Vega 之上的高级声明式语言，旨在通过简洁直观的语法简化常见数据可视化的创建。我们将在下一章中讨论
    Vega 和 Vega-Lite。
- en: Altair is a declarative library, meaning you can describe the intended chart
    outcome rather than needing to manually program every step, defining a concise
    and intuitive syntax for creating interactive visualizations. We use declarative
    libraries to specify what we want to see in a chart. We can specify the data and
    the type of visualization we want, and the library creates the visualization for
    us automatically. Declarative libraries stand in contrast to imperative libraries,
    which instead focus on building a visualization manually (e.g., specifying the
    desired axis, size, legend, and labels). Matplotlib is an example of an imperative
    library.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: Altair 是一个声明式库，这意味着您可以描述预期的图表结果，而不是需要手动编程每个步骤，定义一个简洁直观的语法来创建交互式可视化。我们使用声明式库来指定我们希望在图表中看到的内容。我们可以指定我们想要的数据和可视化类型，然后库会为我们自动创建可视化。声明式库与命令式库形成对比，后者更侧重于手动构建可视化（例如，指定所需的轴、大小、图例和标签）。Matplotlib
    是命令式库的一个例子。
- en: 'Every Altair chart has at least three main elements: a chart, a mark, and encodings.
    We will cover each of these briefly in the following pages. Refer to appendix
    A for instructions on how to install Altair and the other Python libraries described
    in this chapter. Refer to appendix B for more details on the pandas DataFrame
    methods used in this chapter.'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 每个 Altair 图表至少包含三个主要元素：图表、标记和编码。我们将在接下来的页面中简要介绍这些内容。有关安装 Altair 和本章中描述的其他 Python
    库的说明，请参阅附录 A。有关本章中使用到的 pandas DataFrame 方法的更多详细信息，请参阅附录 B。
- en: 2.1.1 Chart
  id: totrans-11
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 2.1.1 图表
- en: 'In Altair, a chart is an object that acts as a starting point for constructing
    and customizing interactive visualizations in Altair. Use the `alt.Chart()` method
    to input the dataset you would like to represent visually, as shown in listing
    2.1 You can find this example in the GitHub repository for the book under 02/bar-chart.py.
    Start by cloning the GitHub repository for the book: [https://mng.bz/PZVP](https://mng.bz/PZVP).
    To get started with GitHub, follow the procedure described in appendix A of the
    book or the GitHub official documentation ([https://mng.bz/1Geg](https://mng.bz/1Geg)).'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 在Altair中，图表是一个对象，它作为在Altair中构建和自定义交互式可视化的起点。使用`alt.Chart()`方法输入您想要可视化的数据集，如列表2.1所示。您可以在本书的GitHub仓库中找到此示例（02/bar-chart.py）。首先，克隆本书的GitHub仓库：[https://mng.bz/PZVP](https://mng.bz/PZVP)。要开始使用GitHub，请遵循本书附录A中描述的程序或GitHub官方文档（[https://mng.bz/1Geg](https://mng.bz/1Geg)）。
- en: Listing 2.1 Charts in Altair
  id: totrans-13
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表2.1 Altair中的图表
- en: '[PRE0]'
  id: totrans-14
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '#1 Creates data for the DataFrame'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '#1 为DataFrame创建数据'
- en: '#2 Creates the DataFrame from the data'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '#2 从数据创建DataFrame'
- en: '#3 Prints the DataFrame'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '#3 打印DataFrame'
- en: '#4 Creates the chart'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '#4 创建图表'
- en: Note  First, import the required libraries, then build the DataFrame containing
    your data. Finally, pass the DataFrame to `alt.Chart()`. The example does not
    create any visualization because we have not specified what we want to represent.
    Note that the code is still incomplete, so if you try to run it, it will not work.
    Be patient. In the next section, you’ll add other pieces to run it!
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：首先，导入所需的库，然后构建包含您的数据的DataFrame。最后，将DataFrame传递给`alt.Chart()`。此示例没有创建任何可视化，因为我们没有指定我们想要表示的内容。请注意，代码仍然不完整，所以如果您尝试运行它，它将不会工作。请耐心等待。在下一节中，您将添加其他部分以运行它！
- en: 2.1.2 Mark
  id: totrans-20
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 2.1.2 标记
- en: A mark defines how to represent data. Examples of marks include bar charts,
    line charts, area charts, and many others. To specify a mark, append it to the
    Altair chart. For example, in the following listing, we will specify that we want
    to use a bar chart.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 标记定义了如何表示数据。标记的示例包括柱状图、线状图、面积图等。要指定标记，将其附加到Altair图表。例如，在下面的列表中，我们将指定我们想要使用柱状图。
- en: Listing 2.2 Mark in Altair
  id: totrans-22
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表2.2 在Altair中标记
- en: '[PRE1]'
  id: totrans-23
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Note  Use `mark_bar()` to create a bar chart in Altair.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：使用`mark_bar()`在Altair中创建柱状图。
- en: The chart is not ready yet because you need other pieces before showing it.
    However, to get an idea, figure 2.1 shows how the final chart will look.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 图表尚未准备好，因为您需要其他部分才能显示它。然而，为了有一个概念，图2.1显示了最终图表将如何看起来。
- en: '![figure](../Images/2-1.png)'
  id: totrans-26
  prefs: []
  type: TYPE_IMG
  zh: '![图](../Images/2-1.png)'
- en: Figure 2.1 An example of a bar chart
  id: totrans-27
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.1 柱状图的示例
- en: There are other examples of marks, such as `mark_line()`, to plot a line chart
    (figure 2.2). Additionally, `mark_circle()` plots a scatter plot (figure 2.3).
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 还有其他标记的示例，如`mark_line()`，用于绘制线状图（图2.2）。此外，`mark_circle()`绘制散点图（图2.3）。
- en: '![figure](../Images/2-2.png)'
  id: totrans-29
  prefs: []
  type: TYPE_IMG
  zh: '![图](../Images/2-2.png)'
- en: Figure 2.2 An example of a line chart
  id: totrans-30
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.2 线状图的示例
- en: '![figure](../Images/2-3.png)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
  zh: '![图](../Images/2-3.png)'
- en: Figure 2.3 An example of a scatter plot
  id: totrans-32
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.3 散点图的示例
- en: 2.1.3 Encodings
  id: totrans-33
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 2.1.3 编码
- en: Encodings specify the mapping between the DataFrame columns and their visual
    representation in the Altair chart. In practice, encodings define where to represent
    data in the chart, such as their position, size, and color. In practice, encodings
    define how data attributes are mapped to visual properties in a chart. For example,
    you can encode a dataset’s *x* values as positions on the *x*-axis and *y* values
    as positions on the y-axis. A *channel* in Altair refers to a visual property,
    like `x`, `y`, `color`, `size`, and `shape`, which can be used to represent data
    attributes in a chart.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 编码指定DataFrame列与其在Altair图表中的视觉表示之间的映射。在实践中，编码定义了数据在哪里在图表中表示，例如它们的位置、大小和颜色。在实践中，编码定义了数据属性如何映射到图表中的视觉属性。例如，您可以将数据集的*x*值编码为*x*轴上的位置，将*y*值编码为y轴上的位置。在Altair中，*通道*指的是一个视觉属性，如`x`、`y`、`color`、`size`和`shape`，可以用来在图表中表示数据属性。
- en: Each channel is associated with a data type, which describes the type of data
    an attribute contains, such as *quantitative* for numerical data, *ordinal* for
    ordered categorical data, or *nominal* for categorical data with no inherent order.
    For example, in the following listing, we use encodings to specify which columns
    of the DataFrame we must use in the x- and y-axes.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 每个通道都与一种数据类型相关联，它描述了属性包含的数据类型，例如对于数值数据使用*定量*，对于有序分类数据使用*有序*，或者对于无固有顺序的分类数据使用*名义*。例如，在下面的列表中，我们使用编码来指定DataFrame中必须用于x轴和y轴的列。
- en: Listing 2.3 Encodings in Altair
  id: totrans-36
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: '[PRE2]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '#1 Creates data for the DataFrame'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
- en: '#2 Creates the DataFrame from the data'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
- en: Note  Use `encode()` to define encodings in Altair. Place the `Age` variable
    of `df` on the x-axis and the `Name` variable of `df` on the y-axis. Interpret
    `Age` as a quantity (`Q`) and `Name` as a nominal value (`N`). To show the chart,
    save it as an HTML file using the `save()` method. Alternatively, if you are using
    a Jupyter Notebook, simply write the name of the chart variable to show the chart
    inline.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
- en: Figure 2.4 shows the chart produced by the code contained in listing 2.4\. Now
    that you have learned the basic concepts behind Altair, we will review the prerequisites
    for implementing a practical scenario in Altair and Copilot.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
- en: '![figure](../Images/2-4.png)'
  id: totrans-42
  prefs: []
  type: TYPE_IMG
- en: Figure 2.4 The chart produced by listing 2.3
  id: totrans-43
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: Exercise 1
  id: totrans-44
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Draw the charts in figures 2.2 (line chart) and 2.3 (scatter plot) using the
    DataFrame in listing 2.4.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
- en: Listing 2.4
  id: totrans-46
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: '[PRE3]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: The solutions to the exercises are in the GitHub repository for the book under
    02/line-chart.py and 02/scatter-plot.py.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
- en: '2.2 Use case: Describing the scenario'
  id: totrans-49
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Suppose we are at the end of 2019, before the COVID-19 pandemic. You work as
    a data analyst at a Portuguese hotel. Your boss has experienced increased tourist
    arrivals at their hotel and wants to invest money in building a new swimming pool.
    Before investing money, they ask you to study the phenomenon to understand whether
    their investment will be successful. The objective of your task is to see whether
    Portugal is seeing an increased number of tourist arrivals in recent years relative
    to global trends.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
- en: You start your searches and find a dataset about arrivals at tourist accommodation
    establishments ([https://mng.bz/2KOX](https://mng.bz/2KOX)), released as open
    data by Eurostat. For simplicity, in this chapter, you consider only one dataset,
    but in a real use case scenario, you should consider more data, including the
    popularity of swimming pools among tourists visiting Portugal, the cost of building
    a new swimming pool at the hotel, and the potential revenue that the new swimming
    pool could generate for the hotel.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
- en: 'The dataset contains the number of arrivals at tourist accommodation establishments
    since 2019 in all European countries. For simplicity, focus only on the following
    countries: Portugal, France, Italy, Germany, Spain, and the United Kingdom. The
    code described in this chapter can be found under CaseStudies/tourist-arrivals
    in the GitHub repository and the dataset under CaseStudies/tourist-arrivals/source.'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
- en: 2.2.1 The dataset
  id: totrans-53
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Table 2.1 shows a sample of the dataset we will analyze. The dataset contains
    the tourist arrivals at establishments from 1994 to 2019 for Italy (IT), France
    (FR), Germany (DE), Portugal (PT), Spain (ES), and the United Kingdom (UK).
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
- en: Table 2.1 Arrivals at tourist arrivals establishments since 1994
  id: totrans-55
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: '| Date | IT | FR | DE | PT | ES | UK |'
  id: totrans-56
  prefs: []
  type: TYPE_TB
- en: '| --- | --- | --- | --- | --- | --- | --- |'
  id: totrans-57
  prefs: []
  type: TYPE_TB
- en: '| 1990-01-01  | 2,543,920  |  | 3,185,877  | 325,138  | 1723,786  | 1,776,000  |'
  id: totrans-58
  prefs: []
  type: TYPE_TB
  zh: '| 1990-01-01  | 2,543,920  |  | 3,185,877  | 325,138  | 1723,786  | 1,776,000  |'
- en: '| 1990-02-01  | 2,871,632  |  | 3,588,879  | 381,539  | 1,885,718  | 2,250,000  |'
  id: totrans-59
  prefs: []
  type: TYPE_TB
  zh: '| 1990-02-01  | 2,871,632  |  | 3,588,879  | 381,539  | 1,885,718  | 2,250,000  |'
- en: '| 1990-03-01  | 3,774,702  |  | 4,272,437  | 493,957  | 2,337,847  | 2,662,000  |'
  id: totrans-60
  prefs: []
  type: TYPE_TB
  zh: '| 1990-03-01  | 3,774,702  |  | 4,272,437  | 493,957  | 2,337,847  | 2,662,000  |'
- en: '| …  | …  | …  | …  | …  | …  | …  |'
  id: totrans-61
  prefs: []
  type: TYPE_TB
  zh: '| …  | …  | …  | …  | …  | …  | …  |'
- en: '| 2019-08-01  | 11,649,500  | 13,692,822  | 14,570,339  | 2,531,809  | 12,893,366  |
    8,889,049  |'
  id: totrans-62
  prefs: []
  type: TYPE_TB
  zh: '| 2019-08-01  | 11,649,500  | 13,692,822  | 14,570,339  | 2,531,809  | 12,893,366  |
    8,889,049  |'
- en: '| 2019-09-01  | 9,888,817  | 11,684,845  | 14,373,815  | 2,263,748  |  | 5,858,984  |'
  id: totrans-63
  prefs: []
  type: TYPE_TB
  zh: '| 2019-09-01  | 9,888,817  | 11,684,845  | 14,373,815  | 2,263,748  |  | 5,858,984  |'
- en: '| 2019-10-01  | 7,692,388  | 10,401,793  | 13,780,441  | 1,995,942  |  | 7,455,781  |'
  id: totrans-64
  prefs: []
  type: TYPE_TB
  zh: '| 2019-10-01  | 7,692,388  | 10,401,793  | 13,780,441  | 1,995,942  |  | 7,455,781  |'
- en: The table contains some missing values for some countries and some years, so
    we should pay attention if, for example, we want to combine data by year, because
    aggregating incomplete years could lead to wrong results. Load the dataset as
    a pandas DataFrame, as described in the file from-data-to-information/raw-chart.py
    of the GitHub repository for the book and the following listing.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 表格中某些国家和某些年份存在一些缺失值，因此如果我们想按年份合并数据，例如，我们应该注意，因为汇总不完整的年份可能会导致错误的结果。按照书中GitHub仓库中from-data-to-information/raw-chart.py文件中的描述，将数据集作为pandas
    DataFrame加载。
- en: Listing 2.5 Loading the dataset as a pandas DataFrame
  id: totrans-66
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表2.5 将数据集作为pandas DataFrame加载
- en: '[PRE4]'
  id: totrans-67
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Note  Use pandas to load the dataset as a DataFrame. Use the `parse_dates` parameter
    to load the `Date` field as a date.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：使用pandas将数据集作为DataFrame加载。使用`parse_dates`参数将`Date`字段加载为日期。
- en: Now, you are ready to perform basic data exploration.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你已经准备好进行基本的数据探索。
- en: 2.2.2 Data exploration
  id: totrans-70
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 2.2.2 数据探索
- en: EDA is a mandatory phase to extract insights from your data, but you cannot
    use its output to build raw data stories. In fact, EDA aims to analyze and visualize
    data to extract insights and understand its underlying patterns, distributions,
    and relationships. You may even use generative AI to perform EDA. Performing a
    complete data exploration is outside of the scope of this book. You can refer
    to the bibliography at the end of this chapter to learn how to perform EDA. However,
    you can use an existing EDA library for quick data exploration, such as ydata-profiling
    ([https://pypi.org/project/ydata-profiling/](https://pypi.org/project/ydata-profiling/))
    or sweetviz ([https://pypi.org/project/sweetviz/](https://pypi.org/project/sweetviz/)).
    In this chapter, we’ll use ydata-profiling. Import the library, create a `ProfileReport()`
    object, and pass the pandas DataFrame as an input argument. Finally, build the
    report by invoking the `to_file()` method.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: EDA（探索性数据分析）是提取数据洞察的必经阶段，但你不能使用其输出构建原始数据故事。实际上，EDA的目的是分析和可视化数据以提取洞察并理解其潜在的模式、分布和关系。你甚至可以使用生成式AI进行EDA。本书的范围不包括进行完整的数据探索。你可以参考本章末尾的参考文献，了解如何进行EDA。然而，你可以使用现有的EDA库进行快速数据探索，例如ydata-profiling
    ([https://pypi.org/project/ydata-profiling/](https://pypi.org/project/ydata-profiling/))
    或 sweetviz ([https://pypi.org/project/sweetviz/](https://pypi.org/project/sweetviz/))。在本章中，我们将使用ydata-profiling。导入库，创建一个`ProfileReport()`对象，并将pandas
    DataFrame作为输入参数传递。最后，通过调用`to_file()`方法生成报告。
- en: Listing 2.6 Building a summary report
  id: totrans-72
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表2.6 构建摘要报告
- en: '[PRE5]'
  id: totrans-73
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Note  Use ydata-profiling to build a summary report of the dataset.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：使用ydata-profiling构建数据集的摘要报告。
- en: As a result, the `to_file()` method produces an HTML file that contains the
    report. Figure 2.5 shows a snapshot of the produced report.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，`to_file()`方法生成一个包含报告的HTML文件。图2.5显示了生成的报告快照。
- en: '![figure](../Images/2-5.png)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/2-5.png)'
- en: Figure 2.5 A snapshot of the report produced by ydata-profiling
  id: totrans-77
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.5 ydata-profiling生成的报告快照
- en: 'The report contains many sections, as shown in the top-right menu of figure
    2.5\. The report may help you do the following:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 报告包含许多部分，如图2.5右上角的菜单所示。报告可以帮助你完成以下任务：
- en: '*Understand the data.* The report provides an overview of the dataset, including
    the number of observations, variables, and missing values. Use this information
    to understand the data quality.'
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*理解数据。* 报告提供了数据集的概述，包括观测值数量、变量和缺失值。使用这些信息来了解数据质量。'
- en: '*Identify data types.* The report identifies the data types of each variable
    and provides a summary of their distribution, including measures such as mean,
    median, standard deviation, and range. Use this information to identify variables
    that may require further preprocessing.'
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*识别数据类型。* 报告确定了每个变量的数据类型，并提供了它们分布的摘要，包括均值、中位数、标准差和范围等指标。使用这些信息来识别可能需要进一步预处理的变量。'
- en: '*Identify correlations.* The report provides a correlation matrix, heatmap,
    and scatter plot matrix, which can help identify variables that are highly correlated
    or related.'
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*识别相关性。* 报告提供了一个相关矩阵、热图和散点图矩阵，可以帮助识别高度相关或相关的变量。'
- en: '*Identify distributions.* The report provides distribution plots, including
    histograms and density plots, to help identify each variable’s distribution shape
    and spread. Use this information to understand the underlying patterns, trends,
    and data quality problems in the data.'
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*识别分布。* 报告提供了分布图，包括直方图和密度图，以帮助识别每个变量的分布形状和范围。使用这些信息来理解数据中的潜在模式、趋势和数据质量问题。'
- en: In your case, the Missing Values section describes the presence of missing values
    for some countries (France, Spain, and the United Kingdom), as shown in figure
    2.6.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 在你的情况下，缺失值部分描述了一些国家（法国、西班牙和联合王国）的缺失值，如图2.6所示。
- en: '![figure](../Images/2-6.png)'
  id: totrans-84
  prefs: []
  type: TYPE_IMG
  zh: '![图表](../Images/2-6.png)'
- en: Figure 2.6 The report highlights missing values for France, Spain, and the United
    Kingdom.
  id: totrans-85
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.6 报告突出了法国、西班牙和联合王国的缺失值。
- en: 'Now that we have quickly explored the dataset, you are ready to build a data
    story from that dataset. Let’s start with the first approach: using Altair.'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经快速探索了数据集，你准备好从该数据集中构建一个数据故事了。让我们从第一种方法开始：使用Altair。
- en: '2.3 First approach: Altair'
  id: totrans-87
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 2.3 第一种方法：Altair
- en: 'To transform data into a story, we will proceed step by step. First, we’ll
    build a basic chart, and then we’ll gradually enrich it with the elements necessary
    to transform the chart into a story in its own right. We’ll use the principles
    of the DIKW pyramid to implement this progressive enrichment:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 为了将数据转化为故事，我们将逐步进行。首先，我们将构建一个基本图表，然后我们将逐步丰富它，添加将图表转化为独立故事的必要元素。我们将使用DIKW金字塔的原则来实现这种渐进式丰富：
- en: From data to information
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从数据到信息
- en: From information to knowledge
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从信息到知识
- en: From knowledge to wisdom
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从知识到智慧
- en: 'Let’s start with the first step of the DIKW pyramid: turning data into information.
    In this section, we’ll use the code under CaseStudies/tourist-arrivals in the
    book’s GitHub repository.'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从DIKW金字塔的第一步开始：将数据转化为信息。在本节中，我们将使用书中GitHub仓库CaseStudies/tourist-arrivals下的代码。
- en: 2.3.1 From data to information
  id: totrans-93
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 2.3.1 从数据到信息
- en: Turning data into information means extracting some insights from data. Start
    by drawing the raw chart, shown in the following code, and the file from-data-to-information/
    raw-chart.py.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 将数据转化为信息意味着从数据中提取一些见解。首先，绘制以下代码中的原始图表和文件from-data-to-information/ raw-chart.py。
- en: Listing 2.7 Building the raw chart in Altair
  id: totrans-95
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表2.7 在Altair中构建原始图表
- en: '[PRE6]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '#1 Uses the notation :T to specify that the data type is temporal'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: '#1 使用符号：:T来指定数据类型是时间的'
- en: '#2 Uses the notation :Q to specify that the data type is quantitative'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: '#2 使用符号：:Q来指定数据类型是定量的'
- en: '#3 Uses the notation :N to specify that the data type is nominal'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: '#3 使用符号：:N来指定数据类型是名义的'
- en: Note  Use the `mark_line()` property to build the raw chart in Altair. Draw
    the number of tourist arrivals on the y-axis and the date on the x-axis.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：使用`mark_line()`属性在Altair中构建原始图表。在y轴上绘制游客到达数量，在x轴上绘制日期。
- en: 'Use the `melt()` function to unpivot the dataset (i.e., transform data rows
    into columns). For more details about the `melt()` function, refer to appendix
    B. Then, build the chart. The chart uses three channels: `x` and `y` to describe
    the axes, and `color` to group by countries. For each channel, specify the column
    in the dataset (e.g., `Date` for the `x` channel) and the data type (`T` for temporal
    data, `Q` for quantitative data, and `N` for nominal data). Figure 2.7 shows the
    produced chart.'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`melt()`函数将数据集进行转置（即，将数据行转换为列）。有关`melt()`函数的更多详细信息，请参阅附录B。然后，构建图表。该图表使用三个通道：`x`和`y`描述轴，`color`按国家分组。对于每个通道，指定数据集中的列（例如，`Date`用于`x`通道）和数据类型（`T`用于时间数据，`Q`用于定量数据，`N`用于名义数据）。图2.7显示了生成的图表。
- en: '![figure](../Images/2-7.png)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![图表](../Images/2-7.png)'
- en: Figure 2.7 The raw chart produced in Altair without any manipulation
  id: totrans-103
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.7 Altair中生成的原始图表，没有任何操作
- en: 'The chart is difficult to read because all countries overlap. However, you
    can extract the following highlight: all the trend lines have increased since
    1990\. This is a positive message to communicate to your boss. From 1990 until
    2019, there has been a progressive increase in the arrival of tourists. Let’s
    focus more on this information.'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 由于所有国家重叠，图表难以阅读。然而，你可以提取以下亮点：所有趋势线自1990年以来都在增加。这是一个可以向老板传达的积极信息。从1990年到2019年，游客数量的增加是渐进的。让我们更多地关注这个信息。
- en: In all cases, you are not interested in knowing the intermediate data, as there
    are no outliers, only the starting point (1990) and the final point of the time
    series (2019). However, we note that for some countries, there is no data for
    1990, and 2019 is incomplete (the data goes up to October). In this case, the
    question is, what should we do in the presence of missing values? The answer is,
    it depends. In your case, you are dealing with a time series that grows progressively
    (seasonality excluded), so you can restrict the analysis range to only the dates
    for which you have data. Thus, you narrow your search to the range 1994–2018\.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 在所有情况下，你都不关心了解中间数据，因为没有异常值，只有时间序列的起点（1990）和终点（2019）。然而，我们注意到对于一些国家，1990年没有数据，而2019年的数据不完整（数据截止到10月）。在这种情况下，问题是，在存在缺失值的情况下我们应该怎么办？答案是，这取决于。在你的情况下，你处理的是一个逐渐增长的时间序列（排除季节性），因此你可以将分析范围仅限于你有数据的日期。因此，你将搜索范围缩小到1994–2018年。
- en: Let’s implement this strategy in Altair. Start by filtering out missing years
    from the dataset, as described in the script from-data-to-information/grouped-chart.py
    and in the following listing.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们在Altair中实施这个策略。首先，根据脚本from-data-to-information/grouped-chart.py和以下列表中的描述，从数据集中过滤掉缺失年份。
- en: Listing 2.8 Removing missing years from the dataset
  id: totrans-107
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表2.8 从数据集中删除缺失年份
- en: '[PRE7]'
  id: totrans-108
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '#1 Extract the year from the date.'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: '#1 从日期中提取年份。'
- en: '#2 Filter out years before 1994 and after 2018.'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: '#2 过滤掉1994年之前和2018年之后的年份。'
- en: Note  First, extract the year from the date column, and then filter out all
    the years before 1994 and after 2018\. Use `loc` to access a group of rows and
    columns by labels and `iloc` to access group rows and columns by numerical indices.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 注释：首先，从日期列中提取年份，然后过滤掉1994年之前和2018年之后的年份。使用`loc`通过标签访问一组行和列，使用`iloc`通过数值索引访问组行和列。
- en: Then, group data by year and calculate the sum.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，按年份分组数据并计算总和。
- en: Listing 2.9 Grouping by year and calculating the sum
  id: totrans-113
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表2.9 按年份分组并计算总和
- en: '[PRE8]'
  id: totrans-114
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '#1 Group by year and country.'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: '#1 按年份和国家分组。'
- en: Note  Use `group_by()` to group data by year and country, and calculate the
    sum through the `sum()` function. Finally, reset the index to retrieve the year.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 注释：使用`group_by()`按年份和国家分组数据，并通过`sum()`函数计算总和。最后，重置索引以检索年份。
- en: Use the `reset_index()` function to create a new index column starting from
    0, and move the current index values to a new column.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`reset_index()`函数创建一个新的索引列，从0开始，并将当前索引值移动到新列。
- en: Finally, build the chart in Altair.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，在Altair中构建图表。
- en: Listing 2.10 Building the chart in Altair
  id: totrans-119
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表2.10 在Altair中构建图表
- en: '[PRE9]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Note  Use the `mark_line()` property to build a line chart in Altair.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 注释：使用Altair的`mark_line()`属性构建折线图。
- en: Figure 2.8 shows the produced chart.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.8显示了生成的图表。
- en: '![figure](../Images/2-8.png)'
  id: totrans-123
  prefs: []
  type: TYPE_IMG
  zh: '![图表](../Images/2-8.png)'
- en: Figure 2.8 The produced chart after calculating the sum for each year and filtering
    out the boundary years
  id: totrans-124
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.8 计算每年总和并过滤边界年份后生成的图表
- en: The chart is clearer than that in figure 2.7; you can easily distinguish the
    trend line for each country. However, the presence of too many colors and countries
    does not transmit the message. Your objective is to focus on Portugal, which is
    the country about which your boss has asked for information.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 该图表比图2.7中的图表更清晰；你可以轻松地区分每个国家的趋势线。然而，过多的颜色和国家存在并不传达信息。你的目标是专注于葡萄牙，这是你老板要求你提供信息的国家。
- en: 'The increase in the number of tourists over time in the other countries is
    greater than that of Portugal. However, you are not interested in knowing the
    absolute values but rather the percentage increase for each country over time.
    If we use absolute values, instead, we can’t answer the following questions immediately:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 其他国家随时间游客数量的增加大于葡萄牙。然而，你并不关心知道绝对值，而是关心每个国家随时间的百分比增加。如果我们使用绝对值，那么我们无法立即回答以下问题：
- en: For each country, what is the percentage increase since 1994?
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于每个国家，自1994年以来百分比增长是多少？
- en: Which of the two nations experiences the greater percentage increase?
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 两个国家中哪个国家的百分比增长更大？
- en: If you use the percentage increases, we can put the two countries on a more
    comparable level, and you can answer the previous questions. Let’s calculate the
    percentage increase since 1994 for each country and then plot the chart of percentage
    increases instead of that of absolute values.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用百分比增长，我们可以将两个国家置于更可比的水平，然后你可以回答之前的问题。让我们计算每个国家自1994年以来的百分比增长，然后绘制百分比增长的图表而不是绝对值的图表。
- en: 'Calculate the percentage increase using the following formula:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 使用以下公式计算百分比增长：
- en: Percentage Increase = (Final Value – Starting Value) / Starting Value * 100
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 百分比增长 = (最终值 – 初始值) / 初始值 * 100
- en: In your case, calculate the percentage increase for each country as shown in
    the following listing and in the script from-data-to-information/chart.py.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 在你的情况下，按照以下列表和`from-data-to-information/chart.py`脚本中的说明计算每个国家的百分比增长。
- en: Listing 2.11 Calculating the percentage increase for each country
  id: totrans-133
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表2.11 计算每个国家的百分比增长
- en: '[PRE10]'
  id: totrans-134
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '#1 Add a new column containing the difference for each country between the
    number of tourist arrivals in the current year and 1994.'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: '#1 添加一个新列，包含每个国家当前年份和1994年游客到达人数之间的差异。'
- en: Note  For each country, calculate the difference between the number of tourist
    arrivals in each year and that in 1994.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 备注：对于每个国家，计算每年游客到达人数与1994年的差异。
- en: Now, build the chart again.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，再次构建图表。
- en: Listing 2.12 Drawing the chart of percentage increases
  id: totrans-138
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表2.12 绘制百分比增长的图表
- en: '[PRE11]'
  id: totrans-139
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Note  First, create a new DataFrame with the required values. Then, draw the
    chart. Use `title` to modify the title of the y-axis. Use the `scale` property
    to select the range of colors. In your case, you used a default scheme (`set2`).
    For the complete list of schemes, you can refer to the D3 documentation ([https://observablehq.com/@d3/color-schemes](https://observablehq.com/@d3/color-schemes)).
    The chart also uses the `strokeWidth` channel, which enables us to configure the
    stroke width of each line. We use a conditional statement to set the stroke width.
    To access a column value directly within a conditional statement, use `alt.datum.<column>`.
    To set the value to a specific string or number, use `alt.value()`.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 备注：首先，创建一个新的包含所需值的DataFrame。然后，绘制图表。使用`title`修改y轴的标题。使用`scale`属性选择颜色范围。在你的情况下，你使用了默认方案（`set2`）。对于方案列表的完整列表，你可以参考D3文档（[https://observablehq.com/@d3/color-schemes](https://observablehq.com/@d3/color-schemes)）。该图表还使用了`strokeWidth`通道，这使得我们可以配置每条线的宽度。我们使用条件语句来设置宽度。要在条件语句内直接访问列值，使用`alt.datum.<column>`。要将值设置为特定的字符串或数字，使用`alt.value()`。
- en: To encode the`x` channel, you used the `alt.X()` object—rather than a simple
    string, like we did before—the same as you did for the `y` and `color` channels.
    When you want to specify the channel details, you can use the channel object instead
    of a simple string. For example, you can use `alt.Y()` for the`y` channel, `alt.Color()`
    for the `color` channel, and so on. Within a channel object, you can set different
    properties that depend on the channel. For example, for the `x` and `y` channels,
    you can set the axis property. You can define a value or an additional object
    for each property within a channel. In practice, the same strategy of channels
    applies to the channel properties. For example, `axis` is a property of the `x`
    and `y` channels. You can use `alt.Axis()` to set additional properties of the
    axis. In the example, you have set the `legend` property of the `color` channel.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 为了编码`x`通道，你使用了`alt.X()`对象——而不是像之前那样使用简单的字符串——与`y`和`color`通道相同。当你想要指定通道细节时，可以使用通道对象而不是简单的字符串。例如，你可以使用`alt.Y()`为`y`通道，`alt.Color()`为`color`通道，等等。在通道对象内，你可以设置依赖于通道的不同属性。例如，对于`x`和`y`通道，你可以设置轴属性。你可以在通道内为每个属性定义一个值或额外的对象。在实践中，相同的通道策略也适用于通道属性。例如，`axis`是`x`和`y`通道的属性。你可以使用`alt.Axis()`来设置轴的额外属性。在示例中，你设置了`color`通道的`legend`属性。
- en: To build the chart, you have also used the `properties()` function, which configures
    the chart’s general properties, such as the title. Figure 2.9 shows the resulting
    chart.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 为了构建这个图表，你也使用了`properties()`函数，该函数配置了图表的一般属性，例如标题。图2.9显示了生成的图表。
- en: '![figure](../Images/2-9.png)'
  id: totrans-143
  prefs: []
  type: TYPE_IMG
  zh: '![图表](../Images/2-9.png)'
- en: Figure 2.9 The chart produced after calculating percentage increases and highlighting
    Portugal
  id: totrans-144
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.9 计算百分比增长并突出显示葡萄牙后的图表
- en: You removed the legend voluntarily because you will add it as an annotation
    following each line. The chart shows that Portugal has experienced a larger percentage
    increase in tourist arrivals than the other countries. This is an extraordinary
    discovery, and it answers your boss’s question. You have extracted information
    from the data. To highlight your discovery, add an annotation to the chart that
    precisely describes the percentage increase value in correspondence of 2018.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 你自愿移除了图例，因为你将在每条线后添加注释。该图表显示葡萄牙的游客到达量百分比增长超过了其他国家。这是一个非凡的发现，并且回答了你老板的问题。你已经从数据中提取了信息。为了突出你的发现，向图表添加一个注释，精确描述与
    2018 年对应的百分比增长值。
- en: Listing 2.13 Adding an annotation to the chart
  id: totrans-146
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表 2.13 向图表添加注释
- en: '[PRE12]'
  id: totrans-147
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '#1 Sets the offset in pixel from the x coordinate'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: '#1 设置从 x 坐标偏移的像素值'
- en: '#2 Sets the text alignment'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: '#2 设置文本对齐方式'
- en: '#3 Sets the text font size'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: '#3 设置文本字体大小'
- en: '#4 Formats the text to show only 2 decimal places and adds a percentage sign'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: '#4 格式化文本，仅显示两位小数并添加百分号'
- en: Note  Use the `mark_text()` property to draw the text. Next, combine the previous
    chart and the text annotation through the `+` operator. Use `transform _filter()`
    to select only 2018 (the position near which you want to place the annotation)
    and `transform_calculate()` to add a new column to the dataset containing the
    formatted percentage.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：使用 `mark_text()` 属性来绘制文本。接下来，通过 `+` 运算符将之前的图表和文本注释结合起来。使用 `transform_filter()`
    来选择仅 2018 年（你想要放置注释的位置）和 `transform_calculate()` 来向数据集中添加一个包含格式化百分比的新的列。
- en: The `mark_text()` function (and the other `mark_*()` functions) can receive
    as input some parameters that define some static properties of the chart. For
    example, if you want to use a static color for all the texts in the chart, set
    the color in the `mark_*()` function. If, instead, the color of the text depends
    on a column in the DataFrame, set it in the `encode()` function. Figure 2.10 shows
    the resulting chart at the end of the first step, turning data into information.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: '`mark_text()` 函数（以及其他 `mark_*()` 函数）可以作为输入接收一些参数，这些参数定义了图表的一些静态属性。例如，如果你想为图表中的所有文本使用静态颜色，请在
    `mark_*()` 函数中设置颜色。如果文本的颜色取决于 DataFrame 中的某一列，请在 `encode()` 函数中设置。图 2.10 显示了第一步结束时生成的图表，将数据转化为信息。'
- en: '![figure](../Images/2-10.png)'
  id: totrans-154
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/2-10.png)'
- en: Figure 2.10 The chart produced at the end of the first step, turning data into
    information
  id: totrans-155
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 2.10 第一步结束时生成的图表，将数据转化为信息
- en: 'The chart is clear and easy to understand. Adding information means extracting
    only the relevant data and representing it in a way that is easy for the audience
    to understand without further calculation. Now that you have turned data into
    information, it’s time to move to the next step of the DIKW pyramid: turning information
    into knowledge.'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 该图表清晰易懂。添加信息意味着只提取相关的数据，并以一种便于观众理解的方式表示，无需进一步计算。现在你已经将数据转化为信息，是时候进入 DIKW 金字塔的下一步：将信息转化为知识。
- en: Exercise 2
  id: totrans-157
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 练习 2
- en: 'Modify the chart from figure 2.10 as follows:'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 按以下方式修改图 2.10 的图表：
- en: Build a slope graph, which is a line chart showing only the first and the last
    values (1994 and 2018).
  id: totrans-159
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 构建一个斜率图，它是一种仅显示第一和最后值（1994年和2018年）的折线图。
- en: On the y-axis, show the number of tourist arrivals, not the percentage increase.
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 y 轴上显示游客到达量，而不是百分比增长。
- en: As an output, you should produce the chart shown in figure 2.11\. You can find
    the solution of the exercise under CaseStudies/tourist-arrivals/exercises/exercise1.py.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 作为输出，你应该生成图 2.11 所示的图表。你可以在 CaseStudies/tourist-arrivals/exercises/exercise1.py
    下找到练习的解决方案。
- en: '![figure](../Images/2-11.png)'
  id: totrans-162
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/2-11.png)'
- en: Figure 2.11 The output of exercise 1
  id: totrans-163
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 2.11 练习 1 的输出
- en: Exercise 3
  id: totrans-164
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 练习 3
- en: Transform the slope chart of figure 2.11 into a stacked bar chart. The solution
    of this exercise is under CaseStudies/tourist-arrivals/exercises/exercise2.py.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 将图 2.11 的斜率图转换为堆积柱状图。该练习的解决方案在 CaseStudies/tourist-arrivals/exercises/exercise2.py
    下。
- en: 2.3.2 From information to knowledge
  id: totrans-166
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 2.3.2 从信息到知识
- en: 'Turning information into knowledge means adding context to the extracted information.
    Usually, context answers the following question: Why does this situation happen?
    If possible, extend your search, or look at the same dataset to answer this question.
    In our case, the question is as follows: Why has Portugal experienced such an
    incredible increase in tourist arrivals over 25 years? To answer this question,
    you researched and discovered that Portugal (and other countries) introduced many
    low-cost flights in the early 1990s (Dobruszkes, 2013). This allowed for a much
    greater development of tourism.'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 将信息转化为知识意味着为提取的信息添加上下文。通常，上下文回答以下问题：这种情况为什么会发生？如果可能，扩展你的搜索，或者查看相同的数据库来回答这个问题。在我们的案例中，问题是这样的：为什么葡萄牙在25年内经历了如此惊人的游客数量增长？为了回答这个问题，你进行了研究并发现葡萄牙（以及其他国家）在20世纪90年代初引入了许多低成本航班（Dobruszkes，2013）。这促进了旅游业的极大发展。
- en: This finding is the context for your graph; thanks to the introduction of low-cost
    flights, Portugal has experienced an increase in tourist arrivals of over 200%
    in 25 years, even surpassing the increase in the other countries. Add this discovery
    as an annotation in the chart, as described in the script from-information-to-knowledge/
    chart.py.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 这个发现是图表的上下文；多亏了低成本航班的引入，葡萄牙在25年内游客数量增长了超过200%，甚至超过了其他国家的增长。按照脚本from-information-to-knowledge/chart.py中的描述，将这个发现作为注释添加到图表中。
- en: Listing 2.14 Adding the context to the chart
  id: totrans-169
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表2.14 向图表添加上下文
- en: '[PRE13]'
  id: totrans-170
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Note  First, build a DataFrame with the text to add to the chart. Then, use
    `mark_text()` to draw the text. Also, specify the line break symbol (`lineBreak='\n'`),
    how to align the text (`align='left'`), the font size (`fontSize=20`), the position
    (`y=100`), and the color (`color='orange'`). Finally, combine the text with the
    previous chart through the + operator.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：首先，创建一个包含要添加到图表中的文本的DataFrame。然后，使用`mark_text()`来绘制文本。还要指定换行符号（`lineBreak='\n'`）、文本对齐方式（`align='left'`）、字体大小（`fontSize=20`）、位置（`y=100`）和颜色（`color='orange'`）。最后，通过加号运算符将文本与之前的图表结合。
- en: To reinforce the text we have inserted into the chart, let’s add an additional,
    very lean chart, showing passenger traffic in Portugal over time. Use a World
    Bank dataset relating to air traffic ([https://mng.bz/RZRP](https://mng.bz/RZRP),
    released under the CC BY-4.0 license) in the various countries of the world. The
    following listing shows how to add the line chart to your main chart.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 为了加强图表中插入的文本，让我们添加一个额外的、非常简洁的图表，展示葡萄牙随时间变化的客流量。使用世界银行关于世界各国航空交通的数据集（[https://mng.bz/RZRP](https://mng.bz/RZRP)，在CC
    BY-4.0许可下发布）。以下列表显示了如何将折线图添加到主图表中。
- en: Listing 2.15 Adding the call to action to the chart
  id: totrans-173
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表2.15 向图表添加行动号召
- en: '[PRE14]'
  id: totrans-174
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Note  First, load the airport dataset as a pandas DataFrame. Next, format the
    dataset to be consumable by Altair. Then, use the `mark_line()` method to build
    a trend line. Remove the labels, ticks, and grid from the x-axis and y-axis. Finally,
    combine the airport chart and the text using the `&` operator, which corresponds
    to a vertical alignment. Also, use the `|` operator to combine charts horizontally.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：首先，将机场数据集作为pandas DataFrame加载。接下来，格式化数据集以便Altair可以使用。然后，使用`mark_line()`方法构建趋势线。从x轴和y轴移除标签、刻度和网格。最后，通过`&`运算符将机场图表和文本结合，这对应于垂直对齐。同时，使用`|`运算符水平组合图表。
- en: Figure 2.12 shows the chart resulting from the second step, turning information
    into knowledge.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.12显示了第二步：将信息转化为知识后生成的图表。
- en: '![figure](../Images/2-12.png)'
  id: totrans-177
  prefs: []
  type: TYPE_IMG
  zh: '![图表](../Images/2-12.png)'
- en: 'Figure 2.12 The chart produced after the second step: turning information into
    knowledge'
  id: totrans-178
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.12 第二步：将信息转化为知识后生成的图表
- en: 'Thanks to context, the chart answers why this happens. Now that you have turned
    information into knowledge, it’s time to move to the final step of the DIKW pyramid:
    turning knowledge into wisdom.'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 多亏了上下文，图表回答了为什么会发生这种情况。现在你已经将信息转化为知识，是时候进入DIKW金字塔的最终步骤：将知识转化为智慧。
- en: 2.3.3 From knowledge to wisdom
  id: totrans-180
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 2.3.3 从知识到智慧
- en: 'Turning knowledge into wisdom means adding a call to action to the chart and
    proposing the next steps. In this chapter, we focus only on adding a call to action.
    We’ll see how to add the next steps in the following chapters. The call to action
    invites the audience to do something. In your case, the call to action should
    answer your boss’s original question: Should I build a new swimming pool?'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 将知识转化为智慧意味着在图表中添加行动号召并提出下一步行动。在本章中，我们只关注添加行动号召。我们将在接下来的章节中看到如何添加下一步行动。行动号召邀请观众采取行动。在你的情况下，行动号召应该回答你老板的原始问题：我应该建造一个新的游泳池吗？
- en: 'Given the results of the previous analysis, formulate the following call to
    action: since the number of tourists arriving in Portugal is constantly expanding,
    you can think about building a new swimming pool! Add the call to action below
    the main chart, as shown in the following listing and the from-knowledge-to-wisdom/chart.py
    script.'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 根据先前分析的结果，制定以下行动号召：由于到达葡萄牙的游客数量持续增长，你可以考虑建造一个新的游泳池！将行动号召添加到主图表下方，如以下列表和from-knowledge-to-wisdom/chart.py脚本所示。
- en: Listing 2.16 Adding the call to action to the chart
  id: totrans-183
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表2.16 将行动号召添加到图表中
- en: '[PRE15]'
  id: totrans-184
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Note  Add a new textual annotation to the chart to formulate the call to action.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 备注  在图表中添加新的文本注释以制定行动号召。
- en: 'You can run your code locally or on a web server if it includes images (as
    we will see in the next chapters). If you don’t have a web server, you can run
    a local and temporary web server from the command line, running the following
    command in the directory containing the produced HTML file: `python` `-m` `http.server.`
    The server should listen at port 8000 and should serve all the files contained
    in the directory from which it is started. Point your browser to http://localhost:8000/chart.xhtml
    to access the chart.xhtml file. Figure 2.13 shows the chart produced by the final
    step, turning knowledge into wisdom.'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你的代码包含图像（我们将在下一章中看到），你可以在本地或Web服务器上运行它。如果你没有Web服务器，你可以从命令行运行一个本地和临时的Web服务器，在包含生成的HTML文件的目录中运行以下命令：`python`
    `-m` `http.server.` 服务器应该监听8000端口，并应该从它启动的目录中提供所有文件。将你的浏览器指向http://localhost:8000/chart.xhtml以访问chart.xhtml文件。图2.13显示了通过最终步骤，将知识转化为智慧所生成的图表。
- en: '![figure](../Images/2-13.png)'
  id: totrans-187
  prefs: []
  type: TYPE_IMG
  zh: '![图](../Images/2-13.png)'
- en: 'Figure 2.13 The chart produced by the final step: turning knowledge into wisdom'
  id: totrans-188
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.13 最终步骤产生的图表：将知识转化为智慧
- en: 'The chart contains the answer to your boss’s question. If you compare this
    chart with figure 2.5, you will probably notice a big difference: the charts in
    figures 2.9 and 2.10 show that the audience doesn’t have to do any calculations
    or processing. They can just read the result. If, on the other hand, they look
    at the chart in figure 2.5, the audience has to extract the information by themselves.'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 图表包含了你老板问题的答案。如果你将这个图表与图2.5进行比较，你可能会注意到很大的不同：图2.9和图2.10中的图表显示，观众不需要进行任何计算或处理。他们只需阅读结果即可。相反，如果他们查看图2.5中的图表，观众必须自己提取信息。
- en: Some may argue that a lot of information was lost in the process, such as what
    happened to the other European countries and what happened between 1994 and 2018\.
    Thus, the boss wouldn’t want to make a big investment based only on the numbers
    shown in the chart. This observation is correct. However, we have simplified the
    example to show the workflow used to turn data into a story. In a more complex
    scenario, you must consider additional factors and build an appropriate story,
    where each factor is a single scene of your data story.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 有些人可能会争论在过程中丢失了很多信息，比如其他欧洲国家发生了什么，以及1994年至2018年之间发生了什么。因此，老板不会仅仅基于图表中显示的数字做出重大投资。这个观察是正确的。然而，我们简化了这个例子，以展示将数据转化为故事的工作流程。在更复杂的情况下，你必须考虑额外的因素，并构建一个适当的故事，其中每个因素都是你数据故事的单个场景。
- en: 'To get an idea of the differences between Altair and Matplotlib, we will build
    the same chart using Matplotlib in the next section. If you are unfamiliar with
    Matplotlib, jump directly to section 2.4, which covers the second approach: using
    Copilot.'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 为了了解Altair和Matplotlib之间的差异，我们将在下一节中使用Matplotlib构建相同的图表。如果你不熟悉Matplotlib，可以直接跳转到2.4节，该节涵盖了第二种方法：使用Copilot。
- en: 2.3.4 Comparing Altair and Matplotlib
  id: totrans-192
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 2.3.4 比较Altair和Matplotlib
- en: 'You might wonder why there is a section on Matplotlib in a book about Altair.
    The answer is simple: the methodology described in this book, including the techniques
    of using generative AI and the DIKW pyramid, can be applied to all data visualization
    libraries, not just Altair. Indeed, you could also think about using them in other
    languages, such as R. As an example, in this section, we see a brief comparison
    between Altair and Matplotlib, highlighting the differences and similarities.'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
- en: Matplotlib is a popular Python library for data visualization. Quite likely,
    it was the first Python library you used to plot your data quickly. If you use
    Matplotlib as an alternative to Altair, consider that Matplotlib is an imperative
    library, so you must define all the steps to produce the chart. In Altair, you
    focus only on the desired output. Regardless, all the concepts related to data
    storytelling described in this book are also valid for Matplotlib, so use it if
    you prefer the imperative approach.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
- en: You can find the complete code in Matplotlib in the book’s GitHub repository
    under CaseStudies/tourist-arrivals/matplotlib/chart.py and in the following listing.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
- en: Listing 2.17 Generating the chart in Matplotlib
  id: totrans-196
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: '[PRE16]'
  id: totrans-197
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '#1 Extracts year from date'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
- en: '#2 Groups by year and country'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
- en: '#3 Filters out years before 1994 and after 2018'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
- en: '#4 Adds a new column containing the difference for each country between the
    number of tourist arrivals in the current year and 1994'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
- en: '#5 Creates a figure and axis'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
- en: '#6 Plots the data'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
- en: '#7 Sets the title and axis labels'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
- en: '#8 Adds a legend'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
- en: '#9 Saves the plot'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
- en: Note  Build a separate line for each country.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
- en: Figure 2.14 shows the produced chart in Matplotlib. The chart could be improved
    by adding chart lines, data points, or labels for easy reading and good presentation.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
- en: '![figure](../Images/2-14.png)'
  id: totrans-209
  prefs: []
  type: TYPE_IMG
- en: Figure 2.14 The produced chart in Matplotlib
  id: totrans-210
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: 'The Altair code is more verbose than that in Matplotlib. However, in Matplotlib,
    you must draw each line or text separately, while in Altair, you pass the DataFrame
    and the library draws a line or a mark in general for you. Now that you have turned
    your data into wisdom by hand and seen the differences between Altair and Matplotlib,
    we will move to the alternative method: using GitHub Copilot to build the chart
    semi-automatically.'
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
- en: '2.4 A second approach: Copilot'
  id: totrans-212
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Copilot enables you to write code to implement something automatically. We’ll
    enable Copilot as an extension of Visual Studio Code (VSC). To install VSC, refer
    to its official documentation ([https://code.visualstudio.com/docs/introvideos/basics](https://code.visualstudio.com/docs/introvideos/basics)),
    and to configure Copilot, please refer to appendix A.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
- en: To use Copilot, it is sufficient to describe the sequence of operations to be
    implemented in an orderly manner, and Copilot will do the rest for us, even proposing
    different implementation options. In this section, we will use Copilot to build
    the framework of the graph (i.e., its main parts). Then, we will add the details
    by hand, using colors and font size. The main difficulty in using Copilot is describing
    what the code needs to implement in natural language. The clearer the text is,
    the more consistent Copilot will be in implementation.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
- en: In this section, we’ll describe how to translate the code written in the previous
    sections into a sequence of texts understandable by Copilot. We will focus only
    on translating the framework of the graph into the natural language without considering
    the details, such as the font size and colors used. Find the code generated by
    GitHub Copilot in the book’s repository under CaseStudies/tourist-arrivals/copilot/chart.py.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
- en: 'We will break the problem down into steps:'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
- en: Loading and cleaning the dataset
  id: totrans-217
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Calculating the percentage increase
  id: totrans-218
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Plotting the basic chart in Altair
  id: totrans-219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Enriching the chart
  id: totrans-220
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: We’ll cover each step in the coming sections.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
- en: 2.4.1 Loading and cleaning the dataset
  id: totrans-222
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Before using the dataset, you must load the required libraries, open the dataset
    as a pandas DataFrame, and calculate the percentage increases. The idea is to
    prepare data to build the chart in figure 2.13\.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
- en: Open VSC, and write the following comments.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
- en: Listing 2.18 Loading and filtering the dataset
  id: totrans-225
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: '[PRE17]'
  id: totrans-226
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Note  Describe the sequence of operations to load and filter the dataset.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
- en: If you press Enter at the end of the last comment and start writing `import`,
    Copilot will propose to complete the statement. Just press Enter to accept the
    generated code. Alternatively, hover over the proposed text with the mouse, and
    open Copilot, as shown in figure 2.15.
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
- en: '![figure](../Images/2-15.png)'
  id: totrans-229
  prefs: []
  type: TYPE_IMG
- en: Figure 2.15 How to open Copilot in VSC
  id: totrans-230
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: Depending on the generated code, Copilot may propose different solutions, as
    shown in figure 2.16\. Click Accept Solution to accept a solution. In our case,
    the second solution implements the described steps. Note that every time you run
    Copilot, it may generate different solutions, even if you rerun the same text.
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
- en: '![figure](../Images/2-16.png)'
  id: totrans-232
  prefs: []
  type: TYPE_IMG
- en: Figure 2.16 The different solutions proposed by Copilot in VSC
  id: totrans-233
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: 2.4.2 Calculating the percentage increase
  id: totrans-234
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The next step involves building a new dataset, starting from the previously
    cleaned dataset. The new dataset will contain the percentage increase values for
    Portugal and Germany. Write the following operation.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
- en: Listing 2.19 Building a new DataFrame with percentage increase
  id: totrans-236
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: '[PRE18]'
  id: totrans-237
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: Note  Describe how to calculate the percentage increase.
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
- en: As in the previous case, Copilot could propose multiple solutions. Open Copilot
    to check the possible solutions, and accept the one that best implements your
    operations. If you don’t find any solution that implements your text, rewrite
    the text by adding more details. If, even after rewriting the text, you can’t
    find a solution that implements your operations, accept the solution closest to
    your requests and modify it according to your needs.
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
- en: 2.4.3 Plotting the basic chart in Altair
  id: totrans-240
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Now, we’ll instruct Copilot to build a chart similar to what we saw in figure
    2.12 (except the airport dataset chart) regarding the percentage increase.
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
- en: Listing 2.20 Building the chart in Altair
  id: totrans-242
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: '[PRE19]'
  id: totrans-243
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: Note  Describe how the hart should look.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
- en: Copilot could propose multiple solutions. Open Copilot to check the possible
    solutions, and accept the one that best implements your operations.
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
- en: 2.4.4 Enriching the chart
  id: totrans-246
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Instruct Copilot to add the context. In addition, save the resulting chart into
    an HTML file named output.xhtml.
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
- en: Listing 2.21 Enriching the chart
  id: totrans-248
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: '[PRE20]'
  id: totrans-249
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: Note  Write the annotation and title to show in the chart.
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
- en: Once the code is complete, save and run the script. Figure 2.17 shows the resulting
    chart.
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
- en: '![figure](../Images/2-17.png)'
  id: totrans-252
  prefs: []
  type: TYPE_IMG
- en: Figure 2.17 The chart produced by Copilot
  id: totrans-253
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: 'The chart is a good starting point, but it still needs improvement. To improve
    the chart, you can run the following steps manually:'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
- en: Increase the font size of the annotation.
  id: totrans-255
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Increase the stroke width of the PT line.
  id: totrans-256
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Using Copilot may seem pointless, since some elements still need to be managed
    manually. However, with practice, you will realize how valuable Copilot is for
    speeding up the writing times of the simplest parts of your code. Copilot will
    remember your previous code and adapt to your programming style as you use it.
    With practice, it will likely become your programming companion, just like it
    is for me!
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
- en: In this chapter, you have learned how to turn a raw dataset into a data story
    using Altair and Copilot. In the next chapter, we will review Altair’s basic concepts.
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  id: totrans-259
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Altair is a declarative library for data manipulation and visualization. It
    provides three main elements to build a chart: a chart, a mark, and encodings.
    Use the chart element to specify the dataset to plot. Use the mark to specify
    the type of chart to draw, and encodings to set the channels, such as the x- and
    y-axes.'
  id: totrans-260
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: To turn raw data into a data story, use the DIKW principles progressively. Start
    by cleaning your dataset, and then extract only meaningful information. Draw the
    extracted information. Then, add a context and a call to action as annotations.
  id: totrans-261
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Copilot is a powerful tool for speeding up code generation. To make Copilot
    generate your code, split the problem into small steps and describe each step
    using natural language. Although Copilot is not perfect, it can assist you in
    building the framework of your code.
  id: totrans-262
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Use Copilot to automatically generate your code’s framework, and then manually
    improve the code.
  id: totrans-263
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: References
  id: totrans-264
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: EDA
  id: totrans-265
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: General approach
  id: totrans-266
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 通用方法
- en: 'Gupta, D., Bhattacharyya, S., Khanna, A., and Sagar, K. (Eds.). (2020). *Intelligent
    Data Analysis: From Data Gathering to Data Comprehension*. John Wiley & Sons.'
  id: totrans-267
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Gupta, D., Bhattacharyya, S., Khanna, A., and Sagar, K. (Eds.). (2020). *Intelligent
    Data Analysis: From Data Gathering to Data Comprehension*. John Wiley & Sons.'
- en: 'Rasmussen, R., Gulati, H., Joseph, C., Stanier, C., and Umegbolu, O. (2019).
    *Data Analyst: Careers in Data Analysis*. BCS Publishing.'
  id: totrans-268
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Rasmussen, R., Gulati, H., Joseph, C., Stanier, C., and Umegbolu, O. (2019).
    *Data Analyst: Careers in Data Analysis*. BCS Publishing.'
- en: 'Khalil, M. (2024). *Effective Data Analysis: Hard and Soft Skills*. Manning
    Publications.'
  id: totrans-269
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Khalil, M. (2024). *Effective Data Analysis: Hard and Soft Skills*. Manning
    Publications.'
- en: Python
  id: totrans-270
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: Python
- en: Mukhiya, S. K. and Ahmed, U. (2020). *Hands-On Exploratory Data Analysis with
    Python*. Packt Publishing.
  id: totrans-271
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Mukhiya, S. K. and Ahmed, U. (2020). *Hands-On Exploratory Data Analysis with
    Python*. Packt Publishing.
- en: Oluleye, A. (2023). *Exploratory Data Analysis with Python Cookbook*. Packt
    Publishing.
  id: totrans-272
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Oluleye, A. (2023). *Exploratory Data Analysis with Python Cookbook*. Packt
    Publishing.
- en: Tools and libraries
  id: totrans-273
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 工具和库
- en: '*Altair: Declarative Visualization in Python*. (n.d.). [https://altair-viz.github.io/](https://altair-viz.github.io/)'
  id: totrans-274
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Altair: Declarative Visualization in Python*. (n.d.). [https://altair-viz.github.io/](https://altair-viz.github.io/)'
- en: '*GitHub*. (n.d.). *GitHub Copilot: Your AI Pair Programmer*. [https://github.com/features/copilot](https://github.com/features/copilot).'
  id: totrans-275
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*GitHub*. (n.d.). *GitHub Copilot: Your AI Pair Programmer*. [https://github.com/features/copilot](https://github.com/features/copilot).'
- en: Other
  id: totrans-276
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 其他
- en: 'Dobruszkes, F. (2013). The Geography of European Low-Cost Airline Networks:
    A Contemporary Analysis. *Journal of Transport Geography*, *28*, 75–88\.'
  id: totrans-277
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Dobruszkes, F. (2013). The Geography of European Low-Cost Airline Networks:
    A Contemporary Analysis. *Journal of Transport Geography*, *28*, 75–88\.'
