- en: 8 Counterfactuals and parallel worlds
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 8 反事实与平行世界
- en: This chapter covers
  id: totrans-1
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 本章涵盖了
- en: Motivating examples for counterfactual reasoning
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 反事实推理的激励示例
- en: Turning counterfactual questions into symbolic form
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将反事实问题转化为符号形式
- en: Building parallel world graphs for counterfactual reasoning
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为反事实推理构建平行世界图
- en: Implementing the counterfactual inference algorithm
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实现反事实推理算法
- en: Building counterfactual deep generative models of images
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 构建图像的反事实深度生成模型
- en: 'Marjani, a good friend of mine, once had to choose between two dating prospects
    at the same time. She had something of a mental score card for an ideal long-term
    match. She had good chemistry with one guy, but he didn’t rank well on the score
    card. In contrast, the second guy checked all the boxes, so she chose him. But
    after some time, despite him meeting all her criteria, she couldn’t muster any
    feelings for him. It was like a failed ritual summoning; the stars were perfectly
    aligned, but the summoned spirit never showed up. And so, as any of us would in
    that situation, she posed the *counterfactual question*:'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: Marjani，我的一个好朋友，曾经不得不在两个约会对象之间做出选择。她有一个理想的长期伴侣的心理成绩单。她和一个男人有很好的化学反应，但在成绩单上排名不高。相比之下，第二个男人满足了所有的条件，所以她选择了第二个。但过了一段时间，尽管他满足了她的所有标准，她对他没有任何感觉。这就像一个失败的召唤仪式；星星完美对齐，但被召唤的灵魂从未出现。因此，就像我们中的任何人在那种情况下会做的那样，她提出了*反事实问题*：
- en: I chose a partner based on my criteria and it’s not working out. Would it have
    worked out if I chose based on chemistry?
  id: totrans-8
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 我根据自己的标准选择伴侣，但结果并不好。如果我是根据化学反应来选择，结果会怎样？
- en: Counterfactual queries like this describe hypothetical events that did not occur
    but could have occurred if something had been different. Counterfactuals are fundamental
    to how we define causality; if the answer to Marjani’s question is yes, it implies
    that choosing based on her score card *caused* her love life to be unsuccessful.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 类似这样的反事实查询描述了没有发生但可能发生的事件。反事实是我们定义因果关系的基础；如果Marjani的问题答案是肯定的，这意味着根据她的成绩单选择*导致了*她的爱情生活不成功。
- en: Counterfactuals are core to the bread-and-butter question of causal effect inference,
    where we compare observed outcomes to “potential outcomes” that didn’t happen,
    like the outcome of Marjani’s love life if she chose a partner based on chemistry.
    More broadly, answering counterfactual questions is useful in learning policies
    for better decision-making. When some action leads to some outcome, and you ask
    how a different action might have led to a different outcome, a good answer can
    help you select better actions in the future. For example, after this experience,
    Marjani revised her score card to factor in chemistry when considering later romantic
    prospects.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 反事实是因果效应推断的基本问题，其中我们比较观察到的结果与“潜在结果”，例如Marjani的爱情生活如果她根据化学反应选择伴侣的结果。更广泛地说，回答反事实问题对于学习更好的决策策略是有用的。当某个行动导致某个结果时，如果你问不同的行动可能会导致不同的结果，一个好的答案可以帮助你在未来选择更好的行动。例如，在这段经历之后，Marjani修改了她的成绩单，在考虑后来的浪漫前景时考虑了化学反应。
- en: We’ll look at practical examples in this chapter, but I led with this love and
    romance example because it is universally relatable. It illustrates how fundamental
    counterfactual reasoning is to human cognition—our judgments about the world are
    fueled by our imagination of what could have been.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 本章我们将探讨实际示例，但我首先以爱情和浪漫的例子开始，因为它具有普遍的关联性。它说明了反事实推理对人类认知的基本性——我们对世界的判断是由我们对可能发生的事情的想象所驱动的。
- en: Note that Marjani’s counterfactual reasoning involves a type of prediction.
    Like a Marvel superhero film, she is imagining a *parallel world* where she chose
    based on chemistry, and she’s *predicting* the outcome of her love life in that
    world. But statistical machine learning algorithms are better at making predictions
    than humans. That insight leads us to the prospect of building AI that automates
    human-like counterfactual reasoning with statistical machine learning tools.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，Marjani的反事实推理涉及一种预测。就像漫威超级英雄电影一样，她想象了一个*平行世界*，在这个世界里她根据化学反应做出选择，并且她*预测*在这个世界里她爱情生活的结果。但统计机器学习算法在预测方面比人类更擅长。这个洞察力引导我们展望构建使用统计机器学习工具自动进行类似人类反事实推理的AI的前景。
- en: In this chapter, we’ll pursue that goal by learning to formalize counterfactual
    questions with probability. In the next chapter, we’ll implement a probabilistic
    counterfactual inference algorithm that can answer these questions. Let’s start
    by exploring some practical case studies that motivate algorithmic counterfactual
    reasoning.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将通过学习使用概率形式化反事实问题来追求这一目标。在下一章中，我们将实现一个概率反事实推理算法，可以回答这些问题。让我们先探索一些激发算法反事实推理动机的实际案例研究。
- en: 8.1 Motivating counterfactual reasoning
  id: totrans-14
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 8.1 激发反事实推理的动机
- en: Here, I’ll introduce some case studies demonstrating the business value of answering
    counterfactual questions. I’ll then argue how they are useful for enhancing decision-making.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我将介绍一些案例研究，展示回答反事实问题在商业上的价值。然后，我将论证它们如何有助于提高决策能力。
- en: 8.1.1 Online gaming
  id: totrans-16
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.1.1 在线游戏
- en: Recall the online gaming example from chapter 7, where the amount of in-game
    purchases a player made was driven by their level of engagement in side-quests
    and whether they were in a guild. Suppose we observed an individual player who
    was highly engaged in side-quests and had many in-game purchases. A counterfactual
    question of interest might be, “What would their amount of in-game purchases be
    if their engagement was low?”
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 回想第7章中的在线游戏例子，其中玩家的游戏内购买量是由他们在支线任务中的参与程度以及他们是否在公会中驱动的。假设我们观察到一个高度参与支线任务并且有很多游戏内购买的玩家。一个有趣的反事实问题可能是，“如果他们的参与度低，他们的游戏内购买量会是多少？”
- en: 8.1.2 The streaming wars
  id: totrans-18
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.1.2 流媒体战争
- en: The intense competition amongst subscription streaming companies for a finite
    market of subscribers has been dubbed “the streaming wars.” Netflix is a dominant
    player with long experience in the space. It has learned to attract new subscribers
    by building blockbuster franchises from scratch, such as *House of Cards*, *Stranger
    Things,* and *Squid Game*.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 订阅流媒体公司之间在有限的市场中争夺订阅者，这种激烈的竞争被称为“流媒体战争”。Netflix是这个领域的领头羊，拥有丰富的经验。它学会了通过从头开始建立大片系列来吸引新订阅者，例如
    *纸牌屋*、*怪奇物语* 和 *鱿鱼游戏*。
- en: However, Netflix competes with Amazon, Apple, and Disney—companies with extremely
    deep pockets. They can compete with Netflix’s ability to build franchises from
    scratch by simply buying existing successful franchises (e.g., *Star Wars*) and
    making novel content within that franchise (e.g., *The Mandalorian*).
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，Netflix与拥有极其雄厚资金实力的亚马逊、苹果和迪士尼竞争。他们可以通过简单地购买现有的成功系列（例如，*星球大战*）并在该系列内制作新颖的内容（例如，*曼达洛人*）来与Netflix从零开始建立系列的能力竞争。
- en: Suppose that Disney is in talks to buy *James Bond*, the most valuable spy thriller
    franchise ever, and Netflix believes that a successful Bond deal may cause it
    to lose subscribers to Disney. Netflix hopes to prevent this by striking a deal
    with a famous showrunner to create a new spy-thriller franchise called *Dead Drop*.
    This new franchise would combine tried and true spy thriller tropes (e.g., gadgetry,
    exotic backdrops, car chases, over-the-top action sequences) with the complex
    characters, diverse representation, and emotionally compelling storylines characteristic
    of Netflix-produced shows. There is uncertainty about whether Netflix executives
    can close a deal with the candidate showrunner, as both parties would have to
    agree on creative control, budget, royalties, etc.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 假设迪士尼正在与购买有史以来最有价值的间谍惊悚片系列 *詹姆斯·邦德* 进行谈判，而Netflix认为一个成功的邦德交易可能会导致它失去迪士尼的订阅者。Netflix希望通过与一位著名剧集制作人达成协议，创建一个名为
    *Dead Drop* 的新间谍惊悚片系列来防止这种情况。这个新系列将结合经过考验的间谍惊悚片元素（例如， gadgets、异国情调的背景、汽车追逐、夸张的动作场面）以及Netflix制作的剧集所特有的复杂角色、多样化的表现和情感上引人入胜的故事情节。Netflix高管能否与候选剧集制作人达成协议存在不确定性，因为双方必须就创意控制、预算、版税等达成一致。
- en: Suppose the Bond deal succeeded, and Disney Plus now runs new series and films
    set in the “Bond-verse.” However, the *Dead Drop* deal fell through. Netflix then
    acquires data that identifies some subscribers who subsequently left Netflix,
    subscribed to Disney Plus, and went on to watch the new Bond content.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 假设邦德交易成功，迪士尼+ 现在运行了以“邦德宇宙”为背景的新系列和电影。然而，*Dead Drop* 交易失败了。Netflix随后获得了数据，这些数据确定了某些随后离开Netflix、订阅了迪士尼+
    并观看新邦德内容的订阅者。
- en: 'A Netflix executive would be inclined to ask the following counterfactual:
    “Would those lost subscribers have stayed, had the *Dead Drop* deal succeeded?”
    Suppose the answer is “no,” because the Bond content was so strong an attraction
    that the *Dead Drop* deal outcome didn’t matter. In this case, the employees who
    failed to close the deal should not be blamed for losing subscribers.'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 一个Netflix高管可能会提出以下反事实问题：“如果“Dead Drop”交易成功，那些流失的订户会留下吗？” 假设答案是“不会”，因为邦德内容吸引力如此之强，以至于“Dead
    Drop”交易的结果并不重要。在这种情况下，未能关闭交易的工作人员不应该因为失去订户而受到责备。
- en: Or, suppose the *Dead Drop* deal succeeded, and Netflix subscribers can now
    watch the new *Dead Drop* franchise. “Would those subscribers who watch *Dead
    Drop* have left for the new Bond series on Disney, had the deal failed?” Again,
    if the answer is “no,” the employees who successfully closed the deal shouldn’t
    get credit for keeping all those subscribers.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 或者，假设“Dead Drop”交易成功，Netflix订户现在可以观看新的“Dead Drop”系列。 “如果交易失败，那些观看“Dead Drop”的订户会转向迪士尼的新邦德系列吗？”
    再次，如果答案是“不会”，那么成功关闭交易的工作人员不应该因为保留所有这些订户而获得赞誉。
- en: In both cases, answering these questions would help inform future deal-making
    decisions.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 在这两种情况下，回答这些问题将有助于指导未来的交易决策。
- en: 8.1.3 Counterfactuals analysis of machine learning models
  id: totrans-26
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.1.3 机器学习模型的反事实分析
- en: In this chapter, we are focusing on using a causal model to reason counterfactually
    about some data generating process. In machine learning, often the goal is a counterfactual
    analysis of a machine learning model itself; i.e., given some input features and
    some output predictions, how would the predictions have differed if the inputs
    were different? This counterfactual analysis supports explainable AI (XAI), AI
    fairness, and other tasks.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们专注于使用因果模型来对某些数据生成过程进行反事实推理。在机器学习中，通常的目标是对机器学习模型本身进行反事实分析；即，给定一些输入特征和一些输出预测，如果输入不同，预测会有何不同？这种反事实分析支持可解释人工智能（XAI）、人工智能公平性以及其他任务。
- en: Counterfactual analysis in classification
  id: totrans-28
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 分类中的反事实分析
- en: Consider the task of classification—a trained algorithm takes as input some
    set of features for a given example and produces a predicted class for that example.
    For example, given the details of a loan application, an algorithm classifies
    the application as “reject” or “approve.”
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑分类任务——一个训练好的算法接受一些给定示例的特征集合，并为该示例生成一个预测类别。例如，给定一个贷款申请的详细信息，一个算法将申请分类为“拒绝”或“批准”。
- en: 'Given a rejected application, a counterfactual question naturally arises: “Would
    the application have been approved if *some elements* of the application were
    different?” Often, the goal of the counterfactual analysis is to find a minimal
    change to the feature vector that corresponds to a change in the classification.
    Figure 8.1 illustrates this idea.'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 给定一个被拒绝的申请，一个自然出现的反事实问题是：“如果申请中的某些元素不同，申请会被批准吗？” 通常，反事实分析的目标是找到对应于分类变化的最小特征向量变化。图8.1说明了这个想法。
- en: '![figure](../Images/CH08_F01_Ness.png)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/CH08_F01_Ness.png)'
- en: Figure 8.1 What is the minimal change to the input feature that would have led
    to approval? In this case, the loan would have been approved if income were $20,000
    higher.
  id: totrans-32
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图8.1 什么是最小的输入特征变化，会导致批准？在这种情况下，如果收入高出20,000美元，贷款就会被批准。
- en: Finding the minimal change that would have led to approval requires defining
    a distance metric in the feature space and then finding the feature value on the
    other side of the class boundary. In this example, the hypothetical condition
    “if the applicant had $20,000 more a year in income . . .” corresponds to the
    smallest change to the feature vector (in terms of distance on the decision surface)
    that would have led to approval. This type of analysis is useful for XAI; i.e.,
    for understanding how features drive classification on a case-by-case basis.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 找到导致批准的最小变化需要定义特征空间中的距离度量，然后找到类别边界另一侧的特征值。在这个例子中，假设条件“如果申请人有每年20,000美元更多的收入……”对应于特征向量（在决策表面的距离方面）的最小变化，这将导致批准。这种分析对XAI很有用；即，理解特征如何逐个案例驱动分类。
- en: Counterfactual algorithmic recourse
  id: totrans-34
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 反事实算法回溯
- en: Increasing salary by $20,000 is unrealistic for most loan applicants. That’s
    where counterfactual-based algorithmic recourse can be useful. *Algorithmic recourse*
    looks for the nearest hypothetical condition that would have led to a different
    classification. It operates under the constraint that the hypothetical condition
    was *achievable* or *actionable* by the applicant. Figure 8.2 shows how this works.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 对于大多数贷款申请人来说，增加$20,000的薪水是不现实的。这就是基于反事实的算法回溯可以发挥作用的地方。*算法回溯*寻找最近的假设条件，该条件可能导致不同的分类。它是在假设条件对申请人来说是*可实现的*或*可操作的*的约束下运行的。图8.2展示了这是如何工作的。
- en: In this example, the assumption is that increasing income by $5,000 *and* improving
    one’s credit score was achievable, according to some criteria (while increasing
    income by $20,000 was not).
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个例子中，假设是根据某些标准（而增加$20,000的收入则不是），增加$5,000的收入并提高信用评分是可实现的。
- en: '![figure](../Images/CH08_F02_Ness.png)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/CH08_F02_Ness.png)'
- en: Figure 8.2 In algorithmic recourse, we’re often interested in the nearest *actionable*
    feature vector on the other side of the decision boundary.
  id: totrans-38
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图8.2 在算法回溯中，我们通常对决策边界另一侧最近的*可操作*特征向量感兴趣。
- en: Algorithmic recourse aims to give individuals subjected to machine learning–based
    decisions information that they can work with. If one fails an exam and asks why,
    an explanation of “because you are not a genius” is less useful than “because
    you didn’t review the practice exam,” even though both may be true.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 算法回溯旨在为受到基于机器学习决策的个人提供他们可以操作的信息。如果一个人考试不及格并询问原因，解释“因为你不是天才”不如“因为你没有复习练习考试”有用，尽管两者可能都是真的。
- en: Counterfactual fairness
  id: totrans-40
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 反事实公平性
- en: Counterfactual fairness analysis is a similar analysis that applies in cases
    where some of the input features correspond to attributes of a person. The idea
    is that certain attributes of an individual person should not, on ethical grounds,
    impact the classification. For example, it is unethical to use one’s ethnicity
    or gender in the decision to offer a loan. Even if such “protected attributes”
    are not explicitly coded into the input features, the classification algorithm
    may have learned proxies for protected attributes, such as the neighborhood where
    one lives, one’s social network, shopping habits, etc. It may make sense to have
    such features in the model, and it may not be obvious when those features behave
    as proxies for protected attributes.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 反事实公平性分析是一种类似的分析，适用于某些输入特征对应于个人属性的情况。其理念是，个人的某些属性在道德上不应影响分类。例如，使用一个人的种族或性别来决定是否提供贷款是不道德的。即使这样的“受保护属性”没有明确编码到输入特征中，分类算法也可能已经学会了受保护属性的代理，例如一个人居住的社区、社交网络、购物习惯等。在模型中包含这样的特征是有意义的，而且当这些特征作为受保护属性的代理时，可能并不明显。
- en: Figure 8.3 uses the loan algorithm example to illustrate how a counterfactual
    fairness analysis would ask counterfactual questions. In this case, the counterfactual
    question is “Would this person have been approved if they were of a different
    ethnicity?” The analyst would find features that are proxies for ethnicity and
    then see if a change to those proxies corresponding to a change in ethnicity would
    result in a classification of “approve.” Some techniques attempt to use this analysis
    during training to produce fairer algorithms.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.3使用贷款算法示例来说明反事实公平性分析将如何提出反事实问题。在这种情况下，反事实问题是“如果这个人属于不同的种族，他会被批准吗？”分析师会找到代表种族的特征，然后看看这些代理特征的变化是否会导致“批准”的分类。一些技术试图在训练期间使用这种分析来产生更公平的算法。
- en: '![figure](../Images/CH08_F03_Ness.png)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/CH08_F03_Ness.png)'
- en: Figure 8.3 For counterfactual fairness, suppose we want to test whether the
    algorithm has a bias against certain ethnicities. For a given feature vector,
    an ethnicity element, and a corresponding “reject” outcome, we test if the outcome
    would change if the ethnicity element changed.
  id: totrans-44
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图8.3 对于反事实公平性，假设我们想测试算法是否对某些种族存在偏见。对于给定的特征向量、种族元素和相应的“拒绝”结果，我们测试如果种族元素改变，结果是否会改变。
- en: While counterfactual fairness analysis is not enough to solve the broad problem
    of AI fairness, it is an essential element in the AI fairness toolkit.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然反事实公平性分析不足以解决人工智能公平性的广泛问题，但它是在人工智能公平性工具包中的一个基本要素。
- en: 8.1.4 Regret and why do we care about what “would have happened?”
  id: totrans-46
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.1.4 悔恨与为什么我们关心“本会发生什么？”
- en: Traditional machine learning is usually forward-looking. Given data, you make
    a prediction, that prediction drives some decision to be made in the present,
    and that decision brings about some future cost or benefit. We want good predictions
    so we can get more future benefits. Imagine, for example, a machine learning algorithm
    that could accurately forecast the performance of a stock portfolio—that would
    obviously be quite valuable.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 传统机器学习通常是面向未来的。给定数据，你做出一个预测，这个预测将驱动现在做出一些决策，而这个决策将带来一些未来的成本或收益。我们希望得到好的预测，以便获得更多的未来收益。想象一下，例如，一个能够准确预测股票投资组合表现的机器学习算法——这显然是非常有价值的。
- en: Now, imagine a different algorithm that could accurately tell you how your portfolio
    would perform today if you had bought different stocks; that would certainly be
    less valuable than predicting the future. This contrast highlights a common criticism
    that modeling counterfactuals is backward-looking. For example, the counterfactual
    questions in our motivating case studies focus on decisions and outcomes that
    happened in the past. What’s done is done; getting the answers to such questions
    won’t change the past.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，想象一个不同的算法，它能够准确地告诉你，如果你买了不同的股票，你的投资组合今天会表现如何；这肯定比预测未来要少有价值。这种对比突出了对建模反事实的常见批评，即它是面向过去的。例如，我们动机案例研究中的反事实问题集中在过去发生的决策和结果上。事情已经发生；得到这些问题的答案不会改变过去。
- en: But, first, not all counterfactuals are retrospective. In section 8.3 we’ll
    model questions like “What are the chances the subscriber would churn if you don’t
    send them a promotion and would not churn if you did send a promotion?” (“Churn”
    means to stop using a product or service within a certain time period.) That question
    has no past tense, does have business value, and is something we can model.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 但是，首先，并非所有反事实都是回顾性的。在第8.3节中，我们将建模类似“如果你不发促销信息，订阅者会有多大几率流失？如果你发了促销信息，他们就不会流失？”的问题（“流失”意味着在特定时间段内停止使用产品或服务。）这个问题没有过去时态，具有商业价值，并且是我们能够建模的。
- en: Second, *retrospective* *counterfactuals help you understand how to make better
    decisions in the future*. Indeed, analyzing how your portfolio would have performed
    given different allocations—what investors call “backtesting”—is ideal for comparing
    various investment strategies. Similarly, the counterfactual insights from a failed
    *Dead Drop* deal might help Netflix executives make a deal with another famous
    showrunner.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 其次，*回顾性反事实*有助于你了解如何在未来做出更好的决策。确实，分析在给定不同分配的情况下你的投资组合会如何表现——投资者称之为“回测”——是对比各种投资策略的理想方式。同样，从失败的*Dead
    Drop*交易中得到的反事实洞察可能有助于Netflix高管与另一位著名剧集制作人达成交易。
- en: When we consider retrospective reasoning about things that *would have* or *could
    have* been, we arrive at the notion of *regret*. Regret is about retrospective
    counterfactual contrasts; given a choice, regret is a comparison between an outcome
    of the option you chose and an imagined counterfactual outcome of an option you
    rejected. In colloquial terms, regret is the bad feeling you get when the counterfactual
    outcome of an option you rejected is better than the option you chose. But cognitive
    science calls this *negative regret*; there is also *positive regret*, which is
    the good feeling you get when, upon comparing to imagined counterfactual outcomes,
    you realize you chose the better option (as in, “whew, I really dodged a bullet”).
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们考虑关于“本会”或“本可能”发生的事情的回顾性推理时，我们就会得到*遗憾*的概念。遗憾是关于回顾性反事实对比的；在给定选择的情况下，遗憾是所选择选项的结果与所拒绝选项的想象中的反事实结果之间的比较。用通俗的话说，当你拒绝的选项的反事实结果比你所选择的选项更好时，你会感到一种不良的感觉。但认知科学称之为*负面遗憾*；也存在*正面遗憾*，这是当你与想象中的反事实结果比较时，意识到你选择了更好的选项时所获得的良好感觉（例如，“哎呀，我真是躲过了一劫”）。
- en: Regret can be useful for learning to make better decisions. Suppose you make
    a choice, you pay a cost (time, effort, resources, etc.), and it leads to an outcome.
    That gives you a baseline single point of data for learning. Now, suppose that,
    with the benefit of hindsight, you could imagine with 100% accuracy the outcome
    that would have occurred had you made a different choice. Now you have two comparable
    points of data for learning, and you only had to pay a cost for one of them.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 遗憾对于学习做出更好的决策是有用的。假设你做出一个选择，你付出了一定的代价（时间、精力、资源等），并导致了一个结果。这为你提供了一个基线单点数据用于学习。现在，假设你从后见之明中可以想象，如果你做出了不同的选择，会发生什么样的结果，并且你可以以100%的准确性想象出来。现在你有了两个可比较的学习数据点，而你只需为其中一个付出代价。
- en: Usually your ability to imagine the counterfactual outcome of the rejected option
    is not 100% accurate. Even with the benefit of hindsight, there is still some
    uncertainty about the counterfactual outcome. But that’s no problem—we can model
    that uncertainty with probability. As long as hindsight knowledge provides you
    with some information about counterfactual outcomes, you can do better than the
    baseline of learning from a single point of data.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，你想象被拒绝的选项的反事实结果的能力并不是100%准确的。即使有后见之明，对反事实结果仍然存在一些不确定性。但这不是问题——我们可以用概率来模拟这种不确定性。只要后见之明知识为你提供了有关反事实结果的一些信息，你就可以比从单一数据点学习做得更好。
- en: In reinforcement learning and other automated decision-making, we often call
    our decision-making criteria “policies.” We can incorporate counterfactual analysis
    and regret in *evaluating* and *updating* *policies*.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 在强化学习和其他自动化决策中，我们通常将我们的决策标准称为“策略”。我们可以在评估和更新策略时纳入反事实分析和遗憾。
- en: 8.1.5 Reinforcement learning and automated decision-making
  id: totrans-55
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.1.5 强化学习和自动化决策
- en: In automated decision-making, a “policy” is a function that takes in information
    about a decision problem and automatically selects some course of action. Reinforcement
    learning algorithms aim to find policies that optimize good outcomes over time.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 在自动化决策中，“策略”是一个函数，它接受有关决策问题的信息，并自动选择某些行动方案。强化学习算法旨在找到随着时间的推移优化良好结果的策略。
- en: Automated counterfactual reasoning can credit good outcomes to the appropriate
    actions. In the investing example, we can imagine an algorithm that periodically
    backtests different portfolio allocation policies as more recent prices enter
    the data. Similarly, imagine we were writing a reinforcement learning (RL) algorithm
    to learn to play a game. We could have the algorithm use saved game instances
    to simulate how that game instance would have turned out differently if it had
    used a different policy. The algorithm can quantify the concept of regret by comparing
    those simulated outcomes to actual outcomes and using the results to learn a better
    policy. This would reduce the number of games the AI needed to learn a good policy,
    as well as enable it to learn from simulated conditions that don’t occur normally
    in the game. We’ll focus more on automated decision-making, bandits, and reinforcement
    learning in chapter 12.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 自动反事实推理可以将好的结果归因于适当的行为。在投资示例中，我们可以想象一个算法，随着更近期的价格进入数据，定期回测不同的投资组合分配策略。同样，想象我们正在编写一个强化学习（RL）算法来学习玩游戏。我们可以让算法使用保存的游戏实例来模拟如果它使用了不同的策略，那个游戏实例会有怎样的不同结果。算法可以通过比较这些模拟结果和实际结果来量化遗憾的概念，并使用这些结果来学习更好的策略。这将减少AI学习良好策略所需的游戏数量，并使其能够从游戏中通常不会出现的情况下学习。在第12章中，我们将更多地关注自动化决策、投币机和强化学习。
- en: 8.1.6 Steps to answering a counterfactual query
  id: totrans-58
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.1.6 回答反事实查询的步骤
- en: 'Across each of these applications, we can answer these counterfactual inference
    questions with the following workflow:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 在这些应用的每个方面，我们可以使用以下工作流程来回答这些反事实推理问题：
- en: '*Pose the counterfactual question*—Clearly articulate the counterfactual question(s)
    we want to pose in the simplest terms.'
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*提出反事实问题*—用最简单的术语清晰地阐述我们想要提出的反事实问题（们）。'
- en: '*Convert to a mathematical query*—Convert the query to mathematical symbols
    so it is formal enough to apply mathematical or algorithmic analysis.'
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*转换为数学查询*—将查询转换为数学符号，使其形式足够正式，可以应用数学或算法分析。'
- en: '*Do inference*—Run an inference algorithm that will generate an answer to the
    question.'
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*进行推理*—运行一个推理算法，生成问题的答案。'
- en: In the following sections, we’ll focus on steps 1 and 2\. In chapter 9, we’ll
    handle step 3 with an SCM-based algorithm for inferring the query we create in
    step 2\. In chapter 10, we’ll see ways to do step 3 without an SCM but only data
    and a DAG.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的章节中，我们将专注于步骤1和2。在第9章，我们将使用基于SCM的算法来处理步骤3，该算法用于推断我们在步骤2中创建的查询。在第10章，我们将看到在没有SCM但只有数据和DAG的情况下如何进行步骤3。
- en: 8.2 Symbolic representation of counterfactuals
  id: totrans-64
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 8.2 反事实的符号表示
- en: In chapter 7, we saw the “counterfactual notation,” which uses subscripts to
    represent interventions. Now we are going to use this notation for counterfactual
    expressions. The trick is remembering, as we’ll see, that counterfactual queries
    are just a special type of *interventional* queries. We’ll see how interventional
    queries flow into counterfactual queries by revisiting our online gaming example.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 在第7章，我们看到了“反事实符号”，它使用下标来表示干预。现在我们将使用这个符号来表示反事实表达式。关键是记住，正如我们将看到的，反事实查询只是*干预性查询*的一种特殊类型。我们将通过回顾我们的在线游戏案例来了解干预性查询如何流入反事实查询。
- en: 8.2.1 Hypothetical statements and questions
  id: totrans-66
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.2.1 假设性陈述和问题
- en: 'Consider our online gaming case study. When considering how much a player makes,
    we might say something like this:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑我们的在线游戏案例研究。在考虑玩家赚取多少时，我们可能会这样说：
- en: The level of in-game purchases for a typical player would be more than $50.
  id: totrans-68
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 对于一个典型玩家，游戏内购买的金额将会超过50美元。
- en: We’ll call this a *hypothetical statement.* In grammatical terms, I am using
    a *modal verb* (e.g., “would”, “could”, “should” in “would be more”) to intentionally
    mark *hypothetical language* rather than using *declarative language* (e.g., “is
    more” or “will be more”), which we use to make statements about objective facts.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将这称为*假设性陈述*。在语法上，我使用*情态动词*（例如，“would”，“could”，“should”在“would be more”中）来有意标记*假设性语言*，而不是使用*陈述性语言*（例如，“is
    more”或“will be more”），后者我们用来陈述客观事实。
- en: We want to formalize this statement in probability notation. For this statement,
    we’ll write *P*(*I*>50)—recall that we used the random variable *I* to represent
    *In-Game Purchases*, *E* to represent *Side-Quest Engagement*, and *G* to represent
    *Guild Membership*.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 我们想用概率符号形式化这个陈述。对于这个陈述，我们将写*P*(*I*>50)—回想一下，我们使用了随机变量*I*来表示*游戏内购买*，*E*表示*支线任务参与度*，*G*表示*公会会员资格*。
- en: 'We’ll use hypothetical language in our open questions as well, like this:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在我们的开放问题中也会使用假设性语言，如下所示：
- en: What would be the amount of in-game purchases for a typical player?
  id: totrans-72
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 对于一个典型玩家，游戏内购买的金额会是多少？
- en: I am inquiring about the range of values the variable *I* could take, and I
    represent that with *P*(*I*).
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 我在询问变量*I*可能取的值的范围，我用*P*(*I*)来表示。
- en: Declarative vs. hypothetical language and probability
  id: totrans-74
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 陈述性语言与假设性语言及概率
- en: Declarative language express certainty, as in “amount of in-game purchases is
    more than $50.” In contrast, hypothetical language is used for statements that
    convey conjecture, imagination, and supposition, as in “amount of in-game purchases
    *would be* more than $50.”
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 陈述性语言表达确定性，例如“游戏内购买金额超过50美元。”相比之下，假设性语言用于传达推测、想象和假设的陈述，例如“游戏内购买金额*将会是*超过50美元。”
- en: 'Many of us learn to associate probability notation with declarative language,
    because of probability theory’s connection to propositional logic: *P*(*I*>50)
    quantifies the probability that the declarative statement “amount of in-game purchases
    is more than $50” is true. But we are going to lean into the hypothetical language.'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 我们中的许多人将概率符号与陈述性语言联系起来，因为概率理论与命题逻辑的联系：*P*(*I*>50)量化了陈述性陈述“游戏内购买金额超过50美元”为真的概率。但我们将深入使用假设性语言。
- en: Hypothetical language has an implicit lack of certainty—we are talking of things
    that *could be*, rather than things that *are*. Lack of certainty is equivalent
    to uncertainty, and the Bayesian philosophy we adopt in this book nudges us toward
    using probability to model uncertainty, so using hypothetical language will make
    it easier for us to formalize the question in probability notation. We’ll find
    this will help us formalize causal statements and questions.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 假设性语言隐含着不确定性的缺乏——我们谈论的是*可能发生*的事情，而不是*已经发生*的事情。不确定性与不确定性相当，而本书中我们采用的贝叶斯哲学引导我们使用概率来模拟不确定性，因此使用假设性语言将使我们更容易用概率符号形式化问题。我们会发现这有助于我们形式化因果陈述和问题。
- en: 'Note that the tense of the question or statement doesn’t matter when we map
    it to probabilistic notation. For example, we could have used this phrasing:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，当我们将其映射到概率符号时，问题或陈述的时态并不重要。例如，我们可以使用这种表述：
- en: What would *have been* the amount of in-game purchases for a typical player?
  id: totrans-79
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 典型玩家的游戏内购买金额会是多少？
- en: Regardless of tense, we use the notation *P*(*I*) to represent our uncertainty
    about a variable of interest in our question.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 无论时态如何，我们使用符号 *P*(*I*) 来表示我们对问题中感兴趣变量的不确定性。
- en: 8.2.2 Facts filter hypotheticals to a subpopulation
  id: totrans-81
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.2.2 事实过滤假设到子群体
- en: 'Suppose my statement was as follows:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 假设我的陈述如下：
- en: The level of in-game purchases for a player with high side-quest engagement
    would be more than $50\. *P*( *I*>50| *E*=“high”)
  id: totrans-83
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 具有高支线任务参与度的玩家的游戏内购买水平将超过50美元。*P*( *I*>50| *E*=“high”)
- en: 'Here, I am making a statement about a subset of players (those with high side-quest
    engagement) rather than all players. I’m doing the same when I ask this question:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我是在对玩家子集（那些具有高支线任务参与度的玩家）做出陈述，而不是对所有玩家。当我提出这个问题时，我在做同样的事情：
- en: What would be the level of in-game purchases for players with high side-quest
    engagement? *P*( *I*| *E*=“high”)
  id: totrans-85
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 具有高支线任务参与度的玩家的游戏内购买水平会是多少？*P*( *I*| *E*=“high”)
- en: The fact that *Side-Quest Engagement* is high serves to filter the population
    of players down to those for whom that fact is true. As discussed in chapter 2,
    we use conditional probability to zoom in on a subpopulation. In this example,
    we use *P*(*I*>50|*E*=“high”) for the statement, and *P*(*I*|*E*=“high”) for the
    question.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 事实“支线任务参与度”很高有助于将玩家群体过滤到那些事实为真的玩家。如第2章所述，我们使用条件概率来聚焦于一个子群体。在这个例子中，我们使用 *P*(*I*>50|*E*=“high”）作为陈述，*P*(*I*|*E*=“high”）作为问题。
- en: I’ll use “factual conditions” to refer to facts, events, and evidence like *E*=“high”
    that narrow down the target population. These factual conditions appear on the
    right side of “|” in the conditional probability notation *P*(.|.). We might normally
    call them “conditions,” but I want to avoid confusion with “conditional hypothetical,”
    which I’ll introduce next.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 我将使用“事实条件”来指代事实、事件和证据，如 *E*=“high”，这些条件可以缩小目标人群。这些事实条件出现在条件概率符号 *P*(.|.) 中“|”的右侧。我们通常可能会称它们为“条件”，但我想避免与“条件假设”混淆，我将在下文中介绍。
- en: 8.2.3 Conditional hypotheticals, interventions, and simulation
  id: totrans-88
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.2.3 条件假设、干预和模拟
- en: 'Now, suppose I made the following statement:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，假设我做出了以下陈述：
- en: If a player’s side-quest engagement was high, they would spend more than $50
    on in-game purchases. *P* ( *I* [*E*] [=“high”]>50)
  id: totrans-90
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 如果玩家的支线任务参与度很高，他们会在游戏内购买上花费超过50美元。*P*（*I* [*E*] [=“high”] > 50）
- en: We’ll call this a *conditional hypothetical* statement. We’ll call the “If side-quest
    engagement was high” part the *hypothetical condition*, and “they would spend
    more than $50 on in-game purchases” is the *hypothetical outcome*.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将称这为*条件假设*陈述。我们将称“如果支线任务参与度很高”的部分为*假设条件*，而“他们会在游戏内购买上花费超过50美元”是*假设结果*。
- en: 'The hypothetical conditions in conditional hypothetical questions often follow
    a similar “what if” style of phrasing:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 条件假设问题中的假设条件通常遵循类似的“如果……会怎样”的表述风格：
- en: '*What* would be the amount of in-game purchases for a player *if* their side-quest
    engagement was high? *P* ( *I* [*E*] [=“high”])'
  id: totrans-93
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*如果*玩家的支线任务参与度很高，他们的游戏内购买金额会是多少？*P*（*I* [*E*] [=“high”]）'
- en: We will use the intervention notation (i.e., the subscripts in counterfactual
    notation) to represent these conditions. For the statement, we will use *P*(*I*[*E*][=“high”]>50),
    and for the question, *P*(*I*[*E*][=“high”]).
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用干预符号（即反事实符号中的下标）来表示这些条件。对于陈述，我们将使用 *P*(*I*[*E*][=“high”]>50)，而对于问题，*P*(*I*[*E*][=“high”])。
- en: Imagination, conditions, and interventions
  id: totrans-95
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 想象力、条件和干预
- en: Using the ideal intervention to model hypothetical conditions in conditional
    hypothetical statements is a philosophical keystone of our causal modeling approach.
    The idea is that when we pose hypothetical conditionals, *we only attend to the
    causal consequences of the hypothetical conditional*.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 使用理想干预来模拟条件假设陈述中的假设条件是我们因果建模方法的一个哲学基石。这个想法是，当我们提出假设条件时，*我们只关注假设条件的因果后果*。
- en: 'Refresher: Ideal intervention'
  id: totrans-97
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 复习：理想干预
- en: 'An ideal intervention is a change to the data generating process that does
    the following:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 理想干预是对数据生成过程的改变，它做以下事情：
- en: Targets a fixed variable (e.g., X)
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 针对固定变量（例如，X）
- en: Sets that variable to a specific value (e.g., x)
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将该变量设置为特定的值（例如，x）
- en: In so doing, severs the causal influence of that variable’s parents
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这样做就切断了该变量父代变量的因果影响
- en: This definition generalizes to a *set* of variables.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 这个定义可以推广到一组变量。
- en: We sometimes write interventions with *do-notation*, as in do(*X*=*x*). In counterfactual
    notation, for a variable *Y*, we write *Y*[*X*][=][*x*] to indicate that the variable
    *Y* is under the influence of an intervention on *X*. In a DAG, we represent ideal
    intervention with graph surgery, meaning we cut the incoming edges to the target
    variable. In an SCM, we represent an ideal intervention by replacing the target
    variable’s assignment function with the intervention value. Causal libraries often
    implement these operations for us, often with a function or method called “do”.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 我们有时用 *do-notation* 来表示干预，例如 do(*X*=*x*)。在反事实符号中，对于一个变量 *Y*，我们写 *Y*[*X*][=][*x*]
    来表示变量 *Y* 受到对 *X* 的干预的影响。在 DAG 中，我们通过图手术来表示理想的干预，这意味着我们切断指向目标变量的入边。在 SCM 中，我们通过用干预值替换目标变量的赋值函数来表示理想的干预。因果库通常为我们实现这些操作，通常是通过一个名为“do”的函数或方法。
- en: 'Let me illustrate by counterexample. Suppose we ask this:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 让我通过反例来说明。假设我们提出这样的问题：
- en: What would be the amount of in-game purchases for a player if their side-quest
    engagement were high?
  id: totrans-105
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 如果玩家的 *side-quest engagement* 水平很高，他们进行游戏内购买的金额会是多少？
- en: Suppose we then modeled this with *P*(*I*|*E*=“high”). Then inference on this
    query would use not just the causal impact that high engagement has on *In-Game
    Purchases* but also the non-causal association through the path *E* ← *G* → *I*;
    you can infer whether a player is in a guild from their level of *Side-Quest Engagement*,
    and *Guild Membership* also drives *In-Game Purchases*. But this question is not
    about *Guild Membership*; we’re just interested in how *Side-Quest Engagement*
    drives *In-Game Purchases*.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 假设我们用 *P*(*I*|*E*=“high”) 来建模这个情况。那么对这个查询的推理将不仅使用高参与度对 *In-Game Purchases* 的影响，还会通过路径
    *E* ← *G* → *I* 的非因果关联；你可以从玩家的 *Side-Quest Engagement* 水平推断出玩家是否在公会中，而 *Guild
    Membership* 也会推动 *In-Game Purchases*。但这个问题不是关于 *Guild Membership* 的；我们只是对 *Side-Quest
    Engagement* 如何推动 *In-Game Purchases* 感兴趣。
- en: '“What if” hypotheticals use the ideal intervention because they attend only
    to the causal consequences of the condition. To illustrate, let’s rephrase the
    previous question to make that implied ideal intervention explicit:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: “如果...会怎样”的假设性问题使用理想的干预，因为它们只关注条件的因果后果。为了说明这一点，让我们重新表述前面的问题，使隐含的理想干预变得明确：
- en: What would be the amount of *In-Game Purchases* for a player if their *side-quest
    engagement* *were* *set to* high? *P* ( *I* [*E*] [=“high”])
  id: totrans-108
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 如果玩家的 *side-quest engagement* 被设置为高，他们进行 *In-Game Purchases* 的数量会是多少？ *P* (
    *I* [*E*] [=“high”])
- en: The verb “set” connotes the action of intervening. Modeling hypothetical conditions
    with ideal interventions argues that the original phrasing and this phrasing mean
    the same thing (going forward, I’ll use the original phrasing).
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 动词“set”暗示了干预的行为。用理想的干预建模假设条件论证说，原始表述和这种表述意味着相同的事情（从现在开始，我将使用原始表述）。
- en: As humans, we answer “what if” questions like the preceding *P*(*I*[*E*][=“high”])
    question (either the original or rephrased version) by imagining a world where
    the hypothetical condition is true and then imagining how the hypothetical scenario
    plays out as a consequence. The variables in our hypothetical condition may have
    their own causal drivers in the data-generating process (e.g., *Guild Membership*
    is a cause of *Side-Quest Engagement*), but we ignore those drivers because we
    are only interested in the consequences of the hypothetical condition. We isolate
    the variables in a hypothetical condition in our imaginations just as we would
    in an experiment. The ideal intervention is the right tool for setting a variable
    independently of its causes.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 作为人类，我们通过想象一个假设条件为真的世界，然后想象假设情景如何作为后果展开来回答“如果...会怎样”的问题，就像前面 *P*(*I*[*E*][=“high”])
    问题（无论是原始版本还是重新表述的版本）那样。我们的假设条件中的变量可能在数据生成过程中有自己的因果驱动因素（例如，*Guild Membership* 是
    *Side-Quest Engagement* 的原因），但我们忽略这些驱动因素，因为我们只对假设条件的后果感兴趣。我们在想象中隔离假设条件中的变量，就像我们在实验中做的那样。理想的干预是设置变量独立于其因果的正确工具。
- en: Avoiding confusion between factual and hypothetical conditions
  id: totrans-111
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 避免混淆事实条件和假设条件
- en: It is particularly easy to confuse “factual conditions” with “hypothetical conditions.”
    To reiterate in general terms, in the question “What would *Y* be if *X* were
    *x*”, *X* = *x* is a hypothetical condition and we use the notation *P*(*Y*[*X*][=][*x*]).
    In contrast, factual conditions serve to narrow down the population we are asking
    about. For example, in the question “What would *Y* be for cases where *X* is
    *x*?” *X* = *x* is an actual condition used to filter down to cases where *X*
    = *x*. Here, we use notation *P*(*Y*|*X*=*x*).
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 很容易将“事实条件”与“假设条件”混淆。为了重申，在问题“如果 *X* 是 *x*，*Y* 会是什么？”中，*X* = *x* 是一个假设条件，我们使用符号
    *P*(*Y*[*X*][=][*x*])。相比之下，事实条件用于缩小我们询问的群体。例如，在问题“对于 *X* 是 *x* 的情况，*Y* 会是什么？”中，*X*
    = *x* 是一个实际条件，用于筛选出 *X* = *x* 的情况。在这里，我们使用符号 *P*(*Y*|*X*=*x*)。
- en: 'Keep in mind that we can combine factual and hypothetical conditions, as in
    the following question:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，我们可以结合事实条件和假设条件，就像以下问题中那样：
- en: What would be the amount of in-game purchases for a player *in a guild* if their
    side-quest engagement was high? *P* ( *I* [*E*] [=“high”]| *G*= *g*)
  id: totrans-114
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 如果一个玩家的支线任务参与度很高，那么在公会中的玩家在游戏中的购买量会是多少？*P* ( *I* [*E*] [=“high”]| *G*= *g*)
- en: 'Here, we are asking a conditional hypothetical on a subset of players who are
    guild members. This query is different from the following:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们正在询问一个子集玩家的条件假设，这些玩家是公会成员。这个查询与以下不同：
- en: What would be the amount of in-game purchases for a player if their side-quest
    engagement was high *and* they were in a guild? *P* ( *I* [*E*] [=“high”], [*G*]
    [=“member”])
  id: totrans-116
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 如果一个玩家的支线任务参与度很高，并且他们是公会成员，那么这个玩家在游戏中的购买量会是多少？*P* ( *I* [*E*] [=“high”], [*G*]
    [=“member”])
- en: That said, with the ambiguity of natural language, someone might ask the second
    question when what they really want is the answer to the first question. It is
    up to the modeler to dispel confusion, clarify meaning, and write down the correct
    notation.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 话虽如此，由于自然语言的歧义性，有人可能会问第二个问题，而他们真正想要的是第一个问题的答案。澄清混淆、明确意义并写下正确的符号是模型构建者的责任。
- en: 8.2.4 Counterfactual statements
  id: totrans-118
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.2.4 反事实陈述
- en: In natural language, a *counterfactual statement* is a conditional hypothetical
    statement where there is some conflict between factual conditions and hypothetical
    conditions or outcomes. In other words, it is a conditional hypothetical statement
    that is “counter to the facts.”
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 在自然语言中，*反事实陈述*是一种条件假设性陈述，其中事实条件与假设条件或结果之间存在某种冲突。换句话说，它是一种“与事实相反”的条件假设性陈述。
- en: 'In everyday language, those conflicting factual conditions could be stated
    before the statement or implied by context. For our purposes, we’ll require counterfactual
    statements to state the conflicting factual conditions explicitly:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 在日常语言中，那些冲突的事实条件可以在陈述之前陈述或由上下文暗示。为了我们的目的，我们将要求反事实陈述明确陈述冲突的事实条件：
- en: '*For a player with low side-quest engagement and an amount of in-game purchases
    less than $50,* if the player’s side-quest engagement were high, they would spend
    more than $50 on in-game purchases. *P* ( *I* [*E*] [=“high”]>50| *E*=“low”, *I* 
    £50)'
  id: totrans-121
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*对于参与度低且游戏内购买金额少于50美元的玩家，如果他们的支线任务参与度很高，他们会在游戏内购买超过50美元。*P* ( *I* [*E*] [=“high”]>50|
    *E*=“low”， *I*  £50)'
- en: 'As a question, we might ask:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 作为问题，我们可能会问：
- en: What would be the amount of in-game purchases for a player *with low side-quest
    engagement and in-game purchases less than $50* if their side-quest engagement
    was high? *P* ( *I* [*E*] [=“high”] | *E*=“low”, *I*  £50)
  id: totrans-123
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 如果一个玩家的支线任务参与度很高，并且游戏内购买金额少于50美元，那么这个玩家的游戏内购买量会是多少？*P* ( *I* [*E*] [=“high”]
    | *E*=“low”， *I*  £50)
- en: In both the statement and the question, the factual condition of low engagement
    conflicts with the hypothetical condition of high engagement. In the statement,
    the hypothetical outcome where in-game purchases is more than 50 conflicts with
    the factual condition where it is less than or equal to 50\. Similarly, the question
    considers all possible hypothetical outcomes for in-game purchases, most of which
    conflict with the factual condition of being less than or equal to 50\. We use
    counterfactual notation to write these queries just as we would other conditional
    hypotheticals..
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 在陈述和问题中，低参与度的事实条件与高参与的假设条件相冲突。在陈述中，假设结果是在游戏中购买超过50与实际条件（少于或等于50）相冲突。同样，问题考虑了所有可能的假设结果，其中大多数与实际条件（少于或等于50）相冲突。我们使用反事实符号来写这些查询，就像我们写其他条件假设一样。
- en: Overview of terminology in formalizing counterfactuals
  id: totrans-125
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 形式化反事实术语概述
- en: '*Hypothetical language*—Used to express hypotheses, conjecture, supposition,
    and imagined possibilities. In English, it often involves “would” or “could” and
    contrasts with the declarative language. It is arguably easier to formalize causal
    statements and questions phrased in hypothetical language.'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: '*假设性语言*—用于表达假设、推测、设想和想象的可能性。在英语中，它通常涉及“would”或“could”，与陈述性语言形成对比。可以说，用假设性语言来形式化因果陈述和问题更为容易。'
- en: '*Hypothetical statement*—A statement about the world phrased in hypothetical
    language, such as “*Y* would be *y,*” which we’d write in math as *P*(*Y*=*y*).'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: '*假设性陈述*—关于世界的假设性语言陈述，例如“*Y*将是*y,*”，我们将其写成数学形式为 *P*(*Y*=*y*）。'
- en: '*Factual conditions*—Refer to facts, events, and evidence that narrow down
    the scope of what’s being talked about (the target population). Used as the conditions
    in conditional probability. For example, we’d write “Where *Z* is *z*, *Y* would
    be *y*” as *P*(*Y*=*y*|*Z*=*z*).'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: '*事实条件*—指代事实、事件和证据，这些证据缩小了所讨论内容的范围（目标群体）。在条件概率中用作条件。例如，我们会写成“*Z*是*z*，*Y*将是*y*”为
    *P*(*Y*=*y*|*Z*=*z*）。'
- en: '*Hypothetical conditions*—Conditions that frame a hypothetical scenario, as
    in “what if *X* were *x*?” or “If *X* were *x* …” We model hypothetical conditions
    with the ideal intervention and subscript [*X*][=][*x*] in counterfactual notation.'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: '*假设性条件*—构成假设情景的条件，例如“如果*x*是*x*？”或“如果*x*是*x*…”。我们用反事实符号中的理想干预和下标[*X*][=][*x*]来表示假设条件。'
- en: '*Conditional hypothetical statement*—A hypothetical statement with hypothetical
    conditions, such as “If *X* were *x*, *Y* would be *y*,” which becomes *P*(*Y*[*X*][=][*x*]=*y*).
    We can add factual conditions like “Where *Z* is *z*, if *X* were *x*, *Y* would
    be *y*” becomes *P*(*Y*[*X*][=][*x*]=*y*|*Z*=*z*).'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: '*条件假设陈述*—具有假设条件的假设陈述，例如“如果*x*是*x*，*Y*将是*y*，”这成为 *P*(*Y*[*X*][=][*x*]=*y*）。我们可以添加事实条件，如“*Z*是*z*，如果*x*是*x*，*Y*将是*y*”变为
    *P*(*Y*[*X*][=][*x*]=*y*|*Z*=*z*）。'
- en: '*Counterfactual statement*—A counterfactual statement is a conditional hypothetical
    statement where the variables in the factual conditions overlap with those in
    the hypothetical conditions or hypothetical outcomes. For example, in “Where *X*
    is *x*, if *X* were *x''*, *Y* would be *y*” (*P*(*Y*[*X*][=][*x*]*['']*=*y*|*X*=*x*)),
    the factual condition “Where *X* is *x*” overlaps with the hypothetical condition
    “if *X* were *x''*”. In “Where *Y* is *y*, if *X* were *x''*, *Y* would be *y''*”
    (*P*(*Y*[*X*][=][*x*]*['']*=*y''*|*Y*=*y*)), the factual condition “Where *Y*
    is *y*” overlaps with the hypothetical outcome “*Y* would be *y.*”'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: '*反事实陈述*—反事实陈述是一种条件假设陈述，其中事实条件中的变量与假设条件或假设结果中的变量重叠。例如，在“*X*是*x*，如果*X*是*x''*，*Y*将是*y*”
    (*P*(*Y*[*X*][=][*x*]*['']*=*y*|*X*=*x*)) 中，事实条件“*X*是*x*”与假设条件“如果*X*是*x''*”重叠。在“*Y*是*y*，如果*X*是*x''*，*Y*将是*y''*”
    (*P*(*Y*[*X*][=][*x*]*['']*=*y''*|*Y*=*y*)) 中，事实条件“*Y*是*y*”与假设结果“*Y*将是*y.*”重叠。'
- en: '*Consistency rule*—You can drop a hypothetical condition in the subscript if
    a factual condition and a hypothetical condition overlap but don’t conflict. For
    example, *P*(*Y*[*X*][=][*x*]|*X*=*x*) = *P*(*Y*|*X*=*x*).'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: '*一致性规则*—如果一个事实条件和假设条件重叠但不冲突，你可以省略假设条件。例如，*P*(*Y*[*X*][=][*x*]|*X*=*x*) = *P*(*Y*|*X*=*x*）。'
- en: Note that many texts will use the word “counterfactual” to describe formal causal
    queries that don’t necessarily condition on factual conditions, such as *Y*[*X*][=][*x*]
    or *P*(*Y*[*X*][=][*x*]=*y*) or *P*(*Y*[*X*][=][*x*]=1, *Y*[*X*][=][*x*]*[']*=0).
    I’m using “counterfactual statement” and other phrases above to describe common
    hypothetical and counterfactual natural language and to aid in the task of converting
    to formal counterfactual notation.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，许多文本将使用“反事实”一词来描述不必然基于事实条件的正式因果查询，例如 *Y*[*X*][=][*x*] 或 *P*(*Y*[*X*][=][*x*]=*y*)
    或 *P*(*Y*[*X*][=][*x*]=1, *Y*[*X*][=][*x*]*[']*=0)。我在上面使用“反事实陈述”和其他短语来描述常见的假设和反事实自然语言，并有助于将它们转换为形式化的反事实符号。
- en: 'Note that we can combine conflicting factual conditions with other non-conflicting
    factual conditions, such as being a member of the guild in this example:'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，我们可以将冲突的事实条件与其他非冲突的事实条件结合起来，例如在这个例子中成为行会成员：
- en: What would be the amount of in-game purchases for a player *in a guild* with
    low side-quest engagement and in-game purchases less than $50 if their side-quest
    engagement was high? *P*( *I* [*E*] [=“high”] | *E*=“low”, *I* £50, *G*=“member”)
  id: totrans-135
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 如果一个玩家在支线任务参与度低且游戏内购买少于50美元的情况下，他们的支线任务参与度很高，那么他们游戏中的购买量会是多少？*P*( *I* [*E*]
    [=“high”] | *E*=“low”, *I* £50, *G*=“member”)
- en: Figure 8.4 diagrams the elements of a formalized counterfactual query.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.4展示了形式化反事实查询的元素。
- en: '![figure](../Images/CH08_F04_Ness.png)'
  id: totrans-137
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/CH08_F04_Ness.png)'
- en: Figure 8.4 Elements of a conditional counterfactual hypothetical formalized
    in counterfactual notation
  id: totrans-138
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图8.4 以反事实符号形式形式化的条件反事实假设元素
- en: Formalizing counterfactuals with large language models
  id: totrans-139
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 使用大型语言模型形式化反事实
- en: Formalizing a counterfactual question into counterfactual notation is an excellent
    task for a large language model (LLM). State-of-the-art LLMs perform quite well
    at benchmarks where a natural language query is converted to a symbolic query,
    such as an SQL statement, and formalizing a counterfactual question is an example
    of this task. We’ll look more at LLMs and causality in chapter 13, but for now
    you can experiment with prompting your favorite LLM to convert questions to counterfactual
    notation.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 将反事实问题形式化为反事实符号是一个大型语言模型（LLM）的绝佳任务。最先进的LLM在将自然语言查询转换为符号查询（如SQL语句）的基准测试中表现相当出色，形式化反事实问题就是这类任务的例子。我们将在第13章中更详细地探讨LLM和因果关系，但现在你可以尝试提示你最喜欢的LLM将问题转换为反事实符号。
- en: 8.2.5 The consistency rule
  id: totrans-141
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.2.5 一致性规则
- en: Consider the distribution *P*(*I*[*E*][=“high”]|*E*=“low”). Suppose that instead
    of the subscript [*E*][=“high”] we had [*E*][=“low”], so the distribution is *P*(*I*[*E*][=“low”]
    |*E*=“low”). The *consistency rule* states that this distribution is equivalent
    to the simpler *P*(*I*|*E*=“low”). More generally, *P*(*Y*[*X*][=][*x*]|*X*=*x*,
    *Z*=*z*) = *P*(*Y* |*X*=*x*, *Z*=*z*) for any *z*.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑分布 *P*(*I*[*E*][=“high”]|*E*=“low”)。假设我们不是用下标 [*E*][=“high”]，而是用 [*E*][=“low”]，那么分布就是
    *P*(*I*[*E*][=“low”] |*E*=“low”)。*一致性规则*指出，这个分布等同于更简单的 *P*(*I*|*E*=“low”)。更一般地，*P*(*Y*[*X*][=][*x*]|*X*=*x*,
    *Z*=*z*) = *P*(*Y* |*X*=*x*, *Z*=*z*) 对于任何 *z*。
- en: Intuitively, *P*(*I*[*E*][=“low”]|*E*=“low”) corresponds to the rather odd question,
    “What would be the amount of in-game purchases for a player with low side-quest
    engagementif their side-quest engagement was low?” In this question, the factual
    condition and the hypothetical condition overlap but don’t conflict. The *consistency
    rule* says that, in this case, we drop the hypothetical condition, saying that
    this is equivalent to asking “What would be the amount of in-game purchases for
    a player with low side-quest engagement?”
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 直观上，*P*(*I*[*E*][=“low”]|*E*=“low”) 对应的是一个相当奇怪的问题，“如果一个玩家的支线任务参与度低，那么他们的支线任务参与度也会低，那么这个玩家在游戏中的购买量会是多少？”在这个问题中，事实条件和假设条件重叠但不冲突。*一致性规则*指出，在这种情况下，我们放弃假设条件，认为这相当于询问“如果一个玩家的支线任务参与度低，那么他们在游戏中的购买量会是多少？”
- en: 'Now consider a version of this counterfactual where we observe an actual outcome
    for in-game purchases. Specifically, consider *P*(*I*[*E*][=“high”]|*E*=“low”,
    *I*=75). This is the corresponding counterfactual question:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 现在考虑一个反事实的版本，其中我们观察到游戏内购买的实际结果。具体来说，考虑 *P*(*I*[*E*][=“high”]|*E*=“low”, *I*=75)。这是相应的反事实问题：
- en: What would be the amount of in-game purchases for a player *with low side-quest
    engagement and in-game purchases equal to $75* if their side-quest engagement
    was high?
  id: totrans-145
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 如果一个玩家的支线任务参与度低且游戏内购买等于75美元，那么他们的支线任务参与度很高，他们游戏中的购买量会是多少？
- en: 'Now, instead, suppose we changed it to *P*(*I*[*E*][=“low”]|*E*=“low”, *I*=75).
    By the consistency rule, this collapses to *P*(*I*|*E*=“low”, *I*=75):'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，相反，假设我们将其改为 *P*(*I*[*E*][=“low”]|*E*=“low”, *I*=75)。根据一致性规则，这会缩减为 *P*(*I*|*E*=“low”,
    *I*=75)：
- en: What would be the amount of in-game purchases for a player *with low side-quest
    engagement and in-game purchases equal to $75*?
  id: totrans-147
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 如果一个玩家的支线任务参与度低且游戏内购买等于75美元，那么他们游戏中的购买量会是多少？
- en: The answer, of course, is $75\. If we ask about the distribution of *I* conditional
    on *I*=75, then we have a distribution with all the probability value concentrated
    on 75.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，答案是75美元。如果我们询问在 *I*=75 条件下的 *I* 的分布，那么我们得到一个所有概率值都集中在75的分布。
- en: In counterfactual reasoning, we often want to know about hypothetical outcomes
    for the same variables we observe in the factual conditions. The consistency rule
    states that if the hypothetical conditions are the same as what actually happened,
    the hypothetical outcome must be the same as what actually happened.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 在反事实推理中，我们经常想知道关于与事实条件中观察到的相同变量的假设结果。一致性规则指出，如果假设条件与实际发生的情况相同，那么假设结果必须与实际发生的情况相同。
- en: Recall that we use an intervention to model the hypothetical condition. The
    rule assures us that if a player had low *Side-Quest Engagement* and a certain
    amount of *In-Game Purchases*, they would have the exact same amount of *In-Game
    Purchases* if they were selected for an experiment that randomly selected them
    for the low *Side-Quest Engagement* group. That’s important if we expect our causal
    inferences to predict the outcomes of experiments.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 回想一下，我们使用干预来模拟假设条件。该规则确保我们，如果一个玩家有低*支线任务参与度*和一定数量的*游戏内购买*，如果他们被选入一个随机选择他们进入低*支线任务参与度*组的实验，他们将会有相同数量的*游戏内购买*。如果我们期望我们的因果推断能够预测实验的结果，这一点很重要。
- en: 8.2.6 More examples
  id: totrans-151
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.2.6 更多示例
- en: Table 8.1 presents several additional examples of mapping counterfactual questions
    to counterfactual notation.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 表8.1 展示了将反事实问题映射到反事实符号的几个附加示例。
- en: Table 8.1 Examples of counterfactual notation
  id: totrans-153
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 表8.1 反事实符号示例
- en: '| Question | Type | Distribution in counterfactual notation |'
  id: totrans-154
  prefs: []
  type: TYPE_TB
  zh: '| 问题 | 类型 | 反事实符号中的分布 |'
- en: '| --- | --- | --- |'
  id: totrans-155
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| What would be the amount of in-game purchases for a typical player?  | Hypothetical  |
    *P*( *I*)  |'
  id: totrans-156
  prefs: []
  type: TYPE_TB
  zh: '| 对于一个典型的玩家，他们的游戏内购买金额会是多少？ | 假设 | *P*( *I*) |'
- en: '| What would be the amount of in-game purchases for a player with high side-quest
    engagement?  | Hypothetical focused on highly engaged players  | *P*( *I*&#124;
    *E*=“high”)  |'
  id: totrans-157
  prefs: []
  type: TYPE_TB
  zh: '| 对于一个对支线任务有高度参与度的玩家，他们的游戏内购买金额会是多少？ | 假设，专注于高度参与的玩家 | *P*( *I*&#124; *E*=“high”)
    |'
- en: '| What would be the amount of in-game purchases for a player if they had high
    side-quest engagement?  | Conditional hypothetical  | *P*( *I* [*E*] [=“high”])  |'
  id: totrans-158
  prefs: []
  type: TYPE_TB
  zh: '| 如果玩家对支线任务有高度参与，他们进行游戏内购买的金额会是多少？ | 条件假设 | *P*( *I* [*E*] [=“high”]) |'
- en: '| What would be the level of engagement *and* amount of in-game purchases if
    the player were a guild member?  | Conditional hypothetical on two outcomes of
    interest  | *P*( *E* [*G*] [=“member”], *I* [*G*] [=“member”])  |'
  id: totrans-159
  prefs: []
  type: TYPE_TB
  zh: '| 如果玩家是公会成员，他们的参与度*和*游戏内购买金额会是多少？ | 对两个感兴趣的结果的条件假设 | *P*( *E* [*G*] [=“member”],
    *I* [*G*] [=“member”]) |'
- en: '| What would be the level of in-game purchases for a player if they had high
    side-quest engagement and they were not a guild member?  | Conditional hypothetical
    with two hypothetical conditions  | *P*( *I* [*E*] [=“high”,] [*G*] [=“nonmember”])  |'
  id: totrans-160
  prefs: []
  type: TYPE_TB
  zh: '| 如果玩家有高度支线任务参与度，并且他们不是公会成员，他们的游戏内购买水平会是多少？ | 具有两个假设条件的条件假设 | *P*( *I* [*E*]
    [=“high”,] [*G*] [=“nonmember”]) |'
- en: '| What would be the level of in-game purchases for a player in a guild if they
    had high side-quest engagement?  | Conditional hypothetical focused on guild members  |
    *P*( *I* [*E*] [=“high”]&#124; *G*=“member”)  |'
  id: totrans-161
  prefs: []
  type: TYPE_TB
  zh: '| 如果玩家在公会中有高度支线任务参与度，他们的游戏内购买水平会是多少？ | 专注于公会成员的条件假设 | *P*( *I* [*E*] [=“high”]&#124;
    *G*=“member”) |'
- en: '| For a player with low engagement, what would their level of in-game purchases
    be if their level of engagement was high?  | Counterfactual. Factual condition
    conflicts with hypothetical condition.  | *P*( *I* [*E*] [=“high”]&#124; *E*=“low”)  |'
  id: totrans-162
  prefs: []
  type: TYPE_TB
  zh: '| 对于参与度低的玩家，如果他们的参与度很高，他们的游戏内购买水平会怎样？ | 反事实。事实条件与假设条件冲突。 | *P*( *I* [*E*] [=“high”]&#124;
    *E*=“low”) |'
- en: '| For a player who had at most $50 of in-game purchases, what would their level
    of in-game purchases be if their level of engagement was high?  | Counterfactual.
    Factual condition (in-game purchases of £$50) conflicts with possible hypothetical
    outcomes (in-game purchases possibly >$50).  | *P*( *I* [*E*] [=“high”]&#124;
    *I* £50)  |'
  id: totrans-163
  prefs: []
  type: TYPE_TB
  zh: '| 对于最多花费50英镑进行游戏内购买的玩家，如果他们的参与度很高，他们的游戏内购买水平会怎样？ | 反事实。事实条件（游戏内购买50英镑）与可能的假设结果（游戏内购买可能超过50英镑）冲突。
    | *P*( *I* [*E*] [=“high”]&#124; *I* £50) |'
- en: '| For a player who had low engagement and at most $50 of in-game purchases,
    what would their level of in-game purchases be if their level of engagement was
    high?  | Counterfactual. Factual conditions conflict with a hypothetical condition
    and possible hypothetical outcomes.  | *P*( *I* [*E*] [=“high”]&#124; *E*=“low”,
    *I* £50)  |'
  id: totrans-164
  prefs: []
  type: TYPE_TB
  zh: '| 对于一个参与度低且游戏内消费不超过50美元的玩家，如果他们的参与度很高，他们的游戏内消费水平会是多少？ | 反事实。事实条件与假设条件以及可能的假设结果相冲突。
    | *P*( *I* [*E*] [=“high”]&#124; *E*=“low”, *I* £50) |'
- en: '| For a player in a guild who had low engagement, what would their level of
    in-game purchases be if their engagement were high and they weren’t a guild member?  |
    Counterfactual. Factual conditions conflict with hypothetical conditions.  | *P*(
    *I* [*E*] [=“high”,] [*G*] [=“nonmember”]&#124; *E*=“low”, *G*=“member”)  |'
  id: totrans-165
  prefs: []
  type: TYPE_TB
  zh: '| 对于一个参与度低的公会玩家，如果他们的参与度很高且不是公会成员，他们的游戏内消费水平会是多少？ | 反事实。事实条件与假设条件相冲突。 | *P*(
    *I* [*E*] [=“high”,] [*G*] [=“nonmember”]&#124; *E*=“low”, *G*=“member”) |'
- en: '| What would be the level of engagement if the player were a guild member?
    Moreover, what would be their level of in-game purchases if they were *not* a
    guild member?  | Counterfactual. Involves two conflicting hypothetical conditions
    on two different outcomes.  | *P*( *E* [*G*] [=“member”], *I* [*G*] [=“nonmember”])  |'
  id: totrans-166
  prefs: []
  type: TYPE_TB
  zh: '| 如果玩家是公会成员，他们的参与度会是多少？此外，如果他们不是公会成员，他们的游戏内消费水平会是多少？ | 反事实。涉及两个不同结果上的两个相互冲突的假设条件。
    | *P*( *E* [*G*] [=“member”], *I* [*G*] [=“nonmember”]) |'
- en: The last case in table 8.1 is a special case, more common in theory than practice,
    that does not involve a factual condition but has conflicting hypothetical conditions.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 表8.1中的最后一个案例是一个特殊情况，在理论中比实践中更常见，它不涉及事实条件，而是具有相互冲突的假设条件。
- en: Next, we’ll look at a particular class of counterfactuals that involve binary
    causes and outcomes.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将探讨一类特定的反事实，这些反事实涉及二元原因和结果。
- en: 8.3 Binary counterfactuals
  id: totrans-169
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 8.3 二元反事实
- en: An important subclass of counterfactual query is one we’ll call *binary counterfactuals*.
    These are counterfactuals involving binary hypothetical conditions and outcome
    variables. Binary variables, especially binary causes, arise when we think in
    terms of observational and experimental studies, where we have “exposed” and “unexposed”
    groups, or “treatments” and “control” groups. But binary variables are also useful
    in reasoning about the occurrence of events; an event either happens or does not.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 反事实查询的一个重要子类是我们称之为二元反事实的。这些反事实涉及二元假设条件和结果变量。当我们从观察性和实验性研究的角度思考时，二元变量，尤其是二元原因，就会出现，例如我们有“暴露”组和“未暴露”组，或者“治疗”组和“控制”组。但二元变量在推理事件发生时也非常有用；一个事件要么发生，要么不发生。
- en: Binary counterfactual queries deserve special mention because they are often
    simpler to think about, have simplifying mathematical properties that queries
    on nonbinary variables lack, and have several practical applications that we’ll
    cover in this section. Further, you can often word the question you want to answer
    in binary terms, such that you can convert nonbinary variables to binary variables
    when formalizing your query. To illustrate, in our online gaming example, suppose
    a player made $152.34 in online purchases, and we ask “Why did this player pay
    so much?” We are not interested in why they paid exactly that specific amount
    but why they paid such a high amount, where “such a high amount” is defined as,
    for example, more than $120\. So our binary indicator variable is *X* = {1 if
    *I* ≥ 120 else 0}.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 二元反事实查询值得特别提及，因为它们通常更容易思考，具有简化数学属性，这是非二元变量查询所缺乏的，并且在本节中我们将介绍它们的一些实际应用。此外，你通常可以用二元术语表述你想要回答的问题，这样你就可以在正式化查询时将非二元变量转换为二元变量。为了说明，在我们的在线游戏示例中，假设一个玩家在在线购物中花费了152.34美元，我们问“为什么这个玩家支付了这么多？”我们并不关心他们为什么支付了确切的那笔金额，而是为什么支付了如此高的金额，其中“如此高的金额”定义为，例如，超过120美元。因此，我们的二元指标变量是
    *X* = {1 if *I* ≥ 120 else 0}。
- en: 8.3.1 Probabilities of causation
  id: totrans-172
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.3.1 因果关系的概率
- en: The probabilities of causation are an especially useful class of binary counterfactuals.
    Their utility lies in helping us answer “why” questions. They are foundational
    concepts in practical applications, including attribution in marketing, credit
    assignment in reinforcement learning, root cause analysis in engineering, and
    personalized medicine.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 因果关系的概率是二元反事实的一个特别有用的类别。它们的效用在于帮助我们回答“为什么”的问题。它们是实际应用中的基础概念，包括市场营销中的归因、强化学习中的信用分配、工程中的根本原因分析以及个性化医疗。
- en: Let’s demonstrate the usefulness of the probabilities of causation in the context
    of a churn attribution problem. In a subscription business model, churn is the
    rate at which your service loses subscribers, and it has a major impact on the
    value of a business or business unit. Typically, a company deploys a predictive
    algorithm that rates subscribers as having some degree of churn risk. The company
    wants to discourage subscribers with a high risk of churn from actually doing
    so. In our example, the company will send a promotion that will entice the subscriber
    to stay (not churn). The probabilities of causation can help us understand why
    a user would churn or stay.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们在流失归因问题的背景下展示因果概率的有用性。在订阅业务模式中，流失是服务失去订阅者的速度，这对企业或业务单元的价值有重大影响。通常，公司部署一个预测算法，将订阅者评估为具有某种程度的流失风险。公司希望阻止那些有高流失风险的订阅者真正流失。在我们的例子中，公司会发送一个促销活动，以吸引订阅者留下（不流失）。因果概率可以帮助我们了解用户为什么会流失或留下。
- en: 'Given a binary (true/false) cause *X* and outcome *Y*, we’ll define the following
    probabilities of causation: probability of necessity, of sufficiency, of necessity
    *and* sufficiency, of enablement, and of disablement.'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 给定二元（真/假）原因 *X* 和结果 *Y*，我们将定义以下因果概率：必要性概率、充分性概率、必要性和充分性概率、启用概率和禁用概率。
- en: Probability of necessity
  id: totrans-176
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 必要性概率
- en: For a binary cause *X* and binary outcome *Y*, the *probability of necessity*
    (PN) is the query *P*(*Y*[*X*][=][0]=0|*X*=1, *Y*=1). In plain language, the question
    underlying PN is “For cases where *X* happened, and *Y* happened, if *X* had not
    happened, would *Y* not have happened?” In other words, did *X* *need* to happen
    for *Y* to happen?
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 对于二元原因 *X* 和二元结果 *Y*，*必要性概率*（PN）是查询 *P*(*Y*[*X*][=][0]=0|*X*=1, *Y*=1)。用简单的话来说，PN背后的问题是“对于
    *X* 和 *Y* 都发生的情况，如果 *X* 没有发生，*Y* 会不会也没有发生？”换句话说，*X* 是否必须发生才能导致 *Y* 发生？
- en: Let’s consider our churn problem. Let *X* represent whether we sent a promotion
    and *Y* represent whether the user stayed (didn’t churn). In this example, *P*(*Y*[*X*][=][0]=0|*X*=1,
    *Y*=1) represents the query “For a subscriber who received the promotion and stayed,
    what are the chances they would have churned if they had not received the promotion?”
    In other words, was the promotional offer necessary to maintain the subscriber?
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们考虑我们的流失问题。让 *X* 代表我们是否发送了促销，让 *Y* 代表用户是否留下（没有流失）。在这个例子中，*P*(*Y*[*X*][=][0]=0|*X*=1,
    *Y*=1) 代表查询“对于一个收到促销并留下的订阅者，如果没有收到促销，他们流失的可能性有多大？”换句话说，促销优惠是否是维持订阅者的必要条件？
- en: Probability of sufficiency
  id: totrans-179
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 充分性概率
- en: The *probability of sufficiency* (PS) is *P*(*Y*[*X*][=][1]=1|*X*=0, *Y*=0).
    A common plain language articulation of PS is “For cases where neither *X* nor
    *Y* happened, if *X* had happened, would *Y* have happened?” In other words, is
    *X* happening sufficient to cause *Y* to happen? For example, “for users who did
    not receive a promotion and didn’t stay (churned), would they have stayed had
    they received the promotion?” In other words, would a promotion have been enough
    (sufficient) to keep them?
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: '*充分性概率*（PS）是 *P*(*Y*[*X*][=][1]=1|*X*=0, *Y*=0)。PS的常见简单表述是“对于既没有 *X* 也没有 *Y*
    发生的情况，如果 *X* 发生了，*Y* 会发生吗？”换句话说，*X* 的发生是否足以导致 *Y* 发生？例如，“对于没有获得晋升且没有留下（流失）的用户，如果他们获得了晋升，他们会留下吗？”换句话说，晋升是否足够（充分）让他们留下？'
- en: The plain language interpretation of sufficiency can be confusing. The factual
    conditions of the counterfactual query zoom in on cases where *X*=0 and *Y*=0
    (cases where neither *X* nor *Y* happened). However, we’re often interested in
    looking at cases where *X*=1 and *Y*=1 and asking if *X* was sufficient by itself
    to cause *Y*=1\. In other words, given that *X* happened and *Y* happened, would
    *Y* still have happened even if the various other events that influenced *Y* had
    turned out different? But *P*(*Y*[*X*][=1]=1|*X*=0, *Y*=0) entails this interpretation
    without requiring us to enumerate all the “various other events that influenced
    *Y*” in the query. See the chapter notes at [https://www.altdeep.ai/p/causalaibook](https://www.altdeep.ai/p/causalaibook)
    for pointers to deeper research discussions on sufficiency.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 充分性的通俗解释可能会令人困惑。反事实查询的事实条件聚焦于 *X*=0 和 *Y*=0 的情况（即 *X* 和 *Y* 都没有发生的情况）。然而，我们通常对查看
    *X*=1 和 *Y*=1 的情况感兴趣，并询问 *X* 是否足以单独导致 *Y*=1。换句话说，鉴于 *X* 和 *Y* 都发生了，即使影响 *Y* 的各种其他事件的结果不同，*Y*
    仍然会发生吗？但 *P*(*Y*[*X*][=1]=1|*X*=0, *Y*=0) 包含这种解释，而无需我们列举查询中所有“影响 *Y* 的各种其他事件”。有关对充分性进行更深入研究的讨论，请参阅章节注释[https://www.altdeep.ai/p/causalaibook](https://www.altdeep.ai/p/causalaibook)。
- en: Probabilities of causation and the law
  id: totrans-182
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 因果概率和法律
- en: The probabilities of causation are closely related to legal concepts in the
    law. It is helpful to know this relationship, since practical applications often
    intersect with the law, and many stakeholders we work with in practical settings
    have legal training.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 因果概率与法律概念密切相关。了解这种关系是有帮助的，因为实际应用往往与法律交叉，我们在实际环境中与之合作的许多利益相关者都接受过法律培训。
- en: '*But-for causation and the probability of necessity*—The but-for test is one
    test for determining causation in tort and criminal law. The way we phrase the
    probability of necessity is the probabilistic equivalent to the but-for test,
    rephrasing “if *X* had not happened, would *Y* not have happened?” as “but for
    *X* happening, would *Y* have happened?”'
  id: totrans-184
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*但非因果关系和必要性概率*——但非测试是确定侵权法和刑法中因果关系的测试之一。我们表述必要性概率的方式是但非测试的概率等价物，将“如果 *X* 没有发生，*Y*
    会不会没有发生？”重新表述为“如果没有 *X* 的发生，*Y* 会发生吗？”'
- en: '*Proximal causality and the probability of sufficiency*—In law, proximate cause
    refers to the primacy that a cause *X* had in the chain of events that directly
    brings about an outcome (e.g., injury or damage). There is indeed a connection
    with sufficiency, though not an equivalency. Proximal causality indeed considers
    whether a causal event was sufficient to cause the outcome, but legal theories
    of proximal cause often go beyond sufficiency to invoke moral judgments as well.'
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*近因因果关系和充分性概率*——在法律中，近因因果关系指的是原因 *X* 在导致结果的直接事件链中的首要地位（例如，伤害或损害）。确实存在与充分性的联系，尽管不是等价关系。近因因果关系确实考虑了因果事件是否足以导致结果，但近因因果关系的法律理论通常超越了充分性，还涉及道德判断。'
- en: Probability of necessity and sufficiency
  id: totrans-186
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 必要性和充分性概率
- en: 'The *probability of necessity and sufficiency* (PNS) is *P*(*Y*[*X*][=1]=1,
    *Y*[*X*][=0]=0). In plain language, *P*(*Y*[*X*][=1]=1, *Y*[*X*][=0]=0) reads,
    “*Y* would be 0 if *X* were 0 *and* *Y* would be 1 if *X* were 1.” For example,
    “What are the chances that a given user would churn if they didn’t receive a promotion
    and would stay if they did receive a promotion?” PNS decomposes as follows:'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 必要性和充分性概率（PNS）是 *P*(*Y*[*X*][=1]=1, *Y*[*X*][=0]=0)。用通俗的话说，*P*(*Y*[*X*][=1]=1,
    *Y*[*X*][=0]=0) 可以理解为，“如果 *X* 为 0，则 *Y* 为 0；如果 *X* 为 1，则 *Y* 为 1。”例如，“如果一个用户没有收到晋升，他们有多大可能流失，而如果他们收到了晋升，他们有多大可能保留？”PNS
    可以分解为以下几部分：
- en: '![figure](../Images/ness-ch8-eqs-0x.png)'
  id: totrans-188
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/ness-ch8-eqs-0x.png)'
- en: Probability of disablement and enablement
  id: totrans-189
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 禁用和启用概率
- en: The *probabilities of disablement* (PD) and *enablement* (PE)are similar to
    PN and PS, except they do not condition on the cause *X*.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: '*禁用概率*（PD）和*启用概率*（PE）与 PN 和 PS 类似，但它们不基于原因 *X* 进行条件化。'
- en: PD is the query *P*(*Y*[*X*][=][0]=0|*Y*=1), meaning “For cases where *Y* happened,
    if *X* had not happened would *Y* not have happened?” For the churn problem, PD
    asks the question “What is the overall chance of churn if we don’t send promotions?
    exclusively in reference to the subpopulation of users who didn’t churn (regardless
    of whether they received a promotion).
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: PD 是查询 *P*(*Y*[*X*][=][0]=0|*Y*=1)，意味着“对于 *Y* 发生的案例，如果 *X* 没有发生，*Y* 会不会没有发生？”对于流失问题，PD
    提出的问题是“如果我们不发送晋升，整体流失概率是多少？仅针对没有流失的用户子群体（无论他们是否收到晋升）。
- en: PE is the query *P*(*Y*[*X*][=1]=1|*Y*=0), or “For cases where *Y* didn’t happen,
    if *X* had happened, would *Y* have happened?” In our churn problem, PE asks,
    “What is the overall chance of staying if we send promotions?” exclusively in
    reference to the subpopulation of users who churned (regardless of whether they
    received a promotion).
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: PE 是查询 *P*(*Y*[*X*][=1]=1|*Y*=0)，或“对于没有发生 *Y* 的情况，如果 *X* 发生了，*Y* 会发生吗？”在我们的流失问题中，PE
    询问，“如果我们发送促销，保留的整体概率是多少？”仅针对流失的用户子群体（无论他们是否收到了促销）。
- en: The probabilities of causation can work as basic counterfactual primitives in
    advanced applications of counterfactual analysis. Next, I’ll give an example in
    the context of attribution.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 因果概率可以作为反事实分析高级应用中的基本反事实原语。接下来，我将在归因的背景下给出一个例子。
- en: 8.3.2 Probabilities of causation and attribution
  id: totrans-194
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.3.2 因果概率和归因
- en: The probabilities of causation are the core ingredients for methods that quantify
    why a given outcome happens. For example, suppose that a company’s network has
    a faulty server, such that accessing the server can cause the network to crash.
    Suppose the network crashes, and you’re tasked with analyzing the logs to find
    the root cause. You find that your colleague Lazlo has accessed the faulty server.
    Is Lazlo to blame?
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 因果概率是量化给定结果发生原因的方法的核心成分。例如，假设一家公司的网络有一个有故障的服务器，访问该服务器可能导致网络崩溃。假设网络崩溃了，你被要求分析日志以找到根本原因。你发现你的同事Lazlo访问了那个有故障的服务器。Lazlo应该承担责任吗？
- en: To answer that, you might quantify the chances that Lazlo was a sufficient cause
    of the crash; i.e., the chance that Lazlo accessing the server was enough to tip
    the domino that ultimately led to the network to crash. Second, what are the chances
    that Lazlo was a necessary cause? For example, perhaps Lazlo wasn’t a necessary
    cause because if he hadn’t accessed the server, someone else would have eventually.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 为了回答这个问题，你可能需要量化Lazlo成为崩溃的充分原因的可能性；即，Lazlo访问服务器的可能性足以触发最终导致网络崩溃的多米诺效应。其次，Lazlo成为必要原因的可能性有多大？例如，也许Lazlo不是必要原因，因为即使他没有访问服务器，其他人最终也会这么做。
- en: 'The probabilities of causation need to be combined with other elements to provide
    a complete view of attribution. One example is the concept of abnormality. The
    abnormality of a causal event describes whether that event, in some sense, violated
    expectations. For example, Lazlo might get more blame for crashing the network
    if it was highly unusual for employees to access that server. We can quantify
    the abnormality of a causal event with probability; if event *X*=1 was abnormal,
    then it was unlikely to have occurred, so we assign a low value to *P*(*X*=1).
    One attribution measure, called actual causal strength (ACS), combines abnormality
    with probabilities of causation as follows:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 因果概率需要与其他元素结合，以提供一个完整的归因视图。一个例子是异常的概念。因果事件的异常性描述了该事件在某种意义上是否违反了预期。例如，如果访问那个服务器对员工来说非常不寻常，Lazlo
    可能会因为网络崩溃而受到更多的责备。我们可以用概率来量化因果事件的异常性；如果事件 *X*=1 是异常的，那么它不太可能发生，因此我们给 *P*(*X*=1)
    分配一个低值。一个称为实际因果强度（ACS）的归因度量，如下结合了异常性和因果概率：
- en: '![figure](../Images/ness-ch8-eqs-3x.png)'
  id: totrans-198
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/ness-ch8-eqs-3x.png)'
- en: In other words, this approach views attribution as a trade-off between being
    an *abnormal* necessary cause and a *normal* sufficient cause.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 换句话说，这种方法将归因视为在成为一个*异常*的必要原因和一个*正常*的充分原因之间的权衡。
- en: There is also a growing body of methods that combine attribution methods from
    the field of explainable AI (e.g., Shapley and SHAP values) with concepts of abnormality
    and causal concepts, such as the probabilities of causation. See the book notes
    at [https://www.altdeep.ai/p/causalaibook](https://www.altdeep.ai/p/causalaibook)
    for a list of references, including actual causal strength and explainable AI
    methods.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，还有越来越多的方法将可解释人工智能领域的归因方法（例如，Shapley 和 SHAP 值）与异常和因果关系概念相结合，如因果概率。有关参考文献列表，包括实际的因果强度和可解释人工智能方法，请参阅[https://www.altdeep.ai/p/causalaibook](https://www.altdeep.ai/p/causalaibook)。
- en: 8.3.3 Binary counterfactuals and uplift modeling
  id: totrans-201
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.3.3 二元反事实和提升建模
- en: Statistical analysis of campaigns to influence human behavior is common in business,
    politics, and research. For instance, in our churn example, the goal of offering
    a promotion is to convince people not to churn. Similarly, businesses advertise
    to convince people to buy their products, and politicians reach out to voters
    to get them to vote or donate to a campaign.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 在商业、政治和研究中，对影响人类行为的活动的统计分析很常见。例如，在我们的流失率示例中，提供促销的目标是说服人们不要流失。同样，企业做广告是为了说服人们购买他们的产品，政治家们接触选民是为了让他们投票或为竞选活动捐款。
- en: 'One of the challenges of campaigns to influence behavior is identifying who
    is likely to respond favorably to your attempt to influence so you only spend
    your limited resources influencing those people. John Wanamaker, a pioneer of
    the field of marketing, put it best:'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 影响行为活动的挑战之一是确定谁可能对你的影响尝试做出积极反应，这样你就可以只将有限的资源用于影响这些人。营销领域的先驱约翰·华纳马克（John Wanamaker）说得最好：
- en: Half the money I spend on advertising is wasted; the trouble is I don’t know
    which half.
  id: totrans-204
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 我花在广告上的钱有一半是浪费的；麻烦的是我不知道哪一半。
- en: '*Uplift modeling* refers to a class of statistical techniques that seek to
    answer this question with data. However, a data scientist approaching this problem
    space for the first time will find various statistical approaches, varying in
    terminology, presumptive data types, modeling assumptions, and modeling approaches,
    leading to confusion. Binary counterfactuals are quite useful in understanding
    the problem at a high level and how various solutions succeed or fail at addressing
    it.'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: '*提升建模*指的是一类统计技术，它试图通过数据来回答这个问题。然而，第一次接触这个领域的数据科学家会发现各种统计方法，这些方法在术语、假设数据类型、建模假设和建模方法上有所不同，导致混淆。二元反事实在理解问题的高层次以及各种解决方案如何成功或失败地解决它非常有用。'
- en: Segmenting users into persuadables, sure things, lost causes, and sleeping dogs
  id: totrans-206
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 将用户分为可说服者、确定无疑的事情、无望的人和睡狗
- en: 'In our churn example, we can assume there are two kinds of subscribers. For
    some subscribers, a promotion will influence their decision to churn. Others are
    non-responders, meaning people for whom the promotion will have no influence.
    We can break up the latter non-responders into two groups:'
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的流失率示例中，我们可以假设有两种类型的订阅者。对于一些订阅者，促销会影响他们决定流失。其他人是不响应者，意味着促销对他们没有任何影响。我们可以将后者的不响应者分为两组：
- en: '*Lost causes*—People who will churn regardless of whether they receive a promotion'
  id: totrans-208
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*无望的人*——无论他们是否收到促销，都会流失的人'
- en: '*Sure things*—People who will stay regardless of whether they receive a promotion'
  id: totrans-209
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*确定无疑的事情*——无论他们是否收到促销，都会留下来的人'
- en: 'Of the people who do respond to the promotion, we have two groups:'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 对于对促销做出反应的人，我们有两种群体：
- en: '*Persuadables*—Subscribers who could be persuaded by a promotion not to leave
    the service'
  id: totrans-211
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*可说服者*——可以通过促销说服他们不离开服务的人'
- en: '*Sleeping dogs*—Subscribers who would not churn if you didn’t send a promotion,
    and people who would churn if you did'
  id: totrans-212
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*睡狗*——如果你不发促销，就不会流失的订阅者，以及如果你发了促销就会流失的人'
- en: Sleeping dogs are named for the expression “let sleeping dogs lie” (last they
    wake up and bite you). These people will do what you want if you leave them alone,
    but they’ll behave against your wishes if you don’t. Have you ever received a
    marketing email from a subscription service and thought, “These people send me
    too much spam! I’m going to cancel.” You were a “sleeping dog”—the company’s email
    was the kick that woke you up, and you bit them for it. Figure 8.5 shows how our
    subscribers break down into these four segments.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 睡狗的名字来源于“让睡狗躺着”（最后它们醒来咬你）这个表达。如果你让他们独处，这些人会做你想做的事，但如果你不让他们独处，他们就会违背你的意愿。你有没有收到过订阅服务的营销邮件，心想，“这些人给我发太多垃圾邮件了！我要取消订阅。”你就是一个“睡狗”——公司的邮件就是唤醒你的那一脚，你因此咬了它们。图8.5展示了我们的订阅者如何分为这四个部分。
- en: '![figure](../Images/CH08_F05_Ness.png)'
  id: totrans-214
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/CH08_F05_Ness.png)'
- en: Figure 8.5 In attempts to influence behavior, we break down the target population
    into these four segments. Given limited resources, we want to target our influence
    efforts on the persuadables and avoid the others, especially the sleeping dogs.
  id: totrans-215
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图8.5 在试图影响行为的过程中，我们将目标人群分为这四个部分。鉴于资源有限，我们希望将我们的影响努力集中在可说服的人群上，避免其他人，尤其是睡狗。
- en: Promotions have a cost in terms of the additional value you give to the subscriber.
    You want to avoid spending that cost on subscribers who weren’t going to churn
    (sure things) and subscribers who were always going to churn (lost causes). And
    you definitely want to avoid spending that cost only to cause someone to churn
    (sleeping dogs). So, of these four groups, you want to send your promotions *only*
    to the persuadables. The task of statistical analysis is to segment our users
    into these four groups.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 促销在给订阅者提供额外价值的同时也带来成本。你希望避免将这笔成本花在那些无论如何都会流失（确定无疑）和那些无论如何都会流失（无望的事业）的订阅者身上。而且你肯定不希望只为了导致某人流失而花费这笔成本（沉睡的狗）。因此，在这四组人中，你只想向那些可能被说服的人发送促销。统计分析的任务是将我们的用户分成这四个组。
- en: 'This is where counterfactuals can help us; we can define each segment in probabilistic
    counterfactual terms:'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是反事实可以帮助我们的地方；我们可以用概率反事实术语来定义每个组：
- en: '*Lost causes*—People who probably would churn if we send a promotion and still
    churn if we did not send a promotion; i.e., *P*(*Y*[*X*][=1]=0, *Y*[*X*][=0]=0)
    is high.'
  id: totrans-218
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*无望的事业*—这类人无论我们是否发送促销，都可能流失；即，*P*(*Y*[*X*][=1]=0, *Y*[*X*][=0]=0) 的概率很高。'
- en: '*Sure things*—People who probably would stay if we send a promotion and stay
    if we did not send a promotion; i.e., *P*(*Y*[*X*][=1]=1, *Y*[*X*][=0]=1) is high.'
  id: totrans-219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*确定无疑*—如果我们发送促销，他们可能会留下，如果我们不发送促销，他们也会留下；即，*P*(*Y*[*X*][=1]=1, *Y*[*X*][=0]=1)
    的概率很高。'
- en: '*Persuadables*—People who probably would stay if we send a promotion and churn
    if we did not send a promotion; i.e., *P*(*Y*[*X*][=1]=1, *Y*[*X*][=0]=0) is high.
    In other words, PNS is high.'
  id: totrans-220
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*可能被说服的人*—如果我们发送促销，他们可能会留下，如果我们不发送促销，他们可能会流失；即，*P*(*Y*[*X*][=1]=1, *Y*[*X*][=0]=0)
    的概率很高。换句话说，PNS（流失可能性）很高。'
- en: '*Sleeping dogs*—People who probably would churn if we send a promotion and
    would stay if we did not send a promotion; i.e., *P*(*Y*[*X*][=1]=0, *Y*[*X*][=0]=1)
    is high.'
  id: totrans-221
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*沉睡的狗*—如果我们发送促销，他们可能会流失，如果我们不发送促销，他们可能会留下；即，*P*(*Y*[*X*][=1]=0, *Y*[*X*][=0]=1)
    的概率很高。'
- en: You can see, in figure 8.6, how the population can be segmented.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在图8.6中看到人口是如何被细分的。
- en: '![figure](../Images/CH08_F06_Ness.png)'
  id: totrans-223
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/CH08_F06_Ness.png)'
- en: Figure 8.6 We can segment the population in counterfactual terms.
  id: totrans-224
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图8.6 我们可以用反事实术语对人口进行细分。
- en: Using counterfactuals for segmentation
  id: totrans-225
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 使用反事实进行细分
- en: Each subscriber has some set of attributes (demographics, usage habits, content
    preferences, etc.). Our goal is to convert these attributes to predict whether
    a subscriber is a persuadable, sleeping dog, lost cause, or sure thing.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 每个订阅者都有一些属性集合（人口统计信息、使用习惯、内容偏好等）。我们的目标是把这些属性转换成预测订阅者是否可能被说服、沉睡的狗、无望的事业或确定无疑。
- en: Let *C* represent a set of subscriber attributes. Given a subscriber with attributes
    *C*=*c*, our causal query of interest is *P*(*Y*[*X*][=1], *Y*[*X*][=0]|*C*=*c*).
    Various statistical segmentation methods seek to define *C* such that users fall
    into groups that have high probability for one of the four outcomes of *P*(*Y*[*X*][=1],
    *Y*[*X*][=0]|*C*=*c*), but before we apply the stats, our first task will be to
    ensure we can estimate this query using sufficient assumptions and data. We’ll
    cover how to estimate counterfactuals with SCMs in chapter 9 and how to use identification
    with broader estimation techniques in chapter 10.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 用 *C* 表示一组订阅者属性。给定一个具有属性 *C*=*c* 的订阅者，我们感兴趣的因果查询是 *P*(*Y*[*X*][=1], *Y*[*X*][=0]|*C*=*c*)。各种统计细分方法试图定义
    *C*，使得用户落入具有高概率的 *P*(*Y*[*X*][=1], *Y*[*X*][=0]|*C*=*c*) 四种结果之一的组。但在我们应用统计方法之前，我们的首要任务是确保我们能够使用足够的假设和数据来估计这个查询。我们将在第9章中介绍如何使用SCM估计反事实，在第10章中介绍如何使用更广泛的估计技术进行识别。
- en: Now that we’ve learned to pose our causal query and formalize it into math,
    let’s revisit the steps of making the counterfactual inference, in figure 8.7\.
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经学会了如何提出因果查询并将其形式化为数学，让我们回顾一下图8.7中反事实推理的步骤。
- en: '![figure](../Images/CH08_F07_Ness.png)'
  id: totrans-229
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/CH08_F07_Ness.png)'
- en: Figure 8.7 The counterfactual inference workflow
  id: totrans-230
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图8.7 反事实推理工作流程
- en: In the next section, we’ll study the idea of possible worlds and parallel world
    graphs. These ideas are important to both identification (determining whether
    we can answer the question) and the inference algorithm.
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，我们将研究可能世界和并行世界图的概念。这些概念对于识别（确定我们是否能够回答问题）和推理算法都至关重要。
- en: 8.4 Possible worlds and parallel world graphs
  id: totrans-232
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 8.4 可能世界和并行世界图
- en: In this section, I’ll introduce the notion of possible worlds and parallel world
    graphs, an extension of a causal DAG for an SCM that supports counterfactual reasoning
    across possible worlds.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我将介绍可能世界和并行世界图的概念，这是对支持跨可能世界进行反事实推理的SCM中因果DAG的扩展。
- en: 8.4.1 Potential outcomes in possible worlds
  id: totrans-234
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.4.1 可能世界中的潜在结果
- en: Counterfactual reasoning involves reasoning over *possible worlds*. A possible
    world is a way the world is or could be. The *actual world* is the possible world
    with the event outcomes we observed. All other possible worlds are *hypothetical
    worlds*.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 反事实推理涉及对*可能世界*的推理。可能世界是世界的一种存在或可能存在的方式。*实际世界*是我们观察到的具有事件结果的那个可能世界。所有其他可能世界都是*假设世界*。
- en: In terms of the data generating process (DGP), the actual world is how the DGP
    unrolled to produce our data. Other possible worlds are defined by all the ways
    the DGP could have produced different data.
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 在数据生成过程（DGP）方面，实际世界是DGP展开产生我们的数据的方式。其他可能世界是由DGP可能产生不同数据的所有方式定义的。
- en: '*Potential outcomes* are a fundamental concept in causal effect inference.
    “Potential outcomes” refers to outcomes of the same variable across differing
    possible worlds. If you have a headache and take an aspirin, you might say there
    are two potential outcomes in two possible worlds: one where your headache gets
    better and one where it doesn’t.'
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: '*潜在结果*是因果效应推断中的基本概念。“潜在结果”指的是在不同可能世界中同一变量的结果。如果你头疼并服用阿司匹林，你可能会说在两个可能世界中存在两种潜在结果：一个是你头疼好转，另一个是你头疼没有好转。'
- en: Review of possible world terminology
  id: totrans-238
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 可能世界术语的回顾
- en: '*Possible world*—A way the world is or could be'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: '*可能世界*—世界的一种存在或可能存在的方式'
- en: '*Actual world*—A possible world with observed event outcomes'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: '*实际世界*—具有观察到的事件结果的可能世界'
- en: '*Hypothetical world*—A possible world with no observed event outcomes'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: '*假设世界*—没有观察到的事件结果的可能世界'
- en: '*Potential outcomes*—Outcomes of the same variable across differing possible
    worlds'
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: '*潜在结果*—在不同可能世界中同一变量的结果'
- en: '*Parallel worlds*—A set of possible worlds being reasoned over, sharing both
    common and differing attributes'
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: '*并行世界*—正在推理的一组可能世界，共享共同和不同的属性'
- en: '*Parallel world graph*—A graphical representation of parallel worlds used both
    for identifying counterfactual queries and in counterfactual inference algorithms'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: '*并行世界图*—用于识别反事实查询和在反事实推断算法中使用的并行世界的图形表示'
- en: 8.4.2 The parallel world graph
  id: totrans-245
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.4.2 并行世界图
- en: A parallel world graph is a simple extension of a causal DAG that captures causality
    across possible worlds. Continuing with the online gaming example, suppose we
    are interested in the question, “For a player who had low engagement and less
    than $50 of in-game purchases, what would their level of in-game purchases be
    if their level of engagement was high?” I.e., *P*(*I*[*E*][=“high”]|*E*=“low”,
    *I*<50). For this counterfactual query, we can visualize both the actual and the
    hypothetical worlds in figure 8.8
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 并行世界图是因果DAG的一个简单扩展，它捕捉了可能世界之间的因果关系。继续使用在线游戏示例，假设我们感兴趣的问题是：“对于一个参与度低且游戏内消费少于50美元的玩家，如果他们的参与度高，他们的游戏内消费水平会是什么？”即*P*(*I*[*E*][=“high”]|*E*=“low”，*I*<50)。对于这个反事实查询，我们可以在图8.8中可视化实际和假设世界。
- en: '![figure](../Images/CH08_F08_Ness.png)'
  id: totrans-247
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/CH08_F08_Ness.png)'
- en: Figure 8.8 To answer the counterfactual query for the online gaming example,
    we start by duplicating the causal DAG across possible worlds.
  id: totrans-248
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图8.8 为了回答在线游戏示例的反事实查询，我们首先在可能世界中复制因果DAG。
- en: We duplicate the causal DAG for the online gaming example across both possible
    worlds. Having one DAG for each world reflects that the causal structure of the
    DGP is the same in each world. But we’ll need to connect these DAGs in some way
    to reason *across* worlds.
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在线游戏示例的因果DAG在两个可能世界中复制。每个世界都有一个DAG反映了DGP在每个世界中的因果结构相同。但我们需要以某种方式连接这些DAG来跨世界进行推理。
- en: We’ll connect the two worlds using an SCM defined on the causal DAG. We’ll suppose
    that the original nodes of the DAG are the endogenous variables of the SCM and
    expand the DAG visualization by adding the exogenous variables. Further, the two
    causal DAGs will use the same exogenous nodes. We call the resulting graph a *parallel
    world graph* (or, for this typical case of two possible worlds, a “twin-world
    graph”). Figure 8.9 visualizes the parallel world graph.
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用因果DAG上定义的SCM连接两个世界。我们假设DAG的原始节点是SCM的内生变量，并通过添加外生变量来扩展DAG的可视化。此外，两个因果DAG将使用相同的外生节点。我们将结果图称为*并行世界图*（或，对于这种有两个可能世界的典型情况，称为“双世界图”）。图8.9可视化了并行世界图。
- en: '![figure](../Images/CH08_F09_Ness.png)'
  id: totrans-251
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/CH08_F09_Ness.png)'
- en: Figure 8.9 In the parallel world graph, we use the exogenous variables in an
    SCM to unite the duplicate causal DAGs across worlds. The result is a single SCM
    with duplicate endogenous variables.
  id: totrans-252
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图8.9 在并行世界图中，我们使用SCM中的外生变量来统一不同世界中的重复因果DAG。结果是具有重复内生变量的单个SCM。
- en: 'Refresher: The structural causal model (SCM)'
  id: totrans-253
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 复习：结构因果模型（SCM）
- en: 'An SCM is a causal model with the following components:'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: SCM是一个具有以下组件的因果模型：
- en: '*Endogenous variables*—Endogenous variables are the variables we specifically
    want to model.'
  id: totrans-255
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*内生变量*—内生变量是我们特别想要建模的变量。'
- en: '*Exogenous variables*—A set of exogenous variables. Exogenous variables are
    proxies for all the causes of our endogenous variables we don’t wish to model
    explicitly. In our formulation, we pair each endogenous variable *X* with a single
    exogenous variable *N**[X]* (there are more general formulations).'
  id: totrans-256
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*外生变量*—一组外生变量。外生变量是我们不希望显式建模的、我们内生变量的所有原因的代理。在我们的公式中，我们将每个内生变量 *X* 与单个外生变量
    *N**[X]* 配对（存在更通用的公式）。'
- en: '*Exogenous distributions*—To use the SCM as a generative model, we need a set
    of marginal probability distributions for each exogenous variable, such as *P*(*N**[X]*),
    which represents the modeler’s uncertainty about the values *N**[X]*.'
  id: totrans-257
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*外生分布*—为了将SCM用作生成模型，我们需要每个外生变量的边缘概率分布集，例如 *P*(*N**[X]*)，它代表模型器对 *N**[X]* 值的不确定性。'
- en: '*Functional assignments*—Each endogenous variable has a functional assignment
    that sets its value deterministically, given its parents.'
  id: totrans-258
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*功能分配*—每个内生变量都有一个功能分配，它根据其父节点确定性地设置其值。'
- en: For example, written as a generative model, an SCM for our online game model
    would look as follows.
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，以生成模型的形式，我们在线游戏模型的SCM可能如下所示。
- en: '![sidebar figure](../Images/ness-ch8-eqs-2x.png)'
  id: totrans-260
  prefs: []
  type: TYPE_IMG
  zh: '![sidebar figure](../Images/ness-ch8-eqs-2x.png)'
- en: The assignment functions induce the causal DAG; each variable is a node, the
    exogenous variables are root nodes, and the inputs of a variable’s assignment
    function correspond to its parents in the DAG. The SCM is a particular case of
    a causal graphical model where endogenous variables are set by deterministic functions
    rather than sampled from causal Markov kernels.
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 分配函数诱导因果DAG；每个变量是一个节点，外生变量是根节点，一个变量的分配函数的输入对应于DAG中的父节点。SCM是因果图形模型的一个特例，其中内生变量由确定性函数设置，而不是从因果马尔可夫核中采样。
- en: The result is a single SCM with one shared set of exogenous variables and duplicate
    sets of endogenous variables—one set for each possible world. Note that in an
    SCM, the endogenous variables are set deterministically, given the exogenous variables.
    So upon observing that *E*=“low” and *I*<50 in the actual world, we know that
    the hypothetical outcomes of *E* and *I* must be the same. Indeed, even though
    *Guild Membership* (*G*) is a latent variable in the actual world, we know that
    whatever value *G* takes in the actual world must be the same as in the hypothetical
    world. In other words, our SCM upholds the consistency rule, as illustrated in
    figure 8.10\. In figure 8.10, the *E* and *I* in the actual world are observed
    variables because we condition on them in the query *P*(*I*[*E*][=“high”]|*E*=“low”,
    *I* < 50).
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 结果是一个具有一组共享的外生变量和重复的内生变量集的单一SCM——每个可能世界一组。请注意，在SCM中，内生变量在外生变量的给定下是确定性地设置的。因此，当我们观察到实际世界中的
    *E*=“低”和 *I*<50 时，我们知道 *E* 和 *I* 的假设结果必须相同。事实上，尽管 *Guild Membership* (*G*) 是实际世界中的潜在变量，但我们知道
    *G* 在实际世界中的任何值都必须与假设世界中的相同。换句话说，我们的SCM维护了一致性规则，如图8.10所示。在图8.10中，实际世界中的 *E* 和 *I*
    是观察变量，因为我们根据它们在查询 *P*(*I*[*E*][=“high”]|*E*=“low”， *I* < 50) 中进行了条件化。
- en: '![figure](../Images/CH08_F10_Ness.png)'
  id: totrans-263
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/CH08_F10_Ness.png)'
- en: Figure 8.10 In an SCM, the endogenous variables are set deterministically, given
    the exogenous variables. In this model, the endogenous variables are duplicated
    across worlds. Therefore, upon observing low engagement and less than $50 of in-game
    purchases in the actual world, we know that those values must be the same in the
    hypothetical world unless we change something in the hypothetical world.
  id: totrans-264
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图8.10 在供应链管理（SCM）中，内生变量在给定外生变量的情况下被确定性地设置。在这个模型中，内生变量在各个世界中是复制的。因此，在观察实际世界中低参与度和低于50美元的游戏内购买时，我们知道这些值在假设世界中必须相同，除非我们在假设世界中改变某些东西。
- en: 8.4.3 Applying the hypothetical condition via graph surgery
  id: totrans-265
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.4.3 通过图手术应用假设条件
- en: The hypothetical world will, typically, differ from the actual world by the
    hypothetical condition. For example, in *P*(*I*[*E*][=“high”]|*E*=“low”, *I* <
    50), “if engagement were high” ([*E*][=“high”]) differs from the factual condition
    “engagement was low” (*E*=“low”). As we’ve discussed, we model the hypothetical
    condition with the ideal intervention—we intervene on *E*, setting it to “high”
    in the hypothetical world. We model the ideal intervention on the graph with graph
    surgery—we’ll remove incoming edges to the *E* variable in the hypothetical world
    as in figure 8.11.
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 假设世界通常与实际世界不同，因为假设条件不同。例如，在 *P*(*I*[*E*][=“高”]|*E*=“低”， *I* < 50)中，“如果参与度是高的”([*E*][=“高”])与实际条件“参与度是低的”(*E*=“低”)不同。正如我们讨论的那样，我们使用理想的干预措施来模拟假设条件——我们在假设世界中干预
    *E*，将其设置为“高”。我们通过图手术来模拟理想的干预措施——我们将在假设世界中移除指向 *E* 变量的入边，如图8.11所示。
- en: '![figure](../Images/CH08_F11_Ness.png)'
  id: totrans-267
  prefs: []
  type: TYPE_IMG
  zh: '![图](../Images/CH08_F11_Ness.png)'
- en: Figure 8.11 The ideal intervention and graph surgery represents the hypothetical
    condition in the hypothetical world. In this setting, the outcome for *I* in the
    hypothetical world can now take a different outcome than it has in the actual
    world because its parent *E* has a different outcome than it has in the actual
    world.
  id: totrans-268
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图8.11 理想干预和图手术表示假设世界中的假设条件。在这种情况下，假设世界中 *I* 的结果现在可以采取与实际世界中不同的结果，因为其父节点 *E*
    的结果与实际世界中不同。
- en: Now the outcome for *In-Game Purchases* (*I*) in the hypothetical world can
    take a different outcome than the actual world’s outcome of *I*=50 because its
    causal parent *E* has different outcomes in each world.
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，假设世界中“游戏内购买”(*I*)的结果可以不同于实际世界中 *I*=50 的结果，因为其因果父节点 *E* 在每个世界中都有不同的结果。
- en: 8.4.4 Reasoning across more than two possible worlds
  id: totrans-270
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.4.4 跨越两个以上可能世界的推理
- en: 'The counterfactual notation and the parallel worlds graph formalism support
    counterfactual reasoning that extends across more than two possible worlds. To
    illustrate, let’s refer back to the Netflix example at the beginning of the chapter.
    Summarizing the story, the key variables in that narrative are as follows:'
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 反事实符号和并行世界图形式支持跨越两个以上可能世界的反事实推理。为了说明，让我们回顾本章开头提到的Netflix示例。总结这个故事，该叙述中的关键变量如下：
- en: Disney is trying to close a deal to buy the Bond franchise. Let *B* = “success”
    if the deal closes. Otherwise, *B* = “fail”.
  id: totrans-272
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 迪士尼正在尝试达成一项购买邦德系列的交易。如果交易达成，则 *B* = “成功”，否则 *B* = “失败”。
- en: Netflix is trying to close a deal to start a new spy franchise called *Dead
    Drop*. *D* = “success” if the *Dead Drop* deal closes and “fail” otherwise. If
    the Bond deal closes, it will affect the terms of this deal. Therefore, *B* causes
    *D*.
  id: totrans-273
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Netflix正在尝试达成一项新间谍系列电影“Dead Drop”的交易。如果“Dead Drop”交易达成，则 *D* = “成功”，否则为“失败”。如果邦德交易达成，它将影响这项交易的条款。因此，*B*
    导致 *D*。
- en: If the *Dead Drop* deal closes, it will affect engagement in spy-thriller-related
    content on Netflix. Let *E* = “high” if a subscriber’s engagement in Netflix’s
    spy-thriller content is high and “low” otherwise.
  id: totrans-274
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果“Dead Drop”交易达成，它将影响Netflix上与间谍惊悚片相关内容的参与度。如果订阅者在Netflix的间谍惊悚片内容中的参与度是“高”，则令
    *E* = “高”，否则为“低”。
- en: The outcome of the Bond deal and the *Dead Drop* deal will both affect the attrition
    of spy-thriller fans to Disney. Let *A* be the rate of attrition to Disney.
  id: totrans-275
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 邦德交易和“Dead Drop”交易的结果都将影响间谍惊悚片粉丝向迪士尼的流失。令 *A* 为向迪士尼的流失率。
- en: With this case study, the following multi-world counterfactual is plausible.
    Suppose the Bond deal was successful (*B* = “success”), but Netflix’s *Dead Drop*
    deal failed, and as a result, engagement was low (*E* = “low”) and Netflix attrition
    to Disney is 10 percent. Figure 8.12 illustrates this actual world outcome.
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 通过这个案例研究，以下的多世界反事实是合理的。假设邦德交易成功（*B* = “success”），但Netflix的*Dead Drop* 交易失败，结果参与度低（*E*
    = “low”），Netflix向迪士尼的流失率为10%。图8.12展示了这个实际世界的成果。
- en: 'As a Netflix executive, you start wondering about attribution. You assume that
    engagement would have been high if the Dead Drop deal had been successful. You
    ask the following counterfactual question:'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 作为Netflix的执行高管，你开始思考归因问题。你假设如果Dead Drop交易成功，参与度将会很高。你提出了以下反事实问题：
- en: Disney’s Bond deal succeeded, the Dead Drop deal failed, and as a result, Netflix’s
    spy thriller engagement was low, and attrition to Disney was 10%. I assume that
    had the Dead Drop deal been successful, engagement would have been high. In that
    case, how much attribution would there have been?
  id: totrans-278
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 迪士尼的邦德交易成功，Dead Drop交易失败，因此，Netflix的间谍惊悚片参与度低，向迪士尼的流失率为10%。我假设如果Dead Drop交易成功，参与度将会很高。在这种情况下，会有多少归因？
- en: We can implement this assumption with world 2 in the parallel world graph in
    figure 8.13\.
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以在图8.13的并行世界图中使用世界2来实现这个假设。
- en: '![figure](../Images/CH08_F12_Ness.png)'
  id: totrans-280
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/CH08_F12_Ness.png)'
- en: Figure 8.12 A causal DAG representing the Netflix case study. The light gray
    nodes are observed outcomes in the actual world. The dark nodes are latent variables.
  id: totrans-281
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图8.12 展示了Netflix案例研究的因果DAG图。浅灰色节点是实际世界中的观测结果。深色节点是潜在变量。
- en: '![figure](../Images/CH08_F13_Ness.png)'
  id: totrans-282
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/CH08_F13_Ness.png)'
- en: Figure 8.13 The second possible world represents the assumption that if the
    *Dead Drop* deal was successful (via intervention *D=*“success”) engagement would
    have been high (*E**[D]*[=“success”]=“high”).
  id: totrans-283
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图8.13 第二个可能的世界代表了这样的假设：如果*Dead Drop* 交易成功（通过干预 *D=*“success”），参与度将会很高（*E**[D]*[=“success”]=“high”）。
- en: Finally, you wonder what the level of Netflix attrition would be *if the Bond
    deal had failed*. But you wonder this based on your second-world assumption that
    engagement would be high if the *Dead Drop* deal had been successful. Since the
    Bond deal failing is a hypothetical condition that conflicts with the Bond deal
    success condition in the second world, you need a third world, as illustrated
    in figure 8.14.
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，你可能会想知道，如果邦德交易失败，Netflix的流失率会是多少。但你基于第二个世界的假设，即如果*Dead Drop* 交易成功，参与度将会很高。由于邦德交易失败是一个与第二个世界中的邦德交易成功条件相冲突的假设条件，你需要一个第三世界，如图8.14所示。
- en: '![figure](../Images/CH08_F14_Ness.png)'
  id: totrans-285
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/CH08_F14_Ness.png)'
- en: Figure 8.14 Given the actual outcomes in world 1, the hypothetical conditions
    and outcomes in world 2, you pose conditions in world 3 and reason about attrition
    in world 3.
  id: totrans-286
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图8.14 在世界1的实际结果基础上，你提出了世界2的假设条件和结果，并在世界3中设定条件，并对世界3的流失率进行推理。
- en: 'In summary, this is the counterfactual question:'
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 总结来说，这是一个反事实问题：
- en: Disney’s Bond deal succeeded, the *Dead Drop* deal failed, and as a result,
    Netflix’s spy thriller engagement was low, and attrition to Disney was 10%. I
    assume that had the *Dead Drop* deal been successful, engagement would have been
    high. In that case, how much attribution would there have been if the Bond deal
    had failed?
  id: totrans-288
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 迪士尼的邦德交易成功，*Dead Drop* 交易失败，因此，Netflix的间谍惊悚片参与度低，向迪士尼的流失率为10%。我假设如果*Dead Drop*
    交易成功，参与度将会很高。在这种情况下，如果邦德交易失败，会有多少归因？
- en: 'Note that the preceding reasoning is different from the following:'
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，前面的推理与以下不同：
- en: Disney’s Bond deal succeeded, the *Dead Drop* deal failed, and as a result,
    Netflix’s spy thriller engagement was low, and attrition to Disney was 10%. I
    assume that had the *Dead Drop* deal been successful *and the Bond deal failed*,
    engagement would have been high. In that case, how much attribution would there
    have been?
  id: totrans-290
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 迪士尼的邦德交易成功，*Dead Drop* 交易失败，因此，Netflix的间谍惊悚片参与度低，向迪士尼的流失率为10%。我假设如果*Dead Drop*
    交易成功而邦德交易失败，参与度将会很高。在这种情况下，会有多少归因？
- en: Figure 8.15 illustrates the latter question.
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.15说明了后一个问题。
- en: '![figure](../Images/CH08_F15_Ness.png)'
  id: totrans-292
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/CH08_F15_Ness.png)'
- en: Figure 8.15 In the case of assuming *E**[B]*[=“fail”,]*[D]*[=“success”], only
    two worlds are needed.
  id: totrans-293
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 在假设 *E**[B]*[=“fail”,]*[D]*[=“success”] 的情况下，只需要两个世界。
- en: The latter question assumes engagement would be high if the Bond deal failed
    *and* the *Dead Drop* deal was successful (*E*[*B*][=“fail”,] [*D*][=“success”][=][“][high”]).
    In contrast, the former “three world” question assumes engagement would be high
    if both deals were successful. Then, in the third world, It allows for different
    possible levels of engagement in the hypothetical scenario where the Bond deal
    failed. For example, perhaps engagement would be high since Netflix would have
    its spy-thriller franchise and Disney wouldn't. Or perhaps, without a Bond reboot
    there would be less overall interest in spy-thrillers, resulting in low engagement
    in *Dead Drop*.
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: 后一个问题假设如果邦德交易失败*并且*“死信”交易成功（*E*[*B*][=“fail”，] [*D*][=“success”][=][“][high”]），参与度会很高。相比之下，前一个“三个世界”问题假设如果两个交易都成功，参与度会很高。然后，在第三个世界中，它允许在邦德交易失败的情况下假设情景中有不同的可能参与度水平。例如，可能由于Netflix拥有其间谍惊悚片系列而迪士尼没有，因此参与度会很高。或者，如果没有邦德重启，对间谍惊悚片的整体兴趣可能会减少，导致“死信”的参与度低。
- en: '8.4.5 Rule of thumb: Hypothetical worlds should be simpler'
  id: totrans-295
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.4.5 经验法则：假设世界应该更简单
- en: Consider again the endogenous nodes in our online gaming example in figure 8.16\.
    Notice that, in this example, the two worlds have the same sets of endogenous
    nodes, and the edges in the hypothetical world are a subset of the edges of those
    in the actual world. In other words, the possible world where we do intervene
    is simpler than the possible world where we condition on evidence.
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: 再次考虑图8.16中的在线游戏示例中的内生节点。注意，在这个例子中，两个世界有相同的一组内生节点，假设世界中的边是实际世界中边的子集。换句话说，我们干预的可能世界比基于证据的条件可能世界简单。
- en: '![figure](../Images/CH08_F16_Ness.png)'
  id: totrans-297
  prefs: []
  type: TYPE_IMG
  zh: '![图](../Images/CH08_F16_Ness.png)'
- en: Figure 8.16 The graph representing the possible world with the hypothetical
    conditional is simpler than the graph representing the actual world.
  id: totrans-298
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图8.16 表示具有假设条件的可能世界的图比表示实际世界的图简单。
- en: Similarly, in the three-world graph for the Netflix case study, world 3 is a
    subgraph of world 2, which is a subgraph of world 1\. As an algorithmic rule of
    thumb, it is useful to have this descending ordering on possible worlds. This
    rule of thumb reduces the risk of algorithmic instability.
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 类似地，在Netflix案例研究的三个世界图中，世界3是世界2的子图，而世界2又是世界1的子图。作为一个算法规则，对可能世界有这种递减顺序是有用的。这个经验法则可以降低算法不稳定的可能性。
- en: That said, there are use cases for having more complicated hypothetical worlds.
    For example, a modeler could introduce new nodes as conditions in the hypothetical
    world. Or they could use stochastic interventions that randomly introduce new
    edges in the hypothetical world. Indeed, human counterfactual reasoning can be
    quite imaginative. Exploring such approaches could lead to interesting new algorithms
    for causal AI.
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: 话虽如此，存在更复杂假设世界的用例。例如，模型师可以在假设世界中引入新的节点作为条件。或者他们可以使用随机干预，在假设世界中随机引入新的边。确实，人类的反事实推理可以非常富有想象力。探索这些方法可能导致因果AI的新颖算法。
- en: In the next chapter, we’ll dive into using parallel world graphs in an algorithm
    for general counterfactual inference.
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将深入探讨在通用反事实推理算法中使用并行世界图。
- en: Summary
  id: totrans-302
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 摘要
- en: Counterfactual statements describe hypothetical events that potentially conflict
    with actual events. They are fundamental to defining causality.
  id: totrans-303
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 反事实陈述描述了可能与实际事件冲突的假设事件。它们是定义因果关系的根本。
- en: Counterfactual reasoning supports learning policies for better decision-making.
  id: totrans-304
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 反事实推理支持学习策略以做出更好的决策。
- en: Counterfactual reasoning involves reasoning over possible worlds. A *possible
    world* is a way the world is or could be. The *actual world* is a possible world
    with event outcomes we observed. Other possible worlds are hypothetical worlds.
  id: totrans-305
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 反事实推理涉及对可能世界的推理。一个*可能世界*是世界存在或可能存在的方式。*实际世界*是我们观察到的结果事件的可能世界。其他可能世界是假设世界。
- en: In machine learning, often the goal is counterfactual analysis of a machine
    learning model itself. Here, we reason about how a prediction would have been
    different if elements of the input feature vector were different.
  id: totrans-306
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在机器学习中，通常的目标是对机器学习模型本身进行反事实分析。在这里，我们推理如果输入特征向量的元素不同，预测会有何不同。
- en: Counterfactual analysis in classification can help find the minimal change in
    features that would have led to a different classification.
  id: totrans-307
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在分类中的反事实分析可以帮助找到导致不同分类的最小特征变化。
- en: Counterfactual analysis supports explainable AI by helping identify changes
    to features that would have changed the prediction outcome on a case-by-case basis.
  id: totrans-308
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 反事实分析通过帮助识别会改变每个案例预测结果的特征变化，从而支持可解释人工智能。
- en: Counterfactual analysis supports algorithmic recourse by identifying *actionable*
    changes to features that would change the prediction outcome.
  id: totrans-309
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 反事实分析通过识别会改变预测结果的特征的*可操作*变化，从而支持算法回溯。
- en: Counterfactual analysis supports AI fairness by identifying features corresponding
    to protected attributes where changes to said features would change the prediction
    outcome.
  id: totrans-310
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 反事实分析通过识别与受保护属性相对应的特征，这些特征的变化会改变预测结果，从而支持人工智能的公平性。
- en: “Potential outcomes” is a commonly used term that refers to outcomes for a given
    variable from across possible worlds.
  id: totrans-311
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: “潜在结果”是一个常用术语，指的是从可能世界中给定变量的结果。
- en: We can use the ideal intervention and parallel world graphs to model hypothetical
    conditions in natural language counterfactual statements and questions.
  id: totrans-312
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们可以使用理想干预和并行世界图来模拟自然语言反事实陈述和问题中的假设条件。
- en: Counterfactual notation helps represent hypothetical statements and questions
    in the language of probability. Probability can be used to quantify uncertainty
    about the truth of hypothetical statements and questions, including counterfactuals.
  id: totrans-313
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 反事实符号有助于用概率语言表示假设性陈述和问题。概率可以用来量化关于假设性陈述和问题（包括反事实）的真实性的不确定性。
- en: Using hypothetical language rather than declarative language helps with formalizing
    a counterfactual statement or question into counterfactual notation. Using hypothetical
    language implies imagined possibility, and thus uncertainty, which invites us
    to think about the probability of a hypothetical statement being true.
  id: totrans-314
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用假设性语言而不是陈述性语言有助于将反事实陈述或问题形式化为反事实符号。使用假设性语言意味着想象的可能性，因此存在不确定性，这促使我们思考假设性陈述为真的概率。
- en: Binary counterfactual queries refer to queries on variables (hypothetical conditions
    and outcomes) that are binary.
  id: totrans-315
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 二进制反事实查询是指对二元变量（假设条件和结果）的查询。
- en: The *probabilities of causation,* such as the *probability of necessity* (PN),
    *probability of sufficiency* (PS), and *probability of necessity and sufficiency*
    (PNS), are binary counterfactual queries that are useful as primitives in causal
    attribution methods and other types of advanced causal queries.
  id: totrans-316
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*因果概率*，例如*必要性概率*（PN）、*充分性概率*（PS）和*必要性和充分性概率*（PNS），是作为因果归因方法和其他类型高级因果查询原语的有用二进制反事实查询。'
- en: Binary counterfactual queries are also useful for distinguishing between “persuadables,”
    “sure things,” “lost causes,” and “sleeping dogs” in uplift modeling problems.
  id: totrans-317
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 二进制反事实查询在提升建模问题中区分“可说服者”、“确定无疑”、“无望的案例”和“沉睡的狗”也是很有用的。
- en: A parallel world graph is a simple extension of a causal DAG that captures causality
    across possible worlds. It represents an SCM over possible worlds that share a
    common set of exogenous variables and duplicate sets of endogenous variables.
  id: totrans-318
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 并行世界图是因果DAG的一个简单扩展，它捕捉了可能世界中因果关系的跨世界。它表示一个在共享一组外生变量和重复的内生变量集合的可能世界上的SCM。
