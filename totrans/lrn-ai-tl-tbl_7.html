<html><head></head><body><section data-pdf-bookmark="Chapter 7. Tableau Agent" data-type="chapter" epub:type="chapter"><div class="chapter" id="ch07_tableau_agent_1732595609828420">
<h1><span class="label">Chapter 7. </span>Tableau Agent</h1>

<p>Now <a contenteditable="false" data-primary="Tableau Agent" data-secondary="overview of" data-type="indexterm" id="id637"/>that you’ve learned about all the facets of Tableau Pulse, it’s time to move on to the other AI tool available in the Tableau platform: Tableau Agent. As mentioned in the Preface, Tableau <a contenteditable="false" data-primary="Einstein Copilot" data-see="Tableau Agent" data-type="indexterm" id="id638"/>Agent (formerly Einstein Copilot) is an AI assistant available to those authoring visualizations or Prep workflows on the web. It also works directly with the Tableau Data Catalog feature to generate summaries of data assets and content. With Tableau Agent, you can use conversant AI to build charts and calculations, receive suggestions on what to analyze, and minimize administration time. Let’s <span class="keep-together">dive in</span>.</p>

<section data-pdf-bookmark="Prerequisites" data-type="sect1"><div class="sect1" id="ch07_prerequisites_1732595609828573">
<h1>Prerequisites</h1>

<p>Tableau <a contenteditable="false" data-primary="Tableau Agent" data-secondary="prerequisites for using" data-type="indexterm" id="id639"/>Agent is currently available only on Tableau Cloud for those who have a Tableau+ subscription. Introduced in the summer of 2024, <a contenteditable="false" data-primary="Tableau+" data-type="indexterm" id="id640"/>Tableau+ is marketed as an enterprise-level solution of the Tableau platform (Tableau Cloud only) with premium AI features. This version of the product line includes everything you’re accustomed to with a normal Tableau license, plus the inclusion of the <a contenteditable="false" data-primary="Data Management add-on" data-type="indexterm" id="id641"/>Data Management and <a contenteditable="false" data-primary="Advanced Management add-on" data-type="indexterm" id="id642"/>Advanced Management add-ons, access to its <a contenteditable="false" data-primary="eLearning library" data-type="indexterm" id="id643"/>eLearning library, an instance of <a contenteditable="false" data-primary="Data Cloud" data-type="indexterm" id="id644"/>Data Cloud, Tableau Agent, additional capabilities for Tableau Pulse, Data Connect service, and premium support. Unsurprisingly, this offering comes with a hefty new price tag, which is roughly 3x the traditional licensing costs for each license type.</p>

<p>To enable Tableau Agent, organizations must have a Data Cloud instance and connect it with their Tableau Cloud instance. Additionally, they must have Salesforce CRM with Einstein generative AI set up and enabled. The connection between the three platforms serves two primary purposes:</p>

<ul class="less_space pagebreak-before">
	<li>
	<p>Tracking and auditing of requests to AI services</p>
	</li>
	<li>
	<p>Utilization of AI services via a credits-based system</p>
	</li>
</ul>

<p>More information about the setup between these platforms is available in the <a href="https://oreil.ly/eEr0e">help documentation</a>.</p>
</div></section>

<section data-pdf-bookmark="Visualization Authoring" data-type="sect1"><div class="sect1" id="ch07_visualization_authoring_1732595609828660">
<h1>Visualization Authoring</h1>

<p>Assuming <a contenteditable="false" data-primary="Tableau Agent" data-secondary="visualization authoring using" data-tertiary="overview of" data-type="indexterm" id="id645"/><a contenteditable="false" data-primary="visualization authoring" data-secondary="overview of" data-type="indexterm" id="id646"/><a contenteditable="false" data-primary="authorizing visualizations" data-see="visualization authoring" data-type="indexterm" id="id647"/>you’ve got a Tableau+ license and Tableau AI setup within your Tableau Cloud environment, you’ll be able to use Tableau Agent when authoring visualizations on the web. To begin, you’ll want to open a new or existing workbook on Tableau Cloud. From there, you’ll see an Einstein icon in the upper-right area of the authoring screen, next to the Data Guide icon, as seen in <a data-type="xref" href="#ch07_figure_1_1732595609819928">Figure 7-1</a>.</p>

<figure><div class="figure" id="ch07_figure_1_1732595609819928"><img alt="A screenshot of a computer  Description automatically generated" src="assets/lait_0701.png"/>
<h6><span class="label">Figure 7-1. </span>The Tableau Agent window in web authoring</h6>
</div></figure>

<p>Upon accessing this window and clicking through the general warning message for generative AI, you can begin interacting with it. Tableau Agent lets you know that it can assist with the following:</p>

<ul class="less_space pagebreak-before">
	<li>
	<p>Creating simple visualizations</p>
	</li>
	<li>
	<p>Creating and describing calculated fields</p>
	</li>
	<li>
	<p>Performing operations such as filtering, sorting, and grouping data</p>
	</li>
	<li>
	<p>Providing suggestions on what to analyze</p>
	</li>
</ul>

<p>You can also ask it direct questions and describe tasks you want completed. This section explores some of these features and discusses how Tableau Agent can assist. I’ll be using the familiar Superstore Transactions data source first mentioned in <span class="keep-together"><a data-type="xref" href="ch02.html#ch02_getting_started_with_tableau_pulse_1732595607647464">Chapter 2</a></span>.</p>

<div data-type="note" epub:type="note"><h6>Note</h6>
<p>Although grouping is listed as a feature by the AI, Tableau documentation indicates that grouping is not currently supported.</p>
</div>

<section data-pdf-bookmark="Creating Simple Visualizations" data-type="sect2"><div class="sect2" id="ch07_creating_simple_visualizations_1732595609828748">
<h2>Creating Simple Visualizations</h2>

<p>Using <a contenteditable="false" data-primary="Tableau Agent" data-secondary="visualization authoring using" data-tertiary="creating simple visualizations" data-type="indexterm" id="kab088"/>Tableau <a contenteditable="false" data-primary="visualization authoring" data-secondary="creating simple visualizations" data-type="indexterm" id="kab092"/>Agent, you can speed up creating visualizations that may be tedious or take several clicks. I’ll start with very direct examples and gradually change the language in the prompts to be more ambiguous, allowing the AI to make decisions (such as chart type) that aren’t explicitly stated (see <a data-type="xref" href="#ch07_example_1_1732595609825312">Example 7-1</a>).</p>

<div data-type="example" id="ch07_example_1_1732595609825312">
<h5><span class="label">Example 7-1. </span>Direct request for a specific chart type</h5>

<p><strong>Prompt</strong></p>

<pre data-type="programlisting">
Make a line chart showing sales by week</pre>

<p><strong>Tableau Agent</strong></p>

<pre data-type="programlisting">
I created a line chart to show sales by week. I used the 'Order Date' field for the x-axis and aggregated it by week. The 'Sales' field is on the y-axis, aggregated by sum.</pre>
</div>

<p><a data-type="xref" href="#ch07_figure_2_1732595609819968">Figure 7-2</a> shows the chart that Tableau Agent produced from the prompt in <a data-type="xref" href="#ch07_example_1_1732595609825312">Example 7-1</a>, which aligns with my expectations. It correctly made a line chart with the Sales field on the y-axis, trending across weeks. Now I’ll ask for a specific chart type, shown in <a data-type="xref" href="#ch07_example_2_1732595609825346">Example 7-2</a>.</p>

<figure><div class="figure" id="ch07_figure_2_1732595609819968"><img src="assets/lait_0702.png"/>
<h6><span class="label">Figure 7-2. </span>A line chart created by Tableau Agent after prompting (see <a data-type="xref" href="#ch07_example_1_1732595609825312">Example 7-1</a>) (see a larger version of this figure <a href="https://oreil.ly/lait0702"> online</a>)</h6>
</div></figure>

<div data-type="example" id="ch07_example_2_1732595609825346">
<h5><span class="label">Example 7-2. </span>Request for a specific chart type, but with some ambiguity on the layout</h5>

<p><strong>Prompt</strong></p>

<pre data-type="programlisting">
Create a bar chart that breaks down the sales of each sub-category for each category.</pre>

<p><strong>Tableau Agent</strong></p>

<pre data-type="programlisting">
I created a bar chart that breaks down the sales of each sub-category for each category.</pre>
</div>

<p><a data-type="xref" href="#ch07_figure_3_1732595609819997">Figure 7-3</a> shows <a contenteditable="false" data-primary="Tableau Agent" data-secondary="ambiguity in prompts" data-type="indexterm" id="id648"/>the resulting chart from the prompt in <a data-type="xref" href="#ch07_example_2_1732595609825346">Example 7-2</a>, which isn’t exactly what I was looking for but does meet the brief stated in the prompt. I was hoping to get a bar chart with both Category and Sub-Category on rows, avoiding the repetition of empty sub-categories that clutters up the visualization.</p>

<figure><div class="figure" id="ch07_figure_3_1732595609819997"><img src="assets/lait_0703.png"/>
<h6><span class="label">Figure 7-3. </span>A bar chart created by Tableau Agent after prompting (see <a data-type="xref" href="#ch07_example_2_1732595609825346">Example 7-2</a>) (see a larger version of this figure <a href="https://oreil.ly/lait0703"> online</a>)</h6>
</div></figure>

<p>Since it’s conversant AI, I can follow up with another prompt to try to get the chart I’m aiming for (see <a data-type="xref" href="#ch07_example_3_1732595609825370">Example 7-3</a>).</p>

<div data-type="example" id="ch07_example_3_1732595609825370">
<h5><span class="label">Example 7-3. </span>Follow-up request to adjust the chart layout</h5>

<p><strong>Prompt</strong></p>

<pre data-type="programlisting">
I want both the category and sub-category to be on the left side</pre>

<p><strong>Tableau Agent</strong></p>

<pre data-type="programlisting">
I updated the bar chart to place both the category and sub-category on the left side, breaking down the sales for each sub-category within each category.</pre>
</div>

<p>And the resulting chart, as shown in <a data-type="xref" href="#ch07_figure_4_1732595609820019">Figure 7-4</a>, now aligns with my expectations. The output from this prompt reveals that the AI is in tune with the layout of the authoring screen and understands what it means if something is placed on the <em>left side</em> of a visualization.</p>

<p>Tableau Agent can also handle requests to see data without specifying a chart type. This can be useful if you’re not sure of the type of chart that you want to create (<a data-type="xref" href="#ch07_example_4_1732595609825393">Example 7-4</a>).</p>

<figure><div class="figure" id="ch07_figure_4_1732595609820019"><img src="assets/lait_0704.png"/>
<h6><span class="label">Figure 7-4. </span>The updated bar chart after specifying placement of fields (see <a data-type="xref" href="#ch07_example_3_1732595609825370">Example 7-3</a>) (see a larger version of this figure <a href="https://oreil.ly/lait0704"> online</a>)</h6>
</div></figure>

<div data-type="example" id="ch07_example_4_1732595609825393">
<h5><span class="label">Example 7-4. </span>Specific data elements with no description of desired chart type</h5>

<p><strong>Prompt</strong></p>

<pre data-type="programlisting">
make a chart showing the sales and quantity for every product</pre>

<p><strong>Tableau Agent</strong></p>

<pre data-type="programlisting">
I created a bar chart to show the sales and quantity for every product. The 'Product Name' is on the y-axis, and both 'Sales' and 'Quantity' are on the x-axis.</pre>
</div>

<p><a data-type="xref" href="#ch07_figure_5_1732595609820060">Figure 7-5</a> shows the resulting chart, based on the prompt from <a data-type="xref" href="#ch07_example_4_1732595609825393">Example 7-4</a>, which includes identifying the correct fields. However, the goal I have for this chart is to see the relationship between the two values for every product. So, I’ll follow up with another prompt to guide the AI toward the type of insights I’m trying to uncover, which are best shown using a scatterplot (see <a data-type="xref" href="#ch07_example_5_1732595609825414">Example 7-5</a>).</p>

<figure><div class="figure" id="ch07_figure_5_1732595609820060"><img src="assets/lait_0705.png"/>
<h6><span class="label">Figure 7-5. </span>Chart created by AI when no chart type was specified in <a data-type="xref" href="#ch07_example_4_1732595609825393">Example 7-4</a> (see a larger version of this figure <a href="https://oreil.ly/lait0705"> online</a>)</h6>
</div></figure>

<div data-type="example" id="ch07_example_5_1732595609825414">
<h5><span class="label">Example 7-5. </span>Request to produce a chart based on a specified goal</h5>

<p><strong>Prompt </strong></p>

<pre data-type="programlisting">
I want to see the relationship between the two values for all products</pre>

<p><strong>Tableau Agent</strong></p>

<pre data-type="programlisting">
I updated the viz to show the relationship between sales and quantity for every product. I used a scatter plot to better visualize the relationship between these two values.</pre>
</div>

<p>With the key phrase of <em>relationship between the two values</em> included in the <a data-type="xref" href="#ch07_example_5_1732595609825414">Example 7-5</a> prompt, which is how Tableau documentation typically describes the purpose of scatterplots, the resulting visualization is what I was aiming for, as shown in <a data-type="xref" href="#ch07_figure_6_1732595609820086">Figure 7-6</a>.</p>

<figure><div class="figure" id="ch07_figure_6_1732595609820086"><img src="assets/lait_0706.png"/>
<h6><span class="label">Figure 7-6. </span>The updated chart after providing more context in the prompt of <a data-type="xref" href="#ch07_example_5_1732595609825414">Example 7-5</a> (see a larger version of this figure <a href="https://oreil.ly/lait0706"> online</a>)</h6>
</div></figure>

<p>Knowing that the AI does better when provided more contextual information on layout or the analytical task is extremely useful. Here’s one more example (<a data-type="xref" href="#ch07_example_6_1732595609825434">Example 7-6</a>) where there’s <a contenteditable="false" data-primary="Tableau Agent" data-secondary="ambiguity in prompts" data-type="indexterm" id="id649"/>ambiguity in the type of chart to create, but the purpose of the analysis is clear.</p>

<div data-type="example" id="ch07_example_6_1732595609825434">
<h5><span class="label">Example 7-6. </span>Specific analytical task with no description of the chart type</h5>

<p><strong>Prompt</strong></p>

<pre data-type="programlisting">
make a chart showing the part-to-whole relationship of Category and Sub-Category when looking at the quantity</pre>

<p><strong>Tableau Agent</strong></p>

<pre data-type="programlisting">
OK. I can’t make exactly what you requested, but here’s a viz based on the fields you mentioned.</pre>
</div>

<p>The resulting chart is a treemap, as shown in <a data-type="xref" href="#ch07_figure_7_1732595609820109">Figure 7-7</a>, which is what I was mentally expecting. The correct fields are identified, and because of the number of unique sub-categories, provides a cleaner visual than a pie chart. It’s somewhat surprising that Tableau Agent mentions that it can’t make exactly what I requested, since the chart completely fits the brief.</p>

<figure><div class="figure" id="ch07_figure_7_1732595609820109"><img src="assets/lait_0707.png"/>
<h6><span class="label">Figure 7-7. </span>Chart created by AI after providing an analytical task in the prompt of <a data-type="xref" href="#ch07_example_6_1732595609825434">Example 7-6</a> (see a larger version of this figure <a href="https://oreil.ly/lait0707"> online</a>)</h6>
</div></figure>

<div data-type="tip"><h6>Tip</h6>
<p>Given how the AI performs when constructing visualizations, it makes sense to provide as much context as possible in your prompt. I would recommend including the chart type (if you have one in mind), any specifics you’re interested in for the layout, and the type of analysis you’re trying <a contenteditable="false" data-primary="visualization authoring" data-secondary="creating simple visualizations" data-startref="kab092" data-type="indexterm" id="id650"/>to <a contenteditable="false" data-primary="Tableau Agent" data-secondary="visualization authoring using" data-startref="kab088" data-tertiary="creating simple visualizations" data-type="indexterm" id="id651"/>achieve.</p>
</div>
</div></section>

<section data-pdf-bookmark="Working with Calculated Fields" data-type="sect2"><div class="sect2" id="ch07_working_with_calculated_fields_1732595609828821">
<h2>Working with Calculated Fields</h2>

<p>Next, <a contenteditable="false" data-primary="Tableau Agent" data-secondary="visualization authoring using" data-tertiary="working with calculated fields" data-type="indexterm" id="kab089"/><a contenteditable="false" data-primary="visualization authoring" data-secondary="working with calculated fields" data-type="indexterm" id="kab093"/>I want to go through some examples involving calculated fields. With Tableau Agent, you can create calculated fields, get a description of how they work, and receive assistance on debugging calculations that aren’t working the way you want. <a data-type="xref" href="#ch07_example_7_1732595609825452">Example 7-7</a> shows the prompt for a simple calculation.</p>

<div data-type="example" id="ch07_example_7_1732595609825452">
<h5><span class="label">Example 7-7. </span>Simple calculation</h5>

<p><strong>Prompt</strong></p>

<pre data-type="programlisting">
Create a calculated field that is the number of days between the Order Date and Ship Date</pre>

<p><strong>Tableau Agent</strong></p>

<pre data-type="programlisting">
This calculation returns the number of days between the Order Date and Ship Date. You can use this calculated field in your Viz to analyze the shipping duration. Add the 'Order Date' and 'Ship Date' fields to your Viz to see the calculated shipping duration.</pre>
</div>

<p>The prompt instantly created the exact calculation I was looking for and gave it a friendly name—definitely a huge time-saver. <a data-type="xref" href="#ch07_figure_8_1732595609820130">Figure 7-8</a> shows the result, which includes a modal pop-up of the calculated field for review.</p>

<figure><div class="figure" id="ch07_figure_8_1732595609820130"><img src="assets/lait_0708.png"/>
<h6><span class="label">Figure 7-8. </span>Calculated field made based on the prompt in <a data-type="xref" href="#ch07_example_7_1732595609825452">Example 7-7</a> (see a larger version of this figure <a href="https://oreil.ly/lait0708"> online</a>)</h6>
</div></figure>

<p>Now I want to get a little more sophisticated and see if Tableau Agent can create a calculated field that uses more advanced elements, like table calculations. Since table calculations rely on the layout of the data in the visualization, I’ll begin with a chart that includes the right elements but doesn’t quite have the calculation I want (see <a data-type="xref" href="#ch07_example_8_1732595609825470">Example 7-8</a>).</p>

<div data-type="example" id="ch07_example_8_1732595609825470">
<h5><span class="label">Example 7-8. </span>Advanced calculation</h5>

<p><strong>Prompt</strong></p>

<pre data-type="programlisting">
Create a calculated field showing the percentage difference between each month for sales.</pre>

<p><strong>Tableau Agent</strong></p>

<pre data-type="programlisting">
This calculation computes the percentage difference in sales between each month. To use this calculation, place the 'Order Date (Months)' field on the Columns shelf and the new calculated field on the Rows shelf in your Viz. Then, set the table calculation to compute using 'Order Date (Months)'.</pre>
</div>

<p><a data-type="xref" href="#ch07_figure_9_1732595609820151">Figure 7-9</a> shows the result, which includes a friendly name for the calculation and accurately uses the <a contenteditable="false" data-primary="LOOKUP function" data-type="indexterm" id="id652"/><code>LOOKUP()</code> function, which is a table calculation. It also includes how to specify the compute direction of the table calculation. Interestingly, it also includes an optional <a contenteditable="false" data-primary="IFNULL function" data-type="indexterm" id="id653"/><code>IFNULL</code> function in the calculation, returning null or empty values as 0.</p>

<figure><div class="figure" id="ch07_figure_9_1732595609820151"><img src="assets/lait_0709.png"/>
<h6><span class="label">Figure 7-9. </span>Advanced calculation made after the prompt in <a data-type="xref" href="#ch07_example_8_1732595609825470">Example 7-8</a> (see a larger version of this figure <a href="https://oreil.ly/lait0709"> online</a>)</h6>
</div></figure>

<p>Finally, I want to try a compound concept within a calculated field, one that requires both an LOD expression and a function. This would be the type of calculation that requires some time to conceptualize and requires the creator to likely build out the calculation in multiple steps while validating its functionality along the way (see <a data-type="xref" href="#ch07_example_9_1732595609825489">Example 7-9</a>).</p>

<div data-type="example" id="ch07_example_9_1732595609825489">
<h5><span class="label">Example 7-9. </span>Multiple calculation concepts</h5>

<p><strong>Prompt</strong></p>

<pre data-type="programlisting">
For every state, find the very first order date using customers whose first name is exactly 5 characters</pre>

<p><strong>Tableau Agent</strong></p>

<pre data-type="programlisting">
This calculation finds the very first order date for each state using customers whose first name is exactly 5 characters. Add the 'State/Province' and 'First Order Date for 5-Character First Names' fields to your Viz to display the results.</pre>
</div>

<p><a data-type="xref" href="#ch07_figure_10_1732595609820171">Figure 7-10</a> shows the calculation constructed, and I have to admit this output is impressive. Tableau Agent used string calculations that would likely require a bit of trial and error and correctly combined it with an LOD expression to isolate the value by State/Province. Although the request is pretty esoteric, asking the AI to construct the calculation was much more efficient than attempting to create the calculation myself.</p>

<figure><div class="figure" id="ch07_figure_10_1732595609820171"><img src="assets/lait_0710.png"/>
<h6><span class="label">Figure 7-10. </span>A complex calculation made by AI from the prompt in <a data-type="xref" href="#ch07_example_9_1732595609825489">Example 7-9</a> (see a larger version of this figure <a href="https://oreil.ly/lait0710"> online</a>)</h6>
</div></figure>

<p>Working with calculations may be the biggest strength of Tableau Agent. Let’s see how it describes a calculation and see if I can get assistance in modifying it to meet my needs.</p>

<p>Notice in <a data-type="xref" href="#ch07_figure_10_1732595609820171">Figure 7-10</a> that there is a small Einstein icon in the calculated field window. Clicking this icon causes Tableau Agent to list how it can assist with calculations. First, I’ll ask it to explain the calculation Profit Rank, which I’ve created to rank the Profit value for each sub-category (see <a data-type="xref" href="#ch07_example_10_1732595609825508">Example 7-10</a>).</p>

<div data-type="example" id="ch07_example_10_1732595609825508">
<h5><span class="label">Example 7-10. </span>Explain and debug the existing calculated field</h5>

<p><strong>Prompt</strong></p>

<pre data-type="programlisting">
Explain Profit Rank</pre>

<p><strong>Tableau Agent</strong></p>

<pre data-type="programlisting">
The 'Profit Rank' calculated field assigns a unique rank to each item based on the total profit, with the highest profit receiving rank 1. It uses the RANK_UNIQUE function to ensure that each rank is distinct, and it sorts the profits in descending order.</pre>
</div>

<p><a data-type="xref" href="#ch07_figure_11_1732595609820191">Figure 7-11</a> shows the visualization with the Profit Rank field I’ve constructed and the explanation.</p>

<figure><div class="figure" id="ch07_figure_11_1732595609820191"><img src="assets/lait_0711.png"/>
<h6><span class="label">Figure 7-11. </span>Profit Rank calculation explained from the prompt in <a data-type="xref" href="#ch07_example_10_1732595609825508">Example 7-10</a> (see a larger version of this figure <a href="https://oreil.ly/lait0711"> online</a>)</h6>
</div></figure>

<p>You’ll notice within the visualization that the rank runs across all the sub-categories, ignoring the Category field. But what I was hoping to achieve with this calculation is for each sub-category to receive a rank within its parent category. Let’s see whether Tableau Agent can assist (see <a data-type="xref" href="#ch07_example_11_1732595609825528">Example 7-11</a>).</p>

<div data-type="example" id="ch07_example_11_1732595609825528">
<h5><span class="label">Example 7-11. </span>Request to adjust how rank is computed</h5>

<p><strong>Prompt</strong></p>

<pre data-type="programlisting">
How can I change the calculation so that the rank starts over for every Category?</pre>

<p><strong>Tableau Agent</strong></p>

<pre data-type="programlisting">
This calculation ranks the sum of profits uniquely within each category. To use this in your Viz, place 'Category' on the Rows or Columns shelf, 'Sub-Category' on the Rows shelf, and 'Profit Rank' on the Text or Label shelf. Set the 'Compute Using' setting to 'Sub-Category' to ensure the ranking restarts for each category.</pre>
</div>

<p>This response includes instructions about how to place the fields on the canvas but, more importantly, it does correctly identify how to modify the table calculation to restart the ranking for every Category. <a data-type="xref" href="#ch07_figure_12_1732595609820211">Figure 7-12</a> shows the final visualization, after taking Tableau Agent’s advice and setting <a contenteditable="false" data-primary="Tableau Agent" data-secondary="visualization authoring using" data-startref="kab089" data-tertiary="working with calculated fields" data-type="indexterm" id="id654"/>the <a contenteditable="false" data-primary="visualization authoring" data-secondary="working with calculated fields" data-startref="kab093" data-type="indexterm" id="id655"/>Compute <a contenteditable="false" data-primary="Compute Using, of table calculation" data-type="indexterm" id="id656"/>Using to Sub-Category.</p>

<figure><div class="figure" id="ch07_figure_12_1732595609820211"><img alt="A screenshot of a computer  Description automatically generated" src="assets/lait_0712.png"/>
<h6><span class="label">Figure 7-12. </span>Updating the Compute Using method of a table calculation from the prompt in <a data-type="xref" href="#ch07_example_11_1732595609825528">Example 7-11</a> (see a larger version of this figure <a href="https://oreil.ly/lait0712"> online</a>)</h6>
</div></figure>
</div></section>

<section data-pdf-bookmark="Filtering" data-type="sect2"><div class="sect2" id="ch07_filtering_1732595609828886">
<h2>Filtering</h2>

<p>In <a contenteditable="false" data-primary="Tableau Agent" data-secondary="visualization authoring using" data-tertiary="filtering data" data-type="indexterm" id="kab090"/><a contenteditable="false" data-primary="visualization authoring" data-secondary="filtering data" data-type="indexterm" id="kab094"/>addition to assisting with visualization and calculation construction, you can use Tableau Agent to limit data within visualizations. This section explores this feature to see how it can be used to streamline these types of tasks, going from simple concepts to more complex scenarios.</p>

<p>First I want to see what happens when I ask for very straightforward <a contenteditable="false" data-primary="date filtering" data-type="indexterm" id="id657"/>date <a contenteditable="false" data-primary="filtering" data-secondary="of dates" data-type="indexterm" id="id658"/>filtering. I’ve already set up a line chart showing Sales by Month for each Segment as the chart for these prompts (see <a data-type="xref" href="#ch07_example_12_1732595609825545">Example 7-12</a>).</p>

<div data-type="example" id="ch07_example_12_1732595609825545">
<h5><span class="label">Example 7-12. </span>Simple date filter</h5>

<p><strong>Prompt</strong></p>

<pre data-type="programlisting">
Limit the data to the last 18 months</pre>

<p><strong>Tableau Agent</strong></p>

<pre data-type="programlisting">
I updated the viz to limit the data to the last 18 months.</pre>
</div>

<p class="pagebreak-before">As expected, the AI placed the Order Date field on the Filters shelf. It also exposed a relative date filter, which is helpful, since a few types of date filter designs can be used. <a data-type="xref" href="#ch07_figure_13_1732595609820232">Figure 7-13</a> shows the result.</p>

<figure><div class="figure" id="ch07_figure_13_1732595609820232"><img src="assets/lait_0713.png"/>
<h6><span class="label">Figure 7-13. </span>Date filter created by AI from the prompt in <a data-type="xref" href="#ch07_example_12_1732595609825545">Example 7-12</a> (see a larger version of this figure <a href="https://oreil.ly/lait0713"> online</a>)</h6>
</div></figure>

<p>Next, I want to try a filter based on a dimension. I’ll stick with the same chart and use Segment as my target dimension for filtering (see <a data-type="xref" href="#ch07_example_13_1732595609825564">Example 7-13</a>).</p>

<div data-type="example" id="ch07_example_13_1732595609825564">
<h5><span class="label">Example 7-13. </span>Filter by a dimension</h5>

<p><strong>Prompt</strong></p>

<pre data-type="programlisting">
I only want to see Consumer and Corporate in the chart</pre>

<p><strong>Tableau Agent</strong></p>

<pre data-type="programlisting">
I updated the viz to only include the 'Consumer' and 'Corporate' segments in the chart.</pre>
</div>

<p>This time I intentionally chose to focus on my desired outcome, as opposed to describing the action to take. The AI correctly resolves the task and adds a <a contenteditable="false" data-primary="Segment filter" data-type="indexterm" id="id659"/>Segment filter to the Filters shelf, as shown in <a data-type="xref" href="#ch07_figure_14_1732595609820251">Figure 7-14</a>.</p>

<figure><div class="figure" id="ch07_figure_14_1732595609820251"><img src="assets/lait_0714.png"/>
<h6><span class="label">Figure 7-14. </span>Updated visualization with a Segment filter from the prompt in <a data-type="xref" href="#ch07_example_13_1732595609825564">Example 7-13</a> (see a larger version of this figure <a href="https://oreil.ly/lait0714"> online</a>)</h6>
</div></figure>

<p>Now let’s see if the AI can keep up with a filter operation based <a contenteditable="false" data-primary="filtering" data-secondary="by measure or numerical value" data-type="indexterm" id="id660"/>on a numerical value (see <a data-type="xref" href="#ch07_example_14_1732595609825582">Example 7-14</a>).</p>

<div data-type="example" id="ch07_example_14_1732595609825582">
<h5><span class="label">Example 7-14. </span>Filter by a measure or numerical value</h5>

<p><strong>Prompt</strong></p>

<pre data-type="programlisting">
Only include rows of data where the sales value is more than 100</pre>

<p><strong>Tableau Agent</strong></p>

<pre data-type="programlisting">
I updated the viz to only include rows where the sales value is more than 100.</pre>
</div>

<p>Tableau Agent correctly interprets my prompt and adds a filter for Sales to the Filters shelf, as shown in <a data-type="xref" href="#ch07_figure_15_1732595609820270">Figure 7-15</a>.</p>

<div data-type="warning" epub:type="warning"><h6>Warning</h6>
<p>This is where the AI reaches its limit in terms of interpretation and correct action. To get the result in <a data-type="xref" href="#ch07_figure_15_1732595609820270">Figure 7-15</a>, I had to iterate through several differently worded prompts. Each unsuccessful prompt resulted in the AI adding an aggregated version, <code>SUM(Sales)</code>, as a filter, as opposed to the individual value. The key to getting to this result was the very explicit indication of <em>rows of data</em>, which provided the context necessary to look at the individual Sales values instead of <a contenteditable="false" data-primary="visualization authoring" data-secondary="filtering data" data-startref="kab094" data-type="indexterm" id="id661"/>the <a contenteditable="false" data-primary="Tableau Agent" data-secondary="visualization authoring using" data-startref="kab090" data-tertiary="filtering data" data-type="indexterm" id="id662"/>sum.</p>
</div>

<figure><div class="figure" id="ch07_figure_15_1732595609820270"><img src="assets/lait_0715.png"/>
<h6><span class="label">Figure 7-15. </span>AI-generated filter based on a numerical value from the prompt in <a data-type="xref" href="#ch07_example_14_1732595609825582">Example 7-14</a> (see a larger version of this figure <a href="https://oreil.ly/lait0715"> online</a>)</h6>
</div></figure>
</div></section>

<section data-pdf-bookmark="Following Best Practices for Prompting" data-type="sect2"><div class="sect2" id="ch07_best_practices_1732595609828947">
<h2>Following Best Practices for Prompting</h2>

<p>As <a contenteditable="false" data-primary="Tableau Agent" data-secondary="visualization authoring using" data-tertiary="best practices" data-type="indexterm" id="id663"/><a contenteditable="false" data-primary="visualization authoring" data-secondary="best practices for" data-type="indexterm" id="id664"/>you saw throughout the preceding examples, phrasing of your prompts is crucial. Here are some best practices for working with Tableau Agent while authoring:</p>

<dl>
	<dt>Use direct and explicit language</dt>
	<dd>
	<p>Tableau Agent works best when you use imperative verbs to tell it specifically what you want. <em>Make</em>, <em>create</em>, <em>build</em>, <em>write</em>, <em>explain</em>, and <em>show me</em> are all great prompt starters.</p>
	</dd>
	<dt>Minimize irrelevant data</dt>
	<dd>
	<p>As with all good analysis, it’s best if you hide or exclude unnecessary fields in your data. This eliminates the opportunity for the AI to offer suggestions based on superfluous information or similarly named fields.</p>
	</dd>
	<dt>Use Tableau language</dt>
	<dd>
	<p>If you want a calculation to be built using a specific function, name it in your prompt. Similarly, use contextual phrases that frequently appear in documentation to guide the AI.</p>
	</dd>
	<dt>Work in steps</dt>
	<dd>
	<p>The AI functions best when it’s given one direct action to follow through on. Break these tasks into separate prompts and iterate through them.</p>
	</dd>
	<dt>Ask questions</dt>
	<dd>
	<p>If you’re not exactly sure what visualization or calculation you’re trying to create, phrase your prompt in the form of a question. Start with words such as <em>how</em>, <em>what</em>, and <em>which</em>.</p>
	</dd>
</dl>

<p>In addition to these basic best practices, don’t be afraid to provide feedback on whether the AI output was helpful or not by using the familiar thumbs up/down icons. Remember, the LLM doesn’t store or directly learn from your prompt because of <a contenteditable="false" data-primary="Einstein Trust Layer" data-type="indexterm" id="id665"/>the Einstein Trust Layer (refer to <a data-type="xref" href="ch02.html#ch02_getting_started_with_tableau_pulse_1732595607647464">Chapter 2</a>), so you won’t see an immediate improvement. However, your feedback is likely aggregated and used to enhance the overall model.</p>
</div></section>
</div></section>

<section data-pdf-bookmark="Tableau Prep Builder" data-type="sect1"><div class="sect1" id="ch07_tableau_prep_builder_1732595609829039">
<h1>Tableau Prep Builder</h1>

<p>Tableau <a contenteditable="false" data-primary="Tableau Agent" data-secondary="in Prep Builder" data-type="indexterm" id="kab091"/><a contenteditable="false" data-primary="Tableau Prep Builder" data-type="indexterm" id="kab095"/>Agent <a contenteditable="false" data-primary="Prep Builder" data-type="indexterm" id="kab096"/>is also available in the Add Field editor within Prep Builder on the web. You’ll notice that once you’re in the editor, there’s a section for Tableau Agent (Einstein), as shown in <a data-type="xref" href="#ch07_figure_16_1732595609820295">Figure 7-16</a>.</p>

<figure><div class="figure" id="ch07_figure_16_1732595609820295"><img src="assets/lait_0716.png"/>
<h6><span class="label">Figure 7-16. </span>Calculation editor with Tableau Agent in Prep</h6>
</div></figure>

<p class="pagebreak-before">The experience with <a contenteditable="false" data-primary="Calculation editor, with Tableau Agent in Prep" data-type="indexterm" id="id666"/>Tableau Agent in Prep is virtually identical to that of the web-authoring support you receive when working with calculations. In general, you’ll be able to use the functions and operators that are available within the Reference tab of the editor. These include logical operators, fixed LODs, numerical aggregations, and more. In particular, Tableau Agent in Prep Builder also includes the ability to construct regular expressions.</p>

<p><em>Regular expressions</em> (regex) <a contenteditable="false" data-primary="regular expressions (regex)" data-type="indexterm" id="id667"/>are patterns used to match character expressions in string fields. They are powerful, but often identifying the correct syntax to isolate the pattern is challenging. This is where Tableau Agent can help. <a data-type="xref" href="#ch07_example_15_1732595609825602">Example 7-15</a> shows what happens when asked to create a calculation that parses out the four-digit year in the Order ID field, which includes a two-letter country code, four-digit year, and a six-digit order number separated by dashes (example: CA-2021-100867).</p>

<div data-type="example" id="ch07_example_15_1732595609825602">
<h5><span class="label">Example 7-15. </span>Constructing a calculation with a regular expression</h5>

<p><strong>Prompt</strong></p>

<pre data-type="programlisting">
Write a regular expression to parse the four digit year from the Order ID into its own field.</pre>

<p><strong>Tableau Agent</strong></p>

<pre data-type="programlisting">
This calculation uses a regular expression to extract the first sequence of four digits from the 'Order ID' field, which represents the four-digit year.</pre>
</div>

<p><a data-type="xref" href="#ch07_figure_17_1732595609820318">Figure 7-17</a> shows the Add Field editor and conversation with Tableau Agent. In addition to constructing the calculation, Tableau Agent also provides a button to replace the calculation in the editor with the regular expression suggested.</p>

<figure><div class="figure" id="ch07_figure_17_1732595609820318"><img src="assets/lait_0717.png"/>
<h6><span class="label">Figure 7-17. </span>Regular expression created based on the prompt in <a data-type="xref" href="#ch07_example_15_1732595609825602">Example 7-15</a> (see a larger version of this figure <a href="https://oreil.ly/lait0717"> online</a>)</h6>
</div></figure>

<div data-type="note" epub:type="note"><h6>Note</h6>
<p>Separate workflow steps, like joining or unioning data, pivoting and aggregation, creating new rows, predictions, inserting a script, and output, are not currently supported. Similarly, there is no consultative guidance or explanations available for these steps <a contenteditable="false" data-primary="Tableau Prep Builder" data-startref="kab095" data-type="indexterm" id="id668"/><a contenteditable="false" data-primary="Prep Builder" data-startref="kab096" data-type="indexterm" id="id669"/>when using <a contenteditable="false" data-primary="Tableau Agent" data-secondary="in Prep Builder" data-startref="kab091" data-type="indexterm" id="id670"/>Tableau Agent.</p>
</div>
</div></section>

<section data-pdf-bookmark="Tableau Data Catalog" data-type="sect1"><div class="sect1" id="ch07_tableau_data_catalog_1732595609829099">
<h1>Tableau Data Catalog</h1>

<p>Finally, <a contenteditable="false" data-primary="Tableau Agent" data-secondary="using with Tableau Data Catalog" data-type="indexterm" id="id671"/>Tableau <a contenteditable="false" data-primary="Tableau Data Catalog" data-type="indexterm" id="id672"/>Agent is available for usage with the Tableau Data Catalog. When writing descriptions for workbooks, data sources, or tables, you’ll notice a Draft with Einstein button <a contenteditable="false" data-primary="Draft with Einstein button" data-type="indexterm" id="id673"/>available. <a data-type="xref" href="#ch07_figure_18_1732595609820337">Figure 7-18</a> shows how it appears when editing a description for a table.</p>

<figure><div class="figure" id="ch07_figure_18_1732595609820337"><img src="assets/lait_0718.png"/>
<h6><span class="label">Figure 7-18. </span>Draft with Einstein option for describing a table</h6>
</div></figure>

<p>The AI will rely on metadata like field and table names to generate a <a contenteditable="false" data-primary="descriptions" data-type="indexterm" id="id674"/>description. Descriptions can be regenerated by clicking the Draft with Einstein button again. You can also modify the automatically generated description and add formatting as desired. <a data-type="xref" href="#ch07_figure_19_1732595609820364">Figure 7-19</a> shows a description generated for the credit card transactions data set used in the finance example from <a data-type="xref" href="ch05.html#ch05_use_cases_with_tableau_pulse_1732595608896811">Chapter 5</a> (refer to <a data-type="xref" href="ch05.html#ch05_figure_9_1732595608887700">Figure 5-9</a>).</p>

<figure><div class="figure" id="ch07_figure_19_1732595609820364"><img src="assets/lait_0719.png"/>
<h6><span class="label">Figure 7-19. </span>A published data source description generated using Draft with Einstein</h6>
</div></figure>

<p>As you can see, the AI is able to pull out the field names within the published data source and suggest how it can be analyzed, saving a ton of time and avoiding many typos in the process.</p>
</div></section>

<section data-pdf-bookmark="Summary" data-type="sect1"><div class="sect1" id="ch07_summary_1732595609829155">
<h1>Summary</h1>

<p>This chapter walked you through many examples of working with Tableau Agent throughout the Tableau platform. You’ve seen how it can assist with visualization authoring and calculation creation. Here are some key takeaways:</p>

<ul>
	<li>
	<p>Tableau Agent can make simple visualizations and is most effective when describing the analytical task or chart type you want.</p>
	</li>
	<li>
	<p>Tableau Agent can construct a variety of calculated fields, from the use of simple functions to complex calculations that involve a mixture of concepts.</p>
	</li>
	<li>
	<p>Tableau Agent can filter data within a worksheet, but will likely need explicit instructions when filtering numerical values.</p>
	</li>
	<li>
	<p>You’ll have the most success with Tableau Agent if you give it explicit instructions. Begin your prompts with action verbs if you know what you want. If you’re unsure of the outcome you’re trying to achieve, formulate your request as a <span class="keep-together">question</span>.</p>
	</li>
	<li>
	<p>Tableau Agent within Tableau Prep is currently limited to calculation creation and assistance.</p>
	</li>
	<li>
	<p>Tableau Agent can use metadata information to automatically generate descriptions for workbooks, data sources, and tables.</p>
	</li>
</ul>

<p><a data-type="xref" href="ch08.html#ch08_what_s_next_1732595610003895">Chapter 8</a>, the final chapter, discusses the influence these new AI technologies have on the platform and previews what new features may be coming down the pipeline.</p>
</div></section>
</div></section></body></html>