["```py\n.../analytics-project (main) $ cd chapter14\n.../chapter14 (main) $ touch requirements.txt\n```", "```py\nlangchain_core>=0.3.0,<0.4.0 ![1](assets/1.png)\nlangchain_anthropic>=0.2.0,<0.3.0 ![2](assets/2.png)\nlanggraph>=0.2.0,<0.3.0  ![3](assets/3.png)\n```", "```py\n.../chapter14 (main) $ pip3 install --upgrade -r requirements.txt\n```", "```py\n.../chapter14 (main) $ touch langgraph_notebook.ipynb\n```", "```py\n# LangGraph Agent\n## Without tools\n```", "```py\n## Library Imports\n```", "```py\nfrom langchain_core.messages import HumanMessage ![1](assets/1.png)\nfrom langchain_anthropic import ChatAnthropic ![2](assets/2.png)\nfrom langgraph.checkpoint.memory import MemorySaver ![3](assets/3.png)\nfrom langgraph.graph import END, START, StateGraph, MessagesState\nimport logging\nfrom IPython.display import Image, Markdown, display ![4](assets/4.png)\nfrom langchain_core.runnables.graph import CurveStyle,\nMermaidDrawMethod, NodeStyles ![5](assets/5.png)\n```", "```py\n## Configure logging\n```", "```py\nfor handler in logging.root.handlers[:]: ![1](assets/1.png)\n    logging.root.removeHandler(handler)\n\nlogging.basicConfig(\n    filename='langgraph_notebook.log',\n    level=logging.INFO,  ![2](assets/2.png)\n)\n```", "```py\n## Configure Agent and Model\n```", "```py\nmodel = ChatAnthropic(model=\"claude-3-5-sonnet-20240620\", temperature=0) ![1](assets/1.png)\n\ndef call_model(state: MessagesState): ![2](assets/2.png)\n    messages = state['messages']\n    response = model.invoke(messages)\n    return {\"messages\": [response]}\n\nworkflow = StateGraph(MessagesState) ![3](assets/3.png)\n\nworkflow.add_node(\"agent\", call_model) ![4](assets/4.png)\n\nworkflow.add_edge(START, \"agent\") ![5](assets/5.png)\n\ncheckpointer = MemorySaver()\n\napp = workflow.compile(checkpointer=checkpointer) ![6](assets/6.png)\n```", "```py\n## Visualize the Graph\n```", "```py\ndisplay(\n    Image(\n        app.get_graph().draw_mermaid_png(\n            draw_method=MermaidDrawMethod.API,\n        )\n    )\n)\n```", "```py\n## Chat with the Agent\n```", "```py\nfinal_state = app.invoke(\n    {\"messages\": [HumanMessage(content=\"What teams did Joe Montana play for?\")]},\n    config={\"configurable\": {\"thread_id\": 99}}\n)\ndisplay(Markdown(final_state[\"messages\"][-1].content))\n```", "```py\nJoe Montana played for two NFL teams during his professional career:\n\n1\\. San Francisco 49ers (1979-1992)\n2\\. Kansas City Chiefs (1993-1994)\nHe spent the majority of his career with the 49ers, where he achieved his\ngreatest success, before finishing his career with two seasons in Kansas City.\n```", "```py\nfinal_state = app.invoke(\n    {\"messages\": [HumanMessage(content=\"What are the leagues in the\n    SportsWorldCentral fantasy football platform?\")]},\n    config={\"configurable\": {\"thread_id\": 99}}\n)\ndisplay(Markdown(final_state[\"messages\"][-1].content))\n```", "```py\nI apologize, but I don't have any specific information about leagues in a\nplatform called \"SportsWorldCentral\" for fantasy football. Fantasy football\nplatforms can vary widely in their league structures and offerings, and I'm not\nfamiliar with this particular one. If this is a real platform, you might\nneed to check their website or contact their customer support\nfor accurate information about their league types and structures.\nIf you have more general questions about fantasy football leagues,\nI'd be happy to help with those.\n```", "```py\n.../ai-project (main) $ cd api\n.../api (main) $ pip3 install -r requirements.txt\n```", "```py\n.../api (main) $ fastapi run main.py\n```", "```py\nINFO:     Started server process [19192]\nINFO:     Waiting for application startup.\nINFO:     Application startup complete.\nINFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)\n```", "```py\nchapter14 (main) $ touch ../.env\n```", "```py\nSWC_API_BASE_URL=[URL from previous step]\n```", "```py\n.../api (main) $ pip install swcpy@git+https://github.com/handsonapibook/\napi-book-part-one#subdirectory=chapter7/complete/sdk\n```", "```py\nSuccessfully built swcpy\nInstalling collected packages: pyarrow, backoff, swcpy\nSuccessfully installed backoff-2.2.1 pyarrow-16.1.0 swcpy-0.0.2\n```", "```py\nchapter14 (main) $ touch swc_toolkit.py\n```", "```py\nimport os\nfrom typing import Optional, Type, List\n\nfrom pydantic import BaseModel, Field\n\nfrom langchain_core.callbacks import CallbackManagerForToolRun ![1](assets/1.png)\nfrom langchain_core.tools import BaseTool, BaseToolkit\n\ntry: ![2](assets/2.png)\n            from swcpy import SWCClient\n            from swcpy import SWCConfig\n            from swcpy.swc_client import League, Team\nexcept ImportError:\n    raise ImportError(\n        \"swcpy is not installed. Please install it.\"\n    )\n\nconfig = SWCConfig(backoff=False) ![3](assets/3.png)\nlocal_swc_client = SWCClient(config)\n```", "```py\nclass HealthCheckInput(BaseModel): ![1](assets/1.png)\n    pass\n\nclass HealthCheckTool(BaseTool): ![2](assets/2.png)\n    name: str = \"HealthCheck\"\n   description: str = (\n         \"useful to check if the API is running before you make other calls\"\n    args_schema: Type[HealthCheckInput] = HealthCheckInput ![3](assets/3.png)\n    return_direct: bool = False\n\n    def _run(\n        self, run_manager: Optional[CallbackManagerForToolRun] = None\n    ) -> str:\n        \"\"\"Use the tool to check if the API is running.\"\"\"\n        health_check_response = local_swc_client.get_health_check() ![4](assets/4.png)\n        return health_check_response.text\n\nclass LeaguesInput(BaseModel): ![5](assets/5.png)\n   league_name: Optional[str] = Field(\n        default=None,\n        description=\"league name. Leave blank or None to get all leagues.\")\n\nclass ListLeaguesTool(BaseTool): ![6](assets/6.png)\n   name: str = \"ListLeagues\"\n   description: str = (\n       \"get a list of leagues from SportsWorldCentral. \"\n       \"Leagues contain teams if they are present.\"\n    args_schema: Type[LeaguesInput] = LeaguesInput\n    return_direct: bool = False\n\n   def _run(\n       self, league_name: Optional[str] = None,\n       run_manager: Optional[CallbackManagerForToolRun] = None\n   ) -> List[League]:\n        \"\"\"Use the tool to get a list of leagues from SportsWorldCentral.\"\"\"\n        # Call the API with league_name, which could be None\n        list_leagues_response = local_swc_client.list_leagues(\n                                league_name=league_name)\n        return list_leagues_response\n```", "```py\nclass TeamsInput(BaseModel): ![1](assets/1.png)\n   team_name: Optional[str] = Field(\n        default=None,\n        description=\"Name of the team to search for. \n        Leave blank or None to get all teams.\")\n   league_id: Optional[int] = Field(\n        default=None,\n        description=(\n             \"League ID from a league. You must provide a numerical League ID. \"\n             \"Leave blank or None to get teams from all leagues.\"\n             ))\n\nclass ListTeamsTool(BaseTool): ![2](assets/2.png)\n   name: str = \"ListTeams\"\n   description: str = (\n        \"Get a list of teams from SportsWorldCentral. Teams contain players \"\n        \"if they are present. Optionally provide a numerical League ID to \"\n        \"filter teams from a specific league.\")\n   args_schema: Type[TeamsInput] = TeamsInput\n   return_direct: bool = False\n\n   def _run(\n       self, team_name: Optional[str] = None,\n       league_id: Optional[int] = None,\n       run_manager: Optional[CallbackManagerForToolRun] = None\n   ) -> List[Team]:\n       \"\"\"Use the tool to get a list of teams from SportsWorldCentral.\"\"\"\n       list_teams_response = local_swc_client.list_teams(\n            team_name=team_name, league_id= league_id)\n       return list_teams_response\n\nclass SportsWorldCentralToolkit(BaseToolkit): ![3](assets/3.png)\n    def get_tools(self) -> List[BaseTool]: ![4](assets/4.png)\n        \"\"\"Return the list of tools in the toolkit.\"\"\"\n        return [HealthCheckTool(), ListLeaguesTool(), ListTeamsTool()] ![5](assets/5.png)\n```", "```py\n.../chapter14 (main) $ cp langgraph_notebook.ipynb \\\nlanggraph_notebook_with_toolkit.ipynb\n```", "```py\n# LangGraph Agent\n## _With_ tools\n```", "```py\nfrom swc_toolkit import SportsWorldCentralToolkit ![1](assets/1.png)\nfrom langchain_core.tools import tool ![2](assets/2.png)\nfrom langgraph.prebuilt import ToolNode ![3](assets/3.png)\nfrom typing import Literal\n```", "```py\n## Create toolkit\n```", "```py\nswc_toolkit = SportsWorldCentralToolkit()\ntools = swc_toolkit.get_tools()\n```", "```py\ntool_node = ToolNode(tools)\n\nmodel = ChatAnthropic(model=\"claude-3-5-sonnet-20240620\",\n                     temperature=0).bind_tools(tools) ![1](assets/1.png)\n\ndef should_continue(state: MessagesState) -> Literal[\"tools\", END]: ![2](assets/2.png)\n    messages = state['messages']\n    last_message = messages[-1]\n    if last_message.tool_calls:\n        return \"tools\"\n    return END\n\ndef call_model(state: MessagesState):\n    messages = state['messages']\n    response = model.invoke(messages)\n    return {\"messages\": [response]}\n\nworkflow = StateGraph(MessagesState)\n\nworkflow.add_node(\"agent\", call_model)\nworkflow.add_node(\"tools\", tool_node) ![3](assets/3.png)\n\nworkflow.add_edge(START, \"agent\")\n\nworkflow.add_conditional_edges( ![4](assets/4.png)\n    \"agent\",\n    should_continue,\n)\n\nworkflow.add_edge(\"tools\", 'agent')\n\ncheckpointer = MemorySaver()\n\napp = workflow.compile(checkpointer=checkpointer)\n```", "```py\nfinal_state = app.invoke(\n    {\"messages\": [HumanMessage(content=\"What are the leagues in the\n    SportsWorldCentral fantasy football platform? Keep the response simple.\")]},\n    config={\"configurable\": {\"thread_id\": 99}}\n)\ndisplay(Markdown(final_state[\"messages\"][-1].content))\n```", "```py\nHere's a simple list of the leagues in the SportsWorldCentral fantasy\nfootball platform:\n\n1\\. Pigskin Prodigal Fantasy League\n2\\. Recurring Champions League\n3\\. AHAHFZZFFFL\n4\\. Gridiron Gurus Fantasy League\n5\\. Best League Ever\n\nThese are the five leagues currently available in the platform.\n```", "```py\nINFO: 0.0.0.0:8000 - \"GET /v0/leagues/?skip=0&limit=100 HTTP/1.1\" 200 OK\n```"]