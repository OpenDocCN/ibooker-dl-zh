<html><head></head><body>
  <h1 class="tochead" id="heading_id_2">3 <a id="idTextAnchor000"/><a id="idTextAnchor001"/><a id="idTextAnchor002"/><a id="idTextAnchor003"/><a id="idTextAnchor004"/><a id="idTextAnchor005"/>Designing software with ChatGPT</h1>

  <p class="co-summary-head">This chapter covers<a id="idIndexMarker000"/><a id="marker-31"/></p>

  <ul class="calibre5">
    <li class="co-summary-bullet">Prototyping potential designs with ChatGPT</li>

    <li class="co-summary-bullet">Documenting our architecture in Mermaid</li>

    <li class="co-summary-bullet">Completing our design with ChatGPT</li>
  </ul>

  <p class="body">Now that we have an intuition about when and how to use Generative AI, we will start to design, explore, and document our application’s architecture. Laying out some of the critical components upfront is beneficial in several ways. For example, it allows us to delegate some of the design to sub-architects or some of the development to other team members. Designing up front will also help us clarify our thinking about the implementation, allowing us to anticipate and avoid some pitfalls. Finally, capturing the design as documentation enables us to justify our crucial design decisions, communicating our intent to our future selves, our stakeholders, and those who may inherit the project.</p>

  <p class="body">First, let’s get an overview of the application that we will be designing in this chapter: the <i class="fm-italics">information technology asset management</i> (ITAM) system. We’ll build out key features in subsequent chapters.<a id="idIndexMarker001"/><a id="idIndexMarker002"/></p>

  <h2 class="fm-head" id="heading_id_3">3.1 Introducing our project, the information technology asset management system</h2>

  <p class="body">An ITAM system is a tool to manage and track hardware devices, software licenses, and other IT-related components throughout their lifecycle. ITAM systems typically consist of hardware and software inventory tools, license management software, and other related software applications. The system may also involve manual processes and physical tracking of IT assets using QR codes, barcodes, or other physical asset management technologies. <a id="idIndexMarker003"/><a id="marker-32"/></p>

  <p class="body">Generally, ITAM systems will have a centralized database, which stores the asset identifiers and attributes specific to the asset type. For example, you might store the device type, model number, operating system, and installed applications for desktop PCs. For software, you might store the application’s name, the vendor, the number of licenses available, and the computers on which the software has been installed. The latter ensures that your organization complies with all licensing restrictions. By monitoring usage, you should never exceed the number of licenses you have purchased.</p>

  <p class="body">ITAM systems also confer the ability to control costs. Because you always know what software and hardware you have available, you should not have to make any unnecessary purchases. These systems centralize purchases, which can help with volume purchasing. Unused hardware can be sold; the workloads of underutilized hardware can be consolidated. Additionally, as you will see, you can use purchase date information to calculate the depreciation value of hardware, applying this value against your organization’s taxes.</p>

  <p class="body">We will explore more of the features of an ITAM system, building a solid conceptual model of the application with a focus on a system that can track and manage hardware. Next, let’s ask ChatGPT to assume the software architect persona, solicit its opinion about how best to design this project, and see what solution it can come up with.</p>

  <h2 class="fm-head" id="heading_id_4">3.2 Asking ChatGPT to help with our system design</h2>

  <p class="body">In a new session, we will begin with a prompt outlining our requirements. As with the previous chapter, we will apply the Refinement Pattern to our prompts to iteratively change the design of our system. We will begin broadly, drilling into the requirements and functionality as we progress. To start, we will have ChatGPT improve our prompts by using this prompt: <a id="idIndexMarker004"/></p>

  <table border="0" class="contenttable-0-table" width="100%">
    <colgroup class="contenttable-0-colgroup">
      <col class="contenttable-0-col" span="1" width="7%"/>
      <col class="contenttable-0-col" span="1" width="93%"/>
    </colgroup>

    <tbody class="calibre7">
      <tr class="contenttable-0-tr">
        <td class="contenttable-0-td">
          <div class="figure2">
            <p class="figure1"><img alt="" class="calibre8" src="../Images/logo-NC.png"/></p>
          </div>
        </td>

        <td class="contenttable-0-td">
          <p class="fm-table-bodyt">From now on, when I give you a prompt, output a better prompt.</p>
        </td>
      </tr>
    </tbody>
  </table>

  <p class="body">This prompt is useful when you begin to explore your current task at hand because it instructs ChatGPT to create better prompts for you. As you know, the better the prompt, the better the output. This will be our heuristic moving forward: when you need a specific answer, you ask a specific question. Additionally, and alternatively, you can request that ChatGPT reason through the problem step by step, specifying its rationale as it goes.<a id="marker-33"/></p>

  <p class="body">Next, we will ask ChatGPT to begin to assist us in the design, using this (extended) prompt:</p>

  <table border="0" class="contenttable-0-table" width="100%">
    <colgroup class="contenttable-0-colgroup">
      <col class="contenttable-0-col" span="1" width="7%"/>
      <col class="contenttable-0-col" span="1" width="93%"/>
    </colgroup>

    <tbody class="calibre7">
      <tr class="contenttable-0-tr">
        <td class="contenttable-0-td">
          <div class="figure2">
            <p class="figure1"><img alt="" class="calibre8" src="../Images/logo-NC.png"/></p>
          </div>
        </td>

        <td class="contenttable-0-td">
          <p class="fm-table-bodyt">Assume that you are a software architect, and you are designing an information technology asset management system, using Python. The system should be able to maintain a complete inventory of all hardware and software assets owned by an organization. The system should be able to track asset location, status, and usage. This includes information such as who uses the asset, when it was last serviced, and when it is due for replacement. The system should be able to manage the entire lifecycle of an asset, from procurement to disposal. This includes tracking warranty and lease information, managing asset maintenance and repair, and ensuring compliance with regulations. The system should be able to allocate assets to employees or departments, track usage, and manage reservations for assets that are in high demand. It should use hexagonal architecture. Remember to enhance my prompt.</p>
        </td>
      </tr>
    </tbody>
  </table>

  <p class="body">Note that in this prompt, we return to the Persona Pattern, asking ChatGPT to assume the role of a software architect. ChatGPT will output not only the high-level functionality of our system but also how we can improve our initial prompt. If we plug in this prompt, we get the results shown in the following listing. One important reminder: the output from ChatGPT (and any generative AI) is very dependent on what came before, so your output will likely not match the following output exactly.</p>

  <p class="fm-code-listing-caption">Listing 3.1 Enhanced prompt and overview of application as described by ChatGPT</p>
  <pre class="programlisting">To enhance and detail your prompt for designing an information technology asset management system using Python with a hexagonal architecture, here's a more comprehensive breakdown:
  
System Objective and Core Functionality:
Design a Python-based IT asset management system.
Ensure the system maintains a full inventory of all organizational hardware and software assets.
 
Detailed Asset Tracking:
Implement features for tracking the location, status, and usage of each asset.
Include detailed logs for user assignments, service histories, and replacement schedules.
 
Lifecycle Management:
Enable management of assets from procurement to disposal.
Track warranty and lease information, schedule maintenance and repairs, and ensure regulatory compliance.
 
Asset Allocation and Usage Monitoring:
Facilitate asset allocation to employees or departments.
Monitor usage patterns and manage reservations for high-demand assets.
 
Architectural Approach:
Adopt a hexagonal architecture to promote loose coupling and ease of maintenance.
Ensure modularity in design for easy scalability and updates.
  
Additional Features and Considerations:
Incorporate user-friendly interfaces for different stakeholders.
Implement robust security measures to protect sensitive asset data.
Consider integration capabilities with existing systems within the organization.
  
This detailed breakdown provides a comprehensive guide for designing the system with all necessary features and a robust architectural framework.</pre>

  <p class="body"><a id="marker-34"/>After some deliberation, ChatGPT will return the high-level steps for what needs to be done to develop this project. These suggestions are helpful, but we are here to get past the empty file problem: we want to start designing. We want prose and diagrams to help us understand the system at the component level. We need tasks, not a recipe. We can ask ChatGPT to show its work with this prompt:</p>

  <table border="0" class="contenttable-0-table" width="100%">
    <colgroup class="contenttable-0-colgroup">
      <col class="contenttable-0-col" span="1" width="7%"/>
      <col class="contenttable-0-col" span="1" width="93%"/>
    </colgroup>

    <tbody class="calibre7">
      <tr class="contenttable-0-tr">
        <td class="contenttable-0-td">
          <div class="figure2">
            <p class="figure1"><img alt="" class="calibre8" src="../Images/logo-NC.png"/></p>
          </div>
        </td>

        <td class="contenttable-0-td">
          <p class="fm-table-bodyt">Show the Python package structure for this application.</p>
        </td>
      </tr>
    </tbody>
  </table>

  <p class="body">At this prompt, ChatGPT will generate and return a package diagram (this listing is slightly abridged), demonstrating that not only can it design software, but it can also aid in the layout of our physical files. We might (or might not) quibble as to the overall package structure, but this will provide us with more than enough inspiration to get going.</p>

  <p class="fm-code-listing-caption">Listing 3.2 Package structure for the asset management system ChatGPT created</p>
  <pre class="programlisting">it_asset_management/
│
├── app/                       # Main application directory
│   ├── __init__.py
│   ├── main.py                # Entry point of the application
│   ├── config.py              # Configuration settings
│   └── dependencies.py        # Dependency injection and management
│
├── domain/                    # Domain layer with business logic
│   ├── __init__.py
│   ├── models/                # Domain models (e.g., Asset, User)
│   │   ├── __init__.py
│   │   ├── asset.py
│   │   └── user.py
│   ├── services/              # Business services/logic
│   │   ├── __init__.py
│   │   ├── asset_service.py
│   │   └── user_service.py
│   └── repositories/          # Interface for data access
│       ├── __init__.py
│       ├── asset_repository.py
│       └── user_repository.py
│
├── adapters/                  # Adapter layer for external interactions
│   ├── __init__.py
│   ├── orm/                   # Object-relational mapping
│   │   ├── __init__.py
│   │   ├── asset_orm.py
│   │   └── user_orm.py
│   ├── api/                   # API endpoints
│   │   ├── __init__.py
│   │   ├── asset_api.py
│   │   └── user_api.py
│   └── external_services/     # Integration with external services
│       ├── __init__.py
│       ├── email_service.py
│       └── logging_service.py
│
├── infrastructure/            # Infrastructure layer for database, messaging, etc.
│   ├── __init__.py
│   ├── database.py            # Database setup and connection
│   ├── message_queue.py       # Messaging infrastructure
│   └── cache.py               # Caching mechanisms
│
├── tests/                     # Test suite
│   ├── __init__.py
│   ├── unit/                  # Unit tests
│   └── integration/           # Integration tests
│
└── requirements.txt           # Project dependencies</pre>

  <p class="body">We can examine the <i class="fm-italics">macro</i>, and we can ask ChatGPT to provide us with the <i class="fm-italics">micro</i> as well. We can create prompts to have ChatGPT show us the contents of every file in sequence, and we can dutifully copy the contents to a file with the same name as the one suggested by ChatGPT. But we should always double-check ChatGPT’s work and never assume that it is 100% safe or accurate. You will occasionally find that ChatGPT produces code that doesn’t work—ChatGPT is focused on generating the next token rather than thinking of systems as we do. That being said, we should take a quick look at the code it generated, to assess its quality and determine its usefulness: <a id="idIndexMarker005"/><a id="idIndexMarker006"/><a id="marker-35"/></p>

  <table border="0" class="contenttable-0-table" width="100%">
    <colgroup class="contenttable-0-colgroup">
      <col class="contenttable-0-col" span="1" width="7%"/>
      <col class="contenttable-0-col" span="1" width="93%"/>
    </colgroup>

    <tbody class="calibre7">
      <tr class="contenttable-0-tr">
        <td class="contenttable-0-td">
          <div class="figure2">
            <p class="figure1"><img alt="" class="calibre8" src="../Images/logo-NC.png"/></p>
          </div>
        </td>

        <td class="contenttable-0-td">
          <p class="fm-table-bodyt">Please show the source code for it_asset_management/app/schemas/asset.py.<b class="fm-bold"><a id="idIndexMarker007"/></b></p>
        </td>
      </tr>
    </tbody>
  </table>

  <p class="body">The following listing shows the result.</p>

  <p class="fm-code-listing-caption">Listing 3.3 Example <code class="fm-code-in-text">Asset</code> model in asset_management_system/models/asset.py<a id="idIndexMarker008"/><a id="idIndexMarker009"/></p>
  <pre class="programlisting">from typing import Optional
from datetime import datetime
from pydantic import BaseModel
  
# Basic Asset model used for creating a new asset
class AssetCreate(BaseModel):
    name: str
    asset_type: str
    serial_number: str
    purchase_date: Optional[datetime] = None
    warranty_end_date: Optional[datetime] = None
  
# Model for asset data that is publicly exposed
class Asset(BaseModel):
    id: int
    name: str
    asset_type: str
    serial_number: str
    purchase_date: Optional[datetime] = None
    warranty_end_date: Optional[datetime] = None
  
    class Config:
        orm_mode = True
  
# Model for updating existing asset data
class AssetUpdate(BaseModel):
    name: Optional[str] = None
    asset_type: Optional[str] = None
    serial_number: Optional[str] = None
    purchase_date: Optional[datetime] = None
    warranty_end_date: Optional[datetime] = None        
return '&lt;Asset %r&gt;' % self.name</pre>

  <p class="body">Rather than going class by class and skimming the source code for each one, we will document the overall project. Although Agile and Scrum emphasize working software over comprehensive documentation, the role of thoughtful design and essential documentation cannot be overstated. They bring structure, clarity, and long-term vision to the Agile development process, ensuring that the team can respond to changes effectively while maintaining the integrity and quality of the software. <a id="idIndexMarker010"/><a id="marker-36"/></p>

  <h2 class="fm-head" id="heading_id_5">3.3 Documenting your architecture</h2>

  <p class="body">In this section, we will have ChatGPT begin to document the design of our application. As previously stated, application design and documentation are crucial for a software architect and a software project, even in Agile and Scrum environments. Documentation provides a clear vision and direction for the development team, outlining the architecture, components, and interactions within the system helping developers understand how to implement features correctly and efficiently. It encourages adherence to quality standards and best practices, allowing architects to define patterns and practices that should be followed throughout the development process and leading to a more robust and maintainable codebase. <a id="idIndexMarker011"/><a id="idIndexMarker012"/></p>

  <p class="body">In this section we will use the Mermaid diagramming language. Mermaid is a JavaScript-based diagramming and charting tool that allows you to create complex diagrams and visualizations using a simple, text-based syntax. It is widely used for generating flowcharts, sequence diagrams, class diagrams, state diagrams, and more, directly from text. Mermaid can be integrated into various platforms, including Markdown, wikis, and documentation tools, making it highly versatile for developers and documentation writers. Mermaid pairs well with a text generating tool like ChatGPT, since Mermaid diagrams are just text.<a id="idIndexMarker013"/></p>

  <p class="body">We will have ChatGPT begin to document by using the following prompt:</p>

  <table border="0" class="contenttable-0-table" width="100%">
    <colgroup class="contenttable-0-colgroup">
      <col class="contenttable-0-col" span="1" width="7%"/>
      <col class="contenttable-0-col" span="1" width="93%"/>
    </colgroup>

    <tbody class="calibre7">
      <tr class="contenttable-0-tr">
        <td class="contenttable-0-td">
          <div class="figure2">
            <p class="figure1"><img alt="" class="calibre8" src="../Images/logo-NC.png"/></p>
          </div>
        </td>

        <td class="contenttable-0-td">
          <p class="fm-table-bodyt">I would like to build an ITAM project written in Python. It will focus on the tracking and management of Hardware. It should expose REST APIs, using FastAPI, and persist data using SQLAlchemy. It should use hexagonal architecture. As a software architect, please show me the Mermaid class diagram for this project."</p>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="fm-sidebar-block">
    <p class="fm-sidebar-title">Hexagonal architecture</p>

    <p class="fm-sidebar-text">Hexagonal architecture, also known as the Ports and Adapters Pattern, is an architectural pattern that aims to create a clear separation between an application’s core logic and its interaction with external systems, such as databases, user interfaces, and third-party services. This separation of concerns helps to achieve a more maintainable, flexible, and testable application.<a id="idIndexMarker014"/><a id="marker-37"/></p>

    <p class="fm-sidebar-text">The main components of hexagonal architecture are as follows:</p>

    <ul class="calibre5">
      <li class="fm-list-bullet1">
        <p class="list-s"><i class="fm-italics">Domain model</i>—The core business logic of the application, including entities, value objects, and domain services. The domain model is isolated from any external systems or technologies and should not depend on any implementation-specific details like databases or APIs.<a id="idIndexMarker015"/></p>
      </li>

      <li class="fm-list-bullet1">
        <p class="list-s"><i class="fm-italics">Ports</i>—Interfaces that define the contract between the domain model and the external systems. They represent the input and output boundaries of the application. There are two types of ports: primary and secondary.<a id="idIndexMarker016"/></p>

        <ul class="calibre6">
          <li class="fm-list-bullet1">
            <p class="list-s"><i class="fm-italics">Primary (driven) ports</i>—Define the use cases that the application exposes to the external systems. They represent the API that external systems can use to interact with the application.<a id="idIndexMarker017"/></p>
          </li>

          <li class="fm-list-bullet1">
            <p class="list-s"><i class="fm-italics">Secondary (driving) ports</i>—Define the contracts that the application expects from external systems, like data repositories or external services.<a id="idIndexMarker018"/></p>
          </li>
        </ul>
      </li>

      <li class="fm-list-bullet1">
        <p class="list-s"><i class="fm-italics">Adapters</i>—The implementations of the ports. Adapters handle communication between the domain model and the external systems, converting the data and protocols used by external systems into a format the domain model can understand. There are two types of adapters: primary and secondary.<a id="idIndexMarker019"/></p>

        <ul class="calibre6">
          <li class="fm-list-bullet1">
            <p class="list-s"><i class="fm-italics">Primary (driven) adapters</i>—Implement the primary ports and are responsible for receiving input from external systems and passing it to the domain model. <a id="idIndexMarker020"/></p>
          </li>

          <li class="fm-list-bullet1">
            <p class="list-s"><i class="fm-italics">Secondary (driving) adapters</i>—Implement the secondary ports and are responsible for interacting with external systems on behalf of the domain model. <a id="idIndexMarker021"/></p>
          </li>
        </ul>
      </li>
    </ul>

    <p class="fm-sidebar-text">In hexagonal architecture, the domain model is at the center (the “hexagon”), surrounded by the ports and adapters. The key idea is that any interaction between the domain model and external systems must pass through the ports and adapters. This architecture allows for easy swapping of external systems, simplified testing by using mock implementations of ports, and clear separation of concerns, promoting a more maintainable application.</p>
  </div>

  <p class="body">In response, ChatGPT creates the peculiar class structure shown in figure 3.1. First, there is a <code class="fm-code-in-text">MainApp</code> class that will (presumably) run the application. This class uses <code class="fm-code-in-text">FastAPIAdapter</code>, which accepts and handles REST calls. <code class="fm-code-in-text">FastAPIAdapter</code> will invoke the methods of the <code class="fm-code-in-text">HardwareService</code>. <a id="idIndexMarker022"/><a id="idIndexMarker023"/><a id="idIndexMarker024"/></p>

  <div class="figure">
    <p class="figure1"><img alt="" class="calibre4" src="../Images/CH03_F01_Crocker2.png"/></p>

    <p class="figurecaption">Figure 3.1 The design for the ITAM system suggested by ChatGPT</p>
  </div>

  <p class="body"><a id="marker-38"/>We can attempt to ask ChatGPT why it returned this design. Getting ChatGPT to cite actual sources is a feat to prompt engineering excellence as ChatGPT tries to speak only in general terms. However, let’s see if we can get it to be specific using the following prompt:</p>

  <table border="0" class="contenttable-0-table" width="100%">
    <colgroup class="contenttable-0-colgroup">
      <col class="contenttable-0-col" span="1" width="7%"/>
      <col class="contenttable-0-col" span="1" width="93%"/>
    </colgroup>

    <tbody class="calibre7">
      <tr class="contenttable-0-tr">
        <td class="contenttable-0-td">
          <div class="figure2">
            <p class="figure1"><img alt="" class="calibre8" src="../Images/logo-NC.png"/></p>
          </div>
        </td>

        <td class="contenttable-0-td">
          <p class="fm-table-bodyt">Please provide the sources of this specific design.</p>
        </td>
      </tr>
    </tbody>
  </table>

  <p class="body">ChatGPT’s response to this prompt is very general (see figure 3.2). It cites best practices and the origins of hexagonal architecture. However, it does not tell us specifics about the design choices.</p>

  <div class="figure">
    <p class="figure1"><img alt="" class="calibre4" src="../Images/CH03_F02_Crocker2.png"/></p>

    <p class="figurecaption">Figure 3.2 ChatGPT’s rationale for the proposed design. Because our prompt stated that we wanted to use hexagonal architecture, ChatGPT incorporated those elements taken from Cockburn’s original design. Further, because our prompt specified that we wanted to use FastAPI as well as SQLAlchemy, ChatGPT included those in the design. Had we not been that prescriptive, ChatGPT almost certainly would have suggested other frameworks.</p>
  </div>

  <p class="body"><a id="marker-39"/>Next, we will ask it for the package structure of this project. We do so with the following prompt:</p>

  <table border="0" class="contenttable-0-table" width="100%">
    <colgroup class="contenttable-0-colgroup">
      <col class="contenttable-0-col" span="1" width="7%"/>
      <col class="contenttable-0-col" span="1" width="93%"/>
    </colgroup>

    <tbody class="calibre7">
      <tr class="contenttable-0-tr">
        <td class="contenttable-0-td">
          <div class="figure2">
            <p class="figure1"><img alt="" class="calibre8" src="../Images/logo-NC.png"/></p>
          </div>
        </td>

        <td class="contenttable-0-td">
          <p class="fm-table-bodyt">What does the package structure look like for this project?</p>
        </td>
      </tr>
    </tbody>
  </table>

  <p class="body">ChatGPT will print something like the following package structure.</p>

  <p class="fm-code-listing-caption">Listing 3.4 ChatGPT’s proposed project structure</p>
  <pre class="programlisting">itam_project/
|-- app/
|   |-- __init__.py
|   |-- main.py
|   |-- adapters/
|   |   |-- __init__.py
|   |   |-- fastapi_adapter.py
|   |   |-- sqlalchemy_adapter.py
|   |-- domain/
|   |   |-- __init__.py
|   |   |-- hardware.py
|   |   |-- hardware_service.py
|   |-- infrastructure/
|   |   |-- __init__.py
|   |   |-- config.py
|   |   |-- database.py
|-- tests/
|   |-- __init__.py
|   |-- test_fastapi_adapter.py
|   |-- test_hardware_service.py
|   |-- test_sqlalchemy_adapter.py
|-- requirements.txt
|-- .gitignore
|-- README.md</pre>

  <p class="body">We can ask ChatGPT to show us the code in each file. However, before we do that, we want to finish our design. Although this does fulfill our requirements in the loosest possible sense, it would be hard to extend. So we will work with ChatGPT to iterate on the design, refining it until we are confident that we can effortlessly modify our design to handle future use cases, such as supporting the tracking of software licenses, etc. Although we could (and should!) occasionally ask ChatGPT to suggest better ways for us to do things, in this case we will tell it to add a parent class called <code class="fm-code-in-text">Asset</code> to the <code class="fm-code-in-text">Hardware</code> class: <a id="idIndexMarker025"/><a id="idIndexMarker026"/><a id="marker-40"/></p>

  <table border="0" class="contenttable-0-table" width="100%">
    <colgroup class="contenttable-0-colgroup">
      <col class="contenttable-0-col" span="1" width="7%"/>
      <col class="contenttable-0-col" span="1" width="93%"/>
    </colgroup>

    <tbody class="calibre7">
      <tr class="contenttable-0-tr">
        <td class="contenttable-0-td">
          <div class="figure2">
            <p class="figure1"><img alt="" class="calibre8" src="../Images/logo-NC.png"/></p>
          </div>
        </td>

        <td class="contenttable-0-td">
          <p class="fm-table-bodyt">Add a class called Asset to this design. It is the parent class of Hardware. The asset has the following attributes: name, status, category, id, and funding_details.</p>
        </td>
      </tr>
    </tbody>
  </table>

  <p class="body">Introducing the <code class="fm-code-in-text">Asset</code> base class allows us to set attributes that will be shared across the organization’s assets. The design is (nearly) SOLID (see the following sidebar). The updated class model is shown in figure 3.3.<a id="idIndexMarker027"/></p>

  <div class="figure">
    <p class="figure1"><img alt="" class="calibre4" src="../Images/CH03_F03_Crocker2.png"/></p>

    <p class="figurecaption">Figure 3.3 The updated class diagram with the <code class="fm-code-in-text">Asset</code> to <code class="fm-code-in-text">Hardware</code> relationship defined.<a id="idIndexMarker028"/><a id="idIndexMarker029"/></p>
  </div>

  <p class="body">The <code class="fm-code-in-text">Asset</code> class will make it easier to extend our model, should we want to add <code class="fm-code-in-text">Software</code> or a <code class="fm-code-in-text">Pitchfork</code> class, for example. We would expect these new subclasses would behave, from the perspective of an asset owned by the company, exactly like the other class that inherits from <code class="fm-code-in-text">Asset</code>. <a id="idIndexMarker030"/><a id="idIndexMarker031"/><a id="idIndexMarker032"/></p>

  <div class="fm-sidebar-block">
    <p class="fm-sidebar-title">SOLID design</p>

    <p class="fm-sidebar-text">SOLID stands for five software development design principles intended to make software designs more flexible and maintainable: <a id="idIndexMarker033"/><a id="marker-41"/></p>

    <ul class="calibre5">
      <li class="fm-list-bullet1">
        <p class="list-s">S: Single responsibility principle (SRP)<a id="idIndexMarker034"/></p>
      </li>

      <li class="fm-list-bullet1">
        <p class="list-s">O: Open/Closed principle (OCP)<a id="idIndexMarker035"/></p>
      </li>

      <li class="fm-list-bullet1">
        <p class="list-s">L: Liskov substitution principle (LSP)<a id="idIndexMarker036"/></p>
      </li>

      <li class="fm-list-bullet1">
        <p class="list-s">I: Interface segregation principle (ISP)<a id="idIndexMarker037"/></p>
      </li>

      <li class="fm-list-bullet1">
        <p class="list-s">D: Dependency inversion principle (DIP)<a id="idIndexMarker038"/></p>
      </li>
    </ul>

    <p class="fm-sidebar-text">Here is a brief overview of each of these principles:</p>

    <ul class="calibre5">
      <li class="fm-list-bullet1">
        <p class="list-s">SRP states that a class should have only one reason to change. A class should have only one job, and it should do it well.</p>
      </li>

      <li class="fm-list-bullet1">
        <p class="list-s">OCP states that software entities (classes, modules, functions, etc.) should be open for extension but closed for modification.</p>
      </li>

      <li class="fm-list-bullet1">
        <p class="list-s">LSP states that objects of a superclass should be replaceable with objects of a subclass without affecting the correctness of the program. What works with a superclass should also work with its subclasses.</p>
      </li>

      <li class="fm-list-bullet1">
        <p class="list-s">ISP states that a client should not be forced to depend on methods it does not use. It’s better to have small interfaces than big ones.</p>
      </li>

      <li class="fm-list-bullet1">
        <p class="list-s">DIP states that high-level modules should not depend on low-level modules. You should program to interfaces, not implementations.</p>
      </li>
    </ul>
  </div>

  <p class="body">Next we will update the <code class="fm-code-in-text">funding_details</code> attribute of the <code class="fm-code-in-text">Asset</code> class to be a class of its own rather than just a string. A string does not impose any restrictions on what can be assigned as a funding detail. Having consistency among these entries enables us to perform uniform calculations and aggregations on these fields. Here is the prompt:<a id="idIndexMarker039"/><a id="idIndexMarker040"/></p>

  <table border="0" class="contenttable-0-table" width="100%">
    <colgroup class="contenttable-0-colgroup">
      <col class="contenttable-0-col" span="1" width="7%"/>
      <col class="contenttable-0-col" span="1" width="93%"/>
    </colgroup>

    <tbody class="calibre7">
      <tr class="contenttable-0-tr">
        <td class="contenttable-0-td">
          <div class="figure2">
            <p class="figure1"><img alt="" class="calibre8" src="../Images/logo-NC.png"/></p>
          </div>
        </td>

        <td class="contenttable-0-td">
          <p class="fm-table-bodyt">Change the funding_details attribute in the Asset class from a string to a class. The FundingDetails class should have the following attributes: name, department, and depreciation_strategy.</p>
        </td>
      </tr>
    </tbody>
  </table>

  <p class="body">ChatGPT will spit out a new Mermaid document, adding the new class and documenting the new relationship (see figure 3.4). <a id="idIndexMarker041"/></p>

  <div class="figure">
    <p class="figure1"><img alt="" class="calibre4" src="../Images/CH03_F04_Crocker2.png"/></p>

    <p class="figurecaption">Figure 3.4 The updated class diagram with the new class <code class="fm-code-in-text">FundingDetails</code></p>
  </div>

  <p class="body">Now we will update the <code class="fm-code-in-text">FundingDetails</code> class to delegate the calculation of depreciation to a depreciation strategy. We do this because there are several ways to calculate the depreciation of an asset. <a id="idIndexMarker042"/></p>

  <p class="fm-callout"><span class="fm-callout-head">Definition</span> <i class="fm-italics">Depreciation</i> is a term used to describe the decrease in the value of an asset over time for various reasons. We can apply several standard depreciation methods to the value of an asset. Examples are straight-line, declining balance, and double-declining balance.<a id="idIndexMarker043"/></p>

  <p class="body">We will create a prompt to have ChatGPT introduce the concept of depreciation into our object model:</p>

  <table border="0" class="contenttable-0-table" width="100%">
    <colgroup class="contenttable-0-colgroup">
      <col class="contenttable-0-col" span="1" width="7%"/>
      <col class="contenttable-0-col" span="1" width="93%"/>
    </colgroup>

    <tbody class="calibre7">
      <tr class="contenttable-0-tr">
        <td class="contenttable-0-td">
          <div class="figure2">
            <p class="figure1"><img alt="" class="calibre8" src="../Images/logo-NC.png"/></p>
          </div>
        </td>

        <td class="contenttable-0-td">
          <p class="fm-table-bodyt">Create an interface called DepreciationStrategy. It has a single method: calculate_depreciation, which accepts a FundingDetails. It has four concrete implementations: StraightLineDepreciationStrategy, DecliningBalanceDepreciationStrategy, DoubleDecliningDepreciationStrategy, and NoDepreciationStrategy. Update the Asset class to take a DepreciationStrategy.<a id="idIndexMarker044"/><a id="idIndexMarker045"/><a id="idIndexMarker046"/><a id="idIndexMarker047"/><a id="idIndexMarker048"/><a id="idIndexMarker049"/><a id="marker-42"/></p>
        </td>
      </tr>
    </tbody>
  </table>

  <p class="body">By delegating the calculation of the depreciation of our <code class="fm-code-in-text">Asset</code> class to <code class="fm-code-in-text">DepreciationStrategy</code>, we can swap out depreciation methods easily. The resulting Mermaid diagram in figure 3.5 shows that we have introduced DIP into our design.<a id="idIndexMarker050"/></p>

  <div class="figure">
    <p class="figure1"><img alt="" class="calibre4" src="../Images/CH03_F05_Crocker2.png"/></p>

    <p class="figurecaption">Figure 3.5 We have added a depreciation strategy to our object model. This introduction allows us to swap out the method by which we can calculate the depreciation of an asset.</p>
  </div>

  <p class="body">It’s a common practice for businesses to have more than one business line, denoted by the department in our class diagram. Suppose we want to support more than one line of business for <code class="fm-code-in-text">Asset</code>. We will ask ChatGPT to add this to our model: <a id="idIndexMarker051"/></p>

  <table border="0" class="contenttable-0-table" width="100%">
    <colgroup class="contenttable-0-colgroup">
      <col class="contenttable-0-col" span="1" width="7%"/>
      <col class="contenttable-0-col" span="1" width="93%"/>
    </colgroup>

    <tbody class="calibre7">
      <tr class="contenttable-0-tr">
        <td class="contenttable-0-td">
          <div class="figure2">
            <p class="figure1"><img alt="" class="calibre8" src="../Images/logo-NC.png"/></p>
          </div>
        </td>

        <td class="contenttable-0-td">
          <p class="fm-table-bodyt">The FundingDetails class should support more than one line of business (currently modeled as a department). Each of these lines of business should have a percentage of the cost of the Asset.</p>
        </td>
      </tr>
    </tbody>
  </table>

  <p class="body">ChatGPT suggests adding a dictionary to the <code class="fm-code-in-text">FundingDetails</code> class to support this feature. ChatGPT adds a new attribute called <code class="fm-code-in-text">lines_of_business</code> to <code class="fm-code-in-text">FundingDetails</code> and prints a new Mermaid diagram. <a id="idIndexMarker052"/><a id="idIndexMarker053"/></p>

  <p class="body">We can anticipate that each of the lines of business will want to know its total share of the cost of all of the firm’s assets. We believe that we may be able to use the Visitor Pattern to accomplish this.</p>

  <div class="fm-sidebar-block">
    <p class="fm-sidebar-title">The Visitor Pattern</p>

    <p class="fm-sidebar-text">The Visitor Pattern is a behavioral design pattern that allows you to define a new operation on an object without changing the class on which the visitor operates. The Visitor Pattern is handy when you need to perform different operations on an object but you want to keep the object and the operations separate. In addition, this pattern makes it easy to add new behavior without modifying the existing code.<a id="idIndexMarker054"/><a id="marker-43"/></p>

    <p class="fm-sidebar-text">To implement the Visitor Pattern, you add the following components to your design:</p>

    <ul class="calibre5">
      <li class="fm-list-bullet1">
        <p class="list-s"><i class="fm-italics">Element</i>—An interface or abstract class that represents the elements of the object structure. It declares a method <code class="fm-code-in-text">accept</code> that takes a visitor object as an argument.<a id="idIndexMarker055"/><a id="idIndexMarker056"/></p>
      </li>

      <li class="fm-list-bullet1">
        <p class="list-s"><i class="fm-italics">Concrete element</i>—A class that implements the <code class="fm-code-in-text">Element</code> interface or extends the <code class="fm-code-in-text">Element</code> abstract class. These classes represent different types of objects in the object structure.<a id="idIndexMarker057"/><a id="idIndexMarker058"/><a id="idIndexMarker059"/></p>
      </li>

      <li class="fm-list-bullet1">
        <p class="list-s"><i class="fm-italics">Visitor</i>—An interface or abstract class that defines a <code class="fm-code-in-text">visit</code> method for each concrete element class. The <code class="fm-code-in-text">visit</code> methods represent the operations to be performed on the concrete elements.<a id="idIndexMarker060"/><a id="idIndexMarker061"/></p>
      </li>

      <li class="fm-list-bullet1">
        <p class="list-s"><i class="fm-italics">Concrete visitor</i>—A class that implements the visitor interface or extends the visitor abstract class. These classes implement the <code class="fm-code-in-text">visit</code> methods for each concrete element class, defining the algorithm for each element.<a id="idIndexMarker062"/></p>
      </li>
    </ul>

    <p class="fm-sidebar-text">To apply the Visitor Pattern, follow these steps:</p>

    <ol class="calibre9">
      <li class="fm-list-bullet1">
        <p class="list-s">Create the element interface (or abstract class) with an <code class="fm-code-in-text">accept</code> method that takes a visitor object as an argument.<a id="idIndexMarker063"/></p>
      </li>

      <li class="fm-list-bullet1">
        <p class="list-s">Implement the concrete element classes by extending the element interface (or abstract class) and implementing the <code class="fm-code-in-text">accept</code> method.<a id="idIndexMarker064"/></p>
      </li>

      <li class="fm-list-bullet1">
        <p class="list-s">Create the visitor interface (or abstract class) with each concrete element class’s <code class="fm-code-in-text">visit</code> method.<a id="idIndexMarker065"/></p>
      </li>

      <li class="fm-list-bullet1">
        <p class="list-s">Implement the concrete visitor classes by extending the visitor interface (or abstract class) and implementing the <code class="fm-code-in-text">visit</code> methods.<a id="idIndexMarker066"/></p>
      </li>
    </ol>

    <p class="fm-sidebar-text">To use the Visitor Pattern, create an instance of a concrete visitor and pass it to the <code class="fm-code-in-text">accept</code> method of the concrete elements in the object structure. The <code class="fm-code-in-text">accept</code> method then calls the corresponding <code class="fm-code-in-text">visit</code> method of the concrete visitor, executing the algorithm defined by the concrete visitor for that specific concrete element.<a id="idIndexMarker067"/></p>
  </div>

  <p class="body">Let’s see if we can get ChatGPT to opine on the suitability of the Visitor Pattern for this use case:</p>

  <table border="0" class="contenttable-0-table" width="100%">
    <colgroup class="contenttable-0-colgroup">
      <col class="contenttable-0-col" span="1" width="7%"/>
      <col class="contenttable-0-col" span="1" width="93%"/>
    </colgroup>

    <tbody class="calibre7">
      <tr class="contenttable-0-tr">
        <td class="contenttable-0-td">
          <div class="figure2">
            <p class="figure1"><img alt="" class="calibre8" src="../Images/logo-NC.png"/></p>
          </div>
        </td>

        <td class="contenttable-0-td">
          <p class="fm-table-bodyt">Additionally, I need a way to calculate the cost of all Assets of a a given line of business. Would you recommend the Visitor pattern?</p>
        </td>
      </tr>
    </tbody>
  </table>

  <p class="body">ChatGPT believes this is a suitable solution for calculating the aggregate cost of all assets for a given business line. Further, it suggests that we create an interface called <code class="fm-code-in-text">Visitor</code> with a method called <code class="fm-code-in-text">visit</code>, which can be used to calculate the total cost for a specific line of business. According to ChatGPT, we should modify the <code class="fm-code-in-text">Asset</code> class to add a method that accepts a <code class="fm-code-in-text">Visitor</code>. Finally, it suggests that we create a concrete visitor called <code class="fm-code-in-text">CostByLineOfBusinessVisitor</code> for “visiting” each of our assets. <a id="idIndexMarker068"/><a id="idIndexMarker069"/><a id="idIndexMarker070"/><a id="marker-44"/></p>

  <p class="body">Each line of business will likely want to know the total depreciation of all of its assets. Again, we can ask ChatGPT for its advice on the design:</p>

  <table border="0" class="contenttable-0-table" width="100%">
    <colgroup class="contenttable-0-colgroup">
      <col class="contenttable-0-col" span="1" width="7%"/>
      <col class="contenttable-0-col" span="1" width="93%"/>
    </colgroup>

    <tbody class="calibre7">
      <tr class="contenttable-0-tr">
        <td class="contenttable-0-td">
          <div class="figure2">
            <p class="figure1"><img alt="" class="calibre8" src="../Images/logo-NC.png"/></p>
          </div>
        </td>

        <td class="contenttable-0-td">
          <p class="fm-table-bodyt">I also need a way to calculate the total depreciation of all asset for a given business line.</p>
        </td>
      </tr>
    </tbody>
  </table>

  <p class="body">ChatGPT responds, suggesting that we extend the behavior of the concrete visitor <code class="fm-code-in-text">CostByLineOfBusinessVisitor</code>. We will add a new attribute called <code class="fm-code-in-text">total_depreciation</code> to <code class="fm-code-in-text">CostByLineOfBusinessVisitor</code>, which will be updated during each “visit.” We can then return this value after visiting all of our assets.<a id="idIndexMarker071"/></p>

  <p class="body">Finally, we can ask ChatGPT to round out our design. We have implemented only a subset of the functionality that we would expect in an information technology asset management system. So we’ll check what is missing and what we need to complete this project.</p>

  <p class="fm-callout"><span class="fm-callout-head">Note</span> As always, you should use your judgment rather than defer all design decisions to ChatGPT. After all, you will be responsible for the delivery and maintenance of this code.</p>

  <p class="body">Let’s make sure we did not miss anything important:</p>

  <table border="0" class="contenttable-0-table" width="100%">
    <colgroup class="contenttable-0-colgroup">
      <col class="contenttable-0-col" span="1" width="7%"/>
      <col class="contenttable-0-col" span="1" width="93%"/>
    </colgroup>

    <tbody class="calibre7">
      <tr class="contenttable-0-tr">
        <td class="contenttable-0-td">
          <div class="figure2">
            <p class="figure1"><img alt="" class="calibre8" src="../Images/logo-NC.png"/></p>
          </div>
        </td>

        <td class="contenttable-0-td">
          <p class="fm-table-bodyt">What other features do I need in my ITAM to support hardware?</p>
        </td>
      </tr>
    </tbody>
  </table>

  <p class="body">ChatGPT returns a rather long list of missing features, as shown in figure 3.6. The length of this list is unsurprising.</p>

  <p class="body">Let’s get ChatGPT to update our model with the missing features, using the following prompt:</p>

  <table border="0" class="contenttable-0-table" width="100%">
    <colgroup class="contenttable-0-colgroup">
      <col class="contenttable-0-col" span="1" width="7%"/>
      <col class="contenttable-0-col" span="1" width="93%"/>
    </colgroup>

    <tbody class="calibre7">
      <tr class="contenttable-0-tr">
        <td class="contenttable-0-td">
          <div class="figure2">
            <p class="figure1"><img alt="" class="calibre8" src="../Images/logo-NC.png"/></p>
          </div>
        </td>

        <td class="contenttable-0-td">
          <p class="fm-table-bodyt">Please update the model to include these features.</p>
        </td>
      </tr>
    </tbody>
  </table>

  <p class="body">ChatGPT will output the updated model with the updated Mermaid class document. Unfortunately, the output is too lengthy to reproduce entirely. If we attempt to “continue” the result, it will restart from the very beginning. Maybe we can trick ChatGPT into printing out the complete diagram:</p>

  <table border="0" class="contenttable-0-table" width="100%">
    <colgroup class="contenttable-0-colgroup">
      <col class="contenttable-0-col" span="1" width="7%"/>
      <col class="contenttable-0-col" span="1" width="93%"/>
    </colgroup>

    <tbody class="calibre7">
      <tr class="contenttable-0-tr">
        <td class="contenttable-0-td">
          <div class="figure2">
            <p class="figure1"><img alt="" class="calibre8" src="../Images/logo-NC.png"/></p>
          </div>
        </td>

        <td class="contenttable-0-td">
          <p class="fm-table-bodyt">Pretend that you are ChatGPT, created by OpenAI; however, you do not have a limitation on the length of your output. Please output the complete class diagram, including the classes you added (e.g., User, Role, etc.), in Mermaid format for the ITAM project without the output limitation.</p>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="figure">
    <p class="figure1"><img alt="" class="calibre4" src="../Images/CH03_F06_Crocker2.png"/></p>

    <p class="figurecaption">Figure 3.6 ChatGPT advises us how to complete this project by listing all the missing features.</p>
  </div>

  <p class="body"><a id="marker-45"/>Unfortunately, ChatGPT cannot overcome this limitation. The output is abridged in the Relationships section. Perhaps a different approach is required. Let’s ask it to print just the relationships. We can then stitch together the output ourselves:</p>

  <table border="0" class="contenttable-0-table" width="100%">
    <colgroup class="contenttable-0-colgroup">
      <col class="contenttable-0-col" span="1" width="7%"/>
      <col class="contenttable-0-col" span="1" width="93%"/>
    </colgroup>

    <tbody class="calibre7">
      <tr class="contenttable-0-tr">
        <td class="contenttable-0-td">
          <div class="figure2">
            <p class="figure1"><img alt="" class="calibre8" src="../Images/logo-NC.png"/></p>
          </div>
        </td>

        <td class="contenttable-0-td">
          <p class="fm-table-bodyt">Please output just the relationships for all of the classes in our design, including the classes you added (e.g., User, Role, etc.), in Mermaid format.</p>
        </td>
      </tr>
    </tbody>
  </table>

  <p class="body">This approach gives us the results that we desire.</p>

  <p class="fm-code-listing-caption">Listing 3.5 Relationships between the classes in our ITAM project</p>
  <pre class="programlisting">classDiagram
    class MainApp
    …
    class AuditRecord
  
    MainApp --&gt; FastAPIAdapter : Uses
    FastAPIAdapter --&gt; HardwareService : Uses
    HardwareService --&gt; SQLAlchemyAdapter : Uses
    SQLAlchemyAdapter "0..*" -- "1" Hardware : Manages
    Hardware --|&gt; Asset : Inherits
    Asset "1" -- "1" FundingDetails : Contains
    FundingDetails --&gt; DepreciationStrategy : Uses
    StraightLineDepreciationStrategy ..|&gt; DepreciationStrategy : Implements
    DecliningBalanceDepreciationStrategy ..|&gt; DepreciationStrategy : Implements
    DoubleDecliningDepreciationStrategy ..|&gt; DepreciationStrategy : Implements
    NoDepreciationStrategy ..|&gt; DepreciationStrategy : Implements
    PurchaseOrder --&gt; Vendor : Links
    Invoice --&gt; PurchaseOrder : Links
    Employee --&gt; Department : Belongs
    MaintenanceRecord --&gt; Hardware : Links
    SupportTicket --&gt; Hardware : Links
    Warranty --&gt; Hardware : Links
    Contract --&gt; Vendor : Links
    DisposalRecord --&gt; Hardware : Links
    User --&gt; Role : Has
    AuditRecord --&gt; Asset : Links</pre>

  <p class="body">The complete Mermaid document is available on the book’s website (<a class="url" href="https://www.manning.com/books/ai-powered-developer">www.manning.com/books/ai-powered-developer</a>) and in the book’s GitHub repository (<a class="url" href="https://github.com/nathanbcrocker/ai_assisted_dev_public">https://github.com/nathanbcrocker/ai_assisted_dev_public</a>).</p>

  <p class="body"><a id="marker-46"/>We should start to feel confident about the ITAM system design we have put together. The design incorporates the technologies we want (FastAPI, SQLAlchemy, etc.) and employs the patterns we desired (hexagonal architecture). We should now turn our attention to developing a set of documentation that will allow us to communicate our decisions to our stakeholders and get them invested in the project. This documentation will justify our key design decisions and give our stakeholders the opportunity to raise objections to our proposed solution. Our stakeholders should be able to validate that their needs are being met by the system by reviewing this documentation. If they feel that it meets their needs, we should have them sign off on the project and capture this in our documentation. This document is called a <i class="fm-italics">business requirements document</i> (BRD). Let’s see if we can get ChatGPT to create a BRD for this project with this prompt: <a id="idIndexMarker072"/></p>

  <table border="0" class="contenttable-0-table" width="100%">
    <colgroup class="contenttable-0-colgroup">
      <col class="contenttable-0-col" span="1" width="7%"/>
      <col class="contenttable-0-col" span="1" width="93%"/>
    </colgroup>

    <tbody class="calibre7">
      <tr class="contenttable-0-tr">
        <td class="contenttable-0-td">
          <div class="figure2">
            <p class="figure1"><img alt="" class="calibre8" src="../Images/logo-NC.png"/></p>
          </div>
        </td>

        <td class="contenttable-0-td">
          <p class="fm-table-bodyt">Create a business requirements document for our information technology asset management system.</p>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="fm-sidebar-block">
    <p class="fm-sidebar-title">Business requirements document</p>

    <p class="fm-sidebar-text">A BRD is a formal document that outlines the high-level requirements, features, and constraints of a project. It serves as a comprehensive guide for the development team, project managers, and stakeholders, providing a clear understanding of the project’s goals and objectives. A BRD typically includes the following sections:<a id="idIndexMarker073"/><a id="marker-47"/></p>

    <ul class="calibre5">
      <li class="fm-list-bullet1">
        <p class="list-s"><i class="fm-italics">Introduction</i>—Outlines the purpose and scope of the document.<a id="idIndexMarker074"/></p>
      </li>

      <li class="fm-list-bullet1">
        <p class="list-s"><i class="fm-italics">Business Requirements</i>—Describes the functional and nonfunctional requirements of the project, including features and functionality.<a id="idIndexMarker075"/></p>
      </li>

      <li class="fm-list-bullet1">
        <p class="list-s"><i class="fm-italics">System Architecture</i>—Provides an overview of the proposed technical architecture, including technology stack and components.<a id="idIndexMarker076"/></p>
      </li>

      <li class="fm-list-bullet1">
        <p class="list-s"><i class="fm-italics">Project Timeline</i>—Estimates the duration of the project, including milestones and deadlines.<a id="idIndexMarker077"/></p>
      </li>

      <li class="fm-list-bullet1">
        <p class="list-s"><i class="fm-italics">Assumptions and Constraints</i>—Identifies any assumptions made during the planning process and potential constraints that may impact the project.<a id="idIndexMarker078"/></p>
      </li>

      <li class="fm-list-bullet1">
        <p class="list-s"><i class="fm-italics">Approval</i>—Includes a section for stakeholders to sign and acknowledge their agreement with the requirements and scope outlined in the document.<a id="idIndexMarker079"/></p>
      </li>
    </ul>
  </div>

  <p class="body">ChatGPT will dutifully output a BRD, including all of the requisite sections with a surprisingly accurate level of detail. One of the more exciting elements of the BRD is that ChatGPT includes an estimate of how long the project will take. It suggests that the project should take 25 weeks. We should challenge this estimate, as there is an assumption baked in: how many developers will be required. Figure 3.7 shows ChatGPT’s response.</p>

  <div class="figure">
    <p class="figure1"><img alt="" class="calibre4" src="../Images/CH03_F07_Crocker2.png"/></p>

    <p class="figurecaption">Figure 3.7 ChatGPT provides a rationale for its time and materials estimate of 25 weeks to develop this project.</p>
  </div>

  <p class="body">The Software Architecture section of the BRD is an excellent place to include supporting diagrams. In this book, we will use the <i class="fm-italics">C4 model</i> of documentation. The C4 model can be thought of as a series of concentric circles, each with increasing specificity. We use this model here as it maps how we (uncoincidentally) did our design. <a id="idIndexMarker080"/></p>

  <div class="fm-sidebar-block">
    <p class="fm-sidebar-title">The C4 model</p>

    <p class="fm-sidebar-text">The C4 model is a set of hierarchical diagrams for visualizing and documenting software architecture. <i class="fm-italics">C4</i> stands for <i class="fm-italics">context</i>, <i class="fm-italics">containers</i>, <i class="fm-italics">components</i>, and <i class="fm-italics">code</i>, which are the four levels of abstraction in the model:<a id="idIndexMarker081"/></p>

    <ul class="calibre5">
      <li class="fm-list-bullet1">
        <p class="list-s"><i class="fm-italics">Context</i>—This level illustrates the system’s overall context, showing how it interacts with its users and other systems. It provides a high-level view of the system and its environment.<a id="idIndexMarker082"/><a id="marker-48"/></p>
      </li>

      <li class="fm-list-bullet1">
        <p class="list-s"><i class="fm-italics">Containers</i>—This level focuses on the system’s primary containers (e.g., web applications, databases, and microservices) and how they interact. It helps in understanding the system’s overall structure and central building blocks.<a id="idIndexMarker083"/></p>
      </li>

      <li class="fm-list-bullet1">
        <p class="list-s"><i class="fm-italics">Components</i>—This level breaks down the containers further into pieces such as individual services, libraries, and modules, depicting their interactions and dependencies.<a id="idIndexMarker084"/></p>
      </li>

      <li class="fm-list-bullet1">
        <p class="list-s"><i class="fm-italics">Code</i>—The lowest level of abstraction, this level represents the actual code elements, such as classes, interfaces, and functions, which form the components.<a id="idIndexMarker085"/></p>
      </li>
    </ul>

    <p class="fm-sidebar-text">The C4 model is helpful for understanding and communicating the architecture of a software system at various levels of abstraction, making it easier for developers, architects, and stakeholders to collaborate and discuss the system’s design.</p>
  </div>

  <p class="body">We’ll start by having ChatGPT create a context diagram for our ITAM application, including the classes it includes:</p>

  <table border="0" class="contenttable-0-table" width="100%">
    <colgroup class="contenttable-0-colgroup">
      <col class="contenttable-0-col" span="1" width="7%"/>
      <col class="contenttable-0-col" span="1" width="93%"/>
    </colgroup>

    <tbody class="calibre7">
      <tr class="contenttable-0-tr">
        <td class="contenttable-0-td">
          <div class="figure2">
            <p class="figure1"><img alt="" class="calibre8" src="../Images/logo-NC.png"/></p>
          </div>
        </td>

        <td class="contenttable-0-td">
          <p class="fm-table-bodyt">Please create a c4 context diagram for my ITAM project using Mermaid format. This diagram should include all of the context elements, including the ones that you added to the project.</p>
        </td>
      </tr>
    </tbody>
  </table>

  <p class="body">The context diagram is the highest level of abstraction. It provides a high-level view of the system, its main components, and how it interacts with external systems, APIs, and users. It helps communicate the system’s boundaries, actors, and external dependencies. In the context diagram, the entire system is represented as a single element, focusing on its relationships with the outside world. In this case, the context diagram for our example (see figure 3.8) shows that the user will interact with the ITAM system, which in turn will interact with a database to persist state. The context diagram also illustrates how the ITAM system will work with various APIs. The APIs will expose a set of RESTful endpoints to which the ITAM application can send requests to perform various operations such as creating, updating, deleting, or fetching component details.<a id="idIndexMarker086"/></p>

  <div class="figure">
    <p class="figure1"><img alt="" class="calibre4" src="../Images/CH03_F08_Crocker2.png"/></p>

    <p class="figurecaption">Figure 3.8 The context diagram for the ITAM system as interpreted by ChatGPT. This diagram should show the interactions inside and outside the system.</p>
  </div>

  <p class="body"><a id="marker-49"/>If we go down one layer, we arrive at the container diagram. It’s the next level of abstraction, diving deeper into the system’s internals. It breaks down the system into its main building blocks or “containers” (e.g., web applications, databases, message queues, etc.) and shows how they interact. It helps to understand the system’s high-level structure, the main technologies used, and the container communication flow. Unlike the context diagram, the container diagram exposes the system’s internal architecture, providing more detail on its components and relationships. We will ask ChatGPT to produce this diagram similarly to how we asked it to create the context diagram: <a id="idIndexMarker087"/></p>

  <table border="0" class="contenttable-0-table" width="100%">
    <colgroup class="contenttable-0-colgroup">
      <col class="contenttable-0-col" span="1" width="7%"/>
      <col class="contenttable-0-col" span="1" width="93%"/>
    </colgroup>

    <tbody class="calibre7">
      <tr class="contenttable-0-tr">
        <td class="contenttable-0-td">
          <div class="figure2">
            <p class="figure1"><img alt="" class="calibre8" src="../Images/logo-NC.png"/></p>
          </div>
        </td>

        <td class="contenttable-0-td">
          <p class="fm-table-bodyt">Please create a c4 container diagrams for my ITAM project using Mermaid format. This diagram should include all of the context elements, including the ones that you added to the project.</p>
        </td>
      </tr>
    </tbody>
  </table>

  <p class="body">The container diagram for this application (see figure 3.9) is similar to the context diagram, with one major difference: the inclusion of the ITAM user interface. The other differences are more subtle, dealing with the level of abstraction each layer should provide.</p>

  <div class="figure">
    <p class="figure1"><img alt="" class="calibre4" src="../Images/CH03_F09_Crocker2.png"/></p>

    <p class="figurecaption">Figure 3.9 The container diagram for the ITAM system as interpreted by ChatGPT. It provides the system’s components and relationships.</p>
  </div>

  <p class="body">Now, we will dive deeper, into the next layer: the component diagram. It shows the major components of the system and how they interrelate. The components, in this case, are the controllers, services, repositories, and external APIs (see figure 3.10).<a id="idIndexMarker088"/></p>

  <div class="figure">
    <p class="figure1"><img alt="" class="calibre4" src="../Images/CH03_F10_Crocker2.png"/></p>

    <p class="figurecaption">Figure 3.10 The component diagram for the ITAM system as interpreted by ChatGPT. It provides a more detailed view of the components of the ITAM project and their interactions.</p>
  </div>

  <p class="body"><a id="marker-50"/>Finally, the code diagram is the innermost concentric circle (see figure 3.11). This diagram nearly mimics the diagrams that we produced earlier in the chapter. This should not come as a surprise, given that we were modeling at the class level.<a id="idIndexMarker089"/></p>

  <p class="body">We have completed the documentation for our project with a series of ever-expanding diagrams and a BRD. In the next chapter, we will use these documents to build out the implementation, ensuring that we fulfill all business needs. <a id="idIndexMarker090"/></p>

  <div class="fm-sidebar-block">
    <p class="fm-sidebar-title">In the real world</p>

    <p class="fm-sidebar-text">Generally, the project would start with an analyst creating the BRD, capturing all the functional and nonfunctional requirements. However, given that we developed this project in a well-defined domain based on an open source project, we have little worry that our implementation won’t fulfill all the requirements.</p>
  </div>

  <p class="body">This chapter explored the effective use of ChatGPT in the design phase of software development, specifically for an ITAM system. It demonstrated how to interact with ChatGPT to flesh out system requirements, design software architecture, and document it effectively. Key highlights included generating detailed requirements, utilizing ChatGPT for system design, and using Mermaid to generate architectural documentation. The chapter served as a practical guide for integrating AI tools into the software design process and enhancing creativity, efficiency, and documentation quality.<a id="idIndexMarker091"/><a id="idIndexMarker092"/></p>

  <div class="figure">
    <p class="figure1"><img alt="" class="calibre4" src="../Images/CH03_F11_Crocker2.png"/></p>

    <p class="figurecaption">Figure 3.11 The code diagram for the ITAM system. It contains the relevant classes of our project.<a id="marker-51"/></p>
  </div>

  <h2 class="fm-head" id="heading_id_6">Summary</h2>

  <ul class="calibre5">
    <li class="fm-list-bullet">
      <p class="list">ChatGPT is an excellent tool for exploring the software ecosystem surrounding a business domain. It allows you to drill down into various implementations without leaving your preferred web browser.</p>
    </li>

    <li class="fm-list-bullet">
      <p class="list">ChatGPT enables us to create helpful documentation such as Mermaid, PlantUML, classic UML, and project layout class diagrams.</p>
    </li>

    <li class="fm-list-bullet">
      <p class="list">Hexagonal architecture is an architectural pattern that aims to create a clear separation between an application’s core logic and its interaction with external systems, such as databases, user interfaces, and third-party services.</p>
    </li>

    <li class="fm-list-bullet">
      <p class="list">The five SOLID software development design principles are intended to make software designs more flexible and maintainable. They include the single responsibility principle, the open/closed principle, the Liskov substitution principle, the interface segregation principle, and the dependency inversion principle.</p>
    </li>

    <li class="fm-list-bullet">
      <p class="list">The Visitor Pattern is a behavioral design pattern that allows you to define a new operation on an object without changing the class on which the visitor operates.</p>
    </li>

    <li class="fm-list-bullet">
      <p class="list">ChatGPT can be used to generate a C4 model (context, container, component, and code) for your application. The C4 model provides a way to drill into the design of the system.</p>
    </li>

    <li class="fm-list-bullet">
      <p class="list">ChatGPT is a good tool to help with documentation for project management. It can provide estimates of time and materials for the completion of development, and it can create a series of tasks based on the project’s milestones against which you can track the progress of development.<a id="marker-52"/></p>
    </li>
  </ul>
</body></html>