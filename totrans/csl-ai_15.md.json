["```py\nfrom pgmpy.models import BayesianNetwork\nfrom pgmpy.factors.discrete import TabularCPD\nfrom pgmpy.inference import VariableElimination\nimport numpy as np\n\nmodel = BayesianNetwork([     #1\n    ('C', 'X'),    #1\n    ('C', 'Y'),     #1\n    ('X', 'Y'),     #1\n    ('Y', 'U')    #1\n])    #1\n```", "```py\ncpd_c = TabularCPD(    #1\n    variable='C',   #1\n    variable_card=2,   #1\n    values=[[0.5], [0.5]],   #1\n    state_names={'C': ['bear', 'bull']}   #1\n)    #1\n\ncpd_x = TabularCPD(    #2\n    variable='X',     #2\n    variable_card=2,   #2\n    values=[[0.8, 0.2], [0.2, 0.8]],     #2\n    evidence=['C'],     #2\n    evidence_card=[2],     #2\n    state_names={'X': ['debt', 'equity'], 'C': ['bear', 'bull']}     #2\n)    #2\n\ncpd_y = TabularCPD(     #3\n    variable='Y',     #3\n    variable_card=2,    #3\n    values= [[0.3, 0.9, 0.7, 0.6], [0.7, 0.1, 0.3, 0.4]],    #3\n    evidence=['X', 'C'],    #3\n    evidence_card=[2, 2],     #3\n    state_names={     #3\n        'Y': ['failure', 'success'],   #3\n        'X': ['debt', 'equity'],     #3\n        'C': ['bear', 'bull']     #3\n    }    #3\n)     #3\n```", "```py\ncpd_u = TabularCPD(     #1\n    variable='U',    #1\n    variable_card=2,    #1\n    values=[[1., 0.], [0., 1.]],  #1\n    evidence=['Y'],   #1\n    evidence_card=[2],    #1\n    state_names={'U': [-1000, 99000], 'Y': ['failure', 'success']}  #1 \n)    #1\nprint(cpd_u)    #1\nmodel.add_cpds(cpd_c, cpd_x, cpd_y, cpd_u)   #1\n```", "```py\n+----------+------------+------------+\n| Y        | Y(failure) | Y(success) |\n+----------+------------+------------+\n| U(-1000) | 1.0        | 0.0        |\n+----------+------------+------------+\n| U(99000) | 0.0        | 1.0        |\n+----------+------------+------------+\n```", "```py\n+------------+---------+---------+-----------+-----------+\n| X          | X(debt) | X(debt) | X(equity) | X(equity) |\n+------------+---------+---------+-----------+-----------+\n| C          | C(bear) | C(bull) | C(bear)   | C(bull)   |\n+------------+---------+---------+-----------+-----------+\n| Y(failure) | 0.3     | 0.9     | 0.7       | 0.6       |\n+------------+---------+---------+-----------+-----------+\n| Y(success) | 0.7     | 0.1     | 0.3       | 0.4       |\n+------------+---------+---------+-----------+-----------+\n```", "```py\n+----------+------------+------------+\n| Y        | Y(failure) | Y(success) |\n+----------+------------+------------+\n| U(-1000) | 1.0        | 0.0        |\n+----------+------------+------------+\n| U(99000) | 0.0        | 1.0        |\n+----------+------------+------------+\n```", "```py\nimport requests\n\nurl = \"https://raw.githubusercontent.com/altdeep/causalML/master/book/pgmpy_do.py\"    #1\nresponse = requests.get(url)    #1\ncontent = response.text    #1\n\nprint(\"Downloaded script content:\\n\")     #2\nprint(content)    #2\nconfirm = input(\"\\nDo you want to execute this script? (yes/no): \")    #2\nif confirm.lower() == 'yes':    #2\n    exec(content)   #2\nelse:    #2\n    print(\"Script execution cancelled.\")    #2\n```", "```py\ndef get_expectation(marginal):     #1\n    u_values = marginal.state_names[\"U\"]    #1\n    probs = marginal.values    #1\n    expectation = sum([x * p for x, p in zip(u_values, probs)])   #1\n    return expectation    #1\n\ninfer = VariableElimination(model)     #2\nmarginal_u_given_debt = infer.query( #2\n    variables=['U'], evidence={'X': 'debt'})     #2\nmarginal_u_given_equity = infer.query( #2\n    variables=['U'], evidence={'X': 'equity'})    #2\ne_u_given_x_debt = get_expectation(marginal_u_given_debt)    #2\ne_u_given_x_equity = get_expectation(marginal_u_given_equity)    #2\nprint(\"E(U(Y)|X=debt)=\", e_u_given_x_debt)    #2\nprint(\"E(U(Y)|X=equity)=\", e_u_given_x_equity)     #2\n\nint_model_x_debt = do(model, {\"X\": \"debt\"})     #3\ninfer_debt = VariableElimination(int_model_x_debt)    #3\nmarginal_u_given_debt = infer_debt.query(variables=['U'])    #3\nexpectation_u_given_debt = get_expectation(marginal_u_given_debt)    #3\nprint(\"E(U(Y_{X=debt}))=\", expectation_u_given_debt)     #3\nint_model_x_equity = do(model, {\"X\": \"equity\"})     #3\ninfer_equity = VariableElimination(int_model_x_equity)     #3\nmarginal_u_given_equity = infer_equity.query(variables=['U'])    #3\nexpectation_u_given_equity = get_expectation(marginal_u_given_equity)     #3\nprint(\"E(U(Y_{X=equity}))=\", expectation_u_given_equity)     #3\n```", "```py\nmodel2 = BayesianNetwork([   #1\n    ('C', 'X'),    #1\n    ('C', 'Y'),    #1\n    ('X', 'Y'),    #1\n    ('Y', 'U')     #1\n])\n\ncpd_y2 = TabularCPD(    #2\n    variable='Y',\n    variable_card=2,\n    values=[[0.3, 0.9, 0.7, 0.4],  [0.7, 0.1, 0.3, 0.6]],   #3\n    evidence=['X', 'C'],\n    evidence_card=[2, 2],\n    state_names={\n        'Y': ['failure', 'success'],\n        'X': ['debt', 'equity'],\n        'C': ['bear', 'bull']\n    }\n)\n\nmodel2.add_cpds(cpd_c, cpd_x, cpd_y2, cpd_u)   #4\n```", "```py\ninfer = VariableElimination(model2)    #1\nmarginal_u_given_debt = infer.query(variables=['U'],    #1\n↪evidence={'X': 'debt'})    #1\nmarginal_u_given_equity = infer.query(variables=['U'],   #1\n↪evidence={'X': 'equity'})    #1\ne_u_given_x_debt = get_expectation(marginal_u_given_debt)   #1\ne_u_given_x_equity = get_expectation(marginal_u_given_equity)     #1\nprint(\"E(U(Y)|X=debt)=\", e_u_given_x_debt)   #1\nprint(\"E(U(Y)|X=equity)=\", e_u_given_x_equity)   #1\n\nint_model_x_debt = do(model2, {\"X\": \"debt\"})    #2\ninfer_debt = VariableElimination(int_model_x_debt)    #2\nmarginal_u_given_debt = infer_debt.query(variables=['U'])   #2\nexpectation_u_given_debt = get_expectation(marginal_u_given_debt)    #2\nprint(\"E(U(Y_{X=debt}))=\", expectation_u_given_debt)     #2\nint_model_x_equity = do(model2, {\"X\": \"equity\"})     #2\ninfer_equity = VariableElimination(int_model_x_equity)    #2\nmarginal_u_given_equity = infer_equity.query(variables=['U'])    #2\nexpectation_u_given_equity = get_expectation(marginal_u_given_equity)     #2\nprint(\"E(U(Y_{X=equity}))=\", expectation_u_given_equity)    #2\n```", "```py\nmodel = BayesianNetwork(    \n    [    \n        ('intent', 'AI prediction'),    \n        ('intent', 'choice'),    \n        ('AI prediction', 'box B'),    \n        ('choice', 'U'),    \n        ('box B', 'U'),    \n    ]    \n)\n```", "```py\ncpd_intent = TabularCPD(     #1\n    'intent', 2, [[0.5], [0.5]],    #1\n    state_names={'intent': ['B', 'both']}    #1\n)   #1\nprint(cpd_intent)\n\ncpd_choice = TabularCPD(    #2\n    'choice', 2, [[1, 0], [0, 1]],    #2\n    evidence=['intent'],     #2\n    evidence_card=[2],    #2\n    state_names={     #2\n        'choice': ['B', 'both'],     #2\n        'intent': ['B', 'both']   #2\n    }     #2\n)   #2\nprint(cpd_choice)\n```", "```py\ncpd_AI = TabularCPD(     #1\n    'AI prediction', 2, [[.95, 0.05], [.05, .95]],   #1\n    evidence=['intent'],   #1\n    evidence_card=[2],   #1\n    state_names={    #1\n        'AI prediction': ['B', 'both'],    #1\n        'intent': ['B', 'both']    #1\n    }    #1\n)    #1\nprint(cpd_AI)\n\ncpd_box_b_content = TabularCPD(    #2\n    'box B', 2, [[0, 1], [1, 0]],    #2\n    evidence=['AI prediction'],    #2\n    evidence_card=[2],    #2\n    state_names={    #2\n        'box B': [0, 1000000],    #2\n        'AI prediction': ['B', 'both']   #2\n    }     #2\n)    #2\nprint(cpd_box_b_content)\n```", "```py\ncpd_u = TabularCPD(    #1\n    'U', 4,    #1\n    [    #1\n        [1, 0, 0, 0],  #1\n        [0, 1, 0, 0],   #1\n        [0, 0, 1, 0],   #1\n        [0, 0, 0, 1],    #1\n    ],   #1\n    evidence=['box B', 'choice'],    #1\n    evidence_card=[2, 2],    #1\n    state_names={    #1\n        'U': [0, 1000, 1000000, 1001000],    #1\n        'box B': [0, 1000000],    #1\n        'choice': ['B', 'both']    #1\n    }   #1\n)    #1\nprint(cpd_u)\n\nmodel.add_cpds(cpd_intent, cpd_choice, cpd_AI, cpd_box_b_content, cpd_u)  #2\n```", "```py\nint_model_x_both = do(model, {\"choice\": \"both\"})    #1\ninfer_both = VariableElimination(int_model_x_both)   #1\nmarginal_u_given_both = infer_both.query(   #1\n    variables=['U'], evidence={'intent': 'both'})    #1\nexpectation_u_given_both = get_expectation(marginal_u_given_both)    #1\nprint(\"E(U(Y_{choice=both}|intent=both))=\", expectation_u_given_both)    #1\nint_model_x_box_B = do(model, {\"choice\": \"B\"})     #2\ninfer_box_B = VariableElimination(int_model_x_box_B)    #2\nmarginal_u_given_box_B = infer_box_B.query(    #2\n    variables=['U'], evidence={'intent': 'both'})     #2\nexpectation_u_given_box_B = get_expectation(marginal_u_given_box_B)    #2\nprint(\"E(U(Y_{choice=box B}|intent=both))=\", expectation_u_given_box_B)    #2\nint_model_x_both = do(model, {\"choice\": \"both\"})     #3\ninfer_both = VariableElimination(int_model_x_both)     #3\nmarginal_u_given_both = infer_both.query(     #3\n    variables=['U'], evidence={'intent': 'B'})    #3\nexpectation_u_given_both = get_expectation(marginal_u_given_both)     #3\nprint(\"E(U(Y_{choice=both}|intent=B))=\", expectation_u_given_both)     #3\nint_model_x_box_B = do(model, {\"choice\": \"B\"})     #4\ninfer_box_B = VariableElimination(int_model_x_box_B)  #4\nmarginal_u_given_box_B = infer_box_B.query(    #4\n    variables=['U'], evidence={'intent': 'B'}) #4\nexpectation_u_given_box_B = get_expectation(marginal_u_given_box_B)     #4\nprint(\"E(U(Y_{choice=box B}|intent=B))=\", expectation_u_given_box_B)     #4\n```"]