<html><head></head><body>
<div id="sbo-rt-content"><div class="readable-text" id="p1">
<h1 class="readable-text-h1"><span class="chapter-title-numbering"><span class="num-string">appendix A</span></span> <span class="chapter-title-text">Technical requirements</span></h1>
</div>
<div class="readable-text" id="p2">
<p>This appendix describes how to install the software used in this book.</p>
</div>
<div class="readable-text" id="p3">
<h2 class="readable-text-h2"><span class="num-string">A.1</span> Cloning the GitHub repository</h2>
</div>
<div class="readable-text" id="p4">
<p>To clone the GitHub repository for the book on your local machine, you can adopt one of the following two strategies:</p>
</div>
<ul>
<li class="readable-text" id="p5"> Using the terminal </li>
<li class="readable-text" id="p6"> Using GitHub Desktop </li>
</ul>
<div class="readable-text" id="p7">
<h3 class="readable-text-h3"><span class="num-string">A.1.1</span> Using the terminal</h3>
</div>
<div class="readable-text" id="p8">
<p>To clone the GitHub repository for the book from the command line, follow these steps:</p>
</div>
<ol>
<li class="readable-text" id="p9"> Install the Git suite (<a href="https://git-scm.com/downloads">https://git-scm.com/downloads</a>), if you do not have it yet. </li>
<li class="readable-text" id="p10"> Open the terminal on your computer. </li>
<li class="readable-text" id="p11"> Navigate to the directory where you want to clone the repository. </li>
<li class="readable-text" id="p12"> Run the command <code>git</code> <code>clone</code> <code>https://github.com/alod83/Data-Storytelling-with-Altair-and-AI/tree/main</code>. </li>
<li class="readable-text" id="p13"> Wait for the repository to be cloned to your local machine. </li>
</ol>
<div class="readable-text" id="p14">
<h3 class="readable-text-h3"><span class="num-string">A.1.2</span> Using GitHub Desktop</h3>
</div>
<div class="readable-text" id="p15">
<p>To clone the GitHub repository for the book from GitHub Desktop, follow these steps:</p>
</div>
<ol>
<li class="readable-text" id="p16"> Download and install GitHub Desktop from their official website: <a href="https://desktop.github.com/">https://desktop.github.com/</a>. </li>
<li class="readable-text" id="p17"> Launch GitHub Desktop. </li>
<li class="readable-text" id="p18"> Sign in to your GitHub account or create a new account if needed. </li>
<li class="readable-text" id="p19"> Click the File menu, and select Clone Repository. </li>
<li class="readable-text" id="p20"> In the Clone a Repository window, choose the URL tab. </li>
<li class="readable-text" id="p21"> Enter the repository URL (<a href="https://github.com/alod83/Data-Storytelling-with-Altair-and-AI/tree/main">https://github.com/alod83/Data-Storytelling-with-Altair-and-AI/tree/main</a>) in the Repository URL field. </li>
<li class="readable-text" id="p22"> Choose the local path where you want to clone the repository. </li>
<li class="readable-text" id="p23"> Click the Clone button. </li>
<li class="readable-text" id="p24"> Wait for GitHub Desktop to clone the repository to your local machine. </li>
</ol>
<div class="readable-text" id="p25">
<h2 class="readable-text-h2"><span class="num-string">A.2</span> Installing the Python packages</h2>
</div>
<div class="readable-text" id="p26">
<p>The examples illustrated in this book use Python 3.8. You can download it from the official website: <a href="https://www.python.org/downloads/release/python-3810/">https://www.python.org/downloads/release/python-3810/</a>. </p>
</div>
<div class="readable-text intended-text" id="p27">
<p>The examples described in this book use the following Python packages: </p>
</div>
<ul>
<li class="readable-text" id="p28"> langchain==0.1.12 </li>
<li class="readable-text" id="p29"> langchain-community==0.0.28 </li>
<li class="readable-text" id="p30"> langchain-core==0.1.32 </li>
<li class="readable-text" id="p31"> langchain-openai==0.0.8 </li>
<li class="readable-text" id="p32"> langchain-text-splitters==0.0.1 </li>
<li class="readable-text" id="p33"> altair==5.3.0 </li>
<li class="readable-text" id="p34"> chromadb==0.4.22 </li>
<li class="readable-text" id="p35"> jupyterlab==3.5.1 </li>
<li class="readable-text" id="p36"> ydata-profiling==4.6.0 </li>
<li class="readable-text" id="p37"> matplotlib==3.5.0 </li>
<li class="readable-text" id="p38"> numpy==1.24.4 </li>
<li class="readable-text" id="p39"> pandas==1.3.4 </li>
<li class="readable-text" id="p40"> unstructured==0.10.19 </li>
</ul>
<div class="readable-text" id="p41">
<p>You can install the latest versions of these packages simply by running the command <code>pip</code> <code>install</code> <code>&lt;package_name&gt;</code>. However, since technology evolves rapidly, these packages may have already been updated by the time you read this book. To ensure that you can still run the code used in this book as it is, create a virtual environment on your computer and install the specific package versions used in this book. To create a virtual environment on your computer, open a terminal and install the <code>virtualenv</code> package using <code>pip</code> <code>install</code> <code>virtualenv</code>. Then, run the commands described in the following listing.</p>
</div>
<div class="browsable-container listing-container" id="p42">
<h5 class="listing-container-h5 browsable-container-h5"><span class="num-string">Listing A.1</span> Creating and running a virtual environment</h5>
<div class="code-area-container">
<pre class="code-area">python -m venv env
source env/bin/activate</pre>
</div>
</div>
<div class="readable-text" id="p43">
<p>To deactivate the virtual environment, simply run <code>deactivate</code>. Within the virtual environment, install the preceding packages by running the command <code>pip</code> <code>install</code> <code>&lt;package_name&gt;==&lt;version&gt;</code> for each package. Alternatively, use the requirements.txt file placed in the root of the GitHub repository for the book and run the following command: <code>pip</code> <code>install</code> <code>-r</code> <code>requirements.txt</code>.</p>
</div>
<div class="readable-text" id="p44">
<h2 class="readable-text-h2"><span class="num-string">A.3</span> Installing GitHub Copilot</h2>
</div>
<div class="readable-text" id="p45">
<p>To use GitHub Copilot, you must set up a free trial or subscription for your personal GitHub account. If you are a teacher or a student, you can set up a free subscription plan at the following link: <a href="https://education.github.com/discount_requests/pack_application">https://education.github.com/discount_requests/pack_application</a>. </p>
</div>
<div class="readable-text intended-text" id="p46">
<p>Once your account is set up to use GitHub Copilot, configure it as an extension of Visual Studio Code (VSC), a free, open source code editor designed for developers to write and debug code. Download VSC from its official website: <a href="https://visualstudio.microsoft.com/it/downloads/">https://visualstudio.microsoft.com/it/downloads/</a>.</p>
</div>
<div class="readable-text intended-text" id="p47">
<p>To start GitHub Copilot, open Visual Studio and navigate to the Extensions tab. Download and install the GitHub Copilot extension, and then select Connect to Your Account from the dashboard. Enter your GitHub credentials. Once logged in, the extension will detect existing repositories and provide options for configuring new projects. </p>
</div>
<div class="readable-text" id="p48">
<h2 class="readable-text-h2"><span class="num-string">A.4</span> Configuring ChatGPT</h2>
</div>
<div class="readable-text" id="p49">
<p>To use ChatGPT, you must set up an account on the Open AI website (<a href="https://openai.com/">https://openai.com/</a>). At the time of writing this book, ChatGPT version GPT-4 is free.</p>
</div>
<div class="readable-text intended-text" id="p50">
<p>To access ChatGPT, visit <a href="https://chat.openai.com/">https://chat.openai.com/</a>, log in to your account, and start writing your prompts in the input text box like a live chat. Whenever you want to start a new topic, create a new chat session by clicking on the top-left New Chat button.</p>
</div>
<div class="readable-text intended-text" id="p51">
<p>ChatGPT retains the entire history of prompts within a single chat session. This means you can write step-by-step instructions, build on previous prompts, and maintain a coherent conversation.</p>
</div>
<div class="readable-text intended-text" id="p52">
<p>The web interface also provides a paid account that gives some additional features, such as the ability to use advanced models. In this book, we use the free version of the web interface.</p>
</div>
<div class="readable-text" id="p53">
<h2 class="readable-text-h2"><span class="num-string">A.5</span> Installing Open AI API</h2>
</div>
<div class="readable-text" id="p54">
<p>Point to <a href="https://openai.com/">https://openai.com/</a>, log in to your account, or create a new one. Once logged in, click API. To use the Open AI API, you must upgrade your existing account to a paid one. Click your personal logo in the top-right of the screen, next to Manage Account | Billing. Next, add credits by adding a payment method. The OpenAI official pricing page (<a href="https://openai.com/pricing">https://openai.com/pricing</a>) lists pricing details. A credit of $5 should be sufficient for the experiments run in this book. </p>
</div>
<div class="readable-text intended-text" id="p55">
<p>Next, you can configure an API key by performing the following steps: </p>
</div>
<ol>
<li class="readable-text" id="p56"> Click the Personal button on the top right of your dashboard. </li>
<li class="readable-text" id="p57"> Select View API Keys in your dropdown menu. </li>
<li class="readable-text" id="p58"> Click Create a New Secret Key. </li>
<li class="readable-text" id="p59"> Insert the key name, and create a secret key. </li>
<li class="readable-text" id="p60"> Click the Copy symbol to copy the key value, and paste it in a secure place. </li>
<li class="readable-text" id="p61"> Click Done. </li>
</ol>
<div class="readable-text" id="p62">
<p>Once you have created the API key, you can use the Open AI API in your Python scripts.</p>
</div>
<div class="readable-text intended-text" id="p63">
<p>The following listing shows an example of usage of the Open AI API, asking ChatGPT to produce some output given an input prompt. You can also find the following code in the GitHub repository for the book under AppendixA/openai-test.py.</p>
</div>
<div class="browsable-container listing-container" id="p64">
<h5 class="listing-container-h5 browsable-container-h5"><span class="num-string">Listing A.2</span> Calling the ChatGPT API</h5>
<div class="code-area-container">
<pre class="code-area">import openai
openai.api_key = 'MY_API_KEY'
prompt = 'What is the capital of Italy?'

messages = [{"role": "user", "content": prompt}]
response = openai.chat.completions.create(
    model="gpt-3.5-turbo",
    messages=messages,
    temperature=0,<span class="aframe-location"/> #1
)

print(response.choices[0].message.content.strip())</pre>
<div class="code-annotations-overlay-container">
     #1 Temperature [0,1] defines the grade of randomness in the output.
     <br/>
</div>
</div>
</div>
<div class="readable-text print-book-callout" id="p65">
<p><span class="print-book-callout-head">Note</span>  Use the <code>chat.completions.create()</code> method to call the ChatGPT API.</p>
</div>
<div class="readable-text" id="p66">
<h2 class="readable-text-h2"><span class="num-string">A.6</span> Installing LangChain</h2>
</div>
<div class="readable-text" id="p67">
<p>You can use LangChain with your preferred large language model (LLM). In this book, we use OpenAI, which requires an API key. For more details, refer to the section related to OpenAI installation.</p>
</div>
<div class="readable-text intended-text" id="p68">
<p>The following listing shows an example of using LangChain to interact with the OpenAI API in Python. You can also find the code of this example in the GitHub repository for the book under AppendixA/langchain-test.py</p>
</div>
<div class="browsable-container listing-container" id="p69">
<h5 class="listing-container-h5 browsable-container-h5"><span class="num-string">Listing A.3</span> Using LangChain</h5>
<div class="code-area-container">
<pre class="code-area">from langchain_openai import ChatOpenAI
import os

os.environ["OPENAI_API_KEY"] = 'MY_API_KEY'

llm = ChatOpenAI(temperature=0, model='gpt-3.5-turbo')

print(
    llm.invoke("What is the capital of Italy?")
)</pre>
</div>
</div>
<div class="readable-text" id="p70">
<p>Windows users may get the error <code>"ModuleNotFoundError:</code> <code>No</code> <code>module</code> <code>named</code> <code>'pwd'"</code> when using LangChain. This is because the <code>pwd</code> module is not available on Windows platforms. One workaround to this problem is to add the following line of code before using LangChain.</p>
</div>
<div class="browsable-container listing-container" id="p71">
<h5 class="listing-container-h5 browsable-container-h5"><span class="num-string">Listing A.4</span> Using <code>pwd</code> on Windows</h5>
<div class="code-area-container">
<pre class="code-area">try:
    import pwd
except ImportError:
    import winpwd as pwd</pre>
</div>
</div>
<div class="readable-text" id="p72">
<p>For more details, see the LangChain official documentation (<a href="https://www.langchain.com/">https://www.langchain.com/</a>).</p>
</div>
<div class="readable-text" id="p73">
<h2 class="readable-text-h2"><span class="num-string">A.7</span> Installing Chroma</h2>
</div>
<div class="readable-text" id="p74">
<p>Chroma uses SQLite as a database. The following listing shows how to connect to a Chroma database.</p>
</div>
<div class="browsable-container listing-container" id="p75">
<h5 class="listing-container-h5 browsable-container-h5"><span class="num-string">Listing A.5</span> Importing Chroma</h5>
<div class="code-area-container">
<pre class="code-area">import chromadb

client = chromadb.Client()</pre>
</div>
</div>
<div class="readable-text" id="p76">
<p>For more details, see the Chroma official documentation (<a href="https://docs.trychroma.com/getting-started">https://docs.trychroma.com/getting-started</a>).</p>
</div>
<div class="readable-text" id="p77">
<h2 class="readable-text-h2"><span class="num-string">A.8</span> Configuring DALL-E</h2>
</div>
<div class="readable-text" id="p78">
<p>To use DALL-E, you must set up an account on the Open AI website (<a href="https://openai.com">https://openai.com</a>). Then, you can use two ways to interact with DALL-E: the web interface or the Open AI API. In this book, we prefer using the web interface for a couple of advantages. The Open AI API requires a paid account, while the web interface requires buying credits to generate images. In addition, if you created your DALL-E account before April 6, 2023, every month, you have a pool of free credits.</p>
</div>
<div class="readable-text intended-text" id="p79">
<p>To use the web interface, visit <a href="https://labs.openai.com">https://labs.openai.com</a>, log in to your account, and write your prompts in the input text box. To use the Open AI API, you must upgrade your existing account to a paid one. Next, you can configure an API as described in section 2.5. Once you have created the API key, you can use the Open AI API in your Python scripts.</p>
</div>
<div class="readable-text intended-text" id="p80">
<p>The following listing shows an example of using the Open AI API: asking DALL-E to produce an image given an input prompt. The code is also available in the GitHub repository for the book under AppendixA/dalle-test.py.</p>
</div>
<div class="browsable-container listing-container" id="p81">
<h5 class="listing-container-h5 browsable-container-h5"><span class="num-string">Listing A.6</span> Calling the DALL-E API</h5>
<div class="code-area-container">
<pre class="code-area">import openai
import requests

openai.api_key = 'MY_API_KEY'
prompt = 'Create a painting of a beautiful sunset over a calm lake.'

n=1
response = openai.images.generate(
  prompt=prompt,
  n=n, <span class="aframe-location"/> #1
  size='1024x1024'
)

i = 0
for image_data in response.data:
    print(image_data.url)
    img = requests.get(image_data.url).content
    with open(f"image-{i}.png", 'wb') as handler:
        handler.write(img)
    i += 1

print(output)</pre>
<div class="code-annotations-overlay-container">
     #1 The number of images to generate
     <br/>
</div>
</div>
</div>
<div class="readable-text print-book-callout" id="p82">
<p><span class="print-book-callout-head">Note</span>  Use the <code>Image.create()</code> method to call the DALL-E API. The output contains the URL to the produced image.</p>
</div>
<div class="readable-text" id="p83">
<p>Additionally, you can modify an existing image using the <code>Image.create_edit()</code> method. Refer to the DALL-E official documentation (<a href="https://platform.openai.com/docs/guides/images/usage">https://platform.openai.com/docs/guides/images/usage</a>) for more details.</p>
</div>
</div></body></html>