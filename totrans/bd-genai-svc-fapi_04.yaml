- en: Capitolo 2\. Come iniziare con FastAPI
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Questo lavoro è stato tradotto utilizzando l''AI. Siamo lieti di ricevere il
    tuo feedback e i tuoi commenti: [translation-feedback@oreilly.com](mailto:translation-feedback@oreilly.com)'
  prefs: []
  type: TYPE_NORMAL
- en: Alla fine di questo capitolo, dovresti sentirti a tuo agio nell'utilizzo del
    framework web FastAPI, nell'impostazione di progetti FastAPI e nell'articolare
    le tue decisioni sullo stack tecnologico per la creazione di servizi GenAI.
  prefs: []
  type: TYPE_NORMAL
- en: Introduzione a FastAPI
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '[FastAPI](https://oreil.ly/2xcoR) è un framework web ASGI (asynchronous gateway
    interface) che ti permette di costruire API e server web backend snelli. Essendoun
    frameworkASGI, è in grado di sfruttare la concorrenza per elaborare le richieste
    web. È [veloce, paragonabile ai framework moderni](https://oreil.ly/tgwEJ), ma
    è anchedotato di solide [integrazioni Swagger/OpenAPI per la documentazione automatica](https://oreil.ly/WlwOC),
    oltre a funzioni integrate di validazione e serializzazione dei dati tramite [Pydantic](https://oreil.ly/5-EmU).^([1](ch02.html#id507))
    In effetti, FastAPI è un wrapper del [framework Starlette](https://oreil.ly/tyKtQ),
    costruito da Encode, le stesse persone che hanno realizzato il framework REST
    Django. È leggero e ha un''esperienza di sviluppo simile.'
  prefs: []
  type: TYPE_NORMAL
- en: Prima di parlare di FastAPI in modo più dettagliato, configuriamo il tuo ambiente
    di sviluppo con un'applicazione FastAPI in esecuzione.
  prefs: []
  type: TYPE_NORMAL
- en: Impostazione dell'ambiente di sviluppo
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Nel resto del capitolo, ti guiderò attraverso il processo di installazione di
    FastAPI e delle sue dipendenze essenziali, consentendoti di configurare un server
    web di base. Installeremo anche una selezione di formattatori, logger e linter
    che potrai impostare per migliorare il tuo flusso di lavoro di sviluppo.
  prefs: []
  type: TYPE_NORMAL
- en: Avvertenze
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: Gli esempi di codice presenti in questo libro sono stati testati con Python
    3.11\. L'esecuzione di esempi di codice con altre versioni di Python potrebbe
    causare problemi. Inoltre, alcuni ambienti di distribuzione e le dipendenze dei
    pacchetti potrebbero non supportare le ultime versioni di Python.
  prefs: []
  type: TYPE_NORMAL
- en: Ora puoi iniziare a configurare il tuo progetto FastAPI.
  prefs: []
  type: TYPE_NORMAL
- en: Installazione di Python, FastAPI e dei pacchetti necessari
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Se utilizzi Windows, puoi usare `conda` per creare un ambiente virtuale Python:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'Se utilizzi un sistema macOS o Linux, puoi creare un ambiente Python virtuale
    utilizzando `venv`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: '[PRE2] $ source .venv/bin/activate [PRE3]` Una volta attivato l''ambiente,
    puoi installare i pacchetti fondamentali necessari per eseguire il server FastAPI
    e servire le richieste dell''API OpenAI:    [PRE4]   ``Il pacchetto `uvicorn`
    è il server web di base su cui gira FastAPI.`fastapi` installerà anche i suoi
    pacchetti di dipendenza come `starlette` e `pydantic`.`` [PRE5]``  [PRE6][PRE7]py[PRE8]`py
    >> server   Documentation at http://127.0.0.1:8000/docs [PRE9]`py [PRE10]py` [PRE11]py
    [PRE12] [PRE13]`` [PRE14][PRE15]py[PRE16]`` [PRE17] # main.py from pydantic import
    BaseModel, Field, EmailStr  class UserCreate(BaseModel):     username: str     password:
    str      @validator(''password'') ![1](assets/1.png)     def validate_password(cls,
    value):         if len(value) < 8:             raise ValueError(''Password must
    be at least 8 characters long'')         if not any(char.isdigit() for char in
    value):             raise ValueError(''Password must contain at least one digit'')         if
    not any(char.isupper() for char in value):             raise ValueError(''Password
    must contain at least one uppercase letter'')         return value ![2](assets/2.png)  app
    = FastAPI()  @app.post("/users") async def create_user_controller(user: UserCreate):     return
    {"name": user.name, "message": "Account successfully created"}  ... [PRE18] #
    main.py from fastapi.responses import RedirectResponse  @app.get("/", include_in_schema=False)
    ![1](assets/1.png) def docs_redirect_controller():     return RedirectResponse(url="/docs",
    status_code=status.HTTP_303_SEE_OTHER) ![2](assets/2.png) [PRE19] from fastapi
    import FastAPI, Depends  app = FastAPI()  def paginate(skip: int = 0, limit: int
    = 10):     return {"skip": skip, "limit": limit}  @app.get("/messages") def list_messages_controller(pagination:
    dict = Depends(paginate)):     return ...  # filter and paginate results using
    pagination params  @app.get("/conversations") def list_conversations_controller(pagination:
    dict = Depends(paginate)):     return ...  # filter and paginate results using
    pagination params [PRE20] from fastapi import FastAPI, Depends  def get_db():
    ![1](assets/1.png)     db = ... # create a database session     try:         yield
    db ![2](assets/2.png)     finally:         db.close() ![3](assets/3.png)  app
    = FastAPI()  @app.get("users/{email}/messages") def get_current_user_messages(email,
    db = Depends(get_db)): ![4](assets/4.png)     user = db.query(...) # db is reused     messages
    = db.query(...) # db is reused     return messages ![5](assets/5.png) [PRE21]
    flat-project ├── app │   ├── services.py │   ├── database.py │   ├── models.py
    │   ├── routers.py │   └── main.py ├── requirements.txt ├── .env ├── .gitignore
    [PRE22] nested-project ├── app │    ├── main.py │    ├── dependencies.py │    └──
    services │    │   ├── users.py │    │   └── profiles.py │    └── models │    │   ├──
    users.py │    │   └── profiles.py │    └── routers │        ├── users.py │        └──
    profiles.py ├── requirements.txt ├── .env ├── .gitignore [PRE23] modular-project
    ├── app │   └── modules │   │   ├── auth │   │   │   ├── routers.py │   │   │   ├──
    models.py │   │   │   ├── dependencies.py │   │   │   ├── guards.py │   │   │   ├──
    services.py │   │   └── users │   │   │   ├── router.py │   │   │   ├── models.py
    │   │   │   ├── dependencies.py │   │   │   ├── services.py │   │   │   ├── mappers.py
    │   │   │   ├── pipes.py │   │   └── profiles │   └── routers │   │   └── users.py
    │   └── providers │   │   └── email.py │   │   └── stripe.py ............ │   ├──
    settings.py  # global configs │   ├── middlewares.py  # global middleware │   ├──
    models.py  # global models │   ├── exceptions.py  # global exceptions │   └──
    main.py ├── requirements.txt ├── .env ├── .gitignore [PRE24]` [PRE25]```'
  prefs: []
  type: TYPE_NORMAL
