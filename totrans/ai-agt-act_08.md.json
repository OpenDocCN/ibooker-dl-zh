["```py\npip install promptflow promptflow-tools\n```", "```py\n{\n    \"recommendations\": \"Title: The Butterfly Effect\nSubject: 5\nFormat: 5\nGenre: 4\n\nTitle: Primer\nSubject: 5\nFormat: 5\nGenre: 4\n\nTitle: Time Bandits\nSubject: 5\nFormat: 5\nGenre: 5\"\n}\n```", "```py\nfrom promptflow import tool\n\n@tool      #1\ndef parse(input: str) -> str:\n    # Splitting the recommendations into individual movie blocks\n    rblocks = input.strip().split(\"\\n\\n\")      #2\n\n    # Function to parse individual recommendation block into dictionary\n    def parse_block(block):\n        lines = block.split('\\n')\n        rdict = {}\n        for line in lines:\n            kvs = line.split(': ')\n            key, value = kvs[0], kvs[1]\n            rdict[key.lower()] = value     #3\n        return rdict\n\n    parsed = [parse_block(block) for block in rblocks]    #4\n\n    return parsed\n```", "```py\n\"Title: The Butterfly Effect\nSubject: 5\nFormat: 5\nGenre: 4\n\nTitle: Primer\nSubject: 5\nFormat: 5\nGenre: 4\n\nTitle: Time Bandits\nSubject: 5\nFormat: 5\nGenre: 5\"\n```", "```py\n       {\n            \"title\": \" The Butterfly Effect\n            \"subject\": \"5\",\n            \"format\": \"5\",\n            \"genre\": \"4\"\n        },\n        {\n            \"title\": \" Primer\",\n            \"subject\": \"5\",\n            \"format\": \"5\",\n            \"genre\": \"4\"\n        },\n        {\n            \"title\": \" Time Bandits\",\n            \"subject\": \"5\",\n            \"format\": \"5\",\n            \"genre\": \"5\"\n        }\n```", "```py\n{\n    \"subject\": \"time travel\",\n    \"format\": \"books\",\n    \"genre\": \"fantasy\",\n    \"custom\": \"don't include any R rated content\"\n}\n```", "```py\n{\n  \"subject\": \"time travel\",\n  \"format\": \"books\",\n  \"genre\": \"fantasy\",\n  \"custom\": \"don't include any R rated content\"\n}\n{\n  \"subject\": \"space exploration\",\n  \"format\": \"podcasts\",\n  \"genre\": \"sci-fi\",\n  \"custom\": \"include family-friendly content only\"\n}\n{\n  \"subject\": \"mystery\",\n  \"format\": \"podcasts\",\n  \"genre\": \"fantasy\",\n  \"custom\": \"don't include any R rated content\"\n}\n{\n  \"subject\": \"space exploration\",\n  \"format\": \"podcasts\",\n  \"genre\": \"action\",\n  \"custom\": \"include family-friendly content only\"\n}\n{\n  \"subject\": \"vacation\",\n  \"format\": \"books\",\n  \"genre\": \"thriller\",\n  \"custom\": \"don't include any R rated content\"\n}\n{\n  \"subject\": \"mystery\",\n  \"format\": \"books\",\n  \"genre\": \"sci-fi\",\n  \"custom\": \"don't include any R rated content\"\n}\n{\n  \"subject\": \"mystery\",\n  \"format\": \"books\",\n  \"genre\": \"romance\",\n  \"custom\": \"don't include any R rated content\"\n}\n{\n  \"subject\": \"vacation\",\n  \"format\": \"movies\",\n  \"genre\": \"fantasy\",\n  \"custom\": \"don't include any R rated content\"\n}\n{\n  \"subject\": \"cooking\",\n  \"format\": \"TV shows\",\n  \"genre\": \"thriller\",\n  \"custom\": \"include family-friendly content only\"\n}\n{\n  \"subject\": \"mystery\",\n  \"format\": \"movies\",\n  \"genre\": \"romance\",\n  \"custom\": \"include family-friendly content only\"\n}\n```", "```py\n@tool\ndef line_process(recommendations: str):     #1\n    inputs = recommendations\n    output = []\n    for data_dict in inputs:                      #2\n        total_score = 0\n        score_count = 0\n\n        for key, value in data_dict.items():     #2\n                if key != \"title\":     #3\n                    try:\n                        total_score += float(value)\n                        score_count += 1\n                        data_dict[key] = float(value)     #4\n                    except:\n                        pass\n\n        avg_score = total_score / score_count if score_count > 0 else 0\n\n        data_dict[\"avg_score\"] = round(avg_score, 2)    #5\n        output.append(data_dict)\n\n    return output\n```", "```py\n@tool\ndef aggregate(processed_results: List[str]):\n    items = [item for sublist in processed_results \n              â†ª for item in sublist]     #1\n\n    aggregated = {}\n\n    for item in items:\n        for key, value in item.items():\n            if key == 'title':\n                continue\n\n            if isinstance(value, (float, int)):      #2\n                if key in aggregated:\n                    aggregated[key] += value\n                else:\n                    aggregated[key] = value\n\n    for key, value in aggregated.items():      #3\n        value = value / len(items)\n        log_metric(key=key, value=value)     #4\n        aggregated[key] = value\n\n    return aggregated\n```"]