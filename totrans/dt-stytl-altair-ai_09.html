<html><head></head><body>
<div id="sbo-rt-content"><div class="readable-text" id="p1">
<h1 class="readable-text-h1"><span class="chapter-title-numbering"><span class="num-string">8</span></span> <span class="chapter-title-text">From information to knowledge: Building the visual context</span></h1>
</div>
<div class="introduction-summary">
<h3 class="introduction-header">This chapter covers</h3>
<ul>
<li class="readable-text" id="p2">Emotions: The foundations of visual context</li>
<li class="readable-text" id="p3">Colors, size, and interaction</li>
<li class="readable-text" id="p4">Using DALL-E for images</li>
<li class="readable-text" id="p5">Strategic placement of textual and visual context</li>
<li class="readable-text" id="p6">Implementing an example</li>
</ul>
</div>
<div class="readable-text" id="p7">
<p>Generally, looking at something interesting arouses an <em>emotion</em>, a set of feelings that strike us. Of course, written texts can arouse emotions, and the power of visual elements to generate emotions is likely even greater. So why not exploit emotions to involve the audience more in our data stories? In this chapter, we will review the basic concepts behind visual context in a data story with a focus on emotions. We will describe how to set color, size, and interactivity in a data story. Next, we will deepen the usage of DALL-E for building images. Afterward, we will focus on how to place the context in your chart. Finally, we will focus on a practical case study implementing the described concepts.</p>
</div>
<div class="readable-text" id="p8">
<h2 class="readable-text-h2"><span class="num-string">8.1</span> Emotions: The foundations of visual context</h2>
</div>
<div class="readable-text" id="p9">
<p>I went to the Natural History Museum with my family some time ago. There were many animals, reconstructions of archaeological excavations, some primitive men, and much more. At the end of the visit, the children were so enthusiastic that they talked about nothing else. Again, after a few days, my youngest told me he wanted to build an archaeological excavation in his grandmother’s garden! </p>
</div>
<div class="readable-text intended-text" id="p10">
<p>The same type of thing should happen with our stories: our audience should still be talking about them after some time. They should be memorable. One way to achieve this, while directly involving our audience, is by eliciting <em>emotions</em>. Emotions are central to perceiving, interpreting, and remembering visual information. Emotions bridge the gap between raw data and human comprehension. Visual stimuli trigger emotional responses, influencing our perception and engagement with what we see. The <em>Collins Dictionary</em> (<a href="https://mng.bz/9dZl">https://mng.bz/9dZl</a>) defines an emotion as “a feeling such as happiness, love, fear, anger, or hatred, which can be caused by the situation that you are in or the people you are with.”</p>
</div>
<div class="readable-text intended-text" id="p11">
<p>Emotions play a crucial role in the effectiveness of visual communication. The visual context, including colors, shapes, and layout, can evoke specific emotional responses in the audience. For instance, warm colors like red and orange might evoke feelings of excitement or urgency, while cooler tones like blue and green can convey calmness or trust. Intentionally using these emotional cues in visual elements can significantly impact how information is perceived and retained by the audience. </p>
</div>
<div class="readable-text intended-text" id="p12">
<p>In their book, <em>Communicate to Influence: How to Inspire Your Audience to Action</em>, Ben and Kelly Decker explain that we can understand emotions through the dual dimensions of energy and mood, which help categorize various emotional states based on the level of positivity or negativity of the emotion, as shown in figure 8.1 (Decker, 2015).<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p13">
<img alt="figure" height="741" src="../Images/8-1.png" width="1100"/>
<h5 class="figure-container-h5"><span class="num-string">Figure 8.1</span> Macro categories for emotion classification</h5>
</div>
<div class="readable-text" id="p14">
<p>Emotions can vary widely along these dimensions, and individuals may experience and express emotions in unique ways, influenced by their personal and cultural backgrounds.</p>
</div>
<div class="readable-text intended-text" id="p15">
<p>Considering the energy axis (x-axis), we have two types of emotions:</p>
</div>
<ul>
<li class="readable-text" id="p16"> <em>High-energy emotions</em>—These are often associated with heightened physiological arousal. They typically involve activating the body’s “fight-or-flight” response. Examples of high-energy emotions include excitement, anger, and fear. These emotions are characterized by increased heart rate, heightened alertness, and a sense of urgency. High-energy emotions are often expressed through animated body language, enthusiastic gestures, and rapid speech. </li>
<li class="readable-text" id="p17"> <em>Low-energy emotions</em>—These involve reduced physiological arousal and are characterized by a sense of calm and relaxation. Examples of low-energy emotions include contentment, tranquility, and sadness. People experiencing low-energy emotions may exhibit slower movements, a quieter demeanor, and reduced physical tension. Low-energy emotions often lead to contemplation and introspection. </li>
</ul>
<div class="readable-text" id="p18">
<p>Considering the mood axis (y-axis), we have two types of emotions:</p>
</div>
<ul>
<li class="readable-text" id="p19"> <em>High-mood emotions</em>—These are associated with positive valence, which evokes happiness, joy, and positivity. These emotions create an optimistic mood and often lead to smiles, laughter, and general well being. Examples include happiness, excitement, and love. </li>
<li class="readable-text" id="p20"> <em>Low-mood emotions</em>—These are characterized by negative valence, leading to feelings of sadness, anger, or anxiety. These emotions create a more somber mood. Low-mood emotions may result in expressions of sadness, frowns, and a general sense of distress. Examples include sadness, fear, and anger. </li>
</ul>
<div class="readable-text" id="p21">
<p>We can combine mood and energy to generate different emotions, as shown by the emoticons in figure 8.1. </p>
</div>
<div class="readable-text intended-text" id="p22">
<p>When choosing colors, you should also consider making your content accessible and understandable to people with disabilities. For more details, refer to the Web Content Accessibility Guidelines (WCAG, <a href="https://wcag.com/">https://wcag.com/</a>) website and WebAIM (<a href="https://webaim.org/articles/contrast/">https://webaim.org/articles/contrast/</a>).</p>
</div>
<div class="readable-text intended-text" id="p23">
<p>Incorporating emotions in data stories is not a mere aesthetic choice but <em>a strategic approach to conveying knowledge</em>. By aligning emotions with the intended message, we can transform the audience’s passive reception of information into an active quest for knowledge and understanding. For example, high-energy emotions can capture immediate attention and incite curiosity, driving the viewer to explore the visual content more deeply. Conversely, low-energy emotions can encourage reflection, allowing the audience to contemplate the content more profoundly.</p>
</div>
<div class="readable-text intended-text" id="p24">
<p>The quickest and most effective way to arouse emotions is through <em>sight</em>. Just as my children at the Natural History Museum were impressed by what they saw, our audience should be impressed by what they see in our visual representations. There are different ways to capture the audience’s attention through sight, such as chart colors, size, interactivity, and images. There are tons of books and resources dealing with all these types of sights; thus, this book will give only a general overview of them with a focus on how to configure them in Altair. You can refer to the bibliography for more details. In addition, this chapter will focus on how to use generative AI, specifically DALL-E, to generate images with specific emotions. Let’s start with a general overview of colors and how to implement them in Altair.</p>
</div>
<div class="readable-text" id="p25">
<h2 class="readable-text-h2"><span class="num-string">8.2</span> Color</h2>
</div>
<div class="readable-text" id="p26">
<p>Color helps communicate a message by setting the scene and the tone. It creates an emotional connection between the data and the audience. Color comprises three main components:</p>
</div>
<ul>
<li class="readable-text" id="p27"> <em>Hue</em>—This refers to the dominant color wavelength. It identifies color family or color name (such as red, green, or purple). </li>
<li class="readable-text" id="p28"> <em>Saturation</em>—This component describes the intensity of that color. It defines how pure a color is. </li>
<li class="readable-text" id="p29"> <em>Brightness</em>—This measures how light or dark a color appears. </li>
</ul>
<div class="readable-text" id="p30">
<p>In the previous chapters, we saw that every data story has a main character and an adversary. When drawing a chart, choose a primary color to highlight your main character, and always use it when referring to them. Use an alternative color for your adversary, but if you want to move the adversary to the background, use a gray tonality for them. You can choose colors using one of the following palettes (see the e-book for full-color pictures):</p>
</div>
<ul>
<li class="readable-text" id="p31"> <em>Sequential color palettes organize quantitative data from high to low using a single color in various gradients or saturations.</em> Use this palette to show a progression rather than a contrast (figure 8.2).<span class="aframe-location"/> </li>
</ul>
<div class="browsable-container figure-container" id="p32">
<img alt="figure" height="194" src="../Images/8-2.png" width="980"/>
<h5 class="figure-container-h5"><span class="num-string">Figure 8.2</span> A sequential color palette</h5>
</div>
<ul>
<li class="readable-text" id="p33"> <em>Diverging color palettes highlight the ranges of quantitative data by using two contrasting hues on the extremes and a lighter-tinted mixture to highlight the middle range</em>. A diverging palette shows where data are on a spectrum, such as cold to hot (figure 8.3). Cold could represent lower quantitative data values, typically depicted with a cooler hue, while hot could refer to higher values, often represented with a warmer hue.<span class="aframe-location"/> </li>
</ul>
<div class="browsable-container figure-container" id="p34">
<img alt="figure" height="189" src="../Images/8-3.png" width="968"/>
<h5 class="figure-container-h5"><span class="num-string">Figure 8.3</span> A diverging color palette</h5>
</div>
<ul>
<li class="readable-text" id="p35"> <em>Qualitative color palettes</em> <em>highlight qualitative categories.</em> This palette type uses a different hue for each concept (figure 8.4).<span class="aframe-location"/> </li>
</ul>
<div class="browsable-container figure-container" id="p36">
<img alt="figure" height="222" src="../Images/8-4.png" width="905"/>
<h5 class="figure-container-h5"><span class="num-string">Figure 8.4</span> A qualitative color palette</h5>
</div>
<div class="readable-text" id="p37">
<p>You can use colors to focus attention and highlight important information the chart wants to show. In addition, you can use color to create associations, such as brown or green for nature and shades of yellow for sunshine or bees. You can even use colors to evoke emotions, such as red for energy and blue for peace. Do not use overlapping colors to represent different concepts or too many colors.</p>
</div>
<div class="callout-container sidebar-container">
<div class="readable-text" id="p38">
<h5 class="callout-container-h5 readable-text-h5">Challenge</h5>
</div>
<div class="readable-text" id="p39">
<p>Consider the chapter 5 case study on the topic of homelessness. We used a tonality of green to color bars in our chart, which should evoke hope in the audience. The objective of the color was to demonstrate that our project would help solve the homeless problem. What happens if we use another color, such as #6F4E37 (coffee)? The message transmitted will probably be less intense than if green is used.</p>
</div>
</div>
<div class="readable-text" id="p40">
<h3 class="readable-text-h3"><span class="num-string">8.2.1</span> Setting colors in Altair</h3>
</div>
<div class="readable-text" id="p41">
<p>In the previous chapters, we have seen how to set colors in Altair using the color channel. In this section, we will provide more details. The following listing shows a quick reminder of how to use colors in Altair.</p>
</div>
<div class="browsable-container listing-container" id="p42">
<h5 class="listing-container-h5 browsable-container-h5"><span class="num-string">Listing 8.1</span> Setting colors in Altair</h5>
<div class="code-area-container code-area-with-html">
<pre class="code-area">import pandas as pd
import altair as alt

df = pd.DataFrame({
    'Category' : ['A', 'A', 'B', 'B', 'C', 'C', 'C'],
    'Cost' : [12,45,64,23,45,78,72],
    'Sales' : [34,56,45,34,44,23,23],
    'Product' : ['P1','P2','P3','P4','P5','P6','P7']
})

chart = alt.Chart(df).mark_bar().encode(
        x=alt.X('Product:N'),
        y=alt.Y('Cost:Q'),
<strong>        color=alt.Color('Category:N')</strong>
    )

chart.save('chart.xhtml')</pre>
</div>
</div>
<div class="readable-text print-book-callout" id="p43">
<p><span class="print-book-callout-head">Note</span>  Use the <code>alt.Color()</code> channel to set the color.</p>
</div>
<div class="readable-text" id="p44">
<p>The color channel may receive a specific color palette using the <code>scheme</code> parameter as input. Refer to the Altair documentation (<a href="https://vega.github.io/vega/docs/schemes/">https://vega.github.io/vega/docs/schemes/</a>) for the supported palettes. In addition, you can use the scale parameter to specify the range and the domain of your colors:</p>
</div>
<ul>
<li class="readable-text" id="p45"> <em>The range parameter specifies the output range of the scale.</em> For example, when mapping a quantitative variable to color, use a color scale ranging from blue to red. Specify the range as a list of colors or as one of Altair’s built-in color schemes. </li>
<li class="readable-text" id="p46"> <em>The domain parameter specifies the input domain of the scale.</em> For example, if you have a quantitative variable with values between 0 and 100, set the domain of a color scale to <code>[0,</code> <code>100]</code>. </li>
</ul>
<div class="readable-text" id="p47">
<h3 class="readable-text-h3"><span class="num-string">8.2.2</span> Exercise: Setting colors</h3>
</div>
<div class="readable-text" id="p48">
<p>Consider the chapter 3 case study on the population in North America over the last 50 years. You can find the complete code of this case study in the GitHub repository for the book under CaseStudies/population/population.ipynb. The final data story compared the population in North America with that in the rest of the world and showed a gap of 367 million people. We used a tonality of green to represent the North American trend line.</p>
</div>
<div class="readable-text intended-text" id="p49">
<p>Now, take the following steps:</p>
</div>
<ol>
<li class="readable-text" id="p50"> Change the color of the main chart (i.e., the chart showing the difference from 1960) to #963232 (a tonality of red), while keeping the green tonality in the next step chart (i.e., the chart entitled Strategies for Population Growth in North America). </li>
<li class="readable-text" id="p51"> Compare the obtained results with the chart implemented in chapter 3. Did the use of different colors change the message in any way? You will probably notice a negative emphasis on the fact that population growth in North America is slower than in the rest of the world. However, the next steps still remain optimistic. </li>
</ol>
<div class="readable-text" id="p52">
<h4 class="readable-text-h4">A possible solution</h4>
</div>
<div class="readable-text" id="p53">
<p>There are different ways to obtain the same result. A possible solution is to set the colors locally for each chart. For example, you can set the colors for the next step charts.</p>
</div>
<div class="browsable-container listing-container" id="p54">
<h5 class="listing-container-h5 browsable-container-h5"><span class="num-string">Listing 8.2</span> Setting colors in the next step chart</h5>
<div class="code-area-container">
<pre class="code-area">color='#80C11E'

df_cta = pd.DataFrame({
    'Strategy': ['Immigration Development', 'Enhance Family-Friendly Policies', 'Revitalize Rural Areas'],
    'Population Increase': [20, 30, 15]  # Sample population increase percentages
})
# Creating the stacked column chart
cta = alt.Chart(df_cta).mark_bar(color=color).encode(
    x='Population Increase:Q',
    y=alt.Y('Strategy:N', sort='-x', title=None),
    tooltip=['Strategy', 'Population Increase'],    
).properties(
   title=alt.TitleParams(
       text='Strategies for population growth in North America',
       color=color)
)</pre>
</div>
</div>
<div class="readable-text print-book-callout" id="p55">
<p><span class="print-book-callout-head">Note</span>  Add a local color to a chart. Using this method, when you configure all the layered charts, this chart will not be affected by the global configuration.</p>
</div>
<div class="readable-text" id="p56">
<p>This example shows a basic example of conveying emotions using colors. For more details, refer to specific books about the topic, such as those in the references section at the end of the chapter. Now that you have learned the basic concepts of conveying emotions using colors, let’s move on to the next step: using size.</p>
</div>
<div class="readable-text" id="p57">
<h2 class="readable-text-h2"><span class="num-string">8.3</span> Size</h2>
</div>
<div class="readable-text" id="p58">
<p>When creating a chart, consider the <em>size</em>, as it can significantly affect how the audience perceives your data. Size impacts your visual representation’s readability as well as overall impact and effectiveness. Choosing an appropriate size for your chart depends on multiple factors, such as where you will display it, what kind of content you want to show, and who will view it. The best way to determine the correct size is through experimentation; try different sizes until you land on one that looks good enough.</p>
</div>
<div class="readable-text intended-text" id="p59">
<p>Moreover, choosing a smaller or larger-sized chart affects how much information can fit into one frame without cluttering or squishing text together. It also influences how easily readers can read all data points without straining their eyes or getting lost in too many elements. You can configure two main types of sizes in a chart: font size and chart size.</p>
</div>
<div class="readable-text" id="p60">
<h3 class="readable-text-h3"><span class="num-string">8.3.1</span> Font size</h3>
</div>
<div class="readable-text" id="p61">
<p><em>Font size</em> directly affects the readability and comprehensibility of the data. The font size should be set to make it easy for the reader to understand and interpret the information presented in the chart.</p>
</div>
<div class="readable-text intended-text" id="p62">
<p>When setting up a chart, you can specify different font sizes for different chart components, like titles, axis labels, or tick labels. A good practice is to keep them consistent throughout your plot so that they look visually appealing and organized.</p>
</div>
<div class="readable-text intended-text" id="p63">
<p>By default, Altair sets the font size to 12 px. However, you can adjust the font size to make your charts more legible or to match the style.</p>
</div>
<div class="readable-text intended-text" id="p64">
<p>To change the font size in Altair, identify which part of your visualization you want to modify. Once identified, use Altair’s <code>configure_*()</code> method along with the <code>axis</code>, <code>title</code>, <code>text</code>, or <code>legend</code> property, depending on what component you want to modify. You can then pass parameters like <code>fontSize</code> or <code>labelFontSize</code> along with their desired value.</p>
</div>
<div class="readable-text intended-text" id="p65">
<p>It is essential not to go overboard with increasing font sizes, as larger fonts might lead to cluttered plots that are hard on the eyes. On the other hand, smaller fonts may result in difficult-to-read charts. So always pick a reasonable font size that complements your charts well without negatively affecting readability.</p>
</div>
<div class="readable-text" id="p66">
<h3 class="readable-text-h3"><span class="num-string">8.3.2</span> Chart size</h3>
</div>
<div class="readable-text" id="p67">
<p>The final aspect to consider when setting the size of your Altair chart is the actual chart size. You can adjust this using the width and height arguments in your property. Both arguments are expressed in pixels.</p>
</div>
<div class="readable-text intended-text" id="p68">
<p>There is no one-size-fits-all approach when determining the appropriate chart size. It will depend on factors such as where you plan on displaying the chart, what type of data it represents, and how much detail you want to include.</p>
</div>
<div class="readable-text intended-text" id="p69">
<p>However, you can follow these general guidelines:</p>
</div>
<ul>
<li class="readable-text" id="p70"> If you want to create a simple chart to include in an email or presentation slide, use a smaller size. </li>
<li class="readable-text" id="p71"> If you want to create a complex chart, use a larger size. </li>
</ul>
<div class="readable-text" id="p72">
<p>To set the chart size in Altair, use one of the following:</p>
</div>
<ul>
<li class="readable-text" id="p73"> <code>properties(width=my_width,</code> <code>height=my_height)</code> for single charts </li>
<li class="readable-text" id="p74"> <code>configure_view(width=my_width,</code> <code>height=my_height)</code> for single or compound charts. </li>
</ul>
<div class="readable-text" id="p75">
<h3 class="readable-text-h3"><span class="num-string">8.3.3</span> Exercise: Setting size</h3>
</div>
<div class="readable-text" id="p76">
<p>Consider the case study implemented in chapter 1—Increase the Advertising Campaign on Dog-Related Websites (<a href="https://mng.bz/KZaK">https://mng.bz/KZaK</a>):</p>
</div>
<ol>
<li class="readable-text" id="p77"> Change the size of the x-axis label only for the value 9, as shown in figure 8.5. </li>
<li class="readable-text" id="p78"> Compare the obtained result with the original chart. Is the chart clearer?<span class="aframe-location"/> </li>
</ol>
<div class="browsable-container figure-container" id="p79">
<img alt="figure" height="321" src="../Images/8-5.png" width="1100"/>
<h5 class="figure-container-h5"><span class="num-string">Figure 8.5</span> The case study from chapter 1 with increased font size for the value 9</h5>
</div>
<div class="readable-text" id="p80">
<h4 class="readable-text-h4">Solution</h4>
</div>
<div class="readable-text" id="p81">
<p>The following listing shows how to encode the <code>x</code> channel to increase the font size for just one axis label.</p>
</div>
<div class="browsable-container listing-container" id="p82">
<h5 class="listing-container-h5 browsable-container-h5"><span class="num-string">Listing 8.3</span> Setting label size</h5>
<div class="code-area-container code-area-with-html">
<pre class="code-area">x=alt.X('x:Q', 
        scale=alt.Scale(domain=[0, 10]),
        axis=alt.Axis(tickMinStep = 1,
            grid=False, 
            title=None, 
            orient='bottom',
<strong>            labelFontSize=alt.condition(alt.datum.value == 9, </strong>
<strong>                alt.value(25),</strong>
<strong>                alt.value(12)))</strong>
        ),</pre>
</div>
</div>
<div class="readable-text print-book-callout" id="p83">
<p><span class="print-book-callout-head">Note</span>  Use the <code>alt.condition()</code> method to set the label size based on a condition.</p>
</div>
<div class="readable-text" id="p84">
<p>Now that you have learned how to configure size in Altair, let’s move on to the next step: interactivity.</p>
</div>
<div class="readable-text" id="p85">
<h2 class="readable-text-h2"><span class="num-string">8.4</span> Interaction</h2>
</div>
<div class="readable-text" id="p86">
<p>So far, we have implemented static charts that present a static story to the audience. The benefit of this chart type is that you decide the story and guide the audience through it. In other words, you don’t allow the audience to explore data autonomously.</p>
</div>
<div class="readable-text intended-text" id="p87">
<p>Adding interactive elements to a chart, such as buttons, menus, and zoom options, transforms a static chart into a dynamic one. With a dynamic chart, you build dynamic data stories, where the audience builds their own story. With a dynamic chart, you lose control over the audience and the possibility of having a focused and precise message. The audience is free to explore data and extract their insights, potentially leading to other calls to action. For this reason, it’s important to design in advance which parts of the charts you want to make browsable by the audience based on the message to communicate.</p>
</div>
<div class="readable-text intended-text" id="p88">
<p>Use interactive charts when you want the audience to explore data dynamically or when dealing with large datasets. For example, for financial data or in an educational context, an interactive chart allows the audience to zoom in on specific timeframes or hover over data points for details. Conversely, you may prefer static charts for simple presentations or reports where the data doesn’t require exploration. For instance, a static chart could be ideal for a printed annual report that presents trends or comparisons and doesn’t require user interaction. Additionally, in situations where the message needs to be straightforward and consistent, static charts may be more effective.</p>
</div>
<div class="readable-text intended-text" id="p89">
<p>Consider, for example, the variant of the scenario described in chapter 3. The chart contains a drop-down menu enabling you to select the reference country to show in the chart. This chart type is okay for a data exploratory phase, but it won’t work to build a data story simply because it has no focus. Instead, if you focus on North America and leave the audience the possibility to compare it with another country, you are still telling the story about the population in North America while giving the audience the freedom to compare it with other countries.</p>
</div>
<div class="readable-text intended-text" id="p90">
<p>There are two main types of interactivity:</p>
</div>
<ul>
<li class="readable-text" id="p91"> <em>Passive interactivity</em>—This refers to features that allow the audience to interact with the chart without changing its state, such as tooltips or hover effects. </li>
<li class="readable-text" id="p92"> <em>Active interactivity</em>—This involves changing the chart’s state in response to user input. </li>
</ul>
<div class="readable-text" id="p93">
<p>In the remainder of this section, we will see how to add a tooltip, a slider, and a dropdown menu to an Altair chart.</p>
</div>
<div class="readable-text" id="p94">
<h3 class="readable-text-h3"><span class="num-string">8.4.1</span> Tooltip</h3>
</div>
<div class="readable-text" id="p95">
<p>A <em>tooltip</em> is a tiny pop-up box that appears when you hover over certain chart elements, such as data points or bars. To add a tooltip to your Altair chart, specify which element(s) you want it to appear for. In Altair, you can do it through the tooltip encoding channel using square braces <code>[]</code>, as shown in the following listing. The example uses the population dataset of chapter 3, focusing on a completely different insight: the population growth in 2018 by continent.</p>
</div>
<div class="browsable-container listing-container" id="p96">
<h5 class="listing-container-h5 browsable-container-h5"><span class="num-string">Listing 8.4</span> Setting a tooltip</h5>
<div class="code-area-container code-area-with-html">
<pre class="code-area">import pandas as pd
import altair as alt

df = pd.read_csv('data/population.csv')

# [...]

df = df[df['Country Name'].isin(continents)]

color = '#80C11E'

chart = alt.Chart(df).mark_bar(
    color=color
).encode(
        y=alt.Y('Country Name:O', sort='-x', title=''),
        x=alt.X('Population:Q'),
<strong>        tooltip=['Country Name', 'Population']</strong>
).transform_filter(
    alt.datum.Year == 2018
) <span class="aframe-location"/> #1

# [...]

chart.save('tooltip.xhtml')</pre>
<div class="code-annotations-overlay-container">
     #1 Creates visualization
     <br/>
</div>
</div>
</div>
<div class="readable-text print-book-callout" id="p97">
<p><span class="print-book-callout-head">Note</span>  Use the <code>tooltip</code> channel to set a tooltip in Altair.</p>
</div>
<div class="readable-text" id="p98">
<p>You can find the complete code of the example in the GitHub repository for the book under 08/tooltip.py. Figure 8.6 shows a snapshot of a tooltip produced when hovering over a bar. Now that you have learned how to generate a tooltip in Altair, let’s move on to the next interactive element: the slider.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p99">
<img alt="figure" height="540" src="../Images/8-6.png" width="1100"/>
<h5 class="figure-container-h5"><span class="num-string">Figure 8.6</span> An example of a tooltip</h5>
</div>
<div class="readable-text" id="p100">
<h3 class="readable-text-h3"><span class="num-string">8.4.2</span> Slider</h3>
</div>
<div class="readable-text" id="p101">
<p>A <em>slider</em> is a graphical element that allows users to input or adjust a value within a specified range by moving a visual indicator along a track or bar. To build a slider in Altair, follow these steps:</p>
</div>
<ol>
<li class="readable-text" id="p102"> Create a <code>binding_range()</code>, an object that defines the range of values to which the slider can be set. </li>
<li class="readable-text" id="p103"> Create a selection using the <code>selection_point()</code> method. The selection is an object that defines how the slider will interact with the chart. </li>
<li class="readable-text" id="p104"> Add the selection to the chart using the <code>add_params()</code> method. </li>
<li class="readable-text" id="p105"> Optionally, apply the <code>transform_filter()</code> method to the chart to show only the selection. </li>
</ol>
<div class="readable-text" id="p106">
<p>Listing 8.5 shows an example of the usage of sliders. The example still uses the population dataset from chapter 3, focusing on the population growth over the years by continent. You can find the complete code in the GitHub repository for the book under 08/slider.py. The listing shows only the relevant code to implement a slider. For more details, read the code in the GitHub repository.</p>
</div>
<div class="browsable-container listing-container" id="p107">
<h5 class="listing-container-h5 browsable-container-h5"><span class="num-string">Listing 8.5</span> Setting a slider</h5>
<div class="code-area-container code-area-with-html">
<pre class="code-area">import pandas as pd
import altair as alt

df = pd.read_csv('data/population.csv')

# [...] 

color = '#80C11E'
slider = alt.<strong>binding_range</strong>(min=1960, max=2021,step=1)

select_year = alt.<strong>selection_point</strong>(name="Select", fields=['Year'],
                                   bind=slider)

chart = alt.Chart(df).mark_bar(
    color=color
).encode(
        y=alt.Y('Country Name:O', sort='-x', title=''),
        x=alt.X('Population:Q'),
).<strong>add_params</strong>(
    select_year
).<strong>transform_filter</strong>(
    select_year
) 

# [...]

chart.save('slider.xhtml')</pre>
</div>
</div>
<div class="readable-text print-book-callout" id="p108">
<p><span class="print-book-callout-head">Note</span>  After importing the required libraries, use the <code>binding_range()</code> function to define a binding range for the slider with a minimum of 1960, maximum of 2021, and step size of 1. Next, use the <code>selection_point()</code> function to create a selection named Select, and specify the field it should bind to (in this case, Year) using the slider. After that, use the <code>add_params()</code> method to add the Select_year selection to the chart and the <code>transform_filter()</code> method to filter the data based on the selected year from the slider. </p>
</div>
<div class="readable-text" id="p109">
<p>Figure 8.7 shows a static representation of the resulting chart. Now that you have learned how to generate a tooltip in Altair, let’s move on to the next interactive element: the dropdown menu.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p110">
<img alt="figure" height="586" src="../Images/8-7.png" width="1100"/>
<h5 class="figure-container-h5"><span class="num-string">Figure 8.7</span> An example of a slider</h5>
</div>
<div class="readable-text" id="p111">
<h3 class="readable-text-h3"><span class="num-string">8.4.3</span> Drop-down menu</h3>
</div>
<div class="readable-text" id="p112">
<p>A <em>drop-down menu</em> is a graphical element that typically appears as a small rectangular box with an arrow or triangle icon, indicating that additional options or choices are available. When a user clicks or hovers over the drop-down menu, a list of selectable items or options “drops down,” or expands, <span class="aframe-location"/>below or above the menu. The user can then choose from the available options by clicking them. To create a drop-down menu in Altair, follow these sequential steps:</p>
</div>
<ol>
<li class="readable-text" id="p113"> Begin by generating a <code>binding_select()</code> object. This object defines the list of values assigned to the drop-down menu. </li>
<li class="readable-text" id="p114"> Create a selection using the <code>selection_point()</code> method. This selection object governs the interaction between the drop-down menu and the chart. </li>
<li class="readable-text" id="p115"> Integrate the selection into the chart using the <code>add_params()</code> method. </li>
<li class="readable-text" id="p116"> Apply the <code>transform_filter()</code> method to display only the selected data. </li>
</ol>
<div class="readable-text" id="p117">
<p>Listing 8.6 shows an example of the usage of a drop-down menu. The example uses the population dataset of chapter 3, focusing on the population growth over the years by continent. The drop-down menu enables you to select a specific continent. You can find the complete code in the GitHub repository for the book under 08/dropdown.py. The following listing shows only the relevant code to implement a slide. For more details, read the code in the GitHub repository.</p>
</div>
<div class="browsable-container listing-container" id="p118">
<h5 class="listing-container-h5 browsable-container-h5"><span class="num-string">Listing 8.6</span> Setting a drop-down menu</h5>
<div class="code-area-container code-area-with-html">
<pre class="code-area">import pandas as pd
import altair as alt

df = pd.read_csv('data/population.csv')

# [...] 
color = '#80C11E'
input_dropdown = alt.<strong>binding_select</strong>(options=df['Country Name'].unique())
select_country = alt.selection_point(name='Select',fields=['Country Name'], bind=input_dropdown, value=[{'Country Name': 'Africa Eastern and Southern'}])


# Create visualization
chart = alt.Chart(df).mark_line(
    color=color
).encode(
        y=alt.Y('Population:Q', title=''),
        x=alt.X('Year:O'),
).add_params(
    select_country
).transform_filter(
    select_country
)

# [...]
chart.save('dropdown.xhtml')</pre>
</div>
</div>
<div class="readable-text print-book-callout" id="p119">
<p><span class="print-book-callout-head">Note</span>  After importing the required libraries, use the <code>binding_select()</code> function to define a binding selection for the drop-down menu. Next, proceed as you do for sliders.</p>
</div>
<div class="readable-text" id="p120">
<p>Figure 8.8 shows a static representation of the resulting chart. <span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p121">
<img alt="figure" height="672" src="../Images/8-8.png" width="1100"/>
<h5 class="figure-container-h5"><span class="num-string">Figure 8.8</span> An example of a drop-down menu</h5>
</div>
<div class="readable-text" id="p122">
<p>Now, it’s time to practice. So let’s proceed with an exercise.</p>
</div>
<div class="readable-text" id="p123">
<h3 class="readable-text-h3"><span class="num-string">8.4.4</span> Exercise: Setting interactivity</h3>
</div>
<div class="readable-text" id="p124">
<p>Consider the case study implemented in chapter 3: Population in North America Over the last 50 Years. You can find the complete code of this case study in the GitHub repository for the book under CaseStudies/population/population.ipynb:</p>
</div>
<ol>
<li class="readable-text" id="p125"> Remove the Others line, and add a dynamic line showing a selectable continent from a drop-down menu, as shown in figure 8.9. Leave the North America line static. </li>
<li class="readable-text" id="p126"> Compare the obtained result with the original chart. For which type of audience is this dynamic graph most suitable? </li>
<li class="readable-text" id="p127"> Optionally, adapt all the graph elements to the animations.<span class="aframe-location"/> </li>
</ol>
<div class="browsable-container figure-container" id="p128">
<img alt="figure" height="806" src="../Images/8-9.png" width="1100"/>
<h5 class="figure-container-h5"><span class="num-string">Figure 8.9</span> The case study of chapter 3 with a dynamic drop-down menu for the continent to compare with North America</h5>
</div>
<div class="readable-text" id="p129">
<p>You can find the solution to the exercise in the GitHub repository for the book under 08/population-exercise.py. Now that you have learned how to introduce interactivity in Altair through tooltips, sliders, and drop-down menus, let’s move to the next element, images, focusing on DALL-E.</p>
</div>
<div class="readable-text" id="p130">
<h2 class="readable-text-h2"><span class="num-string">8.5</span> Using DALL-E for images</h2>
</div>
<div class="readable-text" id="p131">
<p>Imagine reading a text that describes the following scene: <em>a beautiful little girl with black hair and dark eyes, wearing a yellow dress, running in a green meadow full of yellow flowers</em>. You can use your creativity to set up the scene in your mind, but this could require a little effort from your brain. Now, look at figure 8.10 (realized with DALL-E), showing the same scene visually. You see exactly what we described before, but surely, you depicted the scene differently in your mind. <span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p132">
<img alt="figure" height="900" src="../Images/8-10.png" width="900"/>
<h5 class="figure-container-h5"><span class="num-string">Figure 8.10</span> An image of a little girl wearing a yellow dress</h5>
</div>
<div class="readable-text" id="p133">
<p>The same situation occurs when you describe the subject of your data story. If you don’t give a face to your subject and give only a general description, your audience is free to imagine the subject in various ways, depending on their background. Instead, if you add one or more images to your data story, you help the audience have a clear representation of the story’s subject. You will bring the audience up to the intended emotional level through images, especially photos, and they will be more open to listening to your data story. Adding images to a data story reinforces the context and prepares the audience to accept the data story message.</p>
</div>
<div class="readable-text intended-text" id="p134">
<p>In chapter 4, you learned how to draw images in DALL-E and insert them into a chart. In this section, you’ll see how to use DALL-E-generated images to evoke emotions. We’ll also look at how to maintain consistency in the images we’re generating in DALL-E. Let’s start with emotions.</p>
</div>
<div class="readable-text" id="p135">
<h3 class="readable-text-h3"><span class="num-string">8.5.1</span> Adding emotions</h3>
</div>
<div class="readable-text" id="p136">
<p>The DALL-E book of prompts suggests some keywords to add emotions to images. Figure 8.1 shows some possible adjectives associated with each emotion category:</p>
</div>
<ul>
<li class="readable-text" id="p137"> <em>High energy, positive mood</em>—Bright, vibrant, dynamic, spirited </li>
<li class="readable-text" id="p138"> <em>High energy, negative mood</em>—Dark, threatening, haunting, foreboding </li>
<li class="readable-text" id="p139"> <em>Low energy, positive mood</em>—Light, peaceful, calm, serene </li>
<li class="readable-text" id="p140"> <em>Low energy, negative mood</em>—Muted, bleak, funereal, somber </li>
</ul>
<div class="readable-text" id="p141">
<p>You can read the complete list of keywords in the DALL-E book of prompts (<span class="link-like"/>https:// mng.bz/0GNx).</p>
</div>
<div class="readable-text intended-text" id="p142">
<p>Using emotional keywords enables you to obtain different results. Figure 8.11 shows a possible output produced by DALL-E for the following input: <em>a calm woman, playing in a garden, photograph.</em> <span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p143">
<img alt="figure" height="263" src="../Images/8-11.png" width="1100"/>
<h5 class="figure-container-h5"><span class="num-string">Figure 8.11</span> An image of a calm woman in a garden</h5>
</div>
<div class="readable-text" id="p144">
<p>Figure 8.12 shows a totally divergent result, produced by simply changing the keyword <em>calm</em> to <em>muted</em>. <span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p145">
<img alt="figure" height="262" src="../Images/8-12.png" width="1100"/>
<h5 class="figure-container-h5"><span class="num-string">Figure 8.12</span> An image of a muted woman in a garden</h5>
</div>
<div class="readable-text" id="p146">
<p>Incorporating this type of image into a data story helps the audience give your main character a face. The main character of your story can communicate directly with the audience through their emotions and expressiveness. Now that you have learned how to add emotion to images generated by DALL-E, let’s move on to the next step: generating consistent images.</p>
</div>
<div class="readable-text" id="p147">
<h3 class="readable-text-h3"><span class="num-string">8.5.2</span> Generating consistent images</h3>
</div>
<div class="readable-text" id="p148">
<p>Consistent images are a set of images sharing common characteristics, such as colors, style, and so on. It is important to build consistent images when you want to add more than one image to your data story. At the time of writing this book, DALL-E does not provide any explicit way to build consistent strategies. However, in this section, you will see a trick proposed by Tyler Taggart in his YouTube video (Taggart, 2023) to build consistent images in DALL-E. To do it, we will use the Editor tool, provided by DALL-E and introduced in chapter 4.</p>
</div>
<div class="readable-text intended-text" id="p149">
<p>To show how the proposed strategy works, we will redraw the images related to rowing and cycling used in the chapter 4 case study: Unlock the Potential: Invest in Rowing and Cycling for Maximum Returns! The idea is to insert real photos in the data story, tailored to executives to capture their attention better. </p>
</div>
<div class="readable-text intended-text" id="p150">
<p>Start by writing the following prompt in DALL-E: <em>a photo showing the effort of a rowing athlete. Show off the sweat and muscles. The athlete wears a green jacket</em>. Figure 8.13 shows a possible output produced by DALL-E.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p151">
<img alt="figure" height="262" src="../Images/8-13.png" width="1100"/>
<h5 class="figure-container-h5"><span class="num-string">Figure 8.13</span> A possible output produced by DALL-E</h5>
</div>
<div class="readable-text" id="p152">
<p>Select a photo among the four available, and click Edit. Now, click Add a Generation Frame, and insert it near the image, as shown in figure 8.14.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p153">
<img alt="figure" height="711" src="../Images/8-14.png" width="1100"/>
<h5 class="figure-container-h5"><span class="num-string">Figure 8.14</span> Where to put the generation frame</h5>
</div>
<div class="readable-text intended-text" id="p154">
<p>Now, edit your prompt as follows: <em>a photo showing the effort of a cycling athlete. Show off the sweat and muscles. The athlete wears a green jacket</em>. You have simply changed the word <em>rowing</em> to <em>cycling</em>. DALL-E will generate four images. Select the one that best fits your requirements, or generate new images. Figure 8.15 shows a possible output. The two parts of the photos (left and right) are very similar. For example, they use the same green tonality.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p155">
<img alt="figure" height="542" src="../Images/8-15.png" width="1050"/>
<h5 class="figure-container-h5"><span class="num-string">Figure 8.15</span> The output produced by DALL-E</h5>
</div>
<div class="readable-text intended-text" id="p156">
<p>As you can see, the two photos are linked to each other. The result looks a bit strange, but you can split them (producing two normal-looking photos) by downloading them and using any image editing tool. </p>
</div>
<div class="readable-text" id="p157">
<p>Now that you have obtained photos of the two best-performing sports, you can replace them in the chart from the case study in chapter 4, as shown in figure 8.16. We have also added the subtitle produced with fine-tuning to the chart. The photos in the story highlight the effort made by the athletes to achieve their records, thus inviting the executives to continue financing them.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p158">
<img alt="figure" height="668" src="../Images/8-16.png" width="1100"/>
<h5 class="figure-container-h5"><span class="num-string">Figure 8.16</span> The final chart tailored to an audience of executives</h5>
</div>
<div class="readable-text intended-text" id="p159">
<p>Now, it’s time to practice. Let’s move on to an exercise.</p>
</div>
<div class="readable-text" id="p160">
<h3 class="readable-text-h3"><span class="num-string">8.5.3</span> Exercise: Generating images</h3>
</div>
<div class="readable-text" id="p161">
<p>Consider the case study in chapter 1: Increase the Advertising Campaign on Dog-Related Websites:</p>
</div>
<ul>
<li class="readable-text" id="p162"> Generate two consistent images for a dog and a cat, and replace the original ones in the chart with the generated images. </li>
<li class="readable-text" id="p163"> Generate a new image for a dog (or a cat) with a specific emotion (e.g. angry, calm, relaxed). Is DALL-E able to generate emotional images for animals? </li>
</ul>
<div class="readable-text" id="p164">
<p>We have just completed our journey toward using DALL-E to generate images for data stories. As a last step in this chapter, we will consider tips on positioning your chart in your data story.</p>
</div>
<div class="readable-text" id="p165">
<h2 class="readable-text-h2"><span class="num-string">8.6</span> Strategic placement of context</h2>
</div>
<div class="readable-text" id="p166">
<p>Context should precede the main point of your data story. For this reason, I suggest you place your context in one of the following three main positions in your data visualization chart: on the top, on the left, or within the chart. In the remainder of this section, we will investigate each context position separately. As an example of using each context position, we will focus on the case studies described in chapters 1 through 5. For convenience, figure 8.17 summarizes the case studies analyzed.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p167">
<img alt="figure" height="609" src="../Images/8-17.png" width="1100"/>
<h5 class="figure-container-h5"><span class="num-string">Figure 8.17</span> A summary of all the examples described in chapters 1 through 5</h5>
</div>
<div class="readable-text" id="p168">
<h3 class="readable-text-h3"><span class="num-string">8.6.1</span> Top placement</h3>
</div>
<div class="readable-text" id="p169">
<p>Adding context at the top of a chart means adding a textual description immediately under the title, as shown in figure 8.18. <span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p170">
<img alt="figure" height="679" src="../Images/8-18.png" width="1054"/>
<h5 class="figure-container-h5"><span class="num-string">Figure 8.18</span> The context position at the top of the chart</h5>
</div>
<div class="readable-text" id="p171">
<p>Use the top of the chart to describe an overview of the topic or data sources. You can also use the top part of the chart to add the data source. Adding data sources means acknowledging the source of information used in a chart. This gives credibility to the information presented. When the audience sees that we have correctly credited the data source, they are more likely to trust the information presented.</p>
</div>
<div class="readable-text intended-text" id="p172">
<p>Consider the case studies in figure 8.17. Table 8.1 shows the case studies using the top context and the type of context used.</p>
</div>
<div class="browsable-container browsable-table-container framemaker-table-container" id="p173">
<h5 class="browsable-container-h5"><span class="num-string">Table 8.1</span> Case studies using the top context position</h5>
<table>
<thead>
<tr>
<th>
<div>
         Name 
       </div></th>
<th>
<div>
         Type of 
       </div>
<div>
         Top Context 
       </div></th>
<th>
<div>
         Text 
       </div></th>
</tr>
</thead>
<tbody>
<tr>
<td> <em>Chapter 3:</em> Population in North America Over the Last 50 Years <br/></td>
<td>  Data source <br/></td>
<td>  Source: World Bank <br/></td>
</tr>
<tr>
<td> <em>Chapter 5—Example 1:</em> Together, Let’s Make a Difference: Support Our Project to Help the Homeless <br/></td>
<td>  Textual description <br/></td>
<td>  Homelessness is a heartbreaking reality that leaves individuals and families without a stable home, leading to devastating consequences, such as poor health and social isolation. <br/></td>
</tr>
<tr>
<td> <em>Chapter 5—Example 2:</em> Your Truth Guardian: Take a Stand Against Fake News in Material and Moral Narratives <br/></td>
<td>  Textual description <br/></td>
<td>  The LatestNews website is a popular source of news and information, but it is also a source of fake news. <br/></td>
</tr>
</tbody>
</table>
</div>
<div class="readable-text" id="p174">
<h3 class="readable-text-h3"><span class="num-string">8.6.2</span> Left placement</h3>
</div>
<div class="readable-text" id="p175">
<p>Adding context on the left of a chart involves adding one or more annotations immediately before the title, as shown in figure 8.19. <span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p176">
<img alt="figure" height="496" src="../Images/8-19.png" width="1100"/>
<h5 class="figure-container-h5"><span class="num-string">Figure 8.19</span> The context position on the left of the chart</h5>
</div>
<div class="readable-text" id="p177">
<p>Use the left part of the chart to add preliminary charts or deeper details, such as textual descriptions, images, or photos that affect audiences’ emotions. Consider again the case studies in figure 8.17. Table 8.2 shows the case studies using left context and showing the type of context used.</p>
</div>
<div class="browsable-container browsable-table-container framemaker-table-container" id="p178">
<h5 class="browsable-container-h5"><span class="num-string">Table 8.2</span> Case studies using the left context position</h5>
<table>
<thead>
<tr>
<th>
<div>
         Name 
       </div></th>
<th>
<div>
         Type of 
       </div>
<div>
         Left Context 
       </div></th>
<th>
<div>
         Text 
       </div></th>
</tr>
</thead>
<tbody>
<tr>
<td> <em>Chapter 1</em>: Increase the Advertising Campaign on Dog-Related Websites <br/></td>
<td>  Textual description <br/></td>
<td>  The cat participation rate is almost 8% over 150 sites advertised, while the dog participation rate is almost 5% over 30 sites advertised. <br/></td>
</tr>
<tr>
<td> <em>Chapter 2</em>: Yes, You Can Build a New Swimming Pool! <br/></td>
<td>  Secondary chart <br/>  Textual description <br/></td>
<td>  Thanks to the introduction of low-cost flights, Portugal has experienced an increase in tourist arrivals of over 200% in 25 years, even surpassing the increase in the other countries. <br/></td>
</tr>
<tr>
<td> <em>Chapter 3</em>: Population in North America Over the Last 50 Years <br/></td>
<td>  Textual description <br/></td>
<td>  Why this gap? <br/>  1. Lower fertility rate <br/>  2. Lower immigration rate <br/>  3. Higher average age <br/></td>
</tr>
<tr>
<td> <em>Chapter 5—Example 1</em>: Together, Let’s Make a Difference: Support Our Project to Help the Homeless <br/></td>
<td>  Images <br/></td>
<td>  – <br/></td>
</tr>
</tbody>
</table>
</div>
<div class="readable-text" id="p179">
<p>Compared to that written in the top position, the text in the left position contains additional details, sometimes extracted from other sources.</p>
</div>
<div class="readable-text" id="p180">
<h3 class="readable-text-h3"><span class="num-string">8.6.3</span> Within placement</h3>
</div>
<div class="readable-text" id="p181">
<p>Context within a chart highlights some interesting points or parts through chart annotations, as shown in figure 8.20. <span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p182">
<img alt="figure" height="685" src="../Images/8-20.png" width="1100"/>
<h5 class="figure-container-h5"><span class="num-string">Figure 8.20</span> The context position within the chart</h5>
</div>
<div class="readable-text intended-text" id="p183">
<p>Annotations help the audience to focus on some specific parts of a chart. Examples of annotations include text, circles, baselines, images, and arrows. When using annotations, make sure they are not excessive and do not overlap the chart itself, interfering with its reading.</p>
</div>
<div class="readable-text intended-text" id="p184">
<p>Consider again the case studies in figure 8.17. Table 8.3 shows the case studies using the left context and the type of context used.</p>
</div>
<div class="browsable-container browsable-table-container framemaker-table-container" id="p185">
<h5 class="browsable-container-h5"><span class="num-string">Table 8.3</span> Case studies using the within context position</h5>
<table>
<thead>
<tr>
<th>
<div>
         Name 
       </div></th>
<th>
<div>
         Type of 
       </div>
<div>
         Within Context 
       </div></th>
<th>
<div>
         Text 
       </div></th>
</tr>
</thead>
<tbody>
<tr>
<td> <em>Chapter 1</em>: Increase the Advertising Campaign On Dog-Related Websites <br/></td>
<td>  Image <br/></td>
<td>  – <br/></td>
</tr>
<tr>
<td> <em>Chapter 3</em>: Population in North America Over the Last 50 Years <br/></td>
<td>  Text <br/>  Vertical line <br/></td>
<td>  367M <br/></td>
</tr>
<tr>
<td> <em>Chapter 4</em>: Unlock the Potential: Invest in Rowing and Cycling for Maximum Return <br/></td>
<td>  Text <br/>  Baseline <br/>  Images <br/></td>
<td>  Use 50% as the benchmark for sports selection. <br/></td>
</tr>
<tr>
<td> <em>Chapter 5—Example 2:</em> Your Truth Guardian: Take a Stand Against Fake News in Material and Moral Narratives <br/></td>
<td>  Images <br/>  Text <br/></td>
<td>  Material life <br/>  Moral life <br/>  Spiritual life <br/></td>
</tr>
</tbody>
</table>
</div>
<div class="readable-text intended-text" id="p186">
<p>Compared to that written in the top and left positions, the text within the annotation contains concise text, highlighting data details. Now that you have learned how to add a visual context to your data story, let’s implement a practical case study.</p>
</div>
<div class="readable-text" id="p187">
<h2 class="readable-text-h2"><span class="num-string">8.7</span> Case study: From information to knowledge (part 2)</h2>
</div>
<div class="readable-text" id="p188">
<p>In the previous chapter, we analyzed how to turn information into knowledge through textual context in the aquaculture case study. Just for a quick reminder, the case study involved building a story around the safety problem in salmon aquaculture in the United States. We decided to plot the salmon aquaculture sales trend line versus the other types of aquaculture. As an insight, we discovered that since 1998, there has been an increase in sales, following a period of decrease in sales from 1992 to 1998. We discovered that the decreasing period was partially due to some health problems in the salmon aquaculture. Figure 8.21 shows the chart produced when adding textual context to turn information into knowledge.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p189">
<img alt="figure" height="660" src="../Images/8-21.png" width="1100"/>
<h5 class="figure-container-h5"><span class="num-string">Figure 8.21</span> The chart produced when adding textual context</h5>
</div>
<div class="readable-text" id="p190">
<p>The next step involves adding visual context to the story. We will follow two different scenarios:</p>
</div>
<ul>
<li class="readable-text" id="p191"> Communicating a negative mood, with a focus on the negative years (1992–1998) </li>
<li class="readable-text" id="p192"> Communicating a positive mood, with a focus on the years where the trend is increasing (from 1998). </li>
</ul>
<div class="readable-text" id="p193">
<p>In both cases, we will generate images, set colors, and pick a size related to the specific mood. Let’s start with the first point: communicating a negative mood.</p>
</div>
<div class="readable-text" id="p194">
<h3 class="readable-text-h3"><span class="num-string">8.7.1</span> Setting a negative mood</h3>
</div>
<div class="readable-text" id="p195">
<p>In this scenario, the focus is on the negative years. The aim is to show the dreadfulness of this period to raise awareness among the audience of the urgency of ensuring that it never happens again. We will generate shocking images and use dark colors. </p>
</div>
<div class="readable-text" id="p196">
<h4 class="readable-text-h4">Images</h4>
</div>
<div class="readable-text" id="p197">
<p>Generate shocking images (high energy, negative mood) about salmon. Let’s use DALL-E with the following prompt: <em>a shocking photo of a dead salmon from a disease</em>. Figure 8.22 shows a possible output of images generated by DALL-E.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p198">
<img alt="figure" height="267" src="../Images/8-22.png" width="1100"/>
<h5 class="figure-container-h5"><span class="num-string">Figure 8.22</span> The output produced by DALL-E with the following input: a shocking photo of a dead salmon from a disease</h5>
</div>
<div class="readable-text intended-text" id="p199">
<p>Let’s choose photo number 2 and add it to the chart. Listing 8.7 shows the instructions for Copilot to generate the image in Altair.</p>
</div>
<div class="browsable-container listing-container" id="p200">
<h5 class="listing-container-h5 browsable-container-h5"><span class="num-string">Listing 8.7</span> Instructions for Copilot</h5>
<div class="code-area-container">
<pre class="code-area"># build a DataFrame named img_df with the following columns:
#   - 'url' with the values '../images/deadsalmon.png'
#   - 'x' with the value 1993
#   - 'x2' with the value 1997
#   - 'y' with the value 0 <span class="aframe-location"/> #1

# draw a image with the img_df DataFrame:
# - set x to 'x'
# - set y to 'y'
# - set x2 to 'x2'</pre>
<div class="code-annotations-overlay-container">
     #1 1 is a symbolic number.
     <br/>
</div>
</div>
</div>
<div class="readable-text print-book-callout" id="p201">
<p><span class="print-book-callout-head">Note</span>  First, instruct Copilot to generate a DataFrame containing all the relevant channels. Next, specify how to draw the image using Altair. We have asked Copilot to set <code>y</code> = 0. This is an initial value. You can adapt it manually by looking at the image.</p>
</div>
<div class="readable-text" id="p202">
<p>You can find the complete code in the GitHub repository for the book under CaseStudies/from-information-to-knowledge-visual/chart-negative.py. </p>
</div>
<div class="readable-text" id="p203">
<h4 class="readable-text-h4">Color and size</h4>
</div>
<div class="readable-text" id="p204">
<p>In addition to the photo, we can use dark colors to emphasize the negative scenario. For example, we can use a dark red tonality (#460805), which suggests blood. Next, we can increase the stroke width in correspondence to the years 1992–1998. We generate another line for those years, overlapping with the original chart. The following listing shows the code to generate the line.</p>
</div>
<div class="browsable-container listing-container" id="p205">
<h5 class="listing-container-h5 browsable-container-h5"><span class="num-string">Listing 8.8</span> Adding a focused line</h5>
<div class="code-area-container">
<pre class="code-area">base = alt.Chart(df
).encode(...)

chart = base.mark_line()

chart_line = base.mark_line(
    strokeWidth=8
).transform_filter(
    (alt.datum.CATEGORY == 'Salmon') &amp; 
    (alt.datum.YEAR_ID &gt;= 1992) &amp;
    (alt.datum.YEAR_ID &lt;= 1998)
)</pre>
</div>
</div>
<div class="readable-text print-book-callout" id="p206">
<p><span class="print-book-callout-head">Note</span>  First, build a base chart with all the encoding options. After drawing the main chart, draw another chart focusing on a selection. Use the <code>transform_filter()</code> method to select only some data.</p>
</div>
<div class="readable-text" id="p207">
<p>Again, you can find the complete code in the GitHub repository for the book under CaseStudies/from-information-to-knowledge-visual/chart-negative.py. Figure 8.23 shows the resulting chart.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p208">
<img alt="figure" height="669" src="../Images/8-23.png" width="1100"/>
<h5 class="figure-container-h5"><span class="num-string">Figure 8.23</span> The chart after adding a negative visual context</h5>
</div>
<div class="readable-text" id="p209">
<p>Now that you have implemented the negative-mood scenario, let’s move to the opposite one: the positive mood.</p>
</div>
<div class="readable-text" id="p210">
<h3 class="readable-text-h3"><span class="num-string">8.7.2</span> Setting a positive mood</h3>
</div>
<div class="readable-text" id="p211">
<p>In this scenario, the focus is on the positive trend line, beginning in 1998. The objective is to encourage the audience to continue to adopt the current strategy for the sake of the salmon population. Instead of focusing on the negative effects, here, we can focus on the positive scenario, mentioning the negative aspects only as a possibility. We will use relaxing photos and colors.</p>
</div>
<div class="readable-text" id="p212">
<h4 class="readable-text-h4">Images</h4>
</div>
<div class="readable-text" id="p213">
<p>The procedure to generate the relaxing images is similar to the negative scenario, with the difference of using words falling in the top-left clock face of figure 8.1 (low energy, positive mood). Use the following prompt for DALL-E to generate the required images: <em>a calm aquaculture of safe salmon</em>. Figure 8.24 shows a possible output. Let’s choose photo number 1. <span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p214">
<img alt="figure" height="267" src="../Images/8-24.png" width="1100"/>
<h5 class="figure-container-h5"><span class="num-string">Figure 8.24</span> The output produced by DALL-E with the following input: a calm aquaculture of safe salmon</h5>
</div>
<div class="readable-text" id="p215">
<h4 class="readable-text-h4">Color and size</h4>
</div>
<div class="readable-text" id="p216">
<p>Use a peaceful color (e.g., #105473) to represent the salmon line. In addition, highlight the trend line since 1998. Figure 8.25 shows the resulting chart. You can find the complete code in the GitHub repository for the book under CaseStudies/from-information-to-knowledge-visual/chart-positive.py.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p217">
<img alt="figure" height="668" src="../Images/8-25.png" width="1100"/>
<h5 class="figure-container-h5"><span class="num-string">Figure 8.25</span> The chart after adding a positive visual context</h5>
</div>
<div class="readable-text intended-text" id="p218">
<p>We have generated two types of charts—negative and positive—but not both together (say, with both images in the same graph). This is because we don’t want conflicting emotional cues, potentially confusing the audience or diluting the intended message we aim to convey. Now that you have learned how to add a positive or a negative mood to a data story, let’s move on to an additional exercise: adding interactivity.</p>
</div>
<div class="readable-text" id="p219">
<h3 class="readable-text-h3"><span class="num-string">8.7.3</span> Exercise: Making the chart interactive</h3>
</div>
<div class="readable-text" id="p220">
<p>Modify the previous chart to make it interactive as follows: define a drop-down menu with two values: Positive and Negative. When the user selects Negative, the chart highlights the salmon trend line between 1992 and 1998. When the user selects Positive, the charts highlights the trend line since 1998. You can find the solution to the exercise in the GitHub repository for the book under CaseStudies/from-information-to-knowledge-visual/chart-dropdown.py.</p>
</div>
<div class="readable-text intended-text" id="p221">
<p>In the first part of this chapter, you learned how to turn information into knowledge by adding visual context to your data visualization chart. You saw how to add emotions to your charts in terms of colors, size, and interactivity. You also learned how to generate mood-based and consistent images in DALL-E. Next, you learned where to put the context in your chart. Finally, you implemented a practical case study. In the next chapter, you will see how to turn knowledge into wisdom by adding a call to action and possible next steps to your chart. </p>
</div>
<div class="readable-text" id="p222">
<h2 class="readable-text-h2">Summary</h2>
</div>
<ul>
<li class="readable-text" id="p223"> Adding visual context to your data visualization is crucial for raising audience emotions. </li>
<li class="readable-text" id="p224"> Incorporating colors, size, and interactivity helps you to better focus your story and tailor it to your audience. </li>
<li class="readable-text" id="p225"> When you draw your images in DALL-E, keep them consistent using the editing tool. </li>
<li class="readable-text" id="p226"> Consider positioning the context strategically within your chart to enhance its effectiveness. </li>
</ul>
<div class="readable-text" id="p227">
<h2 class="readable-text-h2">References</h2>
</div>
<div class="readable-text" id="p228">
<h3 class="readable-text-h3">Using emotions for communication</h3>
</div>
<ul>
<li class="readable-text" id="p229"> Decker, B. and Decker, K. (2015). <em>Communicate to Influence: How to Inspire Your Audience to Action</em>. McGraw Hill. </li>
<li class="readable-text" id="p230"> Abbott, D. (2023). <em>Everyday Data Visualization</em>. Manning Publications. </li>
<li class="readable-text" id="p231"> Christiansen, J. (2022). <em>Building Science Graphics: An Illustrated Guide to Communicating Science through Diagrams and Visualizations</em>. A K Peters/CRC Press. </li>
<li class="readable-text" id="p232"> Strachnyi, K. (2022). <em>ColorWise: A Data Storyteller’s Guide to the Intentional Use of Color</em>. O’Reilly Media. </li>
</ul>
<div class="readable-text" id="p233">
<h3 class="readable-text-h3">Images</h3>
</div>
<ul>
<li class="readable-text" id="p234"> QuantHub. (2023). <em>Photos and Illustrations in a Visual Narrative.</em><a href="https://www.quanthub.com/photos-and-illustrations-in-a-visual-narrative/">https://www.quanthub.com/photos-and-illustrations-in-a-visual-narrative/</a>.<span class="link-like"/> </li>
<li class="readable-text" id="p235"> <em>The DALL·E 2 Prompt Book</em>. (n.d.). <a href="https://dallery.gallery/wp-content/uploads/2022/07/The-DALL%C2%B7E-2-prompt-book-v1.02.pdf">https://dallery.gallery/wp-content/uploads/2022/07/The-DALL%C2%B7E-2-prompt-book-v1.02.pdf</a>.<span class="link-like"/> </li>
<li class="readable-text" id="p236"> Gemignani, Z. (2021). <em>Tips for Using Photos in Data Storytelling.</em> <a href="https://www.juiceanalytics.com/writing/tips-for-using-photos-in-data-stories">https://www.juiceanalytics.com/writing/tips-for-using-photos-in-data-stories</a>.<span class="link-like"/> </li>
<li class="readable-text" id="p237"> Hang, I. (2023). <em>How to Create Consistent Characters in Midjourney: EASY Step by Step AI Tutorial for Amazon KDP.</em> <a href="https://www.youtube.com/watch?v=zdSIPkbvsek">https://www.youtube.com/watch?v=zdSIPkbvsek</a>. </li>
<li class="readable-text" id="p238"> Nussbaumer Knaflic, C. (2018). <em>Using Images.</em> <a href="https://www.storytellingwithdata.com/blog/2018/3/26/using-images">https://www.storytellingwithdata.com/blog/2018/3/26/using-images</a>.<span class="link-like"/> </li>
<li class="readable-text" id="p239"> Taggart, T. (2023). <em>DALL-E 2 Tutorial: How to Get Image Consistency.</em> <a href="https://www.youtube.com/watch?v=MU_yXYsfBR0">https://www.youtube.com/watch?v=MU_yXYsfBR0</a>. </li>
</ul>
</div></body></html>