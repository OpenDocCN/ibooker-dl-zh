<html><head></head><body><div id="book-content"><div id="sbo-rt-content"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 2. Coding with Copilot"><div class="chapter" id="ch02">
<h1><span class="label">Chapter 2. </span>Coding with Copilot</h1>

<p>Now that you have the basic foundations of what Copilot is and how it works, we can move on to the key aspect of how to use it. Since Copilot is intended to function like an AI assistant, you need to understand how to work and communicate with your assistant. The mechanics of this boil down to learning to work with the integrations in the IDE. Learning those mechanics in this chapter and the next will set you up for success with the rest of the book. And they will also answer these questions:</p>

<ul>
	<li>How do you query the assistant and provide directions for what you need?</li>
	<li>How do you follow up on responses or choose from multiple suggestions? </li>
	<li>Which ways are best to communicate with it for quick suggestions or longer explanations when needed?</li>
	<li>How can you best leverage the AI to help with coding tasks?</li>
</ul>

<div data-type="note" epub:type="note">
<h1>IDE = VS Code</h1>

<p><a contenteditable="false" data-type="indexterm" data-primary="IDEs" id="id476"/><a contenteditable="false" data-type="indexterm" data-primary="VS Code (Visual Studio Code)" id="id477"/>GitHub Copilot can be installed and used with multiple IDEs, including VS Code, JetBrains IDEs, Eclipse, and NeoVim. Since we can’t cover all of these in this book, we are using VS Code and GitHub Codespaces as our IDE examples throughout. Please consult your IDE’s documentation for any differences in how to work with Copilot if needed.</p>
</div>

<p>Within the IDE, Copilot provides two primary modes of interaction. The first mode is integration within your editor and through the context menus and related controls. For simplicity, I refer to this as <em><a contenteditable="false" data-type="indexterm" data-primary="inline mode" id="id478"/>inline</em> mode since it is most commonly used directly from the editor or related menus. This is the mode covered in this chapter.</p>

<p>The second interaction mode is through the separate <em>chat</em> interface bundled with Copilot. This approach offers expanded options for interaction and feedback. It also acts as a gateway to some of Copilot’s more advanced functionality, including Co­pilot’s <em><a contenteditable="false" data-type="indexterm" data-primary="Agent mode" id="id479"/>Agent </em>mode and an <em><a contenteditable="false" data-type="indexterm" data-primary="advanced editing mode" id="id480"/><a contenteditable="false" data-type="indexterm" data-primary="editing" data-secondary="advanced editing mode" id="id481"/>advanced editing</em> mode. After we discuss the core inline use cases in this chapter, we’ll cover chat ones in Chapters <a data-type="xref" data-xrefstyle="select:labelnumber" href="ch03.html#ch03">3</a> and <a data-type="xref" data-xrefstyle="select:labelnumber" href="ch04.html#ch04">4</a>.</p>

<p>Most users will likely first engage with Copilot by working in an editor in their IDE. As you’re coding, the installed Copilot extension gathers context and integrates with the remote components to provide you with suggestions. We discussed at a high level how that works in <a data-type="xref" href="ch01.html#ch01">Chapter 1</a>. Now, let’s take a closer look at that flow.</p>
	
<div data-type="note" epub:type="note"><h6>Note</h6>
  <p>
    Copilot uses different key combinations<a contenteditable="false" data-type="indexterm" data-primary="key combinations" id="id482"/> as shortcuts to invoke various functions. These key combinations are usually formed with a meta-key (Command, Ctrl, or Option key) plus a letter, number, or symbol. The meta-key will vary depending on which operating system you are using and possibly your keyboard. Instead of trying to list out each combination every time, I refer to these shortcuts by using the notation <a contenteditable="false" data-type="indexterm" data-primary="Meta notation" id="id483"/>Meta-&lt;character&gt;, as in Meta-I instead of Option-I. You can find the list of keyboard shortcuts for your platform in the <a href="https://oreil.ly/aAZ8S">Copilot documentation</a>.
  </p>
</div>

<section data-type="sect1" data-pdf-bookmark="Inline Suggestions"><div class="sect1" id="id15">
<h1>Inline Suggestions</h1>

<p><a contenteditable="false" data-type="indexterm" data-primary="inline suggestions" id="xi_inlinesuggestions2324"/>Suppose you are going to create a Python file to work with prime numbers. You might start by creating a file named <em>prime.py</em>. Visually, the first evidence of Copilot you will probably notice is an inline option to interact with <em>Copilot Chat </em>through the <em>Meta</em>-I keypress combination. This reminder will appear anytime you edit a file if Copilot is active and chat is enabled. See <a data-type="xref" href="#option-to-invoke-copi">Figure 2-1</a>.</p>

<figure><div id="option-to-invoke-copi" class="figure"><img alt="" src="assets/lghc_0201.png" width="1143" height="115"/>
<h6><span class="label">Figure 2-1. </span>An option to invoke Copilot Chat inline</h6>
</div></figure>

<p>We’ll defer discussing this interface until <a data-type="xref" href="ch03.html#ch03">Chapter 3</a>, after more basic interactions have been covered, since it will make more sense then. While this option is present by default, you can ignore it in the editor and start typing to proceed.</p>

<p>To provide an example to work with, let’s create a relevant function in <em>prime.py</em> to check if a number is prime or not. You start typing:</p>

<pre translate="no" data-type="programlisting">
def is_prime</pre>

<p>At this point, Copilot will start suggesting possible completions. It might provide an option like <a data-type="xref" href="#first-suggestion">Figure 2-2</a>. The proposed text from Copilot is shown as <em>ghost text</em>. This means that until it is accepted, the suggested text will be displayed in an italicized lighter font rather than the regular dark font.</p>

<figure><div id="first-suggestion" class="figure"><img alt="" src="assets/lghc_0202.png" width="752" height="305"/>
<h6><span class="label">Figure 2-2. </span>First suggestion</h6>
</div></figure>

<div data-type="note" epub:type="note">
<h1>Your Suggestions May Be Different</h1>

<p>While reading through this chapter and any places in the book showing suggestions or output from Copilot, remember that since this is generative AI, suggestions you get back with the same context may be very different.</p>
</div>

<p>Copilot’s suggestion is one possible option for building out your function. In <a data-type="xref" href="#first-suggestion">Figure 2-2</a>, there’s a gray bar above and to the right of the suggested text. This bar pops up when Copilot suggests text inline. The bar has controls to accept all or part of the suggestion. Other controls allow you to cycle through multiple suggestions if Copilot generates multiple choices.</p>

<div data-type="warning" epub:type="warning">
<h1>Your IDE May Be Different</h1>

<p>Throughout the book, we are using <a contenteditable="false" data-type="indexterm" data-primary="IDEs" id="id484"/>IDEs in the style of VS Code. If you are using a different IDE (such as one from JetBrains), your interfaces and controls may differ though similar functionality should be available.</p>
</div>

<p>The text in the bar also is a reminder of corresponding keyboard shortcuts and options. The ones available include accepting an entire suggestion (via the Tab key), accepting a word at a time (via the key combination shown in the bar and in the doc), and additional options that can be accessed via the More Actions menu, which is depicted as three dots (more about those later).</p>

<p>In the leftmost part of that bar is &lt; 1/2 &gt;. This text indicates that Copilot has generated two possible suggestions, and you are currently looking at option 1. To see the other options and rotate through the potential choices, click the <em>&gt;</em> and <em>&lt;</em> symbols in the bar or use the corresponding keys on your keyboard. For example, if you want to look at option 2, you can click the <em>&gt; </em>symbol (see <a data-type="xref" href="#second-suggestion1">Figure 2-3</a>).</p>

<figure><div id="second-suggestion1" class="figure"><img alt="" src="assets/lghc_0203.png" width="763" height="300"/>
<h6><span class="label">Figure 2-3. </span>Second suggestion</h6>
</div></figure>
<p>To accept either of Copilot’s <a contenteditable="false" data-type="indexterm" data-primary="suggestions" data-secondary="accepting" id="id485"/>suggestions, you can rotate through the options and then hit the Tab key to select the one you want. If you don’t like either suggestion, you can just continue typing.</p>

<p>The differences between option 1 and option 2 are subtle—just some whitespace. But Copilot still presents these as two separate options. Regardless of which option you choose, you have what looks like a viable function body that was automatically <span class="keep-together">generated</span>.</p>

<p>If you choose the first option, the full suggested text is inserted into your file after hitting Tab. This text no longer appears ghosted. It appears the same as any text you manually typed (<a data-type="xref" href="#option-1-accepted">Figure 2-4</a>).</p>

<figure><div id="option-1-accepted" class="figure"><img alt="" src="assets/lghc_0204.png" width="1036" height="298"/>
<h6><span class="label">Figure 2-4. </span>Option 1 accepted</h6>
</div></figure>

<p>Once you’ve used it a few times, the interface starts to feel more predictable and helpful. From this point, the typical workflow as you are typing code becomes as follows:</p>

<ol>
	<li>Accept or discard a suggestion from Copilot.</li>
	<li>Type additional code manually if needed/desired.</li>
	<li>Pause slightly, if needed, to give time for Copilot to generate options.</li>
	<li>Copilot offers suggestions.</li>
	<li>Repeat steps 1–4 until you’re done.</li>
</ol>

<p><a contenteditable="false" data-type="indexterm" data-primary="suggestions" data-secondary="completeness of" id="id486"/><a contenteditable="false" data-type="indexterm" data-primary="suggestions" data-secondary="fit of" id="id487"/>The <em>completeness</em> and <em>fit </em>of Copilot’s suggestions can vary significantly. Depending on the context available to it, it may offer completion suggestions ranging from a comment, to a single line, to multiple lines that form a complete solution. As you are typing, you may get a full function definition suggested; at other times, you may only get a line or two. The flow in the preceding numbered steps is the same, whether the first suggestion is a complete option or you must work through multiple rounds of line-by-line suggestions.</p>

<div data-type="note" epub:type="note">
<h1>Pausing for Suggestions</h1>

<p><a contenteditable="false" data-type="indexterm" data-primary="suggestions" data-secondary="pausing for" id="id488"/>You may have wondered about step 3 in the previous list, which notes pausing (if needed) to give Copilot time to generate options. In between displaying suggestions, a lot of processing and communication takes place. As discussed in <a data-type="xref" href="ch01.html#ch01">Chapter 1</a>, Copilot does a lot in the background to generate coding suggestions. It gathers context, synthesizes it, ships it across the net, prompts the LLM, checks for any patterns that might indicate vulnerabilities, optionally checks against public code matches, and then makes the options available online.</p>

<p>This happens remarkably quickly. But occasionally, Copilot may take a moment to return the result after you hit Enter. For this reason, if you are in a mode of hitting Return and expecting to hit Tab right away to accept the next suggestions, you might get ahead of Copilot at times. If that happens, you may need to pause for a moment before trying to accept the next line. Note that sometimes Copilot may also generate a blank line as part of the output.</p>
</div>

<p>A couple of details about what’s occurred so far with this simple interaction with Copilot are worth calling out:</p>

<ul>
	<li>Copilot was able to suggest context-appropriate function definitions.</li>
	<li>The options only varied slightly in a <em>not technically significant </em>way but were still presented differently.</li>
	<li>How did Copilot get the specific context for the suggestions?  It used the name of the file and the name we typed in for the function.</li>
	<li>If you were to repeat this same exercise, there is no guarantee that you would get the same suggestions or even more than one. Generative AI will not always return the same results, even given the same exact context again.</li>
</ul>

<p>To that last point, while the inline suggestions presented by Copilot may often be good enough for what you need, sometimes you may want additional options. To help with that, Copilot includes a built-in mechanism to ask for additional <em><a contenteditable="false" data-type="indexterm" data-primary="alternative suggestions" id="xi_alternativesuggestions2111244"/><a contenteditable="false" data-type="indexterm" data-primary="suggestions" data-secondary="alternative" id="xi_suggestionsalternative2111244"/>alternative suggestions</em>. We’ll cover that next<a contenteditable="false" data-type="indexterm" data-primary="" data-startref="xi_inlinesuggestions2324" id="id489"/>.</p>
</div></section>

<section data-type="sect1" data-pdf-bookmark="Getting Additional Suggestions"><div class="sect1" id="id16">
<h1>Getting Additional Suggestions</h1>

<p>If Copilot’s initial suggestions don’t seem to be enough, you can ask it to generate others. To make Copilot generate a more extensive list of alternative completions, use the Ctrl-Enter key combination.</p>

<div data-type="warning" epub:type="warning">
<h1>Trade-Offs of Using the Alternative Suggestions Functionality</h1>

<p>While asking Copilot for additional suggestions can generate more completion options, it does so with the trade-off of taking longer to create and present them than the immediate inline options. Also, the alternative code may consist of partial implementations or sets of comments, making it less useful.</p>
</div>

<p>The best time to use this functionality is before accepting one of the inline suggestions. Let’s return to where we were typing the function name but have not yet accepted a suggestion. At this point, you can hit Ctrl-Enter, and Copilot will generate a separate panel with alternative completions, as shown in <a data-type="xref" href="#alternative-suggestio">Figure 2-5</a>.</p>

<p>Copilot has suggested six alternatives, all likely plausible completions, with some implementations only slightly different.</p>

<p>The GitHub Copilot Suggestions tab is read-only. You can scroll through the set to see the alternative completions. If you find one you like, you can insert it into your file by clicking the “Accept suggestion <em>#</em>” button underneath it (where <em>#</em> represents the suggestion’s number).</p>

<p>If you want to use the alternative suggestions functionality on code you’ve already completed, your results can vary even more. In this case, it’s essential to make sure you highlight the code you want Copilot to target for the suggestions. Otherwise, you may not get any results.</p>

<figure><div id="alternative-suggestio" class="figure"><img alt="" src="assets/lghc_0205.png" width="819" height="800"/>
<h6><span class="label">Figure 2-5. </span>Alternative suggestions before completion</h6>
</div></figure>

<p>When asking Copilot for alternative suggestions on existing code, we can see the differences in quality and usability of the suggestions. <a data-type="xref" href="#request-for-alternati">Figure 2-6</a> shows a set of alternatives generated by starting with existing code.</p>

<p>Notice that in the suggestions tab that there are only three alternatives. None are complete implementations. So, if you have minimal context, your best bet is to ask for alternative suggestions before adding the code.</p>

<figure><div id="request-for-alternati" class="figure"><img alt="" src="assets/lghc_0206.png" width="1244" height="766"/>
<h6><span class="label">Figure 2-6. </span>Request for alternative suggestions on existing code</h6>
</div></figure>

<p>As outlined in <a data-type="xref" href="ch01.html#ch01">Chapter 1</a>, Copilot bases suggestions not only on your actual code but also on related elements like comments. While we generally think of adding comments just to explain code, we can also leverage comments to drive Copilot’s behavior in other ways<a contenteditable="false" data-type="indexterm" data-primary="" data-startref="xi_alternativesuggestions2111244" id="id490"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="xi_suggestionsalternative2111244" id="id491"/>.</p>
</div></section>

<section data-type="sect1" data-pdf-bookmark="Leveraging Comments"><div class="sect1" id="id123">
<h1>Leveraging Comments</h1>

<p><a contenteditable="false" data-type="indexterm" data-primary="comments" data-secondary="leveraging" id="xi_commentsleveraging21514"/>Comments can play a significant role in the context for Copilot. Say you enter the following single comment as the only line in a new file:</p>

<pre translate="no" data-type="programlisting">
# a function to determine if a number is prime or not</pre>

<p>Copilot may respond with a completion suggestion like that in <a data-type="xref" href="#suggestion-generated">Figure 2-7</a>.</p>

<figure><div id="suggestion-generated" class="figure"><img alt="" src="assets/lghc_0207.png" width="923" height="241"/>
<h6><span class="label">Figure 2-7. </span>A suggestion generated from a comment</h6>
</div></figure>

<p class="pagebreak-before">If you accept that, code for the rest of the function body is suggested (see <a data-type="xref" href="#completion-generated">Figure 2-8</a>).</p>

<figure><div id="completion-generated" class="figure"><img alt="" src="assets/lghc_0208.png" width="911" height="362"/>
<h6><span class="label">Figure 2-8. </span>Completion generated from a comment</h6>
</div></figure>

<p>Beyond the passive context that Copilot can gather from standard comments, you can also use comments actively to tell Copilot what you want it to do. The difference is instead of writing comments as context, you are issuing instructions to Copilot. This involves phrasing the comment more as a directive.</p>

<section data-type="sect2" data-pdf-bookmark="Directive Comments"><div class="sect2" id="id17">
<h2>Directive Comments</h2>

<p><a contenteditable="false" data-type="indexterm" data-primary="directive comments" id="xi_directivecomments21734"/><a contenteditable="false" data-type="indexterm" data-primary="comments" data-secondary="directive" id="xi_commentsdirective21734"/>You can tell Copilot via comments what you’d like it to do. Suppose that in place of typing the function header as in the last section,</p>

<pre translate="no" data-type="programlisting">
def is_prime</pre>

<p>you instead enter a comment describing what you want to have happen. An example in our prime number-checking function might be this:</p>

<pre translate="no" data-type="programlisting">
# create a function to determine if a number is prime</pre>

<p>Depending on available context, Copilot might suggest a relevant completion of your comment, as shown in <a data-type="xref" href="#auto-completion-of-a">Figure 2-9</a>. The suggested completion may or may not be what we intended.</p>

<figure><div id="auto-completion-of-a" class="figure"><img alt="" src="assets/lghc_0209.png" width="2384" height="532"/>
<h6><span class="label">Figure 2-9. </span>Auto-completion of a comment</h6>
</div></figure>

<p>This single line is enough to begin generating suggested code for the function. See the example in <a data-type="xref" href="#generated-first-line">Figure 2-10</a>.</p>

<figure><div id="generated-first-line" class="figure"><img alt="" src="assets/lghc_0210.png" width="2652" height="558"/>
<h6><span class="label">Figure 2-10. </span>A generated first line of the function</h6>
</div></figure>

<p>The proposed name of the function is what you had before, but there is a difference in the options that Copilot provides. Instead of suggesting just one line, Copilot suggests multiple possible completions. One is a function header. The second option is a continuation of the comment. These options can be reviewed via the pop-up bar or keyboard shortcuts. See <a data-type="xref" href="#second-option---conti">Figure 2-11</a>.</p>

<figure><div id="second-option---conti" class="figure"><img alt="" src="assets/lghc_0211.png" width="2734" height="540"/>
<h6><span class="label">Figure 2-11. </span>The second option—continuation of a comment</h6>
</div></figure>

<div data-type="note" epub:type="note">
<h1>Options May Be Different</h1>

<p>As a reminder, since you’re working with generative AI, the suggestions you get when using Copilot in practice may be different from those in the book, even if using the same example code.</p>
</div>

<p>For this case, Copilot does not have enough context to know if you want to generate an extended comment or start creating the function code. So it gives you both options. After you accept the first option, Copilot has enough context and supplies a proposed function definition (<a data-type="xref" href="#full-function-suggest">Figure 2-12</a>).</p>

<figure><div id="full-function-suggest" class="figure"><img alt="" src="assets/lghc_0212.png" width="2398" height="956"/>
<h6><span class="label">Figure 2-12. </span>A full function suggestion</h6>
</div></figure>

<p>As another example, you can tell Copilot inline to explain existing code through a comment:</p>

<pre translate="no" data-type="programlisting">
# explain the code above</pre>

<p>Applied to the example you’ve been working with, Copilot responds with brief, commented output lines explaining how the code works. <a data-type="xref" href="#output-of-telling-cop">Figure 2-13</a> shows the generated comments. Copilot generated each of the three comment lines (11–13) after the <code>explain</code> directive.</p>

<figure><div id="output-of-telling-cop" class="figure"><img alt="" src="assets/lghc_0213.png" width="922" height="548"/>
<h6><span class="label">Figure 2-13. </span>Output of telling Copilot to explain code via comments</h6>
</div></figure>

<p>You can also write a comment to get a more detailed response:</p>

<pre translate="no" data-type="programlisting">
# explain the code above line-by-line</pre>

<p class="pagebreak-before">The results of using that comment are shown in <a data-type="xref" href="#results-of-a-more-det">Figure 2-14</a>.</p>

<figure><div id="results-of-a-more-det" class="figure"><img alt="" src="assets/lghc_0214.png" width="970" height="444"/>
<h6><span class="label">Figure 2-14. </span>Results of a more detailed <code>explain</code> directive in a comment</h6>
</div></figure>

<p>A helpful point to understand is that if you are using comments <em>to prompt Copilot to generate code</em>, Copilot should produce code based on the comment. For any other non-coding directive (such as <code>explain</code>), the results will be provided back a<em>s additional comments.</em></p>

<p>One other use case for comments is to ask Copilot direct questions<a contenteditable="false" data-type="indexterm" data-primary="" data-startref="xi_directivecomments21734" id="id492"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="xi_commentsdirective21734" id="id493"/>.</p>
</div></section>

<section data-type="sect2" data-pdf-bookmark="Questions via Comments"><div class="sect2" id="id18">
<h2>Questions via Comments</h2>

<p><a contenteditable="false" data-type="indexterm" data-primary="comments" data-secondary="questions via" id="xi_commentsquestionsvia22434"/><a contenteditable="false" data-type="indexterm" data-primary="questions" data-secondary="via comments" id="xi_questionsviacomments22434"/>Similar to giving Copilot directions through comments, you can also ask it questions. For example, instead of telling Copilot to explain the code, you can ask it a question like this:</p>

<pre translate="no" data-type="programlisting">
# What does the code above do?</pre>

<p><a data-type="xref" href="#using-a-comment-to-as">Figure 2-15</a> shows the result.</p>

<figure><div id="using-a-comment-to-as" class="figure"><img alt="" src="assets/lghc_0215.png" width="852" height="497"/>
<h6><span class="label">Figure 2-15. </span>Using a comment to ask Copilot a question</h6>
</div></figure>

<p>You can also mark your comments as questions more formally by adding a <code>q:</code> after the comment character, but this is not required. If you do this, Copilot provides an answer back starting with an <code>a:</code>.</p>

<div data-type="note" epub:type="note">
<h1>Q&amp;A Context</h1>

<p>Asking Copilot questions via comments historically provided a way to get chat-like answers before Copilot Chat<a contenteditable="false" data-type="indexterm" data-primary="Copilot Chat" id="id494"/> was included with Copilot plans. Although this approach is typically less useful today than using the inline chat interface or the main chat window, it can still provide some value if you want brief answers included in the code.</p>
</div>


<p>Having completed our discussion of how we can interact with Copilot inline in the editor, let’s look at how to use Copilot from the IDE menus<a contenteditable="false" data-type="indexterm" data-primary="" data-startref="xi_commentsleveraging21514" id="id495"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="xi_commentsquestionsvia22434" id="id496"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="xi_questionsviacomments22434" id="id497"/>.</p>
</div></section>
</div></section>

<section data-type="sect1" data-pdf-bookmark="Copilot and the Context Menu"><div class="sect1" id="id19">
<h1>Copilot and the Context Menu</h1>

<p><a contenteditable="false" data-type="indexterm" data-primary="GitHub Copilot" data-secondary="context menus" id="xi_GitHubCopilotcontextmenus22704"/><a contenteditable="false" data-type="indexterm" data-primary="context menus" id="xi_contextmenus22704"/>Certain Copilot functions are available through your IDE’s context menus. This integration provides a way to quickly run some advanced features without giving directions in chat. (The chat interfaces are discussed in <a data-type="xref" href="ch03.html#ch03">Chapter 3</a>.)</p>

<div data-type="note" epub:type="note">
<h1>Contexts Meaning #2</h1>

<p>When used with discussions about the menus in this section, <em>context</em> does not refer to the information that Copilot gathers to offer completion suggestions. Instead, the term refers to Copilot options available in the <em>context menus</em> of your IDE.</p>
</div>

<p>For example, you may have noticed some of the previous figures in this chapter show two small <em>four-point star<a contenteditable="false" data-type="indexterm" data-primary="four-point star symbols" id="id498"/></em> symbols at the start of the lines. These two stars form what is sometimes called the<em> sparkle<a contenteditable="false" data-type="indexterm" data-primary="sparkle icon" id="id499"/></em> icon, which is a general symbol (beyond Copilot) for AI. In the IDE, the presence of the symbol usually indicates a link that you can click to interact with Copilot. That click, in turn, will open a menu with several advanced options.</p>

<p class="pagebreak-before">In the cases we’re discussing, the icon appears when the function definition is incomplete. However, the system can’t distinguish between a function that is still being written and one that is broken. So, Copilot will suggest a completion and offer to <em>fix</em> it. Clicking the sparkle icon opens a pop-up menu, as shown in <a data-type="xref" href="#quick-fix-option-usin">Figure 2-16</a>. (Note that this may not show up in other IDEs.)</p>

<figure><div id="quick-fix-option-usin" class="figure"><img alt="" src="assets/lghc_0216.png" width="895" height="318"/>
<h6><span class="label">Figure 2-16. </span>The Quick Fix option using Copilot</h6>
</div></figure>

<div data-type="note" epub:type="note">
<h1>Leveraging Fix for Completion</h1>

<p>The “Fix using Copilot<a contenteditable="false" data-type="indexterm" data-primary="Fix using Copilot option" id="id500"/>" option can sometimes be an alternative to getting suggested completions. Selecting it may cause Copilot to generate partial code to get the system to a working state. However, you can’t count on this functionality providing a full completion.</p>
</div>

<p class="pagebreak-before">When you have more data for Copilot to work with (such as a completed function implementation), you can see additional options in the menu. (See <a data-type="xref" href="#expanded-context-menu">Figure 2-17</a>.)</p>

<figure><div id="expanded-context-menu" class="figure"><img alt="" src="assets/lghc_0217.png" width="952" height="747"/>
<h6><span class="label">Figure 2-17. </span>Expanded context menu options</h6>
</div></figure>

<p>The options available in the menu (and what they refer to) also vary depending on what part of the IDE you’re working with. For example, if you are working in the terminal, the Explain menu option refers to content in the terminal, not the editor. And, as shown in <a data-type="xref" href="#copilot-options-in-th">Figure 2-18</a>, there are different options referring only to the terminal. (Since these are chat options, I’ll explain them in the next chapter.)</p>

<figure class="pagebreak-before"><div id="copilot-options-in-th" class="figure"><img alt="" src="assets/lghc_0218.png" width="924" height="340"/>
<h6><span class="label">Figure 2-18. </span>Copilot options in the terminal</h6>
</div></figure>

<p>So, context menus provide a subset of Copilot functionality that makes sense depending on your task. In VS Code and similar IDEs, you can also invoke Copilot-related commands through an interface called the<em> Command Palette</em>, as discussed in the following sidebar. </p>

<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="id501">
<h1>Accessing Copilot Through the Command Palette</h1>

<p><a contenteditable="false" data-type="indexterm" data-primary="GitHub Copilot" data-secondary="accessing through Command Palette" id="id502"/><a contenteditable="false" data-type="indexterm" data-primary="Command Palette, accessing through GitHub Copilot" id="id503"/>VS Code–style IDEs have an interface for quick access to commands that are related to installed extensions. The interface, called the <em>Command Palette</em>, is accessed using <em>Meta</em>-P or F1. This brings up a dialog where you can scroll or type the name of the related extension, command, symbol, or file. For example, when you have the Copilot extension installed, you can get to commands related to it through the Command Palette by typing <strong>Copilot</strong> as shown in <a data-type="xref" href="#accessing-copilot-fun1">Figure 2-19</a>.</p>

<figure><div id="accessing-copilot-fun1" class="figure"><img class="iimagesch2-copilot-from-command-palettepng" src="assets/lghc_0219.png" width="1221" height="558"/>
<h6><span class="label">Figure 2-19. </span>Accessing Copilot functionality from the Command Palette</h6>
</div></figure>

<p>Entries in this list can be executed as commands. <a data-type="xref" href="#example-using-the-com">Figure 2-20</a> shows executing Copilot’s Explain function from the list. This list is also helpful in showing all Copilot-related commands available to you.</p>

<figure><div id="example-using-the-com" class="figure"><img class="iimagesch2-command-palette-examplepng" src="assets/lghc_0220.png" width="1483" height="868"/>
<h6><span class="label">Figure 2-20. </span>An example using the Command Palette</h6>
</div></figure>
</div></aside>

<p>In addition to <em>standard</em> functions that we have discussed such as explaining code and fixing code, you can also use the context menu to have Copilot perform a useful and important task: reviewing your code and providing feedback on it. We’ll discuss the mechanics of that next<a contenteditable="false" data-type="indexterm" data-primary="" data-startref="xi_GitHubCopilotcontextmenus22704" id="id504"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="xi_contextmenus22704" id="id505"/>.</p>
</div></section>

<section data-type="sect1" data-pdf-bookmark="Using Copilot to Review Your Code"><div class="sect1" id="id124">
<h1>Using Copilot to Review Your Code</h1>

<p><a contenteditable="false" data-type="indexterm" data-primary="GitHub Copilot" data-secondary="reviewing code using" id="xi_GitHubCopilotreviewingcodeusing23284"/><a contenteditable="false" data-type="indexterm" data-primary="code" data-secondary="reviewing with GitHub Copilot" id="xi_codereviewingwithGitHubCopilot23284"/>Copilot can act as a reviewer of your code. In GitHub, you can add Copilot as a reviewer on pull requests (see <a data-type="xref" href="ch09.html#ch09">Chapter 9</a>). In the IDE, you can have Copilot review your local code and provide feedback inline. This can be especially useful to catch problems before code is pushed. When doing reviews, you can use the default behavior of Copilot or customize the way it does the review.</p>

<section data-type="sect2" data-pdf-bookmark="Using Copilot’s Default Review Options"><div class="sect2" id="id20">
<h2>Using Copilot’s Default Review Options</h2>
  <p><a contenteditable="false" data-type="indexterm" data-primary="GitHub Copilot" data-secondary="default review options" id="xi_GitHubCopilotdefaultreviewoptions23306"/>Suppose we have the following code block that is intended to implement a simple class for a point:</p>

<pre translate="no" data-type="programlisting">
class Point:
    def __init__(self, x, y, z=0): self.x = x; self.y = y  
    def distance(self, other): return (self.x - other.x)**2 + \
    (self.y - other.y)**2 + (self.z - other.z)**2**0.5  
p1 = Point(1, 2); p2 = Point(4, 6, 0)
print(p1.distance(p2)) </pre>

<p>If you are a Python programmer, you may be able to spot some of the issues with the code. Let’s ask Copilot to review it. We do this by highlighting the code in the editor, then right-clicking and selecting Copilot &gt; Review and Comment (see <a data-type="xref" href="#selecting-code-review">Figure 2-21</a>).</p>

<figure><div id="selecting-code-review" class="figure"><img alt="" src="assets/lghc_0221.png" width="803" height="510"/>
<h6><span class="label">Figure 2-21. </span>Selecting a code review from the menu</h6>
</div></figure>

<p>After Copilot processes the request, if it has any feedback about problems or recommended updates (including things as simple as adding documentation), it will provide the comments and suggested changes inline with the code. <a data-type="xref" href="#feedback-from-copilot">Figure 2-22</a> shows an example of a review item from Copilot.</p>

<figure><div id="feedback-from-copilot" class="figure"><img alt="" src="assets/lghc_0222.png" width="1120" height="867"/>
<h6><span class="label">Figure 2-22. </span>Feedback from Copilot’s review</h6>
</div></figure>

<p><a contenteditable="false" data-type="indexterm" data-primary="review feedback dialog" id="id506"/>The review feedback dialog has arrow controls you can use to navigate to other review comments, as well as controls to see the feedback in chat, close the dialog and collapse it. Any suggested changes are shown as the current code in red (with the minus sign) and the suggested code in green (with the plus sign). Buttons at the bottom of the dialog make it simple to apply or discard the change and then advance to the next set of feedback.</p>

<p>In addition to the default review behavior, you can also customize what Copilot looks for during a review<a contenteditable="false" data-type="indexterm" data-primary="" data-startref="xi_GitHubCopilotdefaultreviewoptions23306" id="id507"/>.</p>
</div></section>

<section data-type="sect2" class="pagebreak-before" data-pdf-bookmark="Creating Custom Review Instructions"><div class="sect2" id="id21">
<h2 class="less_space">Creating Custom Review Instructions</h2>

<p><a contenteditable="false" data-type="indexterm" data-primary="custom reviews, creating instructions for" id="xi_customreviewscreatinginstructionsfor23594"/>By default, Copilot only reports issues that seem significant to it. So it’s not uncommon for it to report that it has no feedback on your code when it includes elements that other reviewers might flag, such as those not conforming to best practices or style guidelines. <a data-type="xref" href="#no-feedback-from-copi">Figure 2-23</a> shows an example of the message you see if Copilot doesn’t find any issues.</p>

<figure><div id="no-feedback-from-copi" class="figure"><img alt="" src="assets/lghc_0223.png" width="716" height="553"/>
  <h6><span class="label">Figure 2-23. </span>No feedback from Copilot’s code review</h6>
</div></figure>

<p>If you want more detailed feedback, you can provide a set of custom review instructions for Copilot to use. There are two ways to do this.</p>

<p>First, you can edit the <em>settings.json</em> file and add custom instructions under <code translate="no">github.copilot.chat.codeReview.instructions</code>. Here’s an example of a rule you can add:</p>

<pre translate="no" data-type="programlisting">
"github.copilot.chat.reviewSelection.instructions": [
    {
        "text": "Ensure all functions have proper docstrings"
    }
]</pre>

<p class="pagebreak-before">After adding the rule in the user settings file, you can tell Copilot to review the same code again. This time, it flags the condition you specified in the settings file, as shown in <a data-type="xref" href="#flagged-issue-from-se">Figure 2-24</a>.</p>

<figure><div id="flagged-issue-from-se" class="figure"><img alt="" src="assets/lghc_0224.png" width="1039" height="578"/>
<h6><span class="label">Figure 2-24. </span>Flagged issue from the settings file</h6>
</div></figure>

<p>Optionally, you can also add your rule (and up to five more) as Markdown in a local file, save it with the specific path <em>.github/copilot-review-guidelines.md</em>, and Copilot will find and use it automatically.</p>

<p>If you prefer to have the instructions stored in a different file, you can create that file and then point to the local file in the <em>settings.json</em> file by using the <code translate="no">file:</code> key. Here’s an example of what that might look like in the settings:</p>

<pre translate="no" data-type="programlisting">
 "github.copilot.chat.reviewSelection.instructions": [
    {
       "file": "./docs/review-guide.md"
    }
 ]</pre>

<p>This assumes you have a local file in your codebase named <em>review-guide.md</em>, saved under the <em>docs </em>directory and with the contents shown here:</p>

<pre translate="no" data-type="programlisting">
- Ensure all functions have proper docstrings.</pre>


<aside data-type="sidebar" epub:type="sidebar" class="pagebreak-before less_space"><div class="sidebar" id="id508">
<h1>Having Copilot Generate Automatic Commit Messages</h1>

<p><a contenteditable="false" data-type="indexterm" data-primary="GitHub Copilot" data-secondary="generating automatic commit messages" id="id509"/><a contenteditable="false" data-type="indexterm" data-primary="commit messages, generating automatically using GitHub Copilot" id="id510"/>After doing your code reviews, when you’re ready to commit your changes, Copilot can assist there as well. As shown in <a data-type="xref" href="#having-copilot-sugges">Figure 2-25</a>, when you are using the source control panel, instead of typing in your own commit message, you can have Copilot suggest one based on the changes. To do this, you click the sparkle icon at the end of the commit message field.</p>

<figure><div id="having-copilot-sugges" class="figure"><img alt="" src="assets/lghc_0225.png" width="1180" height="405"/>
<h6><span class="label">Figure 2-25. </span>Having Copilot suggest commit messages</h6>
</div></figure>

<p>You can even set up custom instructions for commit message generation. Consult the VS Code documentation for more details on how to do that.</p>
</div></aside>

<p>To conclude our discussion on coding with Copilot in the IDE, let’s briefly examine a couple of additional controls and configuration settings to help you navigate and fine-tune your Copilot experience to what you want it to be<a contenteditable="false" data-type="indexterm" data-primary="" data-startref="xi_GitHubCopilotreviewingcodeusing23284" id="id511"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="xi_codereviewingwithGitHubCopilot23284" id="id512"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="xi_customreviewscreatinginstructionsfor23594" id="id513"/>.</p>
</div></section>
</div></section>

<section data-type="sect1" data-pdf-bookmark="Configuring Copilot in the IDE"><div class="sect1" id="id22">
<h1>Configuring Copilot in the IDE</h1>

<p><a contenteditable="false" data-type="indexterm" data-primary="GitHub Copilot" data-secondary="configuring in IDE" id="xi_GitHubCopilotconfiguringinIDE24184"/>In VS Code, after the Copilot extension is installed (and after you have authenticated, if needed), you can access Copilot functions through several controls. One control is located in the status bar at the bottom of the IDE. Clicking this gives you a quick way to turn off code completion suggestions for all files or only for the type of file you’re currently working with. <a data-type="xref" href="#bottom-copilot-contro">Figure 2-26</a> shows an example of the selected control providing an option to turn off code completion suggestions for Python files since that’s the type that’s currently active.</p>

<figure><div id="bottom-copilot-contro" class="figure"><img alt="" src="assets/lghc_0226.png" width="1031" height="612"/>
<h6><span class="label">Figure 2-26. </span>Bottom Copilot control</h6>
</div></figure>

<div data-type="note" epub:type="note">
<h1>Why Turn Off Completions</h1>

<p>You might wonder why there’s an option to turn off <a contenteditable="false" data-type="indexterm" data-primary="code" data-secondary="completions" id="id514"/>code completions, given that that’s one of Copilot’s fundamental jobs. The answer is that sometimes the suggestions may become annoying or get in the way. For example, if you’re trying to enter a lot of code in a hurry, or focus on creating code you already know how to do, you may not want the additional distraction of the Copilot suggestions popping up.</p>
</div>

<p>The Next Edit Suggestions option in the dialog refers to a type of automated <em>batch editing<a contenteditable="false" data-type="indexterm" data-primary="batch editing" id="id515"/></em> functionality that is discussed in <a data-type="xref" href="ch04.html#ch04">Chapter 4</a>.</p>

<p>At the top of the IDE is another Copilot icon. This one allows you to open various chat interfaces, configure code completions, and manage your Copilot settings in GitHub. See <a data-type="xref" href="#top-control-options">Figure 2-27</a>.</p>

<figure><div id="top-control-options" class="figure"><img alt="" src="assets/lghc_0227.png" width="793" height="480"/>
<h6><span class="label">Figure 2-27. </span>Top control options</h6>
</div></figure>

<p>We’ll discuss the chat options in <a data-type="xref" href="ch03.html#ch03">Chapter 3</a>. The Manage Copilot selection will take you to the <a href="https://oreil.ly/OlrYN">settings page</a> for your Copilot account in GitHub (if you’re logged in). And Configure Code Completions brings up a set of options (<a data-type="xref" href="#configuring-copilot-c">Figure 2-28</a>) to customize code completions.</p>

<figure><div id="configuring-copilot-c" class="figure"><img alt="" src="assets/lghc_0228.png" width="1023" height="487"/>
<h6><span class="label">Figure 2-28. </span>Configuring Copilot Completions</h6>
</div></figure>

<p><a contenteditable="false" data-type="indexterm" data-primary="IDEs" data-secondary="configuring Copilot in" id="xi_IDEsconfiguringCopilotin24444"/>Some of these options are obvious, but a few are not. Here’s a quick rundown of three of them:</p>

<dl>
	<dt>Open Completions Panel</dt>
	<dd><a contenteditable="false" data-type="indexterm" data-primary="Open Completions Panel" id="id516"/>Opens up a list of alternative completions for the currently active code. This is the same functionality we discussed earlier, invoking with Ctrl-Enter.</dd>
	<dt>Change Completions Model</dt>
	<dd><a contenteditable="false" data-type="indexterm" data-primary="Change Completions Model" id="id517"/>Allows you to select a different AI model (other than the default) if another one is available. Note that this only affects the model used for code completions, not the model used for chats.</dd>
	<dt>Disable Completions</dt>
	<dd><a contenteditable="false" data-type="indexterm" data-primary="Disable Completions option" id="id518"/>Similar to the earlier option from the other Copilot control, this lets you toggle completion suggestions on or off.</dd>
</dl>

<p class="fix_tracking">The Edit Settings option<a contenteditable="false" data-type="indexterm" data-primary="Edit Settings option" id="id519"/> is a gateway to further customization and configuration for Copilot. Clicking it brings up the settings in the IDE with a search string of “GitHub Copilot”. You could do the same thing by clicking the gear icon for Settings in the main IDE interface and then typing in “GitHub Copilot” to search for the related <span class="keep-together">settings</span>.</p>

<p><a data-type="xref" href="#github-copilot-settin">Figure 2-29</a> shows the Settings screen for items matching “GitHub Copilot”. Notice the subcategories on the left for the editor, features, and a broader extensions group. Within the extensions group are settings for any extension related to GitHub Copilot.</p>

<figure><div id="github-copilot-settin" class="figure"><img alt="" src="assets/lghc_0229.png" width="1209" height="820"/>
<h6><span class="label">Figure 2-29. </span>GitHub Copilot settings in the IDE</h6>
</div></figure>

<p>In the settings, you can configure options at the <em>user level</em> (independent of workspace) and settings for the <em>workspace environment<a contenteditable="false" data-type="indexterm" data-primary="workspace environment" id="id520"/>.</em> Tabs in the upper left allow you to switch between these categories.</p>

<p>When you drill in to some settings areas, you’ll find ones marked Experimental or Preview. Both of these indicate an option or feature that is not in production yet. <em>Preview features<a contenteditable="false" data-type="indexterm" data-primary="preview features" id="id521"/></em> are closer to being officially released and are targeted for public testing and feedback if users opt in to using them. <em>Experimental features<a contenteditable="false" data-type="indexterm" data-primary="experimental features" id="id522"/></em> are early concepts that you can use at your own risk. They may or may not move forward and may also be significantly changed before production.</p>

<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="id523">
  <h1>Editing Files via the Settings</h1>

<p><a contenteditable="false" data-type="indexterm" data-primary="editing" data-secondary="files via settings" id="id524"/><a contenteditable="false" data-type="indexterm" data-primary="files" data-secondary="editing via settings" id="id525"/><a contenteditable="false" data-type="indexterm" data-primary="settings, editing files via" id="id526"/>If you find a configuration option that can be persisted in a file (like <em>settings.json</em>), there will usually be a link to modify the file. As an example, if you want to add custom review rules (covered previously in this chapter), and you search for the option, you’ll see a link to directly edit the <em>settings.json</em> file at the bottom (<a data-type="xref" href="#accessing-file-from-s">Figure 2-30</a>).</p>

<figure><div id="accessing-file-from-s" class="figure"><img alt="" src="assets/lghc_0230.png" width="1116" height="638"/>
<h6><span class="label">Figure 2-30. </span>Accessing a file from the settings</h6>
</div></figure>

<p>Clicking that link opens the indicated file so you can edit it directly with some initial suggestions for content (<a data-type="xref" href="#editing-file-opened-v">Figure 2-31</a>).</p>

<figure><div id="editing-file-opened-v" class="figure"><img alt="" src="assets/lghc_0231.png" width="1002" height="440"/>
<h6><span class="label">Figure 2-31. </span>Editing a file opened via settings</h6>
</div></figure>
</div></aside>

<p>If you use a different IDE, it will have a similar way to access and change the settings for Copilot. I recommend monitoring <a href="https://oreil.ly/qdhTv">GitHub’s blogs about Copilot</a> for the latest updates and to learn what new or updated settings are available. It’s also not a bad idea to periodically explore the options available. Sometimes you’ll find additional options for configuring Copilot’s behavior that you might not have known about<a contenteditable="false" data-type="indexterm" data-primary="" data-startref="xi_GitHubCopilotconfiguringinIDE24184" id="id527"/><a contenteditable="false" data-type="indexterm" data-primary="" data-startref="xi_IDEsconfiguringCopilotin24444" id="id528"/>.</p>
</div></section>

<section data-type="sect1" data-pdf-bookmark="Conclusion"><div class="sect1" id="id376">
<h1>Conclusion</h1>

<p>In this chapter, we’ve covered the most direct ways to interact with GitHub Copilot inline when you’re writing code. Copilot provides quick suggestions in the editor as you’re typing. These should be evaluated for completeness and fit. While varying in suitability, these suggestions can provide time savings and/or bootstrap your code and thinking.</p>

<p>The quality of suggestions will largely depend on the amount of context Copilot has to reference in the current environment, meaning the filename, existing code, other files, comments, and local index. Comments can also describe a task you want Copilot to accomplish and be used to direct questions to Copilot that it will answer as comments.</p>

<p>Copilot can review your code to find problems and suggest improvements. You can customize what it targets when reviewing via pointing it to a list of custom <span class="keep-together">instructions</span>.</p>

<p>While Copilot provides useful capabilities out of the box, sometimes you may want to tweak its behavior or enable/disable a feature. You can make limited changes through the Copilot controls present in the IDE. Or you can search in the settings of the IDE for individual options to modify, including ones that are experimental or in preview.</p>

<p>Now that you’ve seen how to work with Copilot’s suggestions inline, let’s move on to the most flexible way to interact with Copilot and its underlying model: through its chat interface, the topic of <a data-type="xref" href="ch03.html#ch03">Chapter 3</a>.</p>
</div></section>
</div></section></div></div></body></html>