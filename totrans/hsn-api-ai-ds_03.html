<html><head></head><body>
<div id="book-content">
<div id="sbo-rt-content"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 2. Selecting Your API Architecture"><div class="chapter" id="chapter_2">
<h1><span class="label">Chapter 2. </span>Selecting Your API Architecture</h1>

<blockquote data-type="epigraph" epub:type="epigraph">
  <p>The happy towns are those that have an architecture.</p>
  <p data-type="attribution">Le Corbusier, <em>Towards a New Architecture</em> (Dover Publications, 1965)</p>
</blockquote>

<p>In <a data-type="xref" href="ch01.html#chapter_1">Chapter 1</a>, you began your portfolio project by understanding user needs and selecting use cases to fulfill. That initial work is critical to make sure you build the right products to fulfill real customer needs. In this chapter, you will begin developing the architecture you will use to build your first APIs.</p>






<section data-type="sect1" data-pdf-bookmark="API Architectural Styles"><div class="sect1" id="id160">
<h1>API Architectural Styles</h1>

<p>One of the most significant decisions<a data-type="indexterm" data-primary="building APIs" data-secondary="architecture of APIs" data-seealso="architecture of APIs" id="ch1-arcsty"/><a data-type="indexterm" data-primary="architecture of APIs" data-secondary="architectural styles" id="ch1-arcsty2"/><a data-type="indexterm" data-primary="APIs" data-secondary="architecture of" data-tertiary="architectural styles" id="ch1-arcsty3"/><a data-type="indexterm" data-primary="architecture of APIs" data-secondary="architectural styles" data-tertiary="about" id="id578"/> to make is selecting the API architectural style you will be using. Since you are using a consumer-centric design process, it follows that one of your first goals would be to use a style that is widely supported and understood by potential consumers. The <a href="https://oreil.ly/x25Zw">Postman 2023 State of the API Report</a> found these were the top six API architectural styles:</p>

<ul>
<li>
<p><em>REST</em>: 86%</p>
</li>
<li>
<p><em>Webhooks</em>: 36%</p>
</li>
<li>
<p><em>GraphQL</em>: 29%</p>
</li>
<li>
<p><em>Simple Object Access Protocol (SOAP)</em>: 26%</p>
</li>
<li>
<p><em>WebSockets</em>: 25%</p>
</li>
<li>
<p><em>gRPC</em>: 11%</p>
</li>
</ul>

<p class="less_space pagebreak-before">The overwhelming popularity<a data-type="indexterm" data-primary="architecture of APIs" data-secondary="architectural styles" data-tertiary="REST popularity" id="id579"/><a data-type="indexterm" data-primary="REST (Representational State Transfer) APIs" data-secondary="popularity of" id="id580"/> of REST found in the survey is consistent with what you will experience if you explore most public APIs. REST is currently the typical style used for APIs. For an example relevant to your project, all of the APIs that I have found for real-world fantasy football league hosts use REST.</p>

<p>There are a couple of other API architectural styles that are worth reviewing because they also make sense in data science and AI-related situations. Let’s take a closer look at REST, GraphQL, and gRPC.</p>








<section data-type="sect2" data-pdf-bookmark="Representational State Transfer (REST)"><div class="sect2" id="id13">
<h2>Representational State Transfer (REST)</h2>

<p>REST was formally defined<a data-type="indexterm" data-primary="architecture of APIs" data-secondary="architectural styles" data-tertiary="REST" id="id581"/><a data-type="indexterm" data-primary="REST (Representational State Transfer) APIs" id="id582"/><a data-type="indexterm" data-primary="APIs" data-secondary="architecture of" data-tertiary="REST" id="id583"/><a data-type="indexterm" data-primary="building APIs" data-secondary="SWC" data-tertiary="REST architecture" id="id584"/><a data-type="indexterm" data-primary="Fielding, Roy" id="id585"/> by Roy Fielding’s doctoral dissertation, <a href="https://oreil.ly/cLpNu"> “Architectural Styles and the Design of Network-Based Software Architectures”</a>. In practice, you will find that not all of the REST-style APIs conform completely to this format definition.</p>

<p>A useful implementation of this architectural style is <a data-type="indexterm" data-primary="RESTful" id="id586"/><a data-type="indexterm" data-primary="Pragmatic REST" id="id587"/>sometimes referred to as <em>Pragmatic REST</em> or <em>RESTful</em>. The following is a mix of formal definitions and some pragmatic practices:</p>

<ul>
<li>
<p>API providers make resources available at individual addresses (e.g., <em>/customers</em>, <em>/products</em>, etc.). <a data-type="indexterm" data-primary="HTTP" data-secondary="verbs" data-tertiary="REST APIs" id="id588"/><a data-type="indexterm" data-primary="client-server model" id="id589"/>Consumers make requests to these resources using standard HTTP verbs. Producers provide a response. This is the client/server model.</p>
</li>
<li>
<p>The response is defined by the producer. The standard structure of the response is the same for each consumer.</p>
</li>
<li>
<p>The REST response is typically in JSON or, sometimes, XML format, both of which are standard text-based data transfer formats.</p>
</li>
<li>
<p>The interaction is stateless, which means that each message back and forth stands on its own. So, in a conversation of multiple requests and responses, each request has to provide information or <em>context</em> from previous responses. For example, a consumer might retrieve a list of players and then provide one player’s ID to request additional details.</p>
</li>
<li>
<p>Increasingly, REST APIs are <a data-type="indexterm" data-primary="OpenAPI Specification (OAS) file" data-secondary="specification online" id="id590"/>defined by an <a href="https://oreil.ly/d7xYG">OpenAPI Specification file</a>, although a variety of other options have been used over the years.</p>
</li>
<li>
<p>It is a best practice to use API versions to protect existing consumers from changes.</p>
</li>
</ul>
</div></section>








<section data-type="sect2" class="less_space pagebreak-before" data-pdf-bookmark="Graph Query Language (GraphQL)"><div class="sect2" id="id14">
<h2>Graph Query Language (GraphQL)</h2>

<p><a href="https://oreil.ly/gphql">GraphQL</a> is both<a data-type="indexterm" data-primary="GraphQL (Graph Query Language) APIs" id="id591"/><a data-type="indexterm" data-primary="architecture of APIs" data-secondary="architectural styles" data-tertiary="GraphQL" id="id592"/> a query language for APIs and a query runtime engine. GraphQL was developed by Facebook and was made open source in 2015. Here are some attributes of GraphQL APIs, with comparisons to REST:</p>

<ul>
<li>
<p>Communication uses the client/server model (like RESTful APIs).</p>
</li>
<li>
<p>Communication is stateless (like RESTful APIs).</p>
</li>
<li>
<p>The response is usually in JSON (like RESTful APIs).</p>
</li>
<li>
<p>Instead of only using HTTP verbs, the consumer uses the GraphQL query <span class="keep-together">language.</span></p>
</li>
<li>
<p>The consumer can specify the contents of the response, along with the query options. (In REST, the producer defines the response contents.)</p>
</li>
<li>
<p>The producer makes the API available at a single address (e.g., <em>/graphql</em>), and the consumer passes queries to it via the HTTP POST verb.</p>
</li>
<li>
<p>Versioning is not recommended, because the consumer defines the contents they are requesting.</p>
</li>
</ul>

<p>A big advantage of GraphQL over RESTful APIs is that fewer API calls are needed for the consumer to get the information they need. This requires less network traffic.</p>
</div></section>








<section data-type="sect2" data-pdf-bookmark="gRPC"><div class="sect2" id="id15">
<h2>gRPC</h2>

<p>Like GraphQL, <a href="https://oreil.ly/iJFdv">gRPC</a> was developed<a data-type="indexterm" data-primary="gRPC APIs" id="id593"/><a data-type="indexterm" data-primary="architecture of APIs" data-secondary="architectural styles" data-tertiary="gRPC" id="id594"/> by a commercial company (Google) and was made open source in 2015. gRPC was developed for very fast, efficient communication between microservices. gRPC is usually used for a different set of problems than REST, and it has many differences:</p>

<ul>
<li>
<p>Instead of sharing resources, gRPC provides remote procedure calls, which are more like traditional code functions.</p>
</li>
<li>
<p>Instead of being limited to stateless request-response patterns, gRPC can be used for continuous streaming.</p>
</li>
<li>
<p>Instead of returning data in a text-based format like JSON, it uses <a href="https://protobuf.dev">protocol buffers</a>, which is a format for serializing data that is smaller and faster than JSON or XML.</p>
</li>
<li>
<p>Instead of using an OpenAPI specification file, it uses protocol buffers as the specification in a <em>.proto</em> file.</p>
</li>
</ul>

<p>gRPC is not a likely candidate for the APIs that you will be creating in your portfolio project. <a data-type="indexterm" data-primary="gRPC APIs" data-secondary="large language models and" id="id595"/><a data-type="indexterm" data-primary="LLMs (large language models)" data-secondary="gRPC APIs" id="id596"/><a data-type="indexterm" data-primary="machine learning (ML)" data-secondary="large language models and gRPC APIs" id="id597"/>However, it’s worth mentioning in this discussion of API architectural styles related to data science for one big reason: <em>large language models</em> (LLMs). These machine learning models are the engines behind generative AI services such as Gemini and ChatGPT. These are very big models that need all the performance they can get, and they are using gRPC in some cases to achieve this.</p>
</div></section>








<section data-type="sect2" data-pdf-bookmark="Your Choice: REST"><div class="sect2" id="id16">
<h2>Your Choice: REST</h2>

<p>For your company’s needs, REST is the<a data-type="indexterm" data-primary="REST (Representational State Transfer) APIs" data-secondary="architecture chosen for project" id="id598"/><a data-type="indexterm" data-primary="architecture of APIs" data-secondary="architectural styles" data-tertiary="REST chosen for project" id="id599"/><a data-type="indexterm" data-primary="architecture of APIs" data-secondary="REST chosen for project" id="id600"/><a data-type="indexterm" data-primary="APIs" data-secondary="architecture of" data-tertiary="REST chosen for project" id="id601"/><a data-type="indexterm" data-primary="building APIs" data-secondary="SWC" data-tertiary="REST chosen for project" id="id602"/> appropriate choice. It is the industry standard, and it is appropriate for providing resource-based APIs for the user stories you identified. It is also supported by a broad range of technologies, so your customers should have no problem using a RESTful API.</p>

<p>GraphQL is also a good choice for a user querying your football data, and you should keep an eye on it in the future. But you are safe to wait until your users request it.</p>

<p>Before diving into the Python coding for your API, let’s discuss how this book will use a couple of key terms.<a data-type="indexterm" data-primary="architecture of APIs" data-secondary="REST chosen for project" data-tertiary="terminology" id="id603"/><a data-type="indexterm" data-primary="REST (Representational State Transfer) APIs" data-secondary="architecture chosen for project" data-tertiary="terminology" id="id604"/><a data-type="indexterm" data-primary="APIs" data-secondary="architecture of" data-tertiary="REST terminology" id="id605"/><a data-type="indexterm" data-primary="building APIs" data-secondary="SWC" data-tertiary="REST terminology" id="id606"/> For this book, we will consider a <em>RESTful API</em> to be a set of endpoints that are all related to the same data source. From this perspective, your SWC website will start with a single API: the SWC Fantasy Football API.</p>

<p>An <em>API version</em> is a group<a data-type="indexterm" data-primary="API version" id="id607"/> of endpoints that are consistent for some time so that consumers can count on them.</p>

<p>An <em>API endpoint</em> (also referred to as an <em>operation</em>) <a data-type="indexterm" data-primary="API endpoints" id="id608"/><a data-type="indexterm" data-primary="endpoints of APIs" id="id609"/><a data-type="indexterm" data-primary="HTTP" data-secondary="verbs" data-tertiary="REST APIs and endpoints" id="id610"/><a data-type="indexterm" data-primary="API endpoints" data-secondary="REST APIs" id="id611"/><a data-type="indexterm" data-primary="endpoints of APIs" data-secondary="REST APIs" id="id612"/>is a combination of two fundamental building blocks: an HTTP verb and a URL path.</p>

<p>The overall structure of these terms is:</p>

<pre data-type="programlisting">api
└── version
    └── endpoint</pre>

<p>Let’s look at a few examples using a general Acme widget company (<a data-type="xref" href="#acme_endpoints">Table 2-1</a>). We’ll assume that the company’s APIs reside under the <em><a href="https://api.acme.com" class="bare"><em class="hyperlink">https://api.acme.com</em></a></em> subdomain.</p>
<table id="acme_endpoints">
<caption><span class="label">Table 2-1. </span>Example endpoints in Acme API version 1</caption>
<thead>
<tr>
<th>Endpoint description</th>
<th>HTTP verb</th>
<th>URL</th>
<th>Message body</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>Read product list</p></td>
<td><p>GET</p></td>
<td><p><em>api.acme.com/v1/products/</em></p></td>
<td><p>Empty</p></td>
</tr>
<tr>
<td><p>Read individual product</p></td>
<td><p>GET</p></td>
<td><p><em>api.acme.com/v1/products/{product_id}/</em></p></td>
<td><p>Empty</p></td>
</tr>
<tr>
<td><p>Create new product</p></td>
<td><p>POST</p></td>
<td><p><em>api.acme.com/v1/products/</em></p></td>
<td><p>Contains new product</p></td>
</tr>
<tr>
<td><p>Update existing product</p></td>
<td><p>PUT</p></td>
<td><p><em>api.acme.com/v1/products/{product_id}/</em></p></td>
<td><p>Contains updated product</p></td>
</tr>
<tr>
<td><p>Delete existing product</p></td>
<td><p>DELETE</p></td>
<td><p><em>api.acme.com/v1/products/{product_id}</em>/</p></td>
<td><p>Varies</p></td>
</tr>
</tbody>
</table>

<p>You can see that the URL is reused for several of the endpoints. For example, the read product list endpoint uses a URL of  <em>api.acme.com/v1/products</em> with a <code>GET</code> verb. The <code>GET</code> verb reads the product records. The create new product endpoint uses the same URL but with a <code>POST</code> verb. The <code>POST</code> creates a new record.</p>

<p>But by combining the HTTP verb with the URL, a specific action is taken when this resource is called. This HTTP verb plus URL combination can only be used once. For your portfolio project, you will develop a set of endpoints to fulfill the user cases you selected.<a data-type="indexterm" data-startref="ch1-arcsty" id="id613"/><a data-type="indexterm" data-startref="ch1-arcsty2" id="id614"/><a data-type="indexterm" data-startref="ch1-arcsty3" id="id615"/></p>
<div data-type="tip"><h6>Tip</h6>
<p>For more information about all the HTTP verbs, see <a data-type="xref" href="ch08.html#http_basics">“HTTP Basics”</a>.</p>
</div>
</div></section>
</div></section>






<section data-type="sect1" data-pdf-bookmark="Technology Architecture"><div class="sect1" id="id17">
<h1>Technology Architecture</h1>

<p>The SWC league host website<a data-type="indexterm" data-primary="website for SWC" data-secondary="technology architecture of API" id="id616"/><a data-type="indexterm" data-primary="SportsWorldCentral (SWC)" data-secondary="website API" data-tertiary="technology architecture" id="id617"/><a data-type="indexterm" data-primary="architecture of SWC website" id="id618"/><a data-type="indexterm" data-primary="APIs" data-secondary="architecture of" data-tertiary="technology architecture" id="id619"/><a data-type="indexterm" data-primary="technology architecture of SWC" id="id620"/><a data-type="indexterm" data-primary="architecture of APIs" data-secondary="website architecture and" data-tertiary="components of API" id="id621"/><a data-type="indexterm" data-primary="database creation and access" data-secondary="API components" id="id622"/> is a web application that uses a relational database. Fantasy managers access the website through their web browsers. Although a large amount of technology is necessary to host this large website, <a data-type="xref" href="#current_state_architecture_ch2">Figure 2-1</a> is a high-level view of the current state application architecture.</p>

<figure><div id="current_state_architecture_ch2" class="figure">
<img src="assets/haad_0201.png" alt="Current state application architecture" width="830" height="286"/>
<h6><span class="label">Figure 2-1. </span>Current state application architecture</h6>
</div></figure>

<p>The following components are in this architecture:</p>
<dl>
<dt>Fantasy managers</dt>
<dd>
<p>Current web users of Sportsworldcentral.com</p>
</dd>
<dt>Web application</dt>
<dd>
<p>The existing league host website (assume it already exists for your project)</p>
</dd>
<dt>Website database</dt>
<dd>
<p>The relational database that is used for the web application (assume it already exists and contains data for your project)</p>
</dd>
</dl>

<p>When deciding on the architecture for an API,<a data-type="indexterm" data-primary="architecture of SWC website" data-secondary="API technology architecture" id="id623"/><a data-type="indexterm" data-primary="architecture of APIs" data-secondary="website architecture and" id="id624"/> many choices are available. When a web application already exists, one option is to create the API as part of the web application. Many web applications use APIs as part of their design, so this may be the simplest route in those cases. Another option is to create the API as a separate application but allow the API to read directly from the website database.  This has the advantage that the API’s data will always be up-to-date with the web application, but it could potentially slow down the web application if a large number of requests are being made to the API.</p>

<p>You will <a data-type="indexterm" data-primary="architecture of APIs" data-secondary="REST chosen for project" data-tertiary="separate application" id="id625"/><a data-type="indexterm" data-primary="architecture of APIs" data-secondary="architectural styles" data-tertiary="REST chosen for project" id="id626"/><a data-type="indexterm" data-primary="REST (Representational State Transfer) APIs" data-secondary="architecture chosen for project" data-tertiary="separate application" id="id627"/> create the API as a separate application and<a data-type="indexterm" data-primary="data acquisition" data-secondary="read replica database" id="id628"/><a data-type="indexterm" data-primary="read replica database" id="id629"/> pull the API’s data from a <em>read replica database</em>. This is a read-only copy of the website database that receives quick updates from the website database but is physically separate so that the API traffic doesn’t impact the website’s performance. Since your API will be read-only, the read replica is a good choice.</p>

<p><a data-type="xref" href="#future_state_architecture_ch2">Figure 2-2</a> shows<a data-type="indexterm" data-primary="future state architecture of SWC website" id="id630"/><a data-type="indexterm" data-primary="APIs" data-secondary="architecture of" data-tertiary="components of API" id="id631"/> the future state application architecture that you will implement.</p>

<figure><div id="future_state_architecture_ch2" class="figure">
<img src="assets/haad_0202.png" alt="Future state application architecture" width="1174" height="780"/>
<h6><span class="label">Figure 2-2. </span>Future state application architecture</h6>
</div></figure>

<p>These are the new components for your project:</p>
<dl>
<dt>Fantasy advice websites</dt>
<dd>
<p>Will be importing your league data to their advice website.</p>
</dd>
<dt>Data science users</dt>
<dd>
<p>Will be calling your APIs to create their analytics products.</p>
</dd>
<dt>Read replica database</dt>
<dd>
<p>A separate read-only copy of the website database you will create.</p>
</dd>
<dt>API</dt>
<dd>
<p>The new API application you will create. Notice that it will use the base web address <em>api.sportsworldcentral.com</em> to keep it separate from the main website.</p>
</dd>
</dl>

<p>The technology architecture of APIs is a deep and very interesting topic, and the potential variations of components are nearly endless. One thing to remember is that a software architecture changes over time, so decisions that you make are not permanent. <a data-type="indexterm" data-primary="Mastering API Architecture (Gough, Bryant, and Auburn)" id="id632"/><a data-type="indexterm" data-primary="Gough, James" id="id633"/><a data-type="indexterm" data-primary="Bryant, Daniel" id="id634"/><a data-type="indexterm" data-primary="Auburn, Matthew" id="id635"/>I highly recommend the book <em>Mastering API Architecture: Design, Operate, and Evolve API-Based Systems</em> by James Gough, Daniel Bryant, and Matthew Auburn (O’Reilly, 2022) to build  foundational knowledge of this subject.</p>
</div></section>






<section data-type="sect1" data-pdf-bookmark="Software Used in This Chapter"><div class="sect1" id="id377">
<h1>Software Used in This Chapter</h1>

<p>Since you will be creating a new API application and standalone database, take a look at the tools and services you will use, as shown in <a data-type="xref" href="#tools_table_chapter_2">Table 2-2</a>.</p>
<table id="tools_table_chapter_2">
<caption><span class="label">Table 2-2. </span>New tools or services used in this chapter</caption>
<thead>
<tr>
<th>Software name</th>
<th>Version</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>Python</p></td>
<td><p>3.10</p></td>
<td><p>Programming language</p></td>
</tr>
<tr>
<td><p>GitHub</p></td>
<td><p>NA</p></td>
<td><p>Source control, development environment</p></td>
</tr>
</tbody>
</table>








<section data-type="sect2" data-pdf-bookmark="Python"><div class="sect2" id="id18">
<h2>Python</h2>

<p>Python is the programming language<a data-type="indexterm" data-primary="Python" data-secondary="language used for projects" id="id636"/><a data-type="indexterm" data-primary="SportsWorldCentral (SWC)" data-secondary="website API" data-tertiary="Python for coding" id="id637"/><a data-type="indexterm" data-primary="building APIs" data-secondary="SWC" data-tertiary="Python for coding" id="id638"/><a data-type="indexterm" data-primary="portfolio projects" data-secondary="Python for coding" id="id639"/> you will use for all of the API code in Part I. You will also use it in <a data-type="xref" href="part02.html#part_2">Part II</a> to create analytics products, data pipelines, and interactive data applications. You will use it in <a data-type="xref" href="part03.html#part_3">Part III</a> to build a generative AI application. <a data-type="indexterm" data-primary="Python" data-secondary="about" id="id640"/>It’s possible to use Python for almost any job in data science, and it is the language most frequently used by data scientists, according to the <a href="https://oreil.ly/fD4u7">Anaconda 2022 State of Data Science Report</a>.</p>

<p>The Python open source ecosystem is very strong and deep, with high-quality frameworks and libraries available for almost any task you want to perform. You will work with a variety of popular Python libraries throughout this book, such as those that follow.</p>

<p>Python adoption has accelerated in recent years for a variety of software development tasks. The <a href="https://oreil.ly/pvfEB">2023 Stack Overflow Developer Survey</a> found that Python was in a dead heat for first as the language most developers wanted to use, and it ranked as the third most used at the time.  Python is very flexible and is used in a variety of situations. It is a great tool for any developer to have in their toolbox.</p>

<p>For this book, you will be using Python 3.10 or higher.<a data-type="indexterm" data-primary="Python" data-secondary="language used for projects" data-tertiary="version of Python" id="id641"/><a data-type="indexterm" data-primary="version of Python used for projects" id="id642"/><a data-type="indexterm" data-primary="Python" data-secondary="version used for projects" id="id643"/></p>
</div></section>








<section data-type="sect2" data-pdf-bookmark="GitHub"><div class="sect2" id="id161">
<h2>GitHub</h2>

<p>GitHub is a website that plays<a data-type="indexterm" data-primary="GitHub" data-secondary="about" id="id644"/> a major role in software development. At its core, GitHub is a cloud host of source control software, but it has added additional features over the years. These capabilities are generally free or low cost. Many prominent open source projects use GitHub to host their source code and allow developers to contribute to the project.</p>

<p>You will use GitHub in several<a data-type="indexterm" data-primary="portfolio projects" data-secondary="GitHub uses" id="id645"/><a data-type="indexterm" data-primary="GitHub" data-secondary="portfolio projects" id="id646"/> ways in this book. You will store all of your program code in repositories while you develop it. <a data-type="indexterm" data-primary="Python" data-secondary="GitHub Codespaces" data-tertiary="about Python development" id="id647"/><a data-type="indexterm" data-primary="GitHub" data-secondary="Codespaces" data-tertiary="about Python development" id="id648"/><a data-type="indexterm" data-primary="Codespaces (GitHub)" data-secondary="about Python development" id="id649"/>You will use GitHub Codespaces as your Python development environment. You will use GitHub Pages to publish your developer portal.</p>

<p>This book uses many of GitHub’s tools because they simplify environment management and work together well. The result will be a professional-looking API and data science portfolio that demonstrates what you have accomplished. Most of the work can also be performed on your local machine or another virtual environment instead of using GitHub. However, the instructions will assume you are using GitHub.</p>
</div></section>
</div></section>






<section data-type="sect1" data-pdf-bookmark="Getting Started with Your GitHub Codespace"><div class="sect1" id="getting_started_GHcodespace">
<h1>Getting Started with Your GitHub Codespace</h1>

<p>GitHub Codespaces will be the <a data-type="indexterm" data-primary="GitHub" data-secondary="Codespaces" data-tertiary="getting started" id="ch2-codsta"/><a data-type="indexterm" data-primary="portfolio projects" data-secondary="GitHub uses" data-tertiary="getting started with Codespace" id="ch2-codsta2"/><a data-type="indexterm" data-primary="Python" data-secondary="GitHub Codespaces" data-tertiary="getting started" id="ch2-codsta3"/><a data-type="indexterm" data-primary="Codespaces (GitHub)" data-secondary="about Python development" data-tertiary="getting started" id="ch2-codsta4"/>development environment for all of the API code you develop in Part I of this book. You can think of a Codespace as a development environment running VS Code in the browser. Working with Codespaces will allow you to run the code from the GitHub repository that I share with you, with a minimum of distractions.</p>








<section data-type="sect2" data-pdf-bookmark="Creating Your GitHub Account"><div class="sect2" id="id162">
<h2>Creating Your GitHub Account</h2>

<p>Before getting started with Codespaces, <a data-type="indexterm" data-primary="GitHub" data-secondary="account creation" id="id650"/> you need a GitHub account. <a href="https://oreil.ly/7j595">Follow the instructions to create a GitHub free personal account</a>. The free account will give you plenty of Codespace storage and core hours to work through this book. During the writing of this book, I often exceeded the free allocation by running multiple Codespaces, but the charge was generally a few dollars. Be sure to enable two-factor authentication to protect your account.</p>
</div></section>








<section data-type="sect2" data-pdf-bookmark="Cloning the Part I Repository"><div class="sect2" id="id19">
<h2>Cloning the Part I Repository</h2>

<p>When you use another repository<a data-type="indexterm" data-primary="GitHub" data-secondary="cloning the repository" data-tertiary="cloning Part I" id="id651"/><a data-type="indexterm" data-primary="GitHub" data-secondary="forking versus cloning a repository" id="id652"/><a data-type="indexterm" data-primary="forking a GitHub repository" data-secondary="cloning a repository versus" id="id653"/><a data-type="indexterm" data-primary="forking a GitHub repository" id="id654"/><a data-type="indexterm" data-primary="cloning a GitHub repository" id="id655"/><a data-type="indexterm" data-primary="resources online" data-secondary="chapter code" data-tertiary="Part I code" id="id656"/> and make edits that you want to keep, there are two ways to accomplish this: forking or cloning. When you <em>fork</em> the repository, you create a copy in your account that remains linked to the original repository. This is useful when you will be submitting changes back to the original repository for updates. <em>Cloning</em> the repository creates a standalone copy in your GitHub account. For this book, I recommend that you clone the repository so that your portfolio project stands alone and shows the work you have completed.</p>

<p>To clone the repository, log in to GitHub and go to the <a href="https://github.com/new/import">GitHub Import Repository page</a>. Enter the following information in the fields on this page:</p>

<ul>
<li>
<p><em>The URL for your source repository</em>: <strong><code><a href="https://github.com/handsonapibook/api-book-part-one" class="bare"><em class="hyperlink">https://github.com/handsonapibook/api-book-part-one</em></a></code></strong></p>
</li>
<li>
<p><em>Your username for your source code repository</em>: Leave this blank.</p>
</li>
<li>
<p><em>Your access token or password for your source code repository</em>: Leave this blank.</p>
</li>
<li>
<p><em>Repository name</em>: <strong><code>portfolio-project</code></strong></p>
</li>
<li>
<p><em>Public</em>: Select this so that you can share the results of the work you are doing.</p>
</li>
</ul>

<p>Click Begin Import. The import process will begin and the message “Preparing your new repository” will be displayed. After several minutes, you will receive an email notifying you that your import has finished. Follow the link to your new cloned repository.</p>

<p>I will tell you more about the contents of this repository after you launch a GitHub Codespace.</p>
</div></section>








<section data-type="sect2" data-pdf-bookmark="Launching Your GitHub Codespace"><div class="sect2" id="id163">
<h2>Launching Your GitHub Codespace</h2>

<p>Launching a Codespace to work<a data-type="indexterm" data-primary="GitHub" data-secondary="Codespaces" data-tertiary="launching your Codespace" id="id657"/><a data-type="indexterm" data-primary="GitHub" data-secondary="cloning the repository" data-tertiary="launching your Part I Codespace" id="id658"/><a data-type="indexterm" data-primary="Codespaces (GitHub)" data-secondary="launching your Codespace" data-tertiary="Part I" id="id659"/> with this repository is simple. On this repository, click the Code button and select the Codespaces tab. Click “Create Codespace on main.” You should see a page with the status “Setting up your Codespace.” Your Codespace window will open as the setup continues. When the setup completes, your display will look similar to <a data-type="xref" href="#codespace_setup_complete_ch2">Figure 2-3</a>.</p>

<figure><div id="codespace_setup_complete_ch2" class="figure">
<img src="assets/haad_0204.png" alt="New GitHub Codespace" width="972" height="612"/>
<h6><span class="label">Figure 2-3. </span>New GitHub Codespace</h6>
</div></figure>

<p>Your Codespace is now created with the cloned repository. This is the environment you will be using for the rest of Part I of this book. <a data-type="indexterm" data-primary="GitHub" data-secondary="Codespaces" data-tertiary="renaming your Codespace" id="id660"/><a data-type="indexterm" data-primary="Codespaces (GitHub)" data-secondary="renaming your Codespace" id="id661"/>Before looking around, take a minute to open the <a href="https://github.com/codespaces">GitHub Codespaces page</a> and make a couple of updates. Scroll down the page to find this new Codespace, click the ellipsis to the right of the name, and select Rename. Enter the name <strong><code>Portfolio project codespace</code></strong> and click Save. You should see the message “Your codespace <em>Portfolio project codespace</em> has been updated.” <a data-type="indexterm" data-primary="GitHub" data-secondary="Codespaces" data-tertiary="auto-deletion turned off" id="id662"/><a data-type="indexterm" data-primary="Codespaces (GitHub)" data-secondary="auto-deletion turned off" id="id663"/>Click the ellipsis again, and then click the ribbon next to “Auto-delete Codespace” to turn off autodeletion.</p>
</div></section>








<section data-type="sect2" data-pdf-bookmark="Touring Your New Codespace"><div class="sect2" id="id20">
<h2>Touring Your New Codespace</h2>

<p>Go back to the tab that has your <a data-type="indexterm" data-primary="GitHub" data-secondary="Codespaces" data-tertiary="touring" id="id664"/><a data-type="indexterm" data-primary="GitHub" data-secondary="cloning the repository" data-tertiary="launching your Part I Codespace" id="id665"/><a data-type="indexterm" data-primary="Codespaces (GitHub)" data-secondary="touring" id="id666"/><a data-type="indexterm" data-primary="Codespaces (GitHub)" data-secondary="URL of" data-tertiary="Part I" id="id667"/><a data-type="indexterm" data-primary="GitHub" data-secondary="Codespaces" data-tertiary="URL of" id="id668"/>Codespace open, which looks like <a data-type="xref" href="#codespace_setup_complete_ch2">Figure 2-3</a>. The URL of this page is an auto-generated address such as <em>happy-circus-1234.github.dev</em>. This will be the URL you will use to come back to this Codespace. You could bookmark it if you like. <a data-type="indexterm" data-primary="GitHub" data-secondary="Codespaces" data-tertiary="launching your Codespace" id="id669"/><a data-type="indexterm" data-primary="Codespaces (GitHub)" data-secondary="launching your Codespace" data-tertiary="Part I" id="id670"/>I typically go to the <a href="https://github.com/codespaces">GitHub Codespaces page</a> and launch my Codespace from there.</p>

<p>The display that you see for Codespaces is VS Code, which is a popular open source IDE. Working in Codespaces will be like using VS Code through the browser. Remember that all of the work you do is being executed in a remote container that is running on the cloud. <a data-type="indexterm" data-primary="GitHub" data-secondary="Codespaces" data-tertiary="overview URL" id="id671"/><a data-type="indexterm" data-primary="resources online" data-secondary="GitHub Codespaces" data-tertiary="overview" id="id672"/><a data-type="indexterm" data-primary="Codespaces (GitHub)" data-secondary="overview URL" id="id673"/>If you would like to know more about how this works, take a look at the  <a href="https://oreil.ly/cdesps">GitHub Codespaces overview</a>.</p>

<p>On the left side of the screen is the Explorer, which shows the directory structure of your Codespace. This structure begins with the structure from the cloned repository. There is a separate subfolder for each chapter in the book that has code. For example, the <em>chapter2</em> folder is where you will do your coding for this chapter. Inside each chapter folder is a <em>\complete</em> subfolder that contains a working copy of the completed code from this chapter.</p>
<div data-type="tip"><h6>Tip</h6>
<p>I suggest that you follow along with the chapter and type the files yourself. You will learn the purpose of the files as you perform the work. If you run into any trouble, the files in <em>\complete</em> are available to check your work. If you would like to complete the chapters out of order, you can also use the completed files from the previous chapters as the starting point.</p>
</div>

<p>At the bottom of the window, you<a data-type="indexterm" data-primary="GitHub" data-secondary="Codespaces" data-tertiary="terminal window" id="id674"/><a data-type="indexterm" data-primary="terminal window of GitHub Codespace" id="id675"/><a data-type="indexterm" data-primary="Codespaces (GitHub)" data-secondary="terminal window" id="id676"/> will see the Terminal window selected. This is an interface to the command line of the Linux container that is running your Code​spa⁠ces. Throughout Part I, you will enter commands in the terminal window.</p>

<p>Your Codespace has been<a data-type="indexterm" data-primary="Codespaces (GitHub)" data-secondary="Python version check" id="id677"/><a data-type="indexterm" data-primary="Python" data-secondary="version used for projects" data-tertiary="checking Codespace version" id="id678"/><a data-type="indexterm" data-primary="version of Python used for projects" data-secondary="checking Codespace version" id="id679"/><a data-type="indexterm" data-primary="GitHub" data-secondary="Codespaces" data-tertiary="Python version check" id="id680"/> preloaded with the version of Python that you need. Verify this by entering <strong><code>python3 --version</code></strong> in the terminal command line. You should see Python version 3.10 or later, as shown here:</p>

<pre data-type="programlisting" data-code-language="shell">$ python3 --version
Python 3.10.13</pre>

<p>Stop the Codespace by clicking in the bottom left of the window and entering <strong><code>Stop current codespace</code></strong> from the dialog window. This will reduce the number of free hours you use working in Codespaces.</p>

<p>Congratulations! This is the repository and Codespace you will use for your Part I portfolio project.</p>
</div></section>








<section data-type="sect2" data-pdf-bookmark="Making Your First Commit"><div class="sect2" id="id21">
<h2>Making Your First Commit</h2>

<p>Restart your Codespace from the <a href="https://github.com/codespaces">GitHub Codespaces page</a>. <a data-type="indexterm" data-primary="GitHub" data-secondary="Codespaces" data-tertiary="committing changes to GitHub" id="ch02-commit"/><a data-type="indexterm" data-primary="Codespaces (GitHub)" data-secondary="committing changes to GitHub" id="ch02-commit2"/><a data-type="indexterm" data-primary="committing Codespace changes to GitHub" id="ch02-commit3"/>There is one item to notice as you work in this environment. Your new Codespace begins with the same directory structure as your repository on GitHub.com. However, files you add or make in your Codespace are initially stored only on the Codespace—they are not updated in your repository automatically. As you complete the code in this book and develop your project, you should periodically <em>commit</em> your changes to GitHub, which saves your changes and adds a message about the purpose of the change. Frequent commits ensure that you don’t lose changes if something happens to your Codespace and allow you to go back to a working copy if you break something. Consistent commits over time demonstrate activity in your GitHub profile, which is a sign of credibility for those viewing your GitHub history.</p>

<p>You do not want to commit everything<a data-type="indexterm" data-primary="committing Codespace changes to GitHub" data-secondary=".gitignore file" data-secondary-sortas="gitignore file" id="id681"/><a data-type="indexterm" data-primary=".gitignore file" data-primary-sortas="gitignore file" id="id682"/><a data-type="indexterm" data-primary="Codespaces (GitHub)" data-secondary="committing changes to GitHub" data-tertiary=".gitignore file" data-tertiary-sortas="gitignore file" id="id683"/> in your Codespace to your repository. There will be some files that get generated that you don’t need to save in GitHub. This is where the <em>.gitignore</em> file comes in. Open this file and take a look at it now.</p>

<p>The <em>.gitignore</em> file contains file patterns or specific names of all the files in your local Codespace that should be excluded from your repository. Many of these are local config files generated by the libraries you use. Some are sensitive files that should not be published in your repository.</p>
<div data-type="tip"><h6>Tip</h6>
<p>At a minimum, you should always<a data-type="indexterm" data-primary="Codespaces (GitHub)" data-secondary="committing changes to GitHub" data-tertiary="how often" id="id684"/><a data-type="indexterm" data-primary="GitHub" data-secondary="Codespaces" data-tertiary="commit frequency" id="id685"/> commit your work when you complete a working session. I commit code several times an hour, when I have completed a chunk of work that is related. For example, if I am modifying multiple files to add a new scoring field to an API, I modify each file and then make a commit with the comment “Added scoring field.” (It is not necessary to state the files you changed in the comment, because GitHub tracks that.)</p>
</div>

<p>Next, you will update<a data-type="indexterm" data-primary="GitHub" data-secondary="README.md file" id="id686"/><a data-type="indexterm" data-primary="readme.md file" data-secondary="GitHub repository" id="id687"/> the <em>README.md</em> file in the root directory. Each GitHub repository has a README file that provides information about the purpose and contents of the repository. <a data-type="indexterm" data-primary="markdown" id="id688"/><a data-type="indexterm" data-primary="readme.md file" data-secondary="GitHub repository" data-tertiary="modifying" id="id689"/><a data-type="indexterm" data-primary="GitHub" data-secondary="README.md file" data-tertiary="modifying" id="id690"/>It is written in <em>Markdown</em>, which is a lightweight formatting language. In your Codespace, click on the <em>README.md</em> file in the Explorer. Modify the text of this file as shown here, and then save it:</p>

<pre data-type="programlisting" data-code-language="markdown"># API Portfolio Project
This project demonstrates API coding best practices using Python and FastAPI.

This project was built from examples from the book
[Hands-On APIs For API and Data Science](https://hands-on-api-book.com).</pre>

<p>To preview what this file will look like on GitHub, right-click the <em>README.md</em> file and select Open Preview. You will see the updates you made. From the burger menu on the upper left of the window, select File, then Save. Now that you have saved this file, the built-in version control has flagged this. First, you see that the <em>README.md</em> file in the Explorer has changed color. Beside that file you see an M, which stands for modified. In the left sidebar, the source control icon has a colored circle with the numeral 1. This means that one change is available to commit to source control. Click on that source control icon, and you will see the Source Control tab, as shown in <a data-type="xref" href="#source_control_tab_ch2">Figure 2-4</a>.</p>

<figure><div id="source_control_tab_ch2" class="figure">
<img src="assets/haad_0205.png" alt="Source control with change flagged" width="648" height="356"/>
<h6><span class="label">Figure 2-4. </span>Source control with change flagged</h6>
</div></figure>

<p>Updating your repository requires several steps:</p>
<ol>
<li>
<p>Add commit message: The message you add will be the subject of the commit in GitHub.</p>
</li>
<li>
<p>Stage your changes: Identify the changed files to be included in the commit.</p>
</li>
<li>
<p>Commit the changes to your local repository: Your Codespace comes preloaded with a Git repository, and your changes get committed there first.</p>
</li>
<li>
<p>Sync the changes from your local repo to GitHub: Push your changes up to the repository at the GitHub.com website, and pull down any changes that occurred directly on the website.</p>
</li>

</ol>

<p>To save time from here going forward, I’m going to walk you through a shortcut that will save a few steps as you commit in the future. <a data-type="indexterm" data-primary="committing Codespace changes to GitHub" data-secondary="always stage all changes and commit" id="id691"/>For step 1, add this message in the box: <strong><code>Personalize title of project.</code></strong> Next, click the Commit button. A dialog will be displayed that says, “There are no staged changes to commit. Would you like to stage all your changes and commit them directly?” Click Always.</p>

<p>By choosing to always stage all changes and commit them, you are combining steps 2 and 3. For step 4, click Sync Changes to send the updates to the repository at GitHub, which is the <em>origin</em> or source of the files. When the dialog is displayed that says “This action will pull and push commits from and to origin/main,” click OK, Don’t Show Again. One last dialog will be displayed that says “Would you like Visual Studio Code to periodically run git fetch?” Click Yes.</p>

<p>In another tab, go to GitHub.com and open the <em>portfolio-project</em> repository, which should look like <a data-type="xref" href="#committed_code_ch2">Figure 2-5</a>.</p>

<figure><div id="committed_code_ch2" class="figure">
<img src="assets/haad_0206.png" alt="Repository showing first commit" width="1622" height="596"/>
<h6><span class="label">Figure 2-5. </span>Repository showing first commit</h6>
</div></figure>

<p>Above the directories, click the linked text “Personalize title of your project.” This is the record of the commit that you just sent. You can see the files that you changed. When you want to commit changes going forward, you only need to add a title and click Commit, then click Sync Changes to commit your code to GitHub.</p>

<p>This is excellent progress. You have made your first commit, and you are  working in your Codespace environment. It’s time to get started with your source data.<a data-type="indexterm" data-startref="ch2-codsta" id="id692"/><a data-type="indexterm" data-startref="ch2-codsta2" id="id693"/><a data-type="indexterm" data-startref="ch2-codsta3" id="id694"/><a data-type="indexterm" data-startref="ch2-codsta4" id="id695"/><a data-type="indexterm" data-startref="ch02-commit" id="id696"/><a data-type="indexterm" data-startref="ch02-commit2" id="id697"/><a data-type="indexterm" data-startref="ch02-commit3" id="id698"/></p>
</div></section>
</div></section>






<section data-type="sect1" data-pdf-bookmark="Additional Resources"><div class="sect1" id="id22">
<h1>Additional Resources</h1>

<p>To learn about the technical architecture of APIs, I recommend <em>Mastering API Architecture: Design, Operate, and Evolve API-Based Systems</em>, by James Gough, Daniel Bryant, and Matthew Auburn (O’Reilly, 2022).<a data-type="indexterm" data-primary="Mastering API Architecture (Gough, Bryant, and Auburn)" id="id699"/><a data-type="indexterm" data-primary="Gough, James" id="id700"/><a data-type="indexterm" data-primary="Bryant, Daniel" id="id701"/><a data-type="indexterm" data-primary="Auburn, Matthew" id="id702"/><a data-type="indexterm" data-primary="architecture of APIs" data-secondary="book for learning" id="id703"/><a data-type="indexterm" data-primary="APIs" data-secondary="architecture of" data-tertiary="book for learning" id="id704"/></p>

<p>For some tips about RESTful API design, read <a href="https://oreil.ly/_97zo">“The Ten REST Commandments” by Steve McDougall</a>.<a data-type="indexterm" data-primary="“The Ten REST Commandments” (McDougall)" data-primary-sortas="Ten REST Commandments" id="id705"/><a data-type="indexterm" data-primary="McDougall, Steve" id="id706"/><a data-type="indexterm" data-primary="RESTful" data-secondary="design tips article online" id="id707"/><a data-type="indexterm" data-primary="REST (Representational State Transfer) APIs" data-secondary="design tips article online" id="id708"/><a data-type="indexterm" data-primary="resources online" data-secondary="REST article" id="id709"/><a data-type="indexterm" data-primary="architecture of APIs" data-secondary="REST chosen for project" data-tertiary="design tips article online" id="id710"/><a data-type="indexterm" data-primary="architecture of APIs" data-secondary="architectural styles" data-tertiary="REST chosen for project" id="id711"/><a data-type="indexterm" data-primary="APIs" data-secondary="architecture of" data-tertiary="REST design tips article online" id="id712"/></p>
</div></section>






<section data-type="sect1" data-pdf-bookmark="Summary"><div class="sect1" id="id378">
<h1>Summary</h1>

<p>In this chapter, you started creating an API to fill the user needs you identified in <a data-type="xref" href="ch01.html#chapter_1">Chapter 1</a>. Here is what you have accomplished so far:</p>

<ul>
<li>
<p>You defined the API endpoints needed to complete the user stories.</p>
</li>
<li>
<p>You set up your development environment using GitHub Codespaces.</p>
</li>
</ul>

<p>In <a data-type="xref" href="ch03.html#chapter_3">Chapter 3</a>, you will create the website database using SQLite, create Python code to read the database with SQLAlchemy, and perform unit testing with pytest.</p>
</div></section>
</div></section></div>
</div>
</body></html>