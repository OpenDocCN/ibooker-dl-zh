["```py\nresponse = client.chat.completions.create(\n        model=\"gpt-4-1106-preview\",\n        messages=[{\"role\": \"system\",\n                   \"content\": \"You are a helpful assistant.\"},\n                  {\"role\": \"user\", \"content\": user_message}],\n        temperature=0.7,\n        tools=[     #1\n            {\n                \"type\": \"function\",     #2\n                \"function\": {\n                    \"name\": \"recommend\",\n                    \"description\": \"Provide a … topic.\",     #3\n                    \"parameters\": {\n                        \"type\": \"object\",     #4\n                        \"properties\": {\n                            \"topic\": {\n                                \"type\": \"string\",\n                                \"description\": \n                                   \"The topic,… for.\",     #5\n                            },\n                            \"rating\": {\n                                \"type\": \"string\",\n                                \"description\": \n                          \"The rating … given.\",    #5\n                                \"enum\": [\"good\",\n                                         \"bad\", \n                                         \"terrible\"]     #6\n                                },\n                        },\n                        \"required\": [\"topic\"],\n                    },\n                },\n                }\n            ]\n        )\n```", "```py\nuser = \"Can you please recommend me a time travel movie?\"\nresponse = ask_chatgpt(user)     #1\nprint(response)\n\n**###Output**\nFunction(arguments='{\"topic\":\"time travel movie\"}', \n                      name='recommend')     #2\n\nuser = \"Can you please recommend me a good time travel movie?\"\nresponse = ask_chatgpt(user)     #3\nprint(response)\n\n**###Output**\nFunction(arguments='{\"topic\":\"time travel movie\",\n                     \"rating\":\"good\"}',\n name='recommend')     #4\n```", "```py\ndef recommend(topic, rating=\"good\"):\n    if \"time travel\" in topic.lower():     #1\n        return json.dumps({\"topic\": \"time travel\",\n                           \"recommendation\": \"Back to the Future\",\n                           \"rating\": rating})\n    elif \"recipe\" in topic.lower():    #1\n        return json.dumps({\"topic\": \"recipe\",\n                           \"recommendation\": \"The best thing … ate.\",\n                           \"rating\": rating})\n    elif \"gift\" in topic.lower():      #1\n        return json.dumps({\"topic\": \"gift\",\n                           \"recommendation\": \"A glorious new...\",\n                           \"rating\": rating})\n    else:     #2\n        return json.dumps({\"topic\": topic,\n                           \"recommendation\": \"unknown\"})     #3\n```", "```py\nuser = \"\"\"Can you please make recommendations for the following:\n1\\. Time travel movies\n2\\. Recipes\n3\\. Gifts\"\"\"     #1\nmessages = [{\"role\": \"user\", \"content\": user}]     #2\ntools = [     #3\n    {\n        \"type\": \"function\",\n        \"function\": {\n            \"name\": \"recommend\",\n            \"description\": \n                \"Provide a recommendation for any topic.\",\n            \"parameters\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"topic\": {\n                        \"type\": \"string\",\n                        \"description\": \n                              \"The topic, … recommendation for.\",\n                        },\n                        \"rating\": {\n                            \"type\": \"string\",\n                            \"description\": \"The rating … was given.\",\n                            \"enum\": [\"good\", \"bad\", \"terrible\"]\n                            },\n                        },\n                \"required\": [\"topic\"],\n                },\n            },\n        }\n    ]\n```", "```py\nresponse = client.chat.completions.create(\n    model=\"gpt-3.5-turbo-1106\",     #1\n    messages=messages,     #2\n    tools=tools,     #2\n    tool_choice=\"auto\",   #3\n)\nresponse_message = response.choices[0].message     #4\n```", "```py\ntool_calls = response_message.tool_calls     #1\nif tool_calls:    #1\n    available_functions = {\n        \"recommend\": recommend,\n    }     #2\n    # Step 4: send the info for each function call and function response to \nthe model\n    for tool_call in tool_calls:     #3\n        function_name = tool_call.function.name\n        function_to_call = available_functions[function_name]\n        function_args = json.loads(tool_call.function.arguments)\n        function_response = function_to_call(\n            topic=function_args.get(\"topic\"),     #4\n            rating=function_args.get(\"rating\"),\n        )\n        messages.append(     #5\n            {\n                \"tool_call_id\": tool_call.id,\n                \"role\": \"tool\",\n                \"name\": function_name,\n                \"content\": function_response,\n            }\n        )  # extend conversation with function response\n    second_response = client.chat.completions.create(     #6\n        model=\"gpt-3.5-turbo-1106\",\n        messages=messages,\n    )\n    return second_response.choices[0].message.content  #6\n```", "```py\nHere are some recommendations for you:\n\n1\\. Time travel movies: \"Back to the Future\"\n2\\. Recipes: \"The best thing you ever ate.\"\n3\\. Gifts: \"A glorious new...\" (the recommendation was cut off, so I \ncouldn't provide the full recommendation)\n\nI hope you find these recommendations helpful! Let me know if you need \nmore information.\n```", "```py\npip uninstall semantic-kernel     #1\n\ngit clone https://github.com/microsoft/semantic-kernel.git     #2\n\ncd semantic-kernel/python     #3\n\npip install -e .     #4\n```", "```py\nimport semantic_kernel as sk\n\nselected_service = \"OpenAI\"     #1\nkernel = sk.Kernel()     #2\n\nservice_id = None\nif selected_service == \"OpenAI\":\n    from semantic_kernel.connectors.ai.open_ai import OpenAIChatCompletion\n\n    api_key, org_id = sk.openai_settings_from_dot_env()     #3\n    service_id = \"oai_chat_gpt\"\n    kernel.add_service(\n        OpenAIChatCompletion(\n            service_id=service_id,\n            ai_model_id=\"gpt-3.5-turbo-1106\",\n            api_key=api_key,\n            org_id=org_id,\n        ),\n    )\nelif selected_service == \"AzureOpenAI\":\n    from semantic_kernel.connectors.ai.open_ai import AzureChatCompletion\n\n    deployment, api_key, endpoint = \n↪ sk.azure_openai_settings_from_dot_env()   #4\n    service_id = \"aoai_chat_completion\"\n    kernel.add_service(\n        AzureChatCompletion(\n            service_id=service_id,\n            deployment_name=deployment,\n            endpoint=endpoint,\n            api_key=api_key,\n        ),\n    )\n\n#This function is currently broken\nasync def run_prompt():\n    result = await kernel.invoke_prompt( \n              ↪ prompt=\"recommend a movie about \n↪ time travel\")     #5\n    print(result)\n\n# Use asyncio.run to execute the async function\nasyncio.run(run_prompt())     #6\n\n###Output\nOne highly recommended time travel movie is \"Back to the Future\" (1985) \ndirected by Robert Zemeckis. This classic film follows the adventures of \nteenager Marty McFly (Michael J. Fox)…\n```", "```py\n#top section omitted…\nprompt = \"\"\"     #1\nsystem:\n\nYou have vast knowledge of everything and can recommend anything provided \nyou are given the following criteria, the subject, genre, format and any \nother custom information.\n\nuser:\nPlease recommend a {{$format}} with the subject {{$subject}} and {{$genre}}.\nInclude the following custom information: {{$custom}}\n\"\"\"\n\nprompt_template_config = sk.PromptTemplateConfig(     #2\n    template=prompt,\n    name=\"tldr\",\n    template_format=\"semantic-kernel\",\n    input_variables=[\n        InputVariable(\n            name=\"format\", \n            description=\"The format to recommend\", \n            is_required=True\n        ),\n        InputVariable(\n            name=\"suject\", \n            description=\"The subject to recommend\", \n            is_required=True\n        ),\n        InputVariable(\n            name=\"genre\", \n            description=\"The genre to recommend\", \n            is_required=True\n        ),\n        InputVariable(\n            name=\"custom\",\n            description=\"Any custom information [CA]\n                       to enhance the recommendation\",\n            is_required=True,\n        ),\n    ],\n    execution_settings=execution_settings,\n)\n\nrecommend_function = kernel.create_function_from_prompt(     #3\n    prompt_template_config=prompt_template_config,\n    function_name=\"Recommend_Movies\",\n    plugin_name=\"Recommendation\",\n)\n\nasync def run_recommendation(     #4\n    subject=\"time travel\",\n    format=\"movie\", \n    genre=\"medieval\", \n           custom=\"must be a comedy\"\n):\n    recommendation = await kernel.invoke(\n        recommend_function,\n        sk.KernelArguments(subject=subject,\n                      format=format, \n                      genre=genre, \n                      custom=custom),     #5\n    )\n    print(recommendation)\n\n# Use asyncio.run to execute the async function\nasyncio.run(run_recommendation())    #5\n\n###Output\nOne movie that fits the criteria of being about time travel, set in a \nmedieval period, and being a comedy is \"The Visitors\" (Les Visiteurs) \nfrom 1993\\. This French film, directed by Jean-Marie Poiré, follows a \nknight and his squire who are transported to the modern era by a \nwizard’s spell gone wrong.…\n```", "```py\n{\n    \"schema\": 1,\n    \"type\": \"completion\",     #1\n    \"description\": \"A function to recommend movies based on users list of \npreviously seen movies.\",\n    \"completion\": {     #2\n        \"max_tokens\": 256,\n        \"temperature\": 0,\n        \"top_p\": 0,\n        \"presence_penalty\": 0,\n        \"frequency_penalty\": 0\n    },\n    \"input\": {\n        \"parameters\": [\n            {\n                \"name\": \"input\",     #3\n                \"description\": \"The users list of previously seen movies.\",\n                \"defaultValue\": \"\"\n            }\n        ]\n    },\n    \"default_backends\": []\n}\n```", "```py\nYou are a wise movie recommender and you have been asked to recommend a \nmovie to a user.\nYou are provided a list of movies that the user has watched before.\nYou want to recommend a movie that the user has not watched before.\n[INPUT]\n{{$input}}\n[END INPUT]\n```", "```py\nkernel = sk.Kernel()\n\nplugins_directory = \"plugins\"\n\nrecommender = kernel.import_plugin_from_prompt_directory(\n    plugins_directory,\n    \"Recommender\",\n)     #1\n\nrecommend = recommender[\"Recommend_Movies\"]\n\nseen_movie_list = [     #2\n    \"Back to the Future\",\n    \"The Terminator\",\n    \"12 Monkeys\",\n    \"Looper\",\n    \"Groundhog Day\",\n    \"Primer\",\n    \"Donnie Darko\",\n    \"Interstellar\",\n    \"Time Bandits\",\n    \"Doctor Strange\",\n]\n\nasync def run():\n    result = await kernel.invoke(\n        recommend,\n        sk.KernelArguments(     #3\n            settings=execution_settings, input=\", \".join(seen_movie_list)\n        ),\n    )\n    print(result)\n\nasyncio.run(run())     #4\n\n###Output\nBased on the list of movies you've provided, it seems you have an \ninterest in science fiction, time travel, and mind-bending narratives. \nGiven that you've watched a mix of classics and modern films in this \ngenre, I would recommend the following movie that you have not watched \nbefore:\n\n\"Edge of Tomorrow\" (also known as \"Live Die Repeat: Edge of Tomorrow\")…\n```", "```py\nclass MySeenMoviesDatabase:\n    \"\"\"\n    Description: Manages the list of users seen movies.     #1\n    \"\"\"\n    @kernel_function(     #2\n        description=\"Loads a list of movies … user has already seen\",\n        name=\"LoadSeenMovies\",\n    )\n    def load_seen_movies(self) -> str:     #3\n        try:\n            with open(\"seen_movies.txt\", 'r') as file:     #4\n                lines = [line.strip() for line in file.readlines()]\n                comma_separated_string = ', '.join(lines)\n            return comma_separated_string\n        except Exception as e:\n            print(f\"Error reading file: {e}\")\n            return None\n```", "```py\nplugins_directory = \"plugins\"\n\nrecommender = kernel.import_plugin_from_prompt_directory(\n    plugins_directory,\n    \"Recommender\",\n)     #1\n\nrecommend = recommender[\"Recommend_Movies\"]\n\nseen_movies_plugin = kernel.import_plugin_from_object(\n    MySeenMoviesDatabase(), \"SeenMoviesPlugin\"\n)     #2\n\nload_seen_movies = seen_movies_plugin[\"LoadSeenMovies\"]     #3\n\nasync def show_seen_movies():\n    seen_movie_list = await load_seen_movies(kernel)\n    return seen_movie_list\n\nseen_movie_list = asyncio.run(show_seen_movies())     #4\nprint(seen_movie_list)\n\nasync def run():      #5\n    result = await kernel.invoke(\n        recommend,\n        sk.KernelArguments(\n                settings=execution_settings,\n                input=seen_movie_list),\n    )\n    print(result)\n\nasyncio.run(run())    #5\n\n###Output\nThe Matrix, The Matrix Reloaded, The Matrix Revolutions, The Matrix \nResurrections – `*output from print statement*`\nBased on your interest in the \"The Matrix\" series, it seems you enjoy \nscience fiction films with a strong philosophical undertone and action \nelements. Given that you've watched all\n```", "```py\nsk_prompt = \"\"\"\nYou are a wise movie recommender and you have been asked to recommend a \nmovie to a user.\nYou have a list of movies that the user has watched before.\nYou want to recommend a movie that \nthe user has not watched before.     #1\nMovie List: {{MySeenMoviesDatabase.LoadSeenMovies}}.     #2\n\"\"\"\n```", "```py\nprompt_template_config = sk.PromptTemplateConfig(\n    template=sk_prompt,\n    name=\"tldr\",\n    template_format=\"semantic-kernel\",\n    execution_settings=execution_settings,\n)     #1\n\nrecommend_function = kernel.create_function_from_prompt(\n    prompt_template_config=prompt_template_config,\n    function_name=\"Recommend_Movies\",\n    plugin_name=\"Recommendation\",\n)     #2\n\nasync def run_recommendation():     #3\n    recommendation = await kernel.invoke(\n        recommend_function,\n        sk.KernelArguments(),\n    )\n    print(recommendation)\n\n# Use asyncio.run to execute the async function\nasyncio.run(run_recommendation())\n###Output\nBased on the list provided, it seems the user is a fan of the Matrix \nfranchise. Since they have watched all four existing Matrix movies, I \nwould recommend a…\n```", "```py\nfrom semantic_kernel.functions import kernel_funct\nimport requests\nimport inspect\n\ndef print_function_call():     #1\n    #omitted …\n\nclass TMDbService:     #2\n    def __init__(self):\n        # enter your TMDb API key here\n        self.api_key = \"your-TMDb-api-key\"\n\n    @kernel_function(     #2\n        description=\"Gets the movie genre ID for a given genre name\",\n        name=\"get_movie_genre_id\",\n        input_description=\"The movie genre name of the genre_id to get\",\n        )\n    def get_movie_genre_id(self, genre_name: str) -> str:     #3\n        print_function_call()\n        base_url = \"https://api.themoviedb.org/3\"\n        endpoint = f\"{base_url}/genre/movie/list↪\n                     ↪ ?api_key={self.api_key}&language=en-US\"\n\n        response = requests.get(endpoint)     #4\n        if response.status_code == 200:    #4\n            genres = response.json()['genres']\n            for genre in genres:\n                if genre_name.lower() in genre['name'].lower():\n                    return str(genre['id'])     #5\n        return None\n```", "```py\n@kernel_function(     #1\n        description=\"””\nGets a list of currently playing movies for a given genre””\",\n        name=\"get_top_movies_by_genre\",\n        input_description=\"The genre of the movies to get\",\n        )\n    def get_top_movies_by_genre(self, genre: str) -> str:\n        print_function_call()\n        genre_id = self.get_movie_genre_id(genre)     #2\n        if genre_id:\n            base_url = \"https://api.themoviedb.org/3\n            playing_movies_endpoint = f\"{base_url}/movie/now_playing?↪\n↪ api_key={self.api_key}&language=en-US\"\n            response = requests.get(\n                          playing_movies_endpoint)     #3\n            if response.status_code != 200:\n                return \"\"\n\n            playing_movies = response.json()['results'\n            for movie in playing_movies:     #4\n                movie['genre_ids'] = [str(genre_id)  \n                      ↪ for genre_id in movie['genre_ids']]\n            filtered_movies = [movie for movie ↪\n↪ in playing_movies if genre_id ↪\n↪ in movie['genre_ids']][:10]     #5\n            results = \", \".join([movie['title'] for movie in filtered_movies])\n            return results\n        else:\n            return \"\"\n```", "```py\nimport semantic_kernel as sk\nfrom plugins.Movies.tmdb import TMDbService\n\nasync def main():\n    kernel = sk.Kernel()     #1\n\n    tmdb_service = kernel.import_plugin_from_object ↪\n↪ (TMDbService(), \"TMDBService\")     #2\n\n    print(\n        await tmdb_service[\"get_movie_genre_id\"](\n            kernel, sk.KernelArguments(\n                            genre_name=\"action\")     #3\n        )\n    )     #4\n    print(\n        await tmdb_service[\"get_tv_show_genre_id\"](\n            kernel, sk.KernelArguments(\n                            genre_name=\"action\")     #5\n        )\n    )     #6\n    print(\n        await tmdb_service[\"get_top_movies_by_genre\"](\n            kernel, sk.KernelArguments(\n                            genre_name=\"action\")     #7\n        )\n    )     #8\n    print(\n        await tmdb_service[\"get_top_tv_shows_by_genre\"](\n            kernel, sk.KernelArguments(\n                            genre_name=\"action\")    #7\n        )\n    )\n    print(await tmdb_service[\"get_movie_genres\"](\nkernel, sk.KernelArguments()))                        #9\n    print(await tmdb_service[\"get_tv_show_genres\"](\nkernel, sk.KernelArguments()))                       #9\n\n# Run the main function\nif __name__ == \"__main__\":\n    import asyncio\n\n    asyncio.run(main())     #10\n\n###Output\nFunction name: get_top_tv_shows_by_genre     #11\nArguments:\n  self = <skills.Movies.tmdb.TMDbService object at 0x00000159F52090C0>\n  genre = action\nFunction name: get_tv_show_genre_id    #11\nArguments:\n  self = <skills.Movies.tmdb.TMDbService object at 0x00000159F52090C0>\n  genre_name = action\nArcane, One Piece, Rick and Morty, Avatar: The Last Airbender, Fullmetal \nAlchemist: Brotherhood, Demon Slayer: Kimetsu no Yaiba, Invincible, \nAttack on Titan, My Hero Academia, Fighting Spirit, The Owl House\n```", "```py\nsystem_message = \"You are a helpful AI assistant.\"\n\ntmdb_service = kernel.import_plugin_from_object(\nTMDbService(), \"TMDBService\")     #1\n\n# extracted section of code\nexecution_settings = sk_oai.OpenAIChatPromptExecutionSettings(\n        service_id=service_id,\n        ai_model_id=model_id,\n        max_tokens=2000,\n        temperature=0.7,\n        top_p=0.8,\n        tool_choice=\"auto\",\n        tools=get_tool_call_object(\n            kernel, {\"exclude_plugin\": [\"ChatBot\"]}),     #2\n    )\n\nprompt_config = sk.PromptTemplateConfig.from_completion_parameters(\n    max_tokens=2000,\n    temperature=0.7,\n    top_p=0.8,\n    function_call=\"auto\",\n    chat_system_prompt=system_message,\n)     #3\nprompt_template = OpenAIChatPromptTemplate(\n    \"{{$user_input}}\", kernel.prompt_template_engine, prompt_config\n)     #4\n\nhistory = ChatHistory()\n\nhistory.add_system_message(\"You recommend movies and TV Shows.\")\nhistory.add_user_message(\"Hi there, who are you?\")\nhistory.add_assistant_message(\n    \"I am Rudy, the recommender chat bot. I'm trying to figure out what \npeople need.\"\n)     #5\n\nchat_function = kernel.create_function_from_prompt(\n    prompt_template_config=prompt_template,\n    plugin_name=\"ChatBot\",\n    function_name=\"Chat\",\n)     #6\n```", "```py\nasync def chat() -> bool:\n    try:\n        user_input = input(\"User:> \")     #1\n    except KeyboardInterrupt:\n        print(\"\\n\\nExiting chat...\")\n        return False\n    except EOFError:\n        print(\"\\n\\nExiting chat...\")\n        return False\n\n    if user_input == \"exit\":     #2\n        print(\"\\n\\nExiting chat...\")\n        return False\n    arguments = sk.KernelArguments(     #3\n        user_input=user_input,\n        history=(\"\\n\").join(\n           [f\"{msg.role}: {msg.content}\" for msg in history]),\n    )\n    result = await chat_completion_with_tool_call(     #4\n        kernel=kernel,\n        arguments=arguments,\n        chat_plugin_name=\"ChatBot\",\n        chat_function_name=\"Chat\",\n        chat_history=history,\n    )\n    print(f\"AI Agent:> {result}\")\n    return True\n```", "```py\nasync def main() -> None:\n    chatting = True\n    context = kernel.create_new_context()\n\n    print(\"Welcome to your first AI Agent\\     #1\n\\n  Type 'exit' to exit.\\\n\\n  Ask to get a list of currently playing movies by genre.\"\n    )\n    while chatting:     #2\n        chatting, context = await chat(context)     #3\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n```", "```py\nWelcome to your first AI Agent\n  Type 'exit' to exit.\n  Ask to get a list of currently playing movies by genre.\nUser:> Input: can you give me list of the current top playing movies for \nthe action and comedy genres?\n\nFunction name: get_top_movies_by_genre     #1\nArguments:\n  genre = action\nFunction name: get_movie_genre_id     #2\nArguments:\n  genre_name = action\nFunction name: get_top_movies_by_genre    #1\nArguments:\n  genre = comedy\nFunction name: get_movie_genre_id    #2\nArguments:\n  genre_name = comedy\nAgent:> Here are the current top-playing movies \nfor the action and comedy genres:\n\n**Action:**     #3\n1\\. The Hunger Games: The Ballad of Songbirds & Snakes\n2\\. Rebel Moon - Part One: A Child of Fire\n3\\. Aquaman and the Lost Kingdom\n4\\. Silent Night\n5\\. The Family Plan\n6\\. Freelance\n7\\. Migration\n8\\. Sound of Freedom\n9\\. Godzilla Minus One\n\n**Comedy:**     #4\n1\\. The Family Plan\n2\\. Wonka\n3\\. Freelance\n4\\. Saltburn\n5\\. Chicken Run: Dawn of the Nugget\n6\\. Trolls Band Together\n7\\. There's Something in the Barn\n8\\. Migration\n\nPlease note that some movies may overlap in both genres, such as \n\"The Family Plan\" and \"Freelance .\"\n```", "```py\ndef get_top_movies_by_genre(self, genre: str) -> str:\n        print_function_call()\n        genre_id = self.get_movie_genre_id(genre)\n        if genre_id:\n            #same code …\n\n            return json.dumps(filtered_movies)     #1\n        else:\n            return \"\"\n```", "```py\n#from skills.Movies.tmdb import TMDbService     #1\nfrom skills.Movies.tmdb_v2 import TMDbService     #2\n```", "```py\nUser:> get a list of currently playing movies for the \naction genre and only return movies about space     #1\nAgent:> To find currently playing action movies that are specifically \nabout space, I will need to manually filter the provided list for those \nthat have space-related themes in their overview. Here's what fits that \ncriteria from the list:\n\n1\\. **Rebel Moon - Part One: A Child of Fire**     #2\n   - Release Date: 2023-12-15\n   - Overview: When a peaceful colony on the edge of the galaxy finds \nitself threatened by the armies of the tyrannical Regent Balisarius, \nthey dispatch Kora, a young woman with a mysterious past, to seek out \nwarriors from neighboring planets to help them take a stand.\n\nThis is the only movie from the provided list that clearly mentions a \nspace-related theme in its overview. …\n```"]