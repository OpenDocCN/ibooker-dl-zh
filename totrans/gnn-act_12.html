<html><head></head><body>
<div id="sbo-rt-content"><div class="readable-text" id="p1">
<h1 class="readable-text-h1"><span class="chapter-title-numbering"><span class="num-string">appendix B</span></span> <span class="chapter-title-text">Installing and configuring PyTorch Geometric</span></h1>
</div>
<div class="readable-text" id="p2">
<h2 class="readable-text-h2"><span class="num-string">B.1</span> Installing PyTorch Geometric</h2>
</div>
<div class="readable-text" id="p3">
<p>PyTorch Geometric (PyG) is a library built on top of PyTorch for working with graph neural networks (GNNs). The newest pytorch geometric versions can be installed with: pip install torch_geometric. Only PyTorch is needed as a dependency. To install PyG with its extensions, you need to ensure that you have the correct versions of Compute Unified Device Architecture (CUDA), PyTorch, and PyG installed and compatible with each other.</p>
</div>
<div class="readable-text" id="p4">
<h3 class="readable-text-h3"><span class="num-string">B.1.1</span> On Windows/Linux</h3>
</div>
<div class="readable-text" id="p5">
<p>If you’re on a Windows or Linux system, follow these steps:</p>
</div>
<ul>
<li class="readable-text" id="p6"> <em>Install PyTorch</em>. First, install the appropriate version of PyTorch for your system. You can find the instructions on the official PyTorch website (<a href="https://pytorch.org/get-started/locally/">https://pytorch.org/get-started/locally/</a>). Make sure to select the correct CUDA version if you have an NVIDIA GPU. </li>
<li class="readable-text" id="p7"> <em>Find the PyTorch CUDA version</em>. After installing PyTorch, check its version and the CUDA version it was built with by running the following from Python: </li>
</ul>
<div class="browsable-container listing-container" id="p8">
<div class="code-area-container">
<pre class="code-area">import torch
print(torch.__version__)
print(torch.version.cuda)</pre>
</div>
</div>
<div class="readable-text" id="p9">
<p>This can also be run from the command line as follows:</p>
</div>
<div class="browsable-container listing-container" id="p10">
<div class="code-area-container">
<pre class="code-area">!python -c "import torch; print(torch.__version__)"
!python -c "import torch; print(torch.version.cuda)"</pre>
</div>
</div>
<div class="readable-text" id="p11">
<p>The outputs from this code will be used in the next step.</p>
</div>
<ul>
<li class="readable-text" id="p12"> <em>Install PyG dependencies</em>. Install the PyG dependencies (<code>torch-scatter</code>, <code>torch-sparse</code>, <code>torch-cluster</code>, <code>torch-spline-conv</code>) from the PyG repository, specifying the correct CUDA version: </li>
</ul>
<div class="browsable-container listing-container" id="p13">
<div class="code-area-container">
<pre class="code-area">pip install torch-scatter torch-sparse torch-cluster torch-spline-conv -f
https://data.pyg.org/whl/torch-${PYTORCH}+${CUDA}.xhtml</pre>
</div>
</div>
<div class="readable-text list-body-item" id="p14">
<p>In this code, replace <code>${PYTORCH}</code> with your PyTorch version (e.g., 1.13.1) and <code>${CUDA}</code> with the CUDA version from the previous step (e.g., cu117).</p>
</div>
<ul>
<li class="readable-text" id="p15"> <em>Install PyG</em>. Finally, install the PyG library itself: </li>
</ul>
<div class="browsable-container listing-container" id="p16">
<div class="code-area-container">
<pre class="code-area">pip install torch-geometric</pre>
</div>
</div>
<div class="readable-text" id="p17">
<h3 class="readable-text-h3"><span class="num-string">B.1.2</span> On MacOS</h3>
</div>
<div class="readable-text" id="p18">
<p>Since Macs don’t come with Nvidia GPUs, you can install the <code>cpu</code> version of PyG by following the same steps as in the previous section, but using <code>cpu</code> instead of a <code>CUDA</code> version when installing the dependencies.</p>
</div>
<div class="readable-text" id="p19">
<h3 class="readable-text-h3"><span class="num-string">B.1.3</span> Compatibility issues</h3>
</div>
<div class="readable-text" id="p20">
<p>For installing the extensions, it’s crucial to match the versions of CUDA, PyTorch, and PyG to avoid compatibility issues. Using mismatched versions can lead to errors during installation or runtime. Always refer to the official documentation for the latest installation instructions and version compatibility information. When writing this book, we encountered a few frustrating errors that were solved only by installing the correct combination of CUDA, PyTorch, and PyG. </p>
</div>
<div class="readable-text intended-text" id="p21">
<p>One particular insight we gained from dealing with tools designed to work with PyG, such as Open Graph Benchmark (OGB) and DistributedDataParallel (DDP), is that they may only work with specific versions of PyTorch. In chapter 7, the distributed computing example would only work with PyTorch v2.0.1 and CUDA v11.8. </p>
</div>
</div></body></html>