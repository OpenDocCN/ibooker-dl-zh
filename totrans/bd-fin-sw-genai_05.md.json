["```py\nApiSample/\n├─ docs/\n├─ app/\n│  ├─ routers/\n│  │  ├─ files.py\n│  ├─ __init__.py\n│  ├─ main.py\n├─ tests/\n```", "```py\nfrom fastapi import APIRouter  #1\n\nrouter = APIRouter()  #2\n```", "```py\nfrom fastapi import FastAPI  #1\nfrom .routers import files  \n\napp = FastAPI() #2\n\napp.include_router(files.router) #3\n```", "```py\n@router.get(\"/files/\")  #1\nasync def read_files():  #2\n    return [{\"file\": \"File_1\"}, {\"file\": \"File_2\"}] \n```", "```py\nfrom fastapi import FastAPI     #1\nfrom fastapi.testclient import TestClient #1\nfrom app.main import app  \n\nclient = TestClient(app)  #2\n\ndef test_read_files(): #3\n    response = client.get(\"/files\") #4\n assert response.status_code == 200 #5\n assert response.json() == #6\n➥[{\"file\": \"File_1\"}, {\"file\": \"File_2\"}] \n```", "```py\ntests/\n├─ features/\n│  ├─ files.feature\n├─ step_defs/\n│  ├─ test_files_feature.py\n```", "```py\nFeature: API /files\n\n  Scenario: I get a 200 status code when we call /files\n    When I make a GET request to the endpoint /files\n    Then the status code should be 200\n```", "```py\nimport pytest    #1\nfrom pytest_bdd import scenarios, when, then, parsers #1\nfrom fastapi.testclient import TestClient #1\nfrom app.main import app #1\n\nclient = TestClient(app)\n\nscenarios(\"../features/files.feature\") #2\n\n@pytest.fixture #3\ndef api_response():  #3\n    return {}  #3\n\n@when(parsers.parse('I {http_request_type} the endpoint {endpoint}')) #4\ndef when_http_request_to_endpoint( #5\n    api_response,  #5\n http_request_type, #5\n  endpoint #5\n):  #5\n    if http_request_type == \"GET\":  #5\n        response = client.get(endpoint)  #5\n    else:  #5\n        raise NotImplementedError #5\n    api_response[\"data\"] = response #5\n\n@then(parsers.parse(\"the status code should be {status_code:d}\")) #6\ndef then_the_status_code_is(api_response, status_code): #7\n    assert (  #8\n        api_response[\"data\"].status_code == status_code #8\n    ), f\"Expected {status_code}, but got  \n{when_http_request_to_endpoint.status_code}\"  #8\n```", "```py\n  Scenario: I get a 201 status code when we post to /files #1\n    When I make a POST request to the endpoint /files #2\n    Then the status code should be 201 #2\n```", "```py\n    if http_request_type == \"GET\": #1\n        response = client.get(endpoint) \n    elif http_request_type == \"POST\": #2\n        response = client.post(endpoint, json={\"file\": \"File_4\"}) \n    else: #3\n        raise NotImplementedError\n    api_response[\"data\"] = response\n```", "```py\nExpected :201\nActual   :405\n```", "```py\nfrom fastapi import APIRouter, Request #1\n... #2\n@router.post(\"/files/\") #3\nasync def create_file(request: Request):  #3\n    return {\"file\": \"File_3\"}  #3\n```", "```py\nExpected :201\nActual   :200\n```", "```py\nfrom fastapi import APIRouter, Request, status #1\n… #2\n@router.post(\"/files/\", status_code=status.HTTP_201_CREATED) #3\n```", "```py\napi/\n├─ app/\n├─ Dockerfile\n├─ requirements.txt\ndocker-compose.yml\n```", "```py\nFROM python:alpine #1\n\nWORKDIR /code #2\n\nCOPY ./requirements.txt /code/requirements.txt #3\n\nRUN apk -U upgrade   #4\nRUN apk add --no-cache libpq-dev python3-dev gcc musl-dev\nRUN pip install --upgrade pip #5#6\nRUN pip install --no-cache-dir --upgrade -r requirements.txt\n\nCOPY ./app /code/app #7\n\nCMD [\"uvicorn\", \"app.main:app\", \"--host\", \"0.0.0.0\", \"--port\", \"8000\"] #8\n```", "```py\nservices:\n  api:\n    build: \n      context: ./api\n      dockerfile: Dockerfile  \n    ports:\n      - 8000:8000\n```", "```py\nFROM wso2/wso2am:latest\n```", "```py\n  wso2:\n    build: \n      context: ./wso2\n      dockerfile: Dockerfile  \n    ports:\n      - 9443:9443 # Management Console\n      - 8243:8243 # HTTPS Requests\n      - 8280:8280 # HTTP Requests\n```", "```py\nfrom fastapi.openapi.utils import get_openapi #1\n… \ndef custom_openapi(): #2\n    if app.openapi_schema: \n        return app.openapi_schema\n    openapi_schema = get_openapi(  #3\n        title=\"File API\",  #3\n        version=\"0.0.1\",  #3\n        routes=app.routes,  #3\n        openapi_version=\"3.0.0\" #4\n    )\n app.openapi_schema = openapi_schema\n return app.openapi_schema\n\napp.openapi = custom_openapi\n```", "```py\n  \"code\": \"900902\",\n  \"message\": \"Missing Credentials\",\n  \"description\": \"Invalid Credentials. Make sure your API invocation call \nhas a header: 'Authorization : Bearer ACCESS_TOKEN' or 'Authorization : \nBasic ACCESS_TOKEN' or 'apikey: API_KEY'\"\n}\n```", "```py\npm.test(\"Response should be JSON and have a 200 status code\", function () {\n    pm.response.to.be.json; #1\n    pm.response.to.have.status(200); #2\n});\n```", "```py\npm.test(\"Response should have a file attribute\", function () {\n    pm.expect(jsonData[0]).to.have.property('file');\n});\n\npm.test(\"file attribute should be 'File_1'\", function () {\n    pm.expect(jsonData[0].file).to.eql('File_1');\n});\n\npm.test(\"Response has at least 2 items\", function () {\n    pm.expect(jsonData).to.be.an('array').that.has.lengthOf(2);\n});\n```", "```py\npm.test(\"There should be one instance of File_1\", () => {\n    let found = false;\n    jsonData.forEach(function(item, index) {\n        pm.expect(item).to.have.property(\"file\");\n        if ( item.file === 'File_1' ) {\n            found = true;\n        }\n    })\n    pm.expect(found).to.be.true;\n})\n```", "```py\npm.test(\"There should be one instance of File_1 using some\", function () {\n    const expectedValue = 'File_1';\n    const result = jsonData.some(function (item) {\n        return item.file === expectedValue;\n    });\n    pm.expect(result).to.be.true;\n})\n```", "```py\nfrom locust import HttpUser, task, between\n\nclass FileUser(HttpUser):\n    wait_time = between(1, 2.5)\n\n    host = \"http://localhost:8000\"\n\n    @task\n    def get_files(self):\n        self.client.get(\"/files\")\n```", "```py\nfrom locust import HttpUser, task, between\n\nclass FileUser(HttpUser): #1\n    wait_time = between(1, 2.5) #2\n\n    host = \"http://localhost:8000\" #3\n\n    @task #4\n    def get_files(self): #5\n        self.client.get(\"/files\")  #6\n\n    @task\n    def get_file(self):\n        self.client.get(\"/files/1\")\n\n    @task\n    def post_file(self):\n        self.client.post(\"/files\", json={\"file_id\": 5})\n\n    @task\n    def get_records(self):\n        self.client.get(\"/files/1/records\")\n\n    @task\n    def get_record(self):\n        self.client.get(\"/files/1/records/1\")\n```", "```py\nimport random\nfrom locust import HttpUser, task, between\n\nclass FileUser(HttpUser):\n    wait_time = between(1, 2.5)\n    host = \"http://localhost:8000\"\n\n    @task\n    def get_files(self):\n        self.client.get(\"/files\")\n\n    @task\n    def get_file(self):\n        file_id = random.randrange(1, 10) #1\n        self.client.get(f\"/files/{file_id}\")\n\n    @task\n    def post_file(self):\n        file_id = random.randrange(1, 10)\n        # Sending POST request to the \"/files\" endpoint\n        self.client.post(\"/files\", json={\"file_id\": file_id})\n\n    @task\n    def get_records(self):\n        file_id = random.randrange(1, 10)\n        self.client.get(f\"/files/{file_id}/records\")\n\n    @task\n    def get_record(self):\n        file_id = random.randrange(1, 10)\n record_id = random.randrange(1, 20)\n  self.client.get(f\"/files/{file_id}/records/{record_id}\")\n```", "```py\n…  #1\n@task #2\ndef get_files(self): #3\n   response = self.client.get(\"/files\")  #3\n   assert response.status_code == 200,  #3\n      f\"Unexpected status code: {response.status_code}\"  #3\n\n@task\ndef get_file(self):\n   response = self.client.get(f\"/files/{file_id}\")\n   assert response.status_code == 200, \n      f\"Unexpected status code: {response.status_code}\"\n\n@task\ndef post_file(self):\n   response = self.client.post(\"/files\", json={\"file_id\": file_id})\n   assert response.status_code == 200, \n      f\"Unexpected status code: {response.status_code}\"\n\n@task\ndef get_records(self):\n   file_id = random.randrange(1, 10) #4\n   response = self.client.get(f\"/files/{file_id}/records\")\n   assert response.status_code == 200, \n      f\"Unexpected status code: {response.status_code}\"\n\n@task\ndef get_record(self):\n   file_id = random.randrange(1, 10) #5\n record_id = random.randrange(1, 20) \n response = self.client.get(f\"/files/{file_id}/records/{record_id}\")\n assert response.status_code == 200, \n      f\"Unexpected status code: {response.status_code}\"\n```", "```py\n\"GET /files/3 HTTP/1.1\" 200 OK\n\"POST /files HTTP/1.1\" 405 Method Not Allowed\n\"POST /files HTTP/1.1\" 405 Method Not Allowed\n\"GET /files/6/records HTTP/1.1\" 307 Temporary Redirect\n\"GET /files HTTP/1.1\" 200 OK\n```", "```py\n@router.get(\"/files\")\n@router.get(\"/files/{file_id}\")\n@router.post(\"/files/\", status_code=status.HTTP_201_CREATED)\n@router.get(\"/files/{file_id}/records/\")\n@router.get(\"/files/{file_id}/records/{record_id}\")\n```", "```py\nrouter = APIRouter(prefix=\"/api/v1/files\")\n```", "```py\n@router.get(\"/{file_id}\")\nasync def read_file(file_id: str):\n    return {\"file_id\": file_id}\n```", "```py\nfrom pydantic import BaseModel, Field\n\nclass AchFile(BaseModel):\n    file_id: str\n```", "```py\n…\nfrom ach.AchFile import AchFile\n…\n@router.get(\"/{file_id}\")\nasync def read_file(file_id: str) -> AchFile:\n    return AchFile(file_id=file_id)\n```", "```py\nCOPY ./app /code/app\nCOPY ./ach /code/ach\n\nENV PYTHONPATH /code\n```", "```py\nfrom pydantic import BaseModel, Field #1\n…\n    file_id: str = Field(examples=[\"1\", \"2\"], title=\"ACH File ID\", #2\ndescription=\"The ACH file ID used to identify the file in the system\") \n```", "```py\npattern=r\"^[a-z0-9_]+$\"\n```", "```py\nfrom fastapi import FastAPI, Request, status, HTTPException\nfrom fastapi.responses import JSONResponse\n…\n@app.exception_handler(ValidationError)  #1\nasync def validation_exception_handler(request: Request, exc: ValidationError): #2\n    return JSONResponse(  #2\n        status_code=status.HTTP_400_BAD_REQUEST,  #2\n        content={\"detail\": exc.errors()}  #2\n    ) \n```", "```py\ndef test_read_file_lower_case(): #1\n    response = client.get(\"/api/v1/files/lower_case_file_id\")   #1\n    assert response.status_code == 200 #1\n    assert response.json() == {\"file_id\": \"lower_case_file_id\"}  #1\n\ndef test_read_file_validation_error(): #2\n    response = client.get(\"/api/v1/files/this_IS_invalid\")  #3\n    assert response.status_code == 400 #3\n    assert response.json()[\"detail\"][0][\"msg\"] ==  #3\n➥\"String should match pattern '^[a-z0-9_]+$'\"  #3\n```", "```py\n{\n  \"detail\": [\n    {\n      \"type\": \"string_pattern_mismatch\",\n      \"loc\": [\n        \"file_id\"\n      ],\n      \"msg\": \"String should match pattern '^[a-z0-9_]+$'\",\n      \"input\": \"DFSDF\",\n      \"ctx\": {\n        \"pattern\": \"^[a-z0-9_]+$\"\n      },\n \"url\": \"https://errors.pydantic.dev/2.4/v/string_pattern_mismatch\"\n  }\n  ]\n}\n```", "```py\ndocker-api-1   | INFO:     192.168.0.1:37630 \n ➥- \"GET /api/v1/files/DFSDF HTTP/1.1\" 500 Internal Server Error\ndocker-api-1   | ERROR:    Exception in ASGI application\ndocker-api-1   | Traceback (most recent call last):\ndocker-api-1   |   File \"/usr/local/lib/python3.12/\n➥site-packages/uvicorn/protocols/http/h11_impl.py\",\n➥line 408, in run_asgi\ndocker-api-1   |     result = \n➥await app(  # type: ignore[func-returns-value]\n```"]