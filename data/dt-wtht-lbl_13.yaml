- en: 11 End-to-end model deployment
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 11 端到端模型部署
- en: This chapter covers
  id: totrans-1
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 本章涵盖了
- en: The end-to-end model deployment process
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 端到端模型部署过程
- en: Maintenance of the model postdeployment
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 部署后模型的维护
- en: Python codes for each of the steps
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每个步骤的Python代码
- en: The journey is the destination.—Dan Eldon
  id: totrans-5
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 旅程本身就是目的地。——丹·艾尔登
- en: The path to learning never ends. It takes a lot of courage, patience, and hard
    work to learn something. We have to be persistent, resourceful, and always looking
    for opportunities to learn and excel.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 学习之路永无止境。学习某样东西需要很大的勇气、耐心和努力。我们必须坚持不懈、富有创造力，并始终寻找学习和提升的机会。
- en: Across all of the chapters so far, you have covered a lot of concepts, techniques,
    and algorithms. In this last chapter of the book, we are going to discuss the
    end-to-end model deployment process. We will cover various aspects ranging from
    a business problem definition, data cleaning, and exploratory data analysis (EDA)
    to model deployment and maintenance. This end-to-end journey is crucial for you
    to appreciate the entire process. We will discuss Python codes at all the relevant
    places.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 在到目前为止的所有章节中，你已经涵盖了大量的概念、技术和算法。在本书的最后一章，我们将讨论端到端模型部署过程。我们将涵盖从业务问题定义、数据清洗、探索性数据分析（EDA）到模型部署和维护的各个方面。这一端到端的旅程对于你理解整个过程至关重要。我们将在所有相关位置讨论Python代码。
- en: Welcome to this last chapter, and all the very best!
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 欢迎来到最后一章，祝您一切顺利！
- en: 11.1 The machine learning modeling process
  id: totrans-9
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 11.1 机器学习建模过程
- en: Recall in chapter 1 we briefly discussed end-to-end model development. In this
    section, we cover each of the respective steps in detail and the most common problems
    we face with each of them and how to tackle them. It will finally lead to the
    model deployment phase. Figure 11.1 shows the model development process we follow.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 回想第一章我们简要讨论了端到端模型开发。在本节中，我们将详细涵盖每个相应的步骤以及我们面临的最常见问题以及如何解决这些问题。最终将引导到模型部署阶段。图11.1显示了我们所遵循的模型开发过程。
- en: '![figure](../Images/CH11_F01_Verdhan.png)'
  id: totrans-11
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/CH11_F01_Verdhan.png)'
- en: Figure 11.1 The complete machine learning modeling process
  id: totrans-12
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图11.1 完整的机器学习建模过程
- en: 'The steps in the model development process are as follows:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 模型开发过程中的步骤如下：
- en: Business problem definition
  id: totrans-14
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 业务问题定义
- en: Data discovery and feasibility analysis
  id: totrans-15
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 数据发现和可行性分析
- en: Data cleaning and prepreparation
  id: totrans-16
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 数据清洗和预处理
- en: Exploratory data analysis
  id: totrans-17
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 探索性数据分析
- en: Modeling process and business approval
  id: totrans-18
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 建模过程和业务审批
- en: Model deployment
  id: totrans-19
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 模型部署
- en: Model documentation
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 模型文档
- en: Model maintenance and model refresh
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 模型维护和模型更新
- en: Throughout this chapter, we will cover each of these processes in much more
    detail. These are all relevant to the modeling process.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将详细涵盖这些过程中的每一个。这些都是建模过程的相关内容。
- en: 11.2 Business problem definition
  id: totrans-23
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 11.2 业务问题定义
- en: Your business problem definition is the very first step. It is vital that the
    business problem is concise, clear, measurable, and achievable. Many times, in
    practice, the business problem is vaguely defined, such as “decrease the costs
    or increase the revenue,” which often leads to poor results throughout the rest
    of the process. A good business problem is defined clearly with key performance
    indicators (KPIs) and parameters that can be used to measure the effect. A good
    business problem ensures there is no ambiguity, the goal is clear, and we can
    achieve it with the available resources and within the timeframe.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 您的业务问题定义是第一步。确保业务问题简洁、明确、可衡量和可实现至关重要。在实践中，很多时候业务问题定义得模糊，例如“降低成本或增加收入”，这通常会导致整个过程中出现不良结果。一个良好的业务问题应该明确地定义，包括关键绩效指标（KPIs）和可以用来衡量效果的参数。一个良好的业务问题确保没有歧义，目标明确，我们可以在可用资源和时间范围内实现它。
- en: 'Some of the most important considerations regarding a business problem are
    as follows:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 关于业务问题的一些最重要的考虑因素如下：
- en: If a business problem is vaguely defined, it is going to cause problems and
    should be avoided. For example, all of the businesses and various functions would
    want to increase their revenue and profits, reduce costs, optimize various processes,
    and so forth. With a vague business problem, we will not have clarity on the process,
    which will lead to ambiguity.
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果业务问题定义得模糊不清，将会引起问题，应该避免。例如，所有企业和各种职能都希望增加收入和利润，降低成本，优化各种流程等等。在模糊的业务问题下，我们将对过程缺乏清晰的认识，这会导致模糊性。
- en: The business purpose should be practically achievable. Unrealistic goals like
    doubling the revenue or halving the cost should not be set. Unrealistic goals
    mean that good results might get rejected, as they do not meet the business targets.
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 商业目标应该是实际可实现的。不应设定像翻倍收入或减半成本这样的不切实际的目标。不切实际的目标意味着良好的结果可能会被拒绝，因为它们不符合业务目标。
- en: The business problem should be measurable if possible. If the business problem
    is only qualitative, then it will be of limited help. We won’t be able to understand
    the real effect of the machine learning model created.
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果可能的话，商业问题应该是可衡量的。如果商业问题只是定性的，那么它将只有有限的帮助。我们将无法理解所创建的机器学习模型的实际效果。
- en: Scope creep is one of the problems we face sometimes. Scope creep happens when
    at the start of the project, during project building, the scope is changed drastically,
    changing the requirements and time needs of the project without changing resources
    and deadlines accordingly.
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 范围蔓延是我们有时面临的问题之一。范围蔓延发生在项目开始时，在项目构建过程中，范围发生剧烈变化，改变了项目的要求和时间需求，而没有相应地改变资源和截止日期。
- en: An effective business problem is defined correctly, completely, and in discussion
    with the business teams. It is concise with measurable KPIs and is achievable
    within a given timeframe.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 一个有效的商业问题被正确、完整地定义，并与业务团队进行讨论。它简洁，具有可衡量的KPI，并在给定的时间内可实现。
- en: NOTE  Business stakeholders and subject matter experts should be involved in
    defining the business problems. They should be a part of the team from the start
    and own the overall process.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：商业利益相关者和主题专家应参与定义商业问题。他们应从项目开始就是团队的一部分，并拥有整个流程。
- en: 'A few examples of a good business problem are as follows:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 一些好的商业问题的例子如下：
- en: The marketing team in an organization aims to optimize the various costs and
    maximize the return on investments. They want to identify the optimal combinations
    of marketing efforts (email, calls, TV advertising, and meetings) to increase
    the return on investment by 1.5% in the next six months.
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 组织中的营销团队旨在优化各种成本并最大化投资回报。他们希望确定营销努力（电子邮件、电话、电视广告和会议）的最佳组合，以在接下来的六个月内将投资回报率提高1.5%。
- en: A manufacturing team faces an increase in the number of defects in the last
    three months. The business problem can be to identify all the potential reasons
    for such an increase in defects. The team also wishes to know if there is a trend
    or pattern. The business goal may be to shortlist the most significant reasons
    for defects and reduce them by 2.5% in the next six months.
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个制造团队在过去三个月面临缺陷数量增加的问题。商业问题可能是确定导致缺陷增加的所有潜在原因。团队还希望了解是否存在趋势或模式。业务目标可能是筛选出最显著的缺陷原因，并在接下来的六个月内将其减少2.5%。
- en: We have described the attributes of a business problem. We now move to the next
    phase, which is data discovery and feasibility.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经描述了商业问题的属性。我们现在进入下一阶段，即数据发现和可行性。
- en: 11.3 Data discovery and feasibility analysis
  id: totrans-36
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 11.3 数据发现和可行性分析
- en: The data discovery phase is one of the most important steps in the entire model
    building process. If there is not enough data, both quantitatively and qualitatively,
    it might be very difficult to create the solution we desire. At the same time,
    having access to this data is of paramount importance.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 数据发现阶段是整个模型构建过程中最重要的步骤之一。如果数据在数量和质量上都不足，可能非常难以创建我们想要的解决方案。同时，能够访问这些数据至关重要。
- en: 'During this process, we also do the feasibility analysis for the project:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 在此过程中，我们还对项目进行可行性分析：
- en: The data is the protagonist. The very first step is the identification of the
    datasets required for the business problem use case and mechanisms for its access
    by all the stakeholders. For this reason, it is advisable that
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 数据是主角。第一步是确定用于商业问题用例所需的数据集以及所有利益相关者访问这些数据集的机制。因此，建议
- en: The dataset is available from servers or clouds and relevant permissions are
    set correctly to the people who need access. The servers can access the data from
    a database such as SQL/MySQL/NoSQL/MongoDB.
  id: totrans-40
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据集可以从服务器或云中获取，并且已正确设置相关权限供需要访问的人员使用。服务器可以从数据库（如SQL/MySQL/NoSQL/MongoDB）中访问数据。
- en: If the data is in Excel/.csv/text files, it will be useful to make it available
    on the server. In recent times, cloud servers like AWS, Azure, Google Cloud, etc.,
    are used for storing the data.
  id: totrans-41
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果数据存储在Excel/.csv/text文件中，将其放在服务器上会有所帮助。近年来，像AWS、Azure、Google Cloud等云服务器被用于存储数据。
- en: It is imperative to check that the dataset is complete and relevant to the business
    problem. The dataset should be representative enough of the business problem at
    hand and capture all the variability in the business. The time and duration of
    the data is another important dimension we should bear in mind. For example, if
    we wish to analyze the business of a telecom operator or a retail company, we
    should have enough data (for at least the last year so that we capture seasonality
    as well) and variables around sales, transactions, discounts, products/services
    purchased, marketing behaviors, historical behaviors, offline/online purchases,
    etc.
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保数据集完整且与业务问题相关至关重要。数据集应该足够代表手头的业务问题，并捕捉业务中的所有变化。数据的时间和持续时间是我们应该牢记的另一个重要维度。例如，如果我们想分析电信运营商或零售公司的业务，我们应该有足够的数据（至少是去年的数据，以便捕捉季节性）以及围绕销售、交易、折扣、购买的产品/服务、营销行为、历史行为、线下/在线购买等变量。
- en: It is prudent to plan the data refresh at this stage. After all, once the model
    is built, we will have to maintain it and refresh it.
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这个阶段计划数据刷新是明智的。毕竟，一旦模型建立，我们就需要维护和更新它。
- en: 'During this phase, the most common problems we can face are as follows:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个阶段，我们可能面临的最常见问题如下：
- en: We might find that there are certain missing values, outliers, etc., in the
    dataset. We will cover that in detail in the next section.
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们可能会发现数据集中存在某些缺失值、异常值等。我们将在下一节中详细说明。
- en: We must also ensure that correct business rules are applied on the dataset.
    The steps to ensure it are
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们还必须确保在数据集上应用正确的业务规则。确保这一点的步骤如下
- en: Get the relevant dataset for the business problem.
  id: totrans-47
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 获取与业务问题相关的数据集。
- en: Make some basic analyses like total sales, number of customers, month-wise trends,
    discounts, etc.
  id: totrans-48
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 进行一些基本分析，如总销售额、客户数量、按月趋势、折扣等。
- en: Get these KPIs verified by the business stakeholders. If the numbers are wrong,
    the business rules are refined.
  id: totrans-49
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 让这些关键绩效指标（KPIs）由业务利益相关者进行验证。如果数字错误，则需细化业务规则。
- en: 'Only once the data is correct and the numbers are accurate can we move on to
    the feasibility analysis for the use case. For the feasibility analysis, we do
    the following:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 只有当数据正确且数字准确时，我们才能继续进行用例的可行性分析。对于可行性分析，我们执行以下操作：
- en: Check the data quality in detail. We cover the various aspects in the next section.
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 详细检查数据质量。我们将在下一节中涵盖各个方面。
- en: Analyze the data for any patterns, such as seasonality, etc. We also check if
    there are any correlations present among various variables to ensure which variables
    are related to each other.
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 分析数据以寻找任何模式，例如季节性等。我们还会检查是否存在各种变量之间的相关性，以确保哪些变量彼此相关。
- en: Check for relationships between the business problem and the dataset. This is
    followed by an exploratory analysis to identify if there is any significant difference
    between various customer groups.
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查业务问题与数据集之间的关系。这之后是探索性分析，以确定是否存在不同客户群体之间的显著差异。
- en: After this step, we go to the data cleaning, preprocessing, and data preparation
    step. This is one of the most time-consuming steps we have to do.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 在此步骤之后，我们将进入数据清洗、预处理和准备阶段。这是我们必须要做的耗时步骤之一。
- en: 11.4 Data cleaning and prepreparation
  id: totrans-55
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 11.4 数据清洗和预处理
- en: In the last step, we shortlisted the data for the business problem. Now we will
    go to the data cleaning and preprocessing phase of the modeling process.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 在最后一步，我们筛选出与业务问题相关的数据。现在我们将进入建模过程中的数据清洗和预处理阶段。
- en: 'Data in its original form might not be usable enough to be fed to the machine
    learning model. We have to create a few additional variables and treat some others.
    In the real business world, the dataset is generally “dirty.” There can be many
    problems that can be present in the data, which are as follows:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 数据在其原始形式可能不足以被输入到机器学习模型中。我们必须创建一些额外的变量并处理一些其他数据。在现实商业世界中，数据集通常是“脏”的。数据中可能存在许多问题，如下所述：
- en: Duplicate values
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重复值
- en: Categorical variables (may cause some problem for certain algorithms)
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分类别变量（可能对某些算法造成问题）
- en: Missing values, NULL, or not a number (NaN), etc.
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 缺失值、NULL或非数字（NaN）等。
- en: Outliers
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 异常值
- en: Other problems (as described in previous chapters)
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他问题（如前几章所述）
- en: Let’s deal with each of these things in turn. The code for this chapter has
    been checked in at [https://mng.bz/vKY7](https://mng.bz/vKY7). You can access
    the code and datasets there. We will now work on how to deal with duplicate values
    in a dataset.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们逐一处理这些问题。本章的代码已提交至[https://mng.bz/vKY7](https://mng.bz/vKY7)。您可以在那里访问代码和数据集。我们现在将研究如何处理数据集中的重复值。
- en: 11.5 Duplicate values in the data
  id: totrans-64
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 11.5 数据中的重复值
- en: Duplicates are often a problem in datasets. If there are two rows in the dataset
    that are a complete copy of each other, they are duplicates in nature. This problem
    might occur during data-capturing time. The problem with duplicates is that the
    statistics will be affected—for example, by making some events appear to be more
    frequent than they are. When removing duplicates, one needs to pay attention to
    not removing genuine data of events that happened twice—for example, a customer
    purchasing an item twice at two different times or a customer purchasing two identical
    items at the same time versus the transaction of the purchase being recorded twice.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 重复项在数据集中通常是一个问题。如果数据集中有两行是完全相同的，它们在本质上就是重复的。这个问题可能发生在数据捕获时。重复项的问题在于会影响统计数据——例如，使某些事件看起来比实际更频繁。在删除重复项时，需要注意不要删除真正发生两次的事件的真实数据——例如，一个客户在两个不同时间购买同一商品，或者一个客户在同一时间购买两个相同商品，而购买交易被记录了两次。
- en: 'The following are the steps of a simple Python program to remove duplicates
    (see figure 11.2):'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一个简单的Python程序删除重复项的步骤（见图11.2）：
- en: Import `numpy` and `pandas`.
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导入`numpy`和`pandas`。
- en: Define a dataframe with some dummy variables.
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定义一个包含一些虚拟变量的数据框。
- en: Print the dataframe.
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打印数据框。
- en: 'There is an inbuilt method: `drop_duplicates()`. Use it to drop the duplicates.'
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 有一个内置方法：`drop_duplicates()`。使用它来删除重复项。
- en: Print the dataframe and find that the duplicate rows have been dropped.
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打印数据框并发现重复行已被删除。
- en: '![figure](../Images/CH11_F02_Verdhan.png)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/CH11_F02_Verdhan.png)'
- en: Figure 11.2 Removing duplicates in a simple Python program
  id: totrans-73
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图11.2 在简单的Python程序中删除重复项
- en: 11.6 Categorical variables
  id: totrans-74
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 11.6 分类变量
- en: The next step is treating the categorical variable. Let’s revisit the definition
    of categorical variables. Variables like gender, city, product categories, zip
    codes, etc., are examples of categorical variables. Categorical variables may
    not strictly be a problem in the data, but they can create problems for certain
    algorithms like k-means clustering. Recall that for k-means clustering, the distance
    needs to be calculated between the data points.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步是处理分类变量。让我们回顾一下分类变量的定义。性别、城市、产品类别、邮编等变量是分类变量的例子。分类变量可能不是数据中的严格问题，但它们可能会给某些算法（如k-means聚类）带来问题。回想一下，对于k-means聚类，需要在数据点之间计算距离。
- en: In certain datasets, a categorical variable can have nearly all values as the
    same. For example, if the whole dataset is for the UK and a variable is “city,”
    since a significant percentage of the population lives in London, then this variable
    might be of limited benefit. It will not create any variation in the dataset and
    will not be useful. Similarly, a categorical variable like “zip code” can have
    all the values as distinct and will not add much to the analysis.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 在某些数据集中，一个分类变量可能几乎所有值都相同。例如，如果整个数据集都是关于英国的，而一个变量是“城市”，由于很大一部分人口居住在伦敦，那么这个变量可能作用有限。它不会在数据集中创建任何变化，也不会有用。同样，像“邮编”这样的分类变量可能所有值都是独特的，也不会对分析增加太多价值。
- en: 'Perhaps the most common method to deal with categorical variables is using
    one-hot encoding. In one-hot encoding, as shown in the Python code book, the variable
    gets transformed:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 处理分类变量最常见的方法可能是使用独热编码。在独热编码中，正如Python代码书中所示，变量会被转换：
- en: Use the same dataset we used in the last code.
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用我们在上一段代码中使用的相同数据集。
- en: There is a built-in method in pandas, `get_dummies()`, which can be used for
    converting categorical variables to numeric ones. See figure 11.3\.
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: pandas中有一个内置方法`get_dummies()`，可以用来将分类变量转换为数值型。见图11.3。
- en: '![figure](../Images/CH11_F03_Verdhan.png)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/CH11_F03_Verdhan.png)'
- en: Figure 11.3 The output of the code when executed
  id: totrans-81
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图11.3 执行代码的输出
- en: 11.7 Missing values in dataset
  id: totrans-82
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 11.7 数据集中的缺失值
- en: 'One of the most common challenges in real-world datasets is missing values,
    which might be blank, NULL, NaN, etc. It might be due to a data capturing problem
    or data transformation. Missing values should be treated to ensure a robust solution.
    There can be a few reasons for missing values:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 在现实世界的数据集中，最常见的一个挑战是缺失值，这些值可能是空白、NULL、NaN等。这可能是由于数据捕获问题或数据转换造成的。缺失值应该被处理以确保解决方案的稳健性。缺失值可能有几个原因：
- en: The values were not recorded properly during data capturing. This can be due
    to faulty equipment or a manual error when recording the data.
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在数据捕获过程中，值没有被正确记录。这可能是由于设备故障或记录数据时的手动错误。
- en: Many times, nonmandatory fields are not entered. For example, a customer might
    not enter age while filling out a retail loyalty form.
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 许多时候，非必填字段没有被填写。例如，在填写零售忠诚度表格时，顾客可能不会填写年龄。
- en: Survey responses might not be completely filled out—for example, salary details.
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 调查响应可能没有完全填写——例如，薪资详情。
- en: 'To mitigate the missing values, there are a few options:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 为了减轻缺失值，有几个选项：
- en: First, we should check if the data is missing by design and whether it is a
    problem that needs to be addressed. For example, it is possible for a sensor to
    not record any temperature values above a certain pressure range. In that case,
    having missing values of temperature is correct.
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 首先，我们应该检查数据是否是故意缺失的，以及是否是一个需要解决的问题。例如，一个传感器可能不会记录超过一定压力范围的任何温度值。在这种情况下，温度的缺失值是正确的。
- en: We should also check if there are any patterns in the missing values with respect
    to the other independent variables and with respect to the target variable. For
    example, in the dataset used in the next example we can deduce that whenever the
    value of temperature is NULL, then the equipment has failed. In such a case, there
    is a clear pattern in this data between temperature and the failed equipment.
    Hence, it will be the wrong step to delete the temperature or treat the temperature
    variable.
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们还应该检查缺失值是否与其他独立变量以及目标变量之间存在任何模式。例如，在下一个示例中使用的数据集中，我们可以推断出，每当温度值为NULL时，设备就出现了故障。在这种情况下，温度和故障设备之间有明显的模式。因此，删除温度或处理温度变量将是错误的一步。
- en: Perhaps the easiest approach to deal with missing values is to delete the rows
    that have missing values. Though this is simple and fast, it reduces the size
    of the population and can delete very important pieces of information, as described
    earlier, or, for example, if a person has a legitimate last name that is not available.
    Hence, we should be careful deleting rows.
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 处理缺失值可能最简单的方法是删除包含缺失值的行。尽管这很简单且快速，但它会减少人口规模，并可能删除前面描述的非常重要的信息，例如，如果一个人的合法姓氏不可用。因此，我们应该小心删除行。
- en: We can impute the missing values by the mean, median, or mode values. Mean or
    median are only possible for continuous variables. Mode can be used for both continuous
    and categorical variables.
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们可以通过均值、中位数或众数来填充缺失值。均值或中位数仅适用于连续变量。众数可以用于连续和分类变量。
- en: There are also other popular methods for imputing the missing values like using
    k-nearest neighbor and multivariate imputation by chained equation.
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 还有其他一些流行的缺失值填充方法，例如使用k最近邻和链式方程的多变量填充。
- en: We now use Python to impute missing values. We will use the built-in method
    `SimpleImputer` and impute the missing values with the mean. The second solution
    is for the categorical variables, where the mode is used to replace the missing
    values. See figure 11.4.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在使用Python来填充缺失值。我们将使用内置方法`SimpleImputer`并用均值来填充缺失值。第二个解决方案是用于分类变量，其中使用众数来替换缺失值。见图11.4。
- en: '![figure](../Images/CH11_F04_Verdhan.png)'
  id: totrans-94
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/CH11_F04_Verdhan.png)'
- en: Figure 11.4 The output of the code when executed
  id: totrans-95
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图11.4 代码执行后的输出
- en: In the next solutions, we will use `IterativeImputer` and the k-nearest neighbor
    algorithm.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的解决方案中，我们将使用`IterativeImputer`和k最近邻算法。
- en: 11.8 Outliers present in the data
  id: totrans-97
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 11.8 数据中的异常值
- en: 'Outliers can be a big problem in the data. Consider this: let’s assume that
    average rainfall for a city is 50 cm. But one particular year, due to heavy rains,
    the average rainfall is 100 cm. This data point would be an outlier and will completely
    change the analysis results should it be included. In the example, depending on
    whether the year of heavy precipitation is included or not in the statistical
    analysis, the results (say, of likely insurance claims) would be very different.'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 异常值在数据中可能是一个大问题。考虑以下情况：假设一个城市的平均降雨量为50厘米。但有一年，由于大雨，平均降雨量达到了100厘米。这个数据点将是一个异常值，如果包含在内，将完全改变分析结果。在例子中，根据是否将重降雨年份包含在统计分析中，结果（比如可能的保险索赔）可能会有很大不同。
- en: Therefore, like missing values, outliers may not necessarily be an error. We
    should apply business acumen to infer if the data points are really outliers for
    the problem under study.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，就像缺失值一样，异常值不一定是一个错误。我们应该运用商业敏锐度来推断数据点是否真的是研究中的异常值。
- en: 'We can detect outliers in the following ways:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过以下方式检测异常值：
- en: If a data point lies beyond the 5th percentile and 95th percentile or 1st percentile
    and 99th percentile, it can be considered an outlier.
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果一个数据点位于5百分位数和95百分位数之外，或者1百分位数和99百分位数之外，它可以被认为是异常值。
- en: A value that is beyond –1.5 × interquartile range (IQR) and +1.5 × IQR can also
    be considered an outlier. Here IQR is given by (value at 75th percentile) – (value
    at 25th percentile).
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个超出-1.5倍四分位距（IQR）和+1.5倍IQR的值也可以被认为是异常值。这里IQR由（第75百分位数的值）-（第25百分位数的值）给出。
- en: Values beyond one, two, or three standard deviations from the mean can be termed
    outliers.
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 距离均值一个、两个或三个标准差之外的价值可以被称为异常值。
- en: 'We can create charts and visualize outliers. We can treat outliers by using
    the following methods:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以创建图表并可视化异常值。我们可以通过以下方法处理异常值：
- en: A data point beyond the 5th percentile and 95th percentile can be capped at
    the 5th percentile and 95th percentile, respectively. Or a data point beyond the
    1st percentile and 99th percentile can be capped at the 1st percentile and 99th
    percentile, respectively.
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个位于5百分位数和95百分位数之外的数据点可以分别被限制在5百分位数和95百分位数。或者一个位于1百分位数和99百分位数之外的数据点可以分别被限制在1百分位数和99百分位数。
- en: Replacement by mean, median, or mode is also used sometimes.
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有时也会使用均值、中位数或众数进行替换。
- en: Sometimes taking a natural log of the variable reduces the effect of outliers.
    But since a natural log will change the actual values, we should use sound mathematical
    models for the problem under investigation to make sure it’s appropriate.
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有时对变量取自然对数可以减少异常值的影响。但由于自然对数会改变实际值，我们应该使用合适的数学模型来确保它是适当的。
- en: Outliers pose a big challenge to our datasets. They skew the insights we have
    generated from the data. Sometimes this skew is appropriate (e.g., the insurance
    claims of an outlier heavy precipitation year, which the insurance company needs
    to take into account). In any case, it becomes important that we at least highlight
    outliers in the dataset and sometimes modify them.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 异常值对我们的数据集提出了很大的挑战。它们扭曲了我们从数据中得出的见解。有时这种扭曲是合适的（例如，异常重降雨年份的保险索赔，保险公司需要考虑）。在任何情况下，我们至少要突出显示数据集中的异常值，有时还需要修改它们。
- en: 11.9 Exploratory data analysis
  id: totrans-109
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 11.9 探索性数据分析
- en: EDA is one of the most crucial steps before we start modeling. Using EDA, we
    generate insights that are quite useful for the business. The insights generated
    from the EDA conform to the modeling outputs too.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 探索性数据分析（EDA）在我们开始建模之前是最关键的步骤之一。通过EDA，我们生成对业务非常有用的见解。从EDA中生成的见解也符合建模输出。
- en: In EDA, we examine all the variables and understand their patterns, interdependencies,
    relationships, and trends. During the EDA phase, we come to know how the data
    is expected to behave. We uncover insights and recommendations from the data at
    this stage. A strong visualization complements the complete EDA.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 在EDA中，我们检查所有变量并了解它们的模式、相互依赖性、关系和趋势。在EDA阶段，我们了解数据应该如何表现。在这个阶段，我们从数据中揭示见解和建议。强大的可视化可以补充完整的EDA。
- en: NOTE  EDA is the key to success; many times, a good EDA can solve the business
    problem.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：EDA是成功的关键；很多时候，良好的EDA可以解决业务问题。
- en: Next we perform a detailed EDA on a dataset using Python. The entire code is
    quite big for a book; hence, the Python notebook has been checked in to the GitHub
    repository ([https://mng.bz/vKY7](https://mng.bz/vKY7)) with full explanations
    and comments.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们使用Python对数据集进行详细的EDA分析。整个代码对于一本书来说相当庞大；因此，带有完整解释和注释的Python笔记本已提交到GitHub仓库（[https://mng.bz/vKY7](https://mng.bz/vKY7)）。
- en: 11.10 Model development and business approval
  id: totrans-114
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 11.10 模型开发和业务批准
- en: We have already covered the modeling process in detail throughout the book.
    This includes creating the first version of the model and then iterating with
    different hyperparameters and with different algorithms.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经在整本书中详细介绍了建模过程。这包括创建模型的第一个版本，然后使用不同的超参数和不同的算法进行迭代。
- en: Throughout the book, we have covered a lot of algorithms on clustering and dimensionality
    reduction methods. We also covered modeling for the text datasets. During the
    model development phase, based on the business problem and dataset at hand, we
    choose the candidate algorithms. We always strive to select the best algorithm
    based on the accuracy measurement parameters we have discussed in earlier chapters.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 在整本书中，我们介绍了许多关于聚类和降维方法的算法。我们还涵盖了文本数据集的建模。在模型开发阶段，根据手头的业务问题和数据集，我们选择候选算法。我们总是努力根据我们在前面章节中讨论的准确度测量参数选择最佳算法。
- en: The output of the modeling process is the final algorithm that delivers the
    best output for the business problem at hand. After a model with satisfactory
    performance is found, we should have a discussion with the business stakeholders
    for their final feedback. There might be a few iterations required to further
    improve the model.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 建模过程的输出是最终算法，它为手头的业务问题提供最佳输出。找到性能令人满意的模型后，我们应该与业务利益相关者进行讨论，以获取他们的最终反馈。可能需要几次迭代来进一步改进模型。
- en: Now, you have a model that is statistically significant, useful, and approved
    by the business stakeholders. We can move on to the model deployment stage.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你已经有一个在统计上显著、有用且得到业务利益相关者认可的模型。我们可以进入模型部署阶段。
- en: 11.11 Model deployment
  id: totrans-119
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 11.11 模型部署
- en: A critical stage in the development of AI and machine learning models is model
    deployment. It is the changeover point between the development and production
    environments, where the model is used for real-world business purposes. There
    are many facets to be considered, like infrastructure concerns, deployment methodologies,
    monitoring, and maintenance. We discuss the challenges and recommended steps related
    to model deployment, with a methodical and organized strategy to put the models
    into production.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 模型部署是人工智能和机器学习模型开发中的一个关键阶段。它是开发和生产环境之间的转换点，模型在此用于现实世界的商业目的。有许多方面需要考虑，如基础设施问题、部署方法、监控和维护。我们讨论了与模型部署相关的挑战和推荐步骤，以及一个系统化和有组织的策略，以将模型投入生产。
- en: 11.12 Purpose of model deployment
  id: totrans-121
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 11.12 模型部署的目的
- en: 'Model deployment is a crucial process. The primary reasons for model deployment
    are given as follows:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 模型部署是一个关键过程。模型部署的主要原因如下：
- en: Deployment of a model leads to the transformation of insights into actionable
    and practical purposes. The model is used for making predictions, optimizations,
    recommendations, and suggestions.
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 模型的部署将洞察力转化为可操作和实用的目的。模型用于进行预测、优化、推荐和建议。
- en: The deployed models are integrated with the business processes and workflows.
    This facilitates the automation of various processes and business functions based
    on the insights and recommendations made by the model.
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 部署的模型与业务流程和工作流程集成。这促进了基于模型提出的洞察和建议的各种流程和业务功能的自动化。
- en: Real-time predictions ensure that the business is responding quickly to the
    ever-changing business conditions. Real-time predictions are particularly useful
    for scenarios like credit card fraud detection in transactions, dynamic pricing,
    etc.
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实时预测确保业务能够快速响应不断变化的商业条件。实时预测在交易中的信用卡欺诈检测、动态定价等场景中特别有用。
- en: Optimization and automation are enhanced. Model deployment leads to a decrease
    in the efforts of the employees by automating the business functions. With the
    help of deployed models, hardware use is optimized, business functions and processes
    are made more efficient, and the overall return on investment is increased.
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 优化和自动化得到增强。模型部署通过自动化业务功能减少了员工的工作量。借助部署的模型，硬件使用得到优化，业务功能和流程变得更加高效，整体投资回报率提高。
- en: With deployed models, the versioning of the models can be done. This ensures
    that the organization can track changes, perform A/B tests, and even perform rollback
    if required.
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 部署模型后，可以对模型进行版本控制。这确保了组织可以跟踪变化，执行A/B测试，并在需要时进行回滚。
- en: In summary, the purpose of model deployment is to translate the potential of
    machine learning models into practical applications, making them an integral part
    of business operations and decision-making processes. Deployment enables organizations
    to harness the power of AI and data science to derive value from their models
    in real-world scenarios.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 总结来说，模型部署的目的是将机器学习模型的潜力转化为实际应用，使它们成为业务运营和决策过程中的重要组成部分。部署使组织能够利用AI和数据科学的威力，从现实世界场景中获取模型的实际价值。
- en: 11.13 Types of model deployment
  id: totrans-129
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 11.13 模型部署类型
- en: There are several types of model deployments. Based on the requirements and
    the strategic objectives, we can choose between them. The various types of deployment
    strategies are
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 模型部署有几种类型。根据需求和战略目标，我们可以在它们之间进行选择。不同的部署策略包括
- en: '*Batch deployment*—This methodology is used when we have a large dataset that
    has been collected over a period of time and we need to use the machine learning
    model to assess this data and make predictions in an offline mode. Generally,
    the processing is done in large batches. For example, if we want to cluster the
    customers of a retail store based on k-means clustering, we can take their attributes
    for the last two years and generate a corresponding cluster for each customer.
    We can refresh the underlying data after one month, and hence we can reassign
    these clusters.'
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*批量部署*—当我们在一段时间内收集了大量数据集，并需要使用机器学习模型在离线模式下评估这些数据并做出预测时，使用这种方法。通常，处理是在大批次中完成的。例如，如果我们想根据
    k-means 聚类对零售店的客户进行聚类，我们可以取他们过去两年的属性，并为每个客户生成相应的聚类。我们可以在一个月后刷新底层数据，因此我们可以重新分配这些聚类。'
- en: '*Real-time deployment*—Consider this: we want to check if the incoming credit
    card transaction is genuine or fraudulent. In such a scenario, we use a real-time
    check. The predictions are generated in real time based on the latest information
    available. Generally, to support real-time predictions, we should employ a multithreaded
    process so that multiple prediction requests can be handled at the same time.
    For example, there can be hundreds of credit card requests made simultaneously,
    which our system needs to classify with very little latency.'
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*实时部署*—考虑这种情况：我们想要检查 incoming credit card transaction 是否为真实或欺诈。在这种情况下，我们使用实时检查。预测是基于最新信息实时生成的。通常，为了支持实时预测，我们应该采用多线程处理，以便同时处理多个预测请求。例如，可能会有数百个信用卡请求同时提交，我们的系统需要以非常低的延迟对它们进行分类。'
- en: '*Edge deployment*—Nowadays, people expect smartphones or Internet of Things
    devices to have sophisticated features that are a good fit for a machine learning
    or AI algorithm. In such a scenario, a deployment in the cloud is possible, but
    edge deployment is also used when an internet connection is not available. The
    prerequisite for edge deployment is that the machine learning model should be
    small in size and require less computation to facilitate running it on the devices
    with limited resources.'
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*边缘部署*—如今，人们期望智能手机或物联网设备具备适合机器学习或AI算法的复杂功能。在这种情况下，云部署是可行的，但在没有互联网连接的情况下，也会使用边缘部署。边缘部署的前提是机器学习模型应该体积小，计算需求低，以便在资源有限的设备上运行。'
- en: '*Canary deployment*—In canary deployment, we release the model to a subset
    of users before we make a full-scale deployment for all users. This ensures that
    an unstable version is not released to all users as we will get the feedback from
    the test users in the first phase. This is typically done by large companies with
    a huge number of users providing services through the cloud, such as Google or
    Facebook.'
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*金丝雀部署*—在金丝雀部署中，我们在对所有用户进行全面部署之前，先将模型发布给一部分用户。这样可以确保不稳定版本不会发布给所有用户，因为我们将在第一阶段从测试用户那里获得反馈。这通常由拥有大量用户并通过云提供服务的公司，如谷歌或Facebook，来完成。'
- en: '*A/B testing*—A/B testing is not actually a model deployment technique, but
    it can be used as one and that is why it is listed here. In A/B testing, organizations
    want to test how one solution/service/product compares with another. For example,
    if the product team wishes to test which of the two offers delivers better profitability,
    they will use A/B testing. The example of two offers can be “spend $100 and get
    a 15% discount” or “spend $50 and get a 10% discount.” In such a scenario, there
    can be two similar groups of customers that will receive these offers, and we
    will check which one delivers better profitability. In A/B testing deployments,
    two different models (or the same model with different hyperparameters) are tested
    against each other.'
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*A/B 测试*—A/B 测试实际上并不是一种模型部署技术，但它可以用作一种技术，这就是为什么它被列在这里的原因。在A/B测试中，组织希望测试一个解决方案/服务/产品与另一个相比如何。例如，如果产品团队希望测试两个方案哪个能带来更好的盈利能力，他们将使用A/B测试。两个方案的例子可以是“花费100美元获得15%的折扣”或“花费50美元获得10%的折扣”。在这种情况下，可能会有两组相似的客户群体将收到这些优惠，我们将检查哪个能带来更好的盈利能力。在A/B测试部署中，两个不同的模型（或具有不同超参数的相同模型）将相互测试。'
- en: 11.14 Considerations while deploying the model
  id: totrans-136
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 11.14 部署模型时的注意事项
- en: 'There are quite a few factors we should keep in mind while deploying the model
    to ensure smooth and effective transition from development of the model to deployment:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 在部署模型时，我们应该注意相当多的因素，以确保模型从开发到部署的平稳和有效过渡：
- en: '*Accuracy monitoring*—We should constantly monitor the performance of the model
    and improve it if the performance falls below a threshold. We should cover key
    metrics like accuracy, resource utilizations, time, and accuracy.'
  id: totrans-138
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*准确性监控*—我们应该持续监控模型的性能，并在性能低于阈值时进行改进。我们应该涵盖关键指标，如准确性、资源利用率、时间和准确性。'
- en: '*Scalability*—A solution should be scalable to other departments or brands.
    Even the volume of the data can increase with time.'
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*可扩展性*—解决方案应该可扩展到其他部门或品牌。随着时间的推移，数据的量也可能增加。'
- en: '*Security and compliance*—This is one consideration that cannot be compromised
    at all. Any kind of deployment should be completely secure from any threats and
    fully compliant with the existing best practices, policies, and requirements.'
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*安全和合规性*—这是一个绝对不能妥协的考虑因素。任何类型的部署都应该完全安全，免受任何威胁，并且完全符合现有的最佳实践、政策和要求。'
- en: '*Model drift and data drift*—These should be monitored because the overall
    business scenario can change. Customers, their preferences, the market, and the
    overall economy may change. There are events like COVID, war, floods, etc., and
    hence there is a data drift. It results in a model’s performance change too. Hence,
    we should plan for model drift in advance.'
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*模型漂移和数据漂移*—这些应该被监控，因为整体业务场景可能会发生变化。客户、他们的偏好、市场以及整体经济可能会发生变化。有像COVID、战争、洪水等事件，因此存在数据漂移。这也会导致模型性能的变化。因此，我们应该提前规划模型漂移。'
- en: '*Reproducibility*—Reproducibility of the results is an important factor when
    we deploy the models. We should be able to replicate the results.'
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*可重现性*—当我们部署模型时，结果的可重现性是一个重要因素。我们应该能够复制这些结果。'
- en: '*Continuous integration and continuous deployment*—These pipelines are required
    to automate the testing and the deployment process. This reduces the risk of errors
    and ensures smooth deployments.'
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*持续集成和持续部署*—这些管道需要自动化测试和部署过程。这减少了错误的风险，并确保了平稳的部署。'
- en: '*User feedback and successive iterations*—These are very important for a successful
    project. While planning for the deployment, we should give due diligence to incorporating
    users’ feedback and the iterations in the model.'
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*用户反馈和迭代*—这些对于项目的成功非常重要。在规划部署时，我们应该充分考虑将用户的反馈和模型的迭代纳入其中。'
- en: '*Versioning and rollback*—No model is ever final. There are successive iterations
    to it. In the infrastructure, there should be a provision to roll back to the
    previous version if the new version has any problems or if there are reasons based
    on the business requirements.'
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*版本控制和回滚*——没有模型是最终的。它有连续的迭代。在基础设施中，应该有回滚到上一个版本的规定，如果新版本有任何问题，或者基于业务需求的理由。'
- en: With this, we have covered all the considerations in model deployment. We will
    now deploy a model using Flask. The entire code has been uploaded to the GitHub
    repository ([https://mng.bz/vKY7](https://mng.bz/vKY7)) with full comments and
    explanations.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 通过这一点，我们已经涵盖了模型部署的所有考虑因素。现在我们将使用Flask部署一个模型。整个代码已经上传到GitHub仓库([https://mng.bz/vKY7](https://mng.bz/vKY7))，并附有完整的注释和解释。
- en: 11.15 Documentation
  id: totrans-147
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 11.15 文档
- en: Our model is deployed. Now we ensure that all the code snippets are cleaned,
    are properly commented, and adhere to best practices. The code files should be
    checked in and properly documented. Documentation is often (unfortunately) not
    given enough time, but it is a very important step that should not be ignored.
    Should priorities be set in writing in the documentation, precedence should be
    given to the aspects more likely to change and to those that require understanding
    and interaction with external stakeholders.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经部署了模型。现在我们确保所有代码片段都已清理，注释得当，并遵循最佳实践。代码文件应被检查并妥善记录。不幸的是，文档编写往往没有得到足够的时间，但它是一个非常重要的步骤，不应被忽视。如果在编写文档时需要设定优先级，应优先考虑那些可能发生变化以及需要与外部利益相关者理解和互动的方面。
- en: There are quite a few tools for version controlling of the code. Git is perhaps
    the most common one. It is a very good practice to ensure that all of our code
    is checked in regularly to safeguard ourselves from any potential computer failures.
    For documentation, we do have a lot of options available in the industry, ranging
    from Word to PowerPoint to Confluence pages, depending on the industry we work
    in.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 代码版本控制有许多工具。Git可能是最常见的一个。确保我们所有的代码都定期检查入库，以保护我们免受任何潜在计算机故障的影响，这是一个非常好的实践。对于文档，我们确实在行业内有很多选择，从Word到PowerPoint到Confluence页面，具体取决于我们工作的行业。
- en: 11.16 Model maintenance and refresh
  id: totrans-150
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 11.16 模型维护和更新
- en: So far, we have covered all the stages of model development and deployment.
    But once a model is put into production, it needs constant monitoring. We must
    ensure that the model is always performing at the desired level of accuracy. To
    achieve this, it is advised to have a dashboard or a monitoring system to gauge
    the performance of the model regularly. In case of nonavailability of such a system,
    a monthly or quarterly check-up of the model can be done.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经涵盖了模型开发和部署的所有阶段。但是一旦模型投入生产，就需要持续监控。我们必须确保模型始终以期望的准确度水平运行。为了实现这一点，建议设置一个仪表板或监控系统来定期评估模型的性能。如果不存在这样的系统，可以对模型进行每月或每季度的检查。
- en: Once the model is deployed, we can do a monthly health check of the model. It
    means that we compare the performance of the model with the expected accuracy.
    If the performance is not good, the model requires a refresh. Even though the
    model might not be deteriorating, it is still a good practice to refresh the model
    on new data points that are constantly created and saved. The model refresh is
    generally based on the business problem as well as the business domain for which
    the model has been built. For example, in the telecom domain, data updates are
    faster as customers use their mobile phones daily. On the other hand, for retail
    apparel, we don’t expect customers to buy clothes every day. Hence, the model
    for the telecom domain can be refreshed weekly or biweekly, while for apparel,
    we can refresh once a quarter or once every six months.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 模型部署后，我们可以对模型进行每月的健康检查。这意味着我们将模型的性能与预期的准确度进行比较。如果性能不佳，模型需要更新。即使模型可能没有恶化，但在不断创建和保存的新数据点上刷新模型仍然是一个好的实践。模型更新通常基于业务问题以及模型所构建的业务领域。例如，在电信领域，由于客户每天使用手机，数据更新速度更快。另一方面，对于零售服装，我们并不期望客户每天购买衣服。因此，电信领域的模型可以每周或每两周刷新一次，而对于服装，我们可以每季度或每六个月刷新一次。
- en: Model refresh is quite an important phenomenon. Our business scenarios are always
    dynamic in nature. The customers’ preferences and lifestyles will change, and
    there’s always some activity being done by the competitor. There are certain scenarios
    that are beyond our control, like war, COVID, etc. Hence, we always should strive
    to adjust our models to the latest scenario in our business.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 模型刷新是一个相当重要的现象。我们的业务场景在本质上总是动态变化的。客户的偏好和生活方式会发生变化，而且竞争对手总是在进行某些活动。有一些场景是我们无法控制的，比如战争、COVID等。因此，我们始终应该努力调整我们的模型以适应我们业务中的最新场景。
- en: Model refresh means that we are retraining the model based on the new data points
    we have collected. It ensures that we are capturing the latest trends, backgrounds,
    and emerging relationships in the data, and hence our models are able to predict,
    optimize, and expedite the latest data points.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 模型刷新意味着我们正在根据我们收集到的新数据点重新训练模型。这确保了我们能够捕捉到数据中的最新趋势、背景和新兴关系，因此我们的模型能够预测、优化和加速最新的数据点。
- en: 'With this we have completed all the steps to design a machine learning system:
    how to develop it from scratch, how to deploy it, and how to maintain it. It is
    a long process that is quite tedious and requires teamwork.'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 有了这些，我们已经完成了设计机器学习系统的所有步骤：如何从头开始开发它，如何部署它，以及如何维护它。这是一个相当繁琐且需要团队合作的长过程。
- en: 11.17 Concluding thoughts
  id: totrans-156
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 11.17 总结性思考
- en: End-to-end machine learning development is quite a time-consuming one. From
    scratch to maintenance, it requires a lot of planning, teamwork, business knowledge,
    and effort. In this chapter, we have covered a lot of those steps. There can be
    other possible solutions too, which are dependent on the business domain and the
    requirements.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 从头到尾的机器学习开发是一个相当耗时的工作。从零开始到维护，它需要大量的规划、团队合作、业务知识和努力。在本章中，我们涵盖了这些步骤中的许多。也可能有其他可能的解决方案，这些解决方案取决于业务领域和需求。
- en: With this we come to the close of this book. We all read and feel that in this
    new age, data is the new oil, new electricity, new power, and new currency. The
    field is rapidly growing and making its effect felt across the globe. The pace
    of enhancements and improvements has opened new job opportunities like data engineers,
    data scientists, visualization experts, machine learning engineers, MLOps, DevOps,
    GenAI experts, and so on, with demand increasing day by day. But there is a dearth
    of professionals who fulfill the rigorous criteria for these job descriptions.
    The need of the hour is to have *data artists* who can marry business objectives
    with analytical problems, envision solutions to solve the dynamic business problems,
    adjust to the ever-changing technical landscape, and yet deliver cost-effective
    business solutions.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 有了这些，我们这本书就接近尾声了。我们都阅读并感受到在这个新时代，数据是新石油、新电力、新力量和新货币。这个领域正在迅速发展，并在全球范围内产生影响力。增强和改进的速度创造了新的工作机会，如数据工程师、数据科学家、可视化专家、机器学习工程师、MLOps、DevOps、GenAI专家等，需求每天都在增加。但是，满足这些职位描述严格标准的专业人士却很少。当务之急是需要有*数据艺术家*，他们能够将业务目标与分析问题相结合，预见解决方案以解决动态的业务问题，适应不断变化的技术环境，并且还能提供成本效益高的业务解决方案。
- en: More sophisticated systems are being created every day. We can see examples
    of self-driving cars, human chatbots, fraud detection systems, facial recognition
    solutions, object-detection solutions, optimization and monitoring solutions,
    etc. The use of GenAI has further enhanced the effect.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 每天都在创建更复杂的系统。我们可以看到自动驾驶汽车、人类聊天机器人、欺诈检测系统、面部识别解决方案、目标检测解决方案、优化和监控解决方案等例子。GenAI的使用进一步增强了效果。
- en: 'At the same time, there are some risks too, which we should be aware of. The
    onus lies on humankind regarding how to harness this power of data. There are
    instances where (if we believe the claims made) AI has been used for rigging election
    results or DeepFake has been used for morphing pictures of people or profiling
    people based on race/color etc. We can use machine learning and AI to spread love
    or hatred–it is our choice. And like the cliché goes: with great power comes great
    responsibility!'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 同时，也存在一些风险，我们应该有所警觉。人类有责任如何利用数据的力量。有些情况下（如果我们相信所声称的），AI被用于操纵选举结果，或者DeepFake被用于改变人们的照片或基于种族/颜色等进行人物画像。我们可以使用机器学习和AI来传播爱与恨——这是我们的选择。就像俗语所说：能力越大，责任越大！
- en: We sincerely hope you enjoyed the book. Congratulations, and all the very best
    for your next steps!
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 我们真诚地希望您喜欢这本书。恭喜您，祝您下一步一切顺利！
- en: 11.18 Practical next steps and suggested readings
  id: totrans-162
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 11.18 实践下一步行动和建议阅读
- en: 'The following provides suggestions for what to do next and offers some helpful
    reading:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 以下提供下一步行动的建议和一些有用的阅读材料：
- en: 'Go through these two research papers on model deployment:'
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 阅读以下关于模型部署的两篇研究论文：
- en: 'Paleyes, A., Urma, R-G., and Lawrence, N. D. (2020). Challenges in Deploying
    Machine Learning: a Survey of Case Studies. [https://arxiv.org/abs/2011.09926v2](https://arxiv.org/abs/2011.09926v2)'
  id: totrans-165
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Paleyes, A., Urma, R-G., and Lawrence, N. D. (2020). 部署机器学习面临的挑战：案例研究综述。[https://arxiv.org/abs/2011.09926v2](https://arxiv.org/abs/2011.09926v2)
- en: Sculley, D., Holt, G., Golovin, D., et al. (2015). Hidden Technical Debt in
    Machine Learning Systems. [https://mng.bz/4azw](https://mng.bz/4azw)
  id: totrans-166
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Sculley, D., Holt, G., Golovin, D., et al. (2015). 机器学习系统中的隐藏技术债务。[https://mng.bz/4azw](https://mng.bz/4azw)
- en: Use the datasets we have developed in the last few chapters and perform EDA
    on those datasets.
  id: totrans-167
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用我们在前几章中开发的数据集，并对这些数据集进行EDA。
- en: Summary
  id: totrans-168
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 摘要
- en: The journey of learning is ongoing, requiring courage, patience, and diligence;
    understanding the entire process from conceptualization to model deployment is
    essential for mastering machine learning.
  id: totrans-169
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 学习之旅是持续的，需要勇气、耐心和勤奋；理解从概念化到模型部署的整个过程对于掌握机器学习至关重要。
- en: The end-to-end model deployment process involves key steps such as business
    problem definition, data cleaning, and EDA and culminating in model deployment
    and maintenance.
  id: totrans-170
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 端到端模型部署过程包括业务问题定义、数据清洗、EDA以及最终模型部署和维护等关键步骤。
- en: The machine learning modeling process includes distinct stages such as business
    problem definition, data discovery and feasibility analysis, data prepreparation,
    EDA, modeling, deployment, documentation, and maintenance.
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 机器学习建模过程包括不同的阶段，如业务问题定义、数据发现和可行性分析、数据预处理、EDA、建模、部署、文档和运维。
- en: Clear and achievable business problem definition is crucial to align goals effectively,
    prevent scope creep, and ensure that KPIs are measurable to assess the model’s
    effect.
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 明确且可达成业务问题定义对于有效地对齐目标、防止范围蔓延以及确保KPI可衡量以评估模型效果至关重要。
- en: Data discovery involves identifying necessary datasets, ensuring access and
    completeness, and analyzing feasibility, with particular attention to data relevance,
    quality, and representation.
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据发现涉及识别必要的数据集，确保访问和完整性，并分析可行性，特别关注数据的相关性、质量和表示。
- en: Data cleaning and prepreparation address common problems like duplicates, categorical
    variables, missing data, and outliers, utilizing various techniques to prepare
    the dataset for effective modeling.
  id: totrans-174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据清洗和预处理解决常见问题，如重复数据、分类变量、缺失数据和异常值，利用各种技术为有效建模准备数据集。
- en: EDA is key to understanding data patterns and relationships and generating actionable
    insights, laying the groundwork for successful model development.
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: EDA对于理解数据模式和关系以及生成可操作见解至关重要，为成功的模型开发奠定基础。
- en: The model development phase uses algorithms suitable for the business problem
    and requires stakeholder collaboration for refinement.
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 模型开发阶段使用适合业务问题的算法，并需要利益相关者的协作以进行细化。
- en: Model deployment bridges development and production, necessitating considerations
    for infrastructure, real-time applications, scaling, security, and continuous
    integration to optimize model utility.
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 模型部署连接了开发和生产，需要考虑基础设施、实时应用、扩展、安全和持续集成以优化模型效用。
- en: Types of model deployment include batch, real-time, edge, canary, and A/B testing,
    each offering different advantages based on strategic objectives and application
    contexts.
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 模型部署的类型包括批量、实时、边缘、金丝雀和A/B测试，每种类型根据战略目标和应用环境提供不同的优势。
- en: Effective deployment involves accuracy monitoring, detecting model and data
    drift, securing compliance and data, and ensuring reproducibility and scalability.
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有效的部署涉及准确性监控、检测模型和数据漂移、确保合规性和数据安全，以及确保可重复性和可扩展性。
- en: Postdeployment, thorough documentation and version control are vital for code
    integrity and facilitating future iterations or rollbacks when necessary.
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 部署后，详尽的文档和版本控制对于代码完整性至关重要，并在必要时促进未来的迭代或回滚。
- en: Model maintenance involves regular performance checks and refreshes, adapting
    to dynamic business environments and ensuring alignment with evolving data trends.
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 模型维护包括定期性能检查和更新，适应动态的商业环境，并确保与不断变化的数据趋势保持一致。
- en: Data-driven solutions have vast potential but also an equally high duty of responsible
    use. We wrap up this book by stressing the importance of ethical application.
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据驱动解决方案具有巨大的潜力，但也同样需要高度的责任使用。我们通过强调道德应用的重要性来结束这本书。
