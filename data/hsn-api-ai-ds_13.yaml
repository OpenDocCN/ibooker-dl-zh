- en: Chapter 11\. Using APIs in Streamlit Data Apps
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第 11 章\. 在 Streamlit 数据应用中使用 API
- en: A simple app today is better than an over-designed app three months late.
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 现在的一个简单应用比三个月后一个过度设计的应用要好。
- en: ''
  id: totrans-2
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Thiago Teixeira, cofounder of Streamlit
  id: totrans-3
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: Thiago Teixeira，Streamlit 联合创始人
- en: If you want to demonstrate your data science skills to other people, it’s hard
    to beat a *data app*—a web application displaying your data science models, graphs,
    charts, and spreadsheets. Sending a recruiter or potential client a link to a
    data app you created is a sure way to get their attention.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想向其他人展示你的数据科学技能，没有比 *数据应用* 更好的方式——这是一个显示你的数据科学模型、图表、图表和电子表格的 Web 应用程序。向招聘人员或潜在客户发送你创建的数据应用的链接是吸引他们注意力的可靠方式。
- en: In this chapter, you will build a data app with Streamlit, an open source library
    that helps you create colorful and interactive web apps using Python. Streamlit
    handles all the complexity of the web interface so that you can focus on the data
    backend code, such as data files, pandas DataFrames, and APIs.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你将使用 Streamlit 构建一个数据应用，Streamlit 是一个开源库，它帮助你使用 Python 创建色彩丰富且交互式的 Web
    应用程序。Streamlit 处理所有 Web 界面的复杂性，这样你就可以专注于数据后端代码，例如数据文件、pandas DataFrame 和 API。
- en: Streamlit apps can be deployed in a limited fashion for free on the Streamlit
    Community Cloud or paid web hosting platforms.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: Streamlit 应用可以免费在 Streamlit 社区云或付费 Web 托管平台上以有限的方式部署。
- en: Engaging Users with Interactive Visualizations
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 通过交互式可视化吸引用户
- en: Two main types of analytics products are *tabular reports* and *visualizations*.
    Tabular reports present rows and columns of data in a spreadsheet format, which
    provides a detailed view of data. Visualizations replace tabular data with charts,
    graphs, maps, and other images that give context and color to the data. Visualizations
    can communicate ideas that are hard to see in a spreadsheet.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 两种主要的分析产品类型是 *表格报告* 和 *可视化*。表格报告以电子表格格式呈现数据行和列，提供了数据的详细视图。可视化用图表、图形、地图和其他图像替换表格数据，为数据提供背景和色彩。可视化可以传达在电子表格中难以看到的思想。
- en: Streamlit supports both tabular data and visualizations in a very interactive
    way. It provides built-in *widgets*, which are application controls such as sliders
    and select boxes that allow the user to filter and interact with the data in real
    time. For a fun example, take a look at [Figure 11-1](#fantasy_history_streamlit_app_ch11),
    which shows a data app I built to track the championship titles in one of my long-running
    fantasy leagues.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: Streamlit 以非常互动的方式支持表格数据和可视化。它提供了内置的 *小部件*，例如滑块和选择框，允许用户实时过滤和与数据交互。为了一个有趣的例子，请查看[图
    11-1](#fantasy_history_streamlit_app_ch11)，它展示了我为跟踪我长期运行的幻想联赛中的一个冠军头衔而构建的数据应用。
- en: '![Fantasy league data app](assets/haad_1101.png)'
  id: totrans-10
  prefs: []
  type: TYPE_IMG
  zh: '![幻想联赛数据应用](assets/haad_1101.png)'
- en: Figure 11-1\. Fantasy league data app
  id: totrans-11
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 11-1\. 幻想联赛数据应用
- en: The built-in widgets allow a data scientist to focus on providing accurate and
    useful data, while Streamlit components make a great-looking app. Streamlit designs
    its product to have simple defaults that get users up and running quickly; this
    is Streamlit’s design principle of [promoting forward progress](https://oreil.ly/strlit).
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 内置的小部件允许数据科学家专注于提供准确和有用的数据，而 Streamlit 组件则使应用看起来非常出色。Streamlit 设计其产品以具有简单的默认设置，以便用户能够快速上手；这是
    Streamlit 的设计原则之一[促进进步](https://oreil.ly/strlit)。
- en: Software Used in This Chapter
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本章使用的软件
- en: This chapter builds on the tools you have learned in previous chapters, especially
    pandas. [Table 11-1](#tools_table_chapter_11) displays the new tools you will
    use.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 本章基于你在前几章中学到的工具，特别是 pandas。[表 11-1](#tools_table_chapter_11) 显示了你将使用的新工具。
- en: Table 11-1\. Key tools or services used in this chapter
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 表 11-1\. 本章使用的关键工具或服务
- en: '| Software name | Purpose |'
  id: totrans-16
  prefs: []
  type: TYPE_TB
  zh: '| 软件名称 | 用途 |'
- en: '| --- | --- |'
  id: totrans-17
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| nfl_data_py | NFL data library |'
  id: totrans-18
  prefs: []
  type: TYPE_TB
  zh: '| nfl_data_py | NFL 数据库 |'
- en: '| Streamlit | Web-based analytics software |'
  id: totrans-19
  prefs: []
  type: TYPE_TB
  zh: '| Streamlit | 基于网络的分析软件 |'
- en: nfl_data_py
  id: totrans-20
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: nfl_data_py
- en: To perform data analytics, you often want to add data from multiple sources
    to make your analytics products more informative or give them wider context. For
    football data, [nflverse](https://oreil.ly/nfLV) is a rich set of open source
    libraries and data files containing NFL data. The Python library for interacting
    with the data is [nfl_data_py](https://oreil.ly/2U7P8).
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 为了进行数据分析，你通常希望从多个来源添加数据，以便使你的分析产品更具信息量或提供更广泛的背景。对于足球数据，[nflverse](https://oreil.ly/nfLV)
    是一个包含 NFL 数据的丰富开源库和数据文件集。与数据交互的 Python 库是 [nfl_data_py](https://oreil.ly/2U7P8)。
- en: You will use the most current version of nfl_data_py that is available.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 你将使用当前可用的最新版本的nfl_data_py。
- en: Streamlit
  id: totrans-23
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Streamlit
- en: Streamlit is an open source Python library that you can download using `pip3`.
    By including the library, a single Python file can generate an app using the command
    `streamlit run your_script.py`. The library is easy to learn using the [Streamlit
    getting started guide](https://oreil.ly/-qxBe).
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: Streamlit是一个开源的Python库，你可以使用`pip3`下载。通过包含这个库，一个单一的Python文件可以使用`streamlit run
    your_script.py`命令生成一个应用。这个库使用[Streamlit入门指南](https://oreil.ly/-qxBe)很容易学习。
- en: Installing Streamlit and nfl_data_py
  id: totrans-25
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装Streamlit和nfl_data_py
- en: 'To install the libraries you need for this chapter, create a file named *chapter11/requirements.txt*:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 要安装本章所需的库，创建一个名为*chapter11/requirements.txt*的文件：
- en: '[PRE0]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Update *chapter11/requirements.txt* with the following contents:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 将以下内容更新到*chapter11/requirements.txt*：
- en: '[PRE1]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Execute the following command to install the new libraries in your Codespace:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下命令在你的Codespace中安装新的库：
- en: '[PRE2]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: You should see a message that states that these libraries were successfully
    installed.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该会看到一个消息，表明这些库已成功安装。
- en: Launching Your API in Codespaces
  id: totrans-33
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在Codespaces中启动你的API
- en: '[Figure 11-2](#ch11_architecture_streamlit) shows the high-level architecture
    of the project you will create in this chapter.'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: '[图11-2](#ch11_architecture_streamlit)显示了本章将创建的项目的高级架构。'
- en: '![Architecture of Streamlit project](assets/haad_1102.png)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
  zh: '![Streamlit项目的架构](assets/haad_1102.png)'
- en: Figure 11-2\. Architecture of the Streamlit project
  id: totrans-36
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图11-2\. Streamlit项目的架构
- en: To access your API data, you will need to launch v0.2 of your API in the terminal.
    For instructions, follow [“Running the SportsWorldCentral (SWC) API Locally”](ch08.html#sportsworldcentral).
    When the API is running, copy the URL of your API from the browser address bar
    to use as the base URL in this chapter.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问你的API数据，你需要在终端中启动你的API的v0.2版本。有关说明，请遵循[“在本地运行SportsWorldCentral (SWC) API”](ch08.html#sportsworldcentral)。当API运行时，从浏览器地址栏复制你的API的URL作为本章的基础URL。
- en: Tip
  id: totrans-38
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 小贴士
- en: When your API or Streamlit app is running in the terminal and you want to stop
    it, press Ctrl-C.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 当你的API或Streamlit应用在终端运行时，如果你想停止它，请按Ctrl-C。
- en: Reusing the Chapter 9 API Client File
  id: totrans-40
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 重用第9章的API客户端文件
- en: In [Chapter 9](ch09.html#chapter_9), you created a standalone Python client
    file to make the calls to your API, while adding logging, error handling, and
    backoff-retry functionality. You will reuse this file in your Streamlit app. Maintaining
    your API client outside your Streamlit app gives you reusability.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第9章](ch09.html#chapter_9)中，你创建了一个独立的Python客户端文件来调用你的API，同时添加了日志记录、错误处理和回退重试功能。你将在你的Streamlit应用中重用这个文件。将API客户端文件放在Streamlit应用之外，可以提供可重用性。
- en: 'Copy the client file from the *chapter9/notebooks* directory (or the *chapter9/complete/notebooks*
    directory if you haven’t completed [Chapter 9](ch09.html#chapter_9) yet) into
    the *chapter11/streamlit* directory:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 将客户端文件从*chapter9/notebooks*目录（如果你还没有完成[第9章](ch09.html#chapter_9)，则从*chapter9/complete/notebooks*目录）复制到*chapter11/streamlit*目录：
- en: '[PRE3]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Creating Your Streamlit App
  id: totrans-44
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建你的Streamlit应用
- en: Your Streamlit app will include an *entrypoint file*, which is the file that
    Streamlit loads first. In this app, you will use the entrypoint file to set the
    initial configuration and create the page navigation. Your app will also include
    individual page files that perform the work.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 你的Streamlit应用将包括一个*入口点文件*，这是Streamlit首先加载的文件。在这个应用中，你将使用入口点文件来设置初始配置和创建页面导航。你的应用还将包括执行工作的单个页面文件。
- en: 'Since your API is running in the terminal window, you will need to open a second
    terminal window and execute the following command:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 由于你的API在终端窗口中运行，你需要打开第二个终端窗口并执行以下命令：
- en: '[PRE4]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Updating the Entrypoint File
  id: totrans-48
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 更新入口点文件
- en: The entrypoint file contains a couple of items that are fundamental to a Streamlit
    app. The first is `st.session_state`, which is the mechanism to share information
    between pages in the application. The next is `st.navigation`, which is how you
    make a multi-page app with a shared navigation bar.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 入口点文件包含了一些对Streamlit应用至关重要的项目。第一个是`st.session_state`，它是应用程序中页面间共享信息的机制。接下来是`st.navigation`，这是创建具有共享导航栏的多页应用的方式。
- en: 'Add the following code to *streamlit_football_app.py*, and replace the statement
    `[insert your API base URL]` with the base API URL from the API running locally:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 将以下代码添加到*streamlit_football_app.py*，并将语句`[insert your API base URL]`替换为本地运行的API的基础API
    URL：
- en: '[PRE5]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '[![1](assets/1.png)](#co_using_apis_in_streamlit_data_apps_CO1-1)'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: '[![1](assets/1.png)](#co_using_apis_in_streamlit_data_apps_CO1-1)'
- en: Replace the statement `[insert your API base URL]` with the base API URL from
    the API running locally.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 将语句 `[插入您的 API 基础 URL]` 替换为本地运行的 API 的基础 API URL。
- en: '[![2](assets/2.png)](#co_using_apis_in_streamlit_data_apps_CO1-2)'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: '![2](assets/2.png)(#co_using_apis_in_streamlit_data_apps_CO1-2)'
- en: This sets up the logging configuration for the application. All logging messages
    at `INFO` level or more severe will be saved in this file.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 这为应用程序设置日志记录配置。所有 `INFO` 级别或更严重的日志消息都将保存在此文件中。
- en: '[![3](assets/3.png)](#co_using_apis_in_streamlit_data_apps_CO1-3)'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '![3](assets/3.png)(#co_using_apis_in_streamlit_data_apps_CO1-3)'
- en: This sets the configuration for the entire application, including the title
    and icon to display in the browser tab.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 这将为整个应用程序设置配置，包括在浏览器标签中显示的标题和图标。
- en: '[![4](assets/4.png)](#co_using_apis_in_streamlit_data_apps_CO1-4)'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: '![4](assets/4.png)(#co_using_apis_in_streamlit_data_apps_CO1-4)'
- en: This command defines the settings for the first subpage, along with the title
    and icon to display in the navigation bar.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 此命令定义了第一个子页面的设置，包括在导航栏中显示的标题和图标。
- en: '[![5](assets/5.png)](#co_using_apis_in_streamlit_data_apps_CO1-5)'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: '![5](assets/5.png)(#co_using_apis_in_streamlit_data_apps_CO1-5)'
- en: This creates the navigation bar and orders the subpages.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 这将创建导航栏并排列子页面。
- en: '[![6](assets/6.png)](#co_using_apis_in_streamlit_data_apps_CO1-6)'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: '![6](assets/6.png)(#co_using_apis_in_streamlit_data_apps_CO1-6)'
- en: This statement executes the current page.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 这条语句执行当前页面。
- en: Running Your Streamlit App
  id: totrans-64
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 运行您的 Streamlit 应用
- en: 'To run your app, execute the following command in the terminal:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 要运行您的应用，请在终端中执行以下命令：
- en: '[PRE6]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: You will see the display shown in [Figure 11-3](#launching_streamlit_ch11).
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 您将看到 [图 11-3](#launching_streamlit_ch11) 中所示的显示。
- en: '![Launching your Streamlit app](assets/haad_1103.png)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
  zh: '![启动您的 Streamlit 应用](assets/haad_1103.png)'
- en: Figure 11-3\. Launching your Streamlit app
  id: totrans-69
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 11-3\. 启动您的 Streamlit 应用
- en: Click “Open in Browser.” You will see a blank browser window with a vertical
    ellipsis in the top right. Select the ellipsis and choose Settings. On the Settings
    screen select “Run on save,” then close the Settings window to save.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 点击“在浏览器中打开”。您将看到一个空白浏览器窗口，右上角有一个垂直省略号。选择省略号并选择设置。在设置屏幕上选择“保存时运行”，然后关闭设置窗口以保存。
- en: Tip
  id: totrans-71
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 小贴士
- en: If you are prompted with “Source code changed,” select “Always rerun.” This
    ensures that coding changes are applied to the running app immediately.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您被提示“源代码已更改”，请选择“始终重新运行”。这确保了代码更改立即应用于正在运行的应用程序。
- en: You will see the blank app with a navigation bar, as shown in [Figure 11-4](#blank_app_ch11).
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 您将看到带有导航栏的空白应用，如图 [图 11-4](#blank_app_ch11) 所示。
- en: '![Initial blank data app](assets/haad_1104.png)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
  zh: '![初始空白数据应用](assets/haad_1104.png)'
- en: Figure 11-4\. Initial blank data app
  id: totrans-75
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 11-4\. 初始空白数据应用
- en: Tip
  id: totrans-76
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 小贴士
- en: You can open the VS Code Simple Browser and have it running next to your code
    window. Open the VS Code Command Palette by clicking Ctrl-Shift-P. Enter **Simple
    Browser:Show**, then enter the address of the application (the one that ends with
    *app.github.dev*).
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以打开 VS Code Simple Browser 并使其在代码窗口旁边运行。通过点击 Ctrl-Shift-P 打开 VS Code 命令面板。输入
    **Simple Browser:Show**，然后输入应用程序的地址（以 *app.github.dev* 结尾）。
- en: Creating the Team Rosters Page
  id: totrans-78
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建团队名单页面
- en: The Team Rosters subpage will be displayed when your application executes. It
    will call the SportsWorldCentral API, manipulate the data using pandas, and then
    display the pandas DataFrame.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 当您的应用程序执行时，将显示团队名单子页面。它将调用 SportsWorldCentral API，使用 pandas 处理数据，然后显示 pandas
    DataFrame。
- en: The first half of this file performs some library imports and sets up the logging.
    Then, it calls the API to retrieve all the data that will be used on the page
    for both filtering and display. The data is used to create a pandas DataFrame,
    which is a handy way of processing data in Python. The pandas library supports
    many powerful data manipulation functions, which you will see in the next section.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 文件的前半部分执行一些库导入并设置日志记录。然后，它调用 API 以检索将在页面上用于过滤和显示的所有数据。数据被用来创建一个 pandas DataFrame，这是在
    Python 中处理数据的一种方便方式。pandas 库支持许多强大的数据处理函数，您将在下一节中看到。
- en: 'Add the following code to *page1.py*:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 将以下代码添加到 *page1.py*：
- en: '[PRE7]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '[![1](assets/1.png)](#co_using_apis_in_streamlit_data_apps_CO2-1)'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: '![1](assets/1.png)(#co_using_apis_in_streamlit_data_apps_CO2-1)'
- en: This statement creates a reference to the logging file that was configured in
    the entrypoint file.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 这条语句创建了对在入口文件中配置的日志文件的引用。
- en: '[![2](assets/2.png)](#co_using_apis_in_streamlit_data_apps_CO2-2)'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: '![2](assets/2.png)(#co_using_apis_in_streamlit_data_apps_CO2-2)'
- en: These headings will be printed at the top of the page.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 这些标题将打印在页面顶部。
- en: '[![3](assets/3.png)](#co_using_apis_in_streamlit_data_apps_CO2-3)'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: '![3](assets/3.png)(#co_using_apis_in_streamlit_data_apps_CO2-3)'
- en: This retrieves the `base_url` variable from the session state.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 这从会话状态中检索 `base_url` 变量。
- en: '[![4](assets/4.png)](#co_using_apis_in_streamlit_data_apps_CO2-4)'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: '![4](assets/4.png)(#co_using_apis_in_streamlit_data_apps_CO2-4)'
- en: All of the page’s code is wrapped in a `try…​except` structure. If any unhandled
    exception occurs, it logs the error and writes an error message to the screen.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 页面上的所有代码都包含在 `try…except` 结构中。如果发生任何未处理的异常，它将记录错误并将错误消息写入屏幕。
- en: '[![5](assets/5.png)](#co_using_apis_in_streamlit_data_apps_CO2-5)'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: '![5](assets/5.png)(#co_using_apis_in_streamlit_data_apps_CO2-5)'
- en: This uses *swc_simple_client.py* to call the API and stores the `httpx.response`
    in a variable.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 这使用 *swc_simple_client.py* 调用 API 并将 `httpx.response` 存储在一个变量中。
- en: '[![6](assets/6.png)](#co_using_apis_in_streamlit_data_apps_CO2-6)'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: '![6](assets/6.png)(#co_using_apis_in_streamlit_data_apps_CO2-6)'
- en: A `200` value in the `status_code` indicates a successful API call. It proceeds
    to populate the page.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: '`status_code` 中的 `200` 值表示成功的 API 调用。它继续填充页面。'
- en: '[![7](assets/7.png)](#co_using_apis_in_streamlit_data_apps_CO2-7)'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: '![7](assets/7.png)(#co_using_apis_in_streamlit_data_apps_CO2-7)'
- en: This converts the JSON data from the API to a Python representation of the data.
    The `.json()` name is a bit confusing since it doesn’t return JSON data. It might
    help to think of this as the “converting from JSON” method.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 这将 API 的 JSON 数据转换为数据的 Python 表示形式。`.json()` 名称有点令人困惑，因为它不返回 JSON 数据。可以将其视为“从
    JSON 转换”方法。
- en: '[![8](assets/8.png)](#co_using_apis_in_streamlit_data_apps_CO2-8)'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: '![8](assets/8.png)(#co_using_apis_in_streamlit_data_apps_CO2-8)'
- en: This uses pandas to create a DataFrame using the `from_dict` method. pandas
    DataFrames are convenient data structures for manipulating data.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 这使用 pandas 的 `from_dict` 方法创建 DataFrame。pandas DataFrame 是方便的数据结构，用于操作数据。
- en: '[![9](assets/9.png)](#co_using_apis_in_streamlit_data_apps_CO2-9)'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: '![9](assets/9.png)(#co_using_apis_in_streamlit_data_apps_CO2-9)'
- en: These two lines get a list of unique `league_id` values, convert them to a string,
    and sort them.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 这两条线获取唯一的 `league_id` 值列表，将它们转换为字符串，并排序。
- en: '[![10](assets/10.png)](#co_using_apis_in_streamlit_data_apps_CO2-10)'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: '![10](assets/10.png)(#co_using_apis_in_streamlit_data_apps_CO2-10)'
- en: This command stores the unique list of leagues in the `session_state` object
    so that all pages in the app can use them.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 此命令将独特的联赛列表存储在 `session_state` 对象中，以便应用中的所有页面都可以使用它们。
- en: This page contains a navigation bar with a select box titled “Pick league ID.”
    When users select a league that has rosters, the team rosters page will be filtered
    with teams that match that `league_id` value. This filtering is accomplished by
    filtering the DataFrame and by Streamlit updating the display to match.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 此页面包含一个带有标题为“选择联赛 ID”的选择框的导航栏。当用户选择具有阵容的联赛时，团队阵容页面将根据该 `league_id` 值进行过滤。此过滤是通过过滤
    DataFrame 和 Streamlit 更新显示以匹配来完成的。
- en: The remaining code creates the navigation bar, then uses pandas to format the
    data and display it on the page. It also contains matching error handling and
    exception handling statements from the previous code.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 剩余的代码创建导航栏，然后使用 pandas 格式化数据并在页面上显示。它还包含与之前代码匹配的错误处理和异常处理语句。
- en: 'Add the following code to *page1.py*:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: '将以下代码添加到 *page1.py*:'
- en: '[PRE8]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '[![1](assets/1.png)](#co_using_apis_in_streamlit_data_apps_CO3-1)'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: '![1](assets/1.png)(#co_using_apis_in_streamlit_data_apps_CO3-1)'
- en: Create a select box in the navigation bar to select a `league_id` value.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 在导航栏中创建一个选择框以选择 `league_id` 值。
- en: '[![2](assets/2.png)](#co_using_apis_in_streamlit_data_apps_CO3-2)'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: '![2](assets/2.png)(#co_using_apis_in_streamlit_data_apps_CO3-2)'
- en: Use the pandas `json_normalize()` function to reformat the nested JSON data
    into rows and columns. Then create a new variable with a different column order.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 pandas 的 `json_normalize()` 函数将嵌套 JSON 数据重新格式化为行和列。然后创建一个新的变量，具有不同的列顺序。
- en: '[![3](assets/3.png)](#co_using_apis_in_streamlit_data_apps_CO3-3)'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: '![3](assets/3.png)(#co_using_apis_in_streamlit_data_apps_CO3-3)'
- en: Create a filter DataFrame that contains only the values matching `selected_​lea⁠gue`,
    which the user chose in the select box.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 创建一个只包含与用户在选择框中选择的 `selected_league` 匹配的值的过滤 DataFrame。
- en: '[![4](assets/4.png)](#co_using_apis_in_streamlit_data_apps_CO3-4)'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: '![4](assets/4.png)(#co_using_apis_in_streamlit_data_apps_CO3-4)'
- en: Use Streamlit’s built-in `DataFrame()` function to display the filtered DataFrame
    on the page.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 Streamlit 内置的 `DataFrame()` 函数在页面上显示过滤后的 DataFrame。
- en: '[![5](assets/5.png)](#co_using_apis_in_streamlit_data_apps_CO3-5)'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: '![5](assets/5.png)(#co_using_apis_in_streamlit_data_apps_CO3-5)'
- en: This will display an error if the API call is not successful and returns an
    HTTP status code other than 200.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 如果 API 调用不成功并返回除 200 以外的 HTTP 状态码，将显示错误。
- en: '[![6](assets/6.png)](#co_using_apis_in_streamlit_data_apps_CO3-6)'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: '![6](assets/6.png)(#co_using_apis_in_streamlit_data_apps_CO3-6)'
- en: This is a general exception handling block that will be entered if anything
    goes wrong in the main processing of the page.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个通用的异常处理块，如果页面主要处理过程中出现任何错误，将会进入此块。
- en: As you rerun the code on this page, you will see the display of the Team Rosters
    page, as shown in [Figure 11-5](#team_rosters_page_ch11).
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 当你在本页面上重新运行代码时，你会看到团队阵容页面的显示，如图 [图 11-5](#team_rosters_page_ch11) 所示。
- en: '![Team rosters page](assets/haad_1105.png)'
  id: totrans-120
  prefs: []
  type: TYPE_IMG
  zh: '![团队阵容页面](assets/haad_1105.png)'
- en: Figure 11-5\. Team Rosters page
  id: totrans-121
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 11-5. 团队阵容页面
- en: Creating the Team Stats Page
  id: totrans-122
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建团队统计数据页面
- en: The Team Stats page will be displayed when users select Team Stats in the navigation
    bar. Instead of calling the SportsWorldCentral API, it reuses the data that was
    stored in `SessionState` as a pandas DataFrame.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 当用户在导航栏中选择团队统计数据时，将显示团队统计数据页面。它不再调用 SportsWorldCentral API，而是重用存储在 `SessionState`
    中的数据作为 pandas DataFrame。
- en: The first portion of this file imports libraries and sets up the logging. Next,
    it creates items for the sidebar and filters the dataset to match the selected
    entry in the select box.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 文件的前部分导入库并设置日志记录。接下来，它为侧边栏创建项目并过滤数据集以匹配选择框中选择的条目。
- en: 'Add the following code to *page2.py*:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 将以下代码添加到 *page2.py*：
- en: '[PRE9]'
  id: totrans-126
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '[![1](assets/1.png)](#co_using_apis_in_streamlit_data_apps_CO4-1)'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: '![1](assets/1.png)(#co_using_apis_in_streamlit_data_apps_CO4-1)'
- en: This library will be used to format a bar chart on this page.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 此库将用于在本页面上格式化条形图。
- en: '[![2](assets/2.png)](#co_using_apis_in_streamlit_data_apps_CO4-2)'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: '![2](assets/2.png)(#co_using_apis_in_streamlit_data_apps_CO4-2)'
- en: This retrieves the API data that was created in the Team Rosters page.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 这将检索在团队阵容页面创建的 API 数据。
- en: '[![3](assets/3.png)](#co_using_apis_in_streamlit_data_apps_CO4-3)'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: '![3](assets/3.png)(#co_using_apis_in_streamlit_data_apps_CO4-3)'
- en: This retrieves the `unique_leagues` that was created on the Team Rosters page
    and adds a select box to the sidebar.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 这将检索在团队阵容页面创建的 `unique_leagues`，并在侧边栏中添加一个选择框。
- en: '[![4](assets/4.png)](#co_using_apis_in_streamlit_data_apps_CO4-4)'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: '![4](assets/4.png)(#co_using_apis_in_streamlit_data_apps_CO4-4)'
- en: These filter the DataFrame to match the `league_id` from the select box in the
    navigation bar.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 这些过滤器将 DataFrame 过滤以匹配导航栏中选择框中的 `league_id`。
- en: You are not limited to the data available in the SportsWorldCentral API—​you
    can combine it with external sources. For the Team Stats page, you will enrich
    your data from the nfl_data_py library by joining on the `GSIS_ID` value. This
    allows your app to build a bar chart with touchdown data, which was not available
    in the API.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 你不仅限于 SportsWorldCentral API 中可用的数据——你可以将其与外部来源结合。对于团队统计数据页面，你将通过在 `GSIS_ID`
    值上连接来丰富从 nfl_data_py 库中获取的数据。这允许你的应用程序构建一个包含触地数据的条形图，这些数据在 API 中不可用。
- en: Note
  id: totrans-136
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: In [Part I](part01.html#part_1) of this book, you chose to include the `gsis_id`
    in your API, which comes from the NFL’s Game Statistics and Information System.
    You didn’t need it for your internal operations, but you decided it would benefit
    data science users who wanted to join your data to external sources. That extra
    thought is going to pay off now for your users, because it allows you to join
    your API data to data from nfl_data_py.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书的 [第 I 部分](part01.html#part_1) 中，你选择在 API 中包含 `gsis_id`，它来自 NFL 的比赛统计数据和信息系统。你不需要它进行内部操作，但你决定它将有利于想要将数据与外部来源结合的数据科学用户。现在，这种额外的思考将为你的用户带来回报，因为它允许你将你的
    API 数据与 nfl_data_py 的数据结合。
- en: The remaining code in this page first loads the data from nfl_data_py into a
    pandas DataFrame, selects four columns, then creates a new `total_tds` column.
    Next, the code uses the `merge` command to join the API data to the nfl_data_py
    data, aggregates it, and displays a chart.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 页面上的剩余代码首先将数据从 nfl_data_py 加载到 pandas DataFrame 中，选择四列，然后创建一个新的 `total_tds`
    列。接下来，代码使用 `merge` 命令将 API 数据与 nfl_data_py 数据连接，聚合它并显示图表。
- en: 'Add the following code to *page2.py*:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 将以下代码添加到 *page2.py*：
- en: '[PRE10]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '[![1](assets/1.png)](#co_using_apis_in_streamlit_data_apps_CO5-1)'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: '![1](assets/1.png)(#co_using_apis_in_streamlit_data_apps_CO5-1)'
- en: This command calls the `import_seasonal_data` method from nfl_data_py and requests
    2023 regular season data.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 此命令调用 nfl_data_py 的 `import_seasonal_data` 方法，并请求 2023 赛季的数据。
- en: '[![2](assets/2.png)](#co_using_apis_in_streamlit_data_apps_CO5-2)'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: '![2](assets/2.png)(#co_using_apis_in_streamlit_data_apps_CO5-2)'
- en: The next two lines build a list with the column names you want and create a
    DataFrame with the columns identified in the previous step.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来的两行构建了一个包含你想要的列名的列表，并使用上一步中确定的列创建了一个 DataFrame。
- en: '[![3](assets/3.png)](#co_using_apis_in_streamlit_data_apps_CO5-3)'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: '[![3](assets/3.png)](#co_using_apis_in_streamlit_data_apps_CO5-3)'
- en: These add a new calculated field to the DataFrame with the combined touchdowns
    for the team.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 这些语句向 DataFrame 添加一个新的计算字段，包含球队的总达阵数。
- en: '[![4](assets/4.png)](#co_using_apis_in_streamlit_data_apps_CO5-4)'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: '[![4](assets/4.png)](#co_using_apis_in_streamlit_data_apps_CO5-4)'
- en: This statement uses the `pandas.merge()` function, which allows you to join
    two DataFrames. You are merging the API DataFrame and the nfl_data_py DataFrame.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 这条语句使用 `pandas.merge()` 函数，该函数允许你连接两个 DataFrame。你正在连接 API DataFrame 和 nfl_data_py
    DataFrame。
- en: '[![5](assets/5.png)](#co_using_apis_in_streamlit_data_apps_CO5-5)'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: '[![5](assets/5.png)](#co_using_apis_in_streamlit_data_apps_CO5-5)'
- en: The pandas `groupby` statement combines all the players for each team and sums
    the value in the `total_tds` column.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: pandas 的 `groupby` 语句将每个团队的球员合并在一起，并计算 `total_tds` 列的总和。
- en: '[![6](assets/6.png)](#co_using_apis_in_streamlit_data_apps_CO5-6)'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: '[![6](assets/6.png)](#co_using_apis_in_streamlit_data_apps_CO5-6)'
- en: The next two statements build a bar chart using pandas and the matplotlib library.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 下两条语句使用 pandas 和 matplotlib 库构建条形图。
- en: '[![7](assets/7.png)](#co_using_apis_in_streamlit_data_apps_CO5-7)'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: '[![7](assets/7.png)](#co_using_apis_in_streamlit_data_apps_CO5-7)'
- en: This uses Streamlit’s `pyplot()` function to display the plot created in the
    previous steps.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 这使用 Streamlit 的 `pyplot()` 函数显示在前面步骤中创建的图表。
- en: You will see the display of the Team Rosters page, as shown in [Figure 11-6](#team_stats_page_ch11).
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 你将看到团队阵容页面显示，如图 [图11-6](#team_stats_page_ch11) 所示。
- en: '![Team stats page](assets/haad_1106.png)'
  id: totrans-156
  prefs: []
  type: TYPE_IMG
  zh: '![团队统计页面](assets/haad_1106.png)'
- en: Figure 11-6\. Team Stats page
  id: totrans-157
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 11-6\. 团队统计页面
- en: 'To see the final structure of your Streamlit app, execute the `tree` command
    as follows:'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 要查看 Streamlit 应用的最终结构，执行以下 `tree` 命令：
- en: '[PRE11]'
  id: totrans-159
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Congratulations, you’ve created a data app using Streamlit that calls the SportsWorldCentral
    API and combines it with NFL data from the nfl_data_py library.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 恭喜，你已经创建了一个使用 Streamlit 调用 SportsWorldCentral API 并将其与 nfl_data_py 库中的 NFL 数据结合的数据应用。
- en: Deploying Your Streamlit App
  id: totrans-161
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 部署你的 Streamlit 应用
- en: If you are going to show off your data science apps, you need to have them on
    the web. Streamlit Community Cloud is a free hosting option that allows you to
    deploy your app from your GitHub repository. One downside is that the app does
    not run continually—it periodically goes to sleep and the user has to wake it
    up. To deploy to Streamlit Community Cloud, follow the [instructions from the
    Streamlit documentation](https://oreil.ly/rJgTG).
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你打算展示你的数据科学应用，你需要将它们放在网上。Streamlit Community Cloud 是一个免费托管选项，允许你从你的 GitHub
    仓库部署你的应用。一个缺点是应用不会持续运行——它定期进入休眠状态，用户需要唤醒它。要将应用部署到 Streamlit Community Cloud，请遵循
    [Streamlit 文档中的说明](https://oreil.ly/rJgTG)。
- en: In addition to these two hosts, Streamlit links to other [deployment tutorials](https://oreil.ly/ZQXl4)
    that you can follow. For the most part, these charge for hosting.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 除了这两个主机外，Streamlit 还链接到其他 [部署教程](https://oreil.ly/ZQXl4)，你可以遵循这些教程。大部分情况下，这些需要付费托管。
- en: Completing Your Part II Portfolio Project
  id: totrans-164
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 完成你的第二部分项目
- en: You have reached the end of Part II, congratulations! As you did with [Part I](part01.html#part_1),
    you will perform some housekeeping to get the portfolio project cleaned up and
    ready to share. You’ll move the code out of the chapter folders into functional
    folders.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 你已经完成了第二部分，恭喜！就像你在 [第一部分](part01.html#part_1) 所做的那样，你将进行一些维护工作，以便清理和准备项目以便分享。你将把代码从章节文件夹移动到功能文件夹中。
- en: Before you make these changes, you’ll save a copy of your files to a separate
    GitHub branch, named *learning-branch*, so that the files are still available
    if you want to continue working through the code.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 在进行这些更改之前，你将把你的文件复制到一个名为 *learning-branch* 的单独 GitHub 分支中，这样如果想要继续通过代码工作，文件仍然可用。
- en: 'Create the new branch from the command line as follows:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下命令从命令行创建新分支：
- en: '[PRE12]'
  id: totrans-168
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '[![1](assets/1.png)](#co_using_apis_in_streamlit_data_apps_CO6-1)'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: '[![1](assets/1.png)](#co_using_apis_in_streamlit_data_apps_CO6-1)'
- en: Create a new branch named *learning-branch* locally based on the *main* branch.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 在 *main* 分支的基础上在本地创建一个名为 *learning-branch* 的新分支。
- en: '[![2](assets/2.png)](#co_using_apis_in_streamlit_data_apps_CO6-2)'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: '[![2](assets/2.png)](#co_using_apis_in_streamlit_data_apps_CO6-2)'
- en: Push this new branch to your remote repository on GitHub.com.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 将这个新分支推送到你的 GitHub.com 远程仓库。
- en: 'Next, you will make some changes to the directory structure. Enter these commands:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，你将对目录结构进行一些更改。输入以下命令：
- en: '[PRE13]'
  id: totrans-174
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: '[![1](assets/1.png)](#co_using_apis_in_streamlit_data_apps_CO7-1)'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: '[![1](assets/1.png)](#co_using_apis_in_streamlit_data_apps_CO7-1)'
- en: Switch your Codespace back to the *main* branch of your repository.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 将你的 Codespace 切换回你的仓库的 *main* 分支。
- en: '[![2](assets/2.png)](#co_using_apis_in_streamlit_data_apps_CO7-2)'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: '![2](assets/2.png)(#co_using_apis_in_streamlit_data_apps_CO7-2)'
- en: Make a new directory for the files from Chapter 10.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 为第 10 章的文件创建一个新的目录。
- en: '[![3](assets/3.png)](#co_using_apis_in_streamlit_data_apps_CO7-3)'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: '![3](assets/3.png)(#co_using_apis_in_streamlit_data_apps_CO7-3)'
- en: Move Chapter 10’s *airflow* files to the new folder.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 将第 10 章的 *airflow* 文件移动到新文件夹。
- en: '[![4](assets/4.png)](#co_using_apis_in_streamlit_data_apps_CO7-4)'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: '![4](assets/4.png)(#co_using_apis_in_streamlit_data_apps_CO7-4)'
- en: Move Chapter 11’s *streamlit* folder to the root directory.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 将第 11 章的 *streamlit* 文件夹移动到根目录。
- en: '[![5](assets/5.png)](#co_using_apis_in_streamlit_data_apps_CO7-5)'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: '![5](assets/5.png)(#co_using_apis_in_streamlit_data_apps_CO7-5)'
- en: Remove all the subdirectories and their files.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 删除所有子目录及其文件。
- en: 'To see the directory structure of the completed project, run the following
    command:'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 要查看已完成项目的目录结构，请运行以下命令：
- en: '[PRE14]'
  id: totrans-186
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Update the *README.md* file with the following at a minimum, then add your
    own thoughts about what you’ve learned in your project and how you’ve customized
    it:'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 至少更新 *README.md* 文件中的以下内容，然后添加你对自己在项目中学习到的内容以及如何定制项目的个人思考：
- en: '[PRE15]'
  id: totrans-188
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Now commit these changes to GitHub, and your Part II portfolio project is ready
    to share with the world. Congratulations on completing your Part II capstone!
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，将这些更改提交到 GitHub，你的第二部分项目组合就可以与世界分享了。恭喜你完成第二部分的项目！
- en: Additional Resources
  id: totrans-190
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 其他资源
- en: If you’d like to learn more about the components of Streamlit, the [Streamlit
    documentation](https://docs.streamlit.io) is well written and easy to use.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想了解更多关于 Streamlit 组件的信息，[Streamlit 文档](https://docs.streamlit.io) 编写得很好，易于使用。
- en: Tyler Richards’ *Streamlit for Data Science, 2nd Edition* (Packt Publishing,
    2023), is a thorough reference for using Streamlit in data science applications.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: Tyler Richards 的 *Streamlit for Data Science, 2nd Edition*（Packt Publishing，2023）是使用
    Streamlit 在数据科学应用中的全面参考。
- en: For a quick reference on Streamlit commands, view the official [Streamlit Cheat
    Sheet](https://oreil.ly/RirMd).
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 要快速参考 Streamlit 命令，请查看官方 [Streamlit 快速参考](https://oreil.ly/RirMd)。
- en: Summary
  id: totrans-194
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, you built an interactive data app with Streamlit. You consumed
    data from your SportsWorldCentral API and displayed that data in your app. Then,
    you combined it with NFL data from a Python library and created a chart with the
    data.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你使用 Streamlit 构建了一个交互式数据应用。你从 SportsWorldCentral API 消费数据，并在你的应用中显示这些数据。然后，你将其与来自
    Python 库的 NFL 数据结合，创建了一个图表。
- en: In [Chapter 12](ch12.html#chapter_12), you will start learning how to use APIs
    with artificial intelligence.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 在 [第 12 章](ch12.html#chapter_12) 中，你将开始学习如何使用人工智能与 API 交互。
