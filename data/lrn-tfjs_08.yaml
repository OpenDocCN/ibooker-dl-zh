- en: Chapter 7\. Model-Making Resources
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第7章。模型制作资源
- en: “By seeking and blundering we learn.”
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: “通过寻找和失误我们学习。”
- en: ''
  id: totrans-2
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: —Johann Wolfgang von Goethe
  id: totrans-3
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: —约翰·沃尔夫冈·冯·歌德
- en: You’re not limited to the models from TensorFlow Hub. Every day there are new
    and exciting models being tweeted, published, and highlighted in the community
    spotlight. These models and ideas are shared outside the Google-approved hubs,
    and sometimes they are even outside the realm of TensorFlow.js.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 你不仅限于来自TensorFlow Hub的模型。每天都有新的令人兴奋的模型被推文、发表和在社区中受到关注。这些模型和想法在谷歌认可的中心之外分享，有时甚至超出了TensorFlow.js的范围。
- en: You’re starting to advance beyond the garden walls and work with models and
    data in the wild. This chapter is specifically geared toward arming you with new
    ways to make models from existing models, as well as charge you with the challenges
    of gathering and understanding data.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 你开始超越园墙，与野外的模型和数据一起工作。这一章专门旨在为你提供制作现有模型的新方法，并让你面对收集和理解数据的挑战。
- en: 'We will:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将：
- en: Introduce model conversion
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 介绍模型转换
- en: Introduce Teachable Machine
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 介绍 Teachable Machine
- en: Train a computer vision model
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 训练一个计算机视觉模型
- en: Review where training data comes from
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 回顾训练数据的来源
- en: Cover some key concepts of training
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 涵盖一些关键的训练概念
- en: When you finish this chapter, you’ll be armed with a few ways of making a model
    and a better understanding of the process of using data to make a machine learning
    solution.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 当你完成这一章时，你将掌握几种制作模型的方法，并更好地理解使用数据制作机器学习解决方案的过程。
- en: Out-of-Network Model Shopping
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 网络外模型购物
- en: TensorFlow.js hasn’t been around for long. Consequently, the number of models
    available is limited, or at least there are fewer than other frameworks. That
    doesn’t mean you’re out of luck. You can often convert models that were trained
    on other frameworks to TensorFlow.js. Converting existing models to make new models
    that work in a new environment is a great way to find recently developed resources
    and create exciting and contemporary models.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: TensorFlow.js并没有存在很长时间。因此，可用的模型数量有限，或者至少比其他框架少。这并不意味着你没有机会。你通常可以将在其他框架上训练过的模型转换为TensorFlow.js。将现有模型转换为在新环境中工作的新模型是一种发现最近开发的资源并创建令人兴奋和现代的模型的好方法。
- en: Model Zoos
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 模型动物园
- en: One somewhat endearing term that has emerged from the machine learning world
    is that a collection of models is sometimes called a *zoo*. These model zoos are
    a treasure trove of models that do a wide variety of tasks for a given framework,
    much like TensorFlow Hub.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 从机器学习世界中出现的一个有点可爱的术语是，有时将一组模型称为*动物园*。这些模型动物园是各种给定框架的任务的模型宝库，就像TensorFlow Hub一样。
- en: The model zoos are a fantastic place to find unique models that could inspire
    or fit your needs. Zoos often link you to published works that explain the choices
    that were made for both the model architecture and the data that was used to create
    them.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 模型动物园是一个绝佳的地方，可以找到独特的模型，这些模型可能会激发或满足你的需求。动物园经常链接到已发表的作品，解释了为模型架构和用于创建它们的数据所做的选择。
- en: The real benefit comes from the principle that once you’ve learned how to convert
    one of these models to TensorFlow.js, you could likely convert a lot of them.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 真正的好处来自于这样一个原则，一旦你学会了如何将这些模型转换为TensorFlow.js，你可能会转换很多模型。
- en: It’s worth taking a moment to review converting models so you can comprehend
    how accessible each model zoo or published model might be to TensorFlow.js.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 值得花一点时间回顾转换模型，这样你就能理解每个模型动物园或已发表模型对TensorFlow.js可能有多容易访问。
- en: Converting Models
  id: totrans-20
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 转换模型
- en: 'Lots of Python-programmed TensorFlow models are saved in a format called Keras
    HDF5\. HDF5 stands for Hierarchical Data Format v5, but is most commonly referred
    to as Keras or merely an h5 file. This file format is portable as one file with
    an h5 extension. The Keras file format has lots of data inside:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 许多用Python编程的TensorFlow模型以一种称为Keras HDF5的格式保存。HDF5代表分层数据格式v5，但通常被称为Keras或仅为h5文件。这种文件格式是一个带有h5扩展名的文件。Keras文件格式中包含大量数据：
- en: An architecture that specifies the layers of the model
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 指定模型层的架构
- en: A set of weight values, analogous to the bin files
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一组权重值，类似于bin文件
- en: An optimizer and the loss metric for the model
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 模型的优化器和损失指标
- en: This is one of the more popular model formats, and more importantly, they are
    easy to convert to TensorFlow.js even though they were trained in Python.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 这是更受欢迎的模型格式之一，更重要的是，即使它们是用Python训练的，它们也很容易转换为TensorFlow.js。
- en: Note
  id: totrans-26
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: With the knowledge of being able to convert TensorFlow Keras models, it means
    that any TensorFlow tutorial that you find can be read as a tutorial where the
    final product can likely be used in TensorFlow.js.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 有了能够转换TensorFlow Keras模型的知识，这意味着你找到的任何TensorFlow教程都可以作为一个教程来阅读，最终产品很可能可以在TensorFlow.js中使用。
- en: Running conversion commands
  id: totrans-28
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 运行转换命令
- en: To convert from h5 to TensorFlow.js *model.json* and bin files, you’ll need
    [`tfjs-converter`](https://oreil.ly/g46CE). The `tfjs-converter` can also convert
    TensorFlow model types other than just HDF5, so it’s a great tool for handling
    any TensorFlow to TensorFlow.js format.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 要从h5转换为TensorFlow.js *model.json*和bin文件，你需要[`tfjs-converter`](https://oreil.ly/g46CE)。`tfjs-converter`还可以转换除HDF5之外的其他TensorFlow模型类型，因此它是处理任何TensorFlow到TensorFlow.js格式的绝佳工具。
- en: The converter requires that your computer is set up with Python. Install the
    converter with `pip`. The `pip` command is the package installer for Python, similar
    to `npm` in JavaScript. There are multitudes of tutorials on installing Python
    and `pip` if your computer is not ready. You can run `tfjs-converter` once you
    have `pip` and Python installed.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 转换器要求你的计算机已设置Python。使用`pip`安装转换器。`pip`命令是Python的软件包安装程序，类似于JavaScript中的`npm`。如果你的计算机还没有准备好，有大量关于安装Python和`pip`的教程。安装了`pip`和Python后，你可以运行`tfjs-converter`。
- en: 'This is the install command for the converter:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 这是转换器的安装命令：
- en: '[PRE0]'
  id: totrans-32
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'This installs two things: a no-nonsense converter that you can use in automation
    (`tensorflowjs_converter`) and a walk-through converter that you can run by typing
    **`tensorflowjs_wizard`**. For our purposes, I suggest using the wizard interface
    for conversion so you can take advantage of new capabilities as they become available.'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 这将安装两个东西：一个无废话的转换器，您可以在自动化中使用（`tensorflowjs_converter`），以及一个通过键入**`tensorflowjs_wizard`**来运行的向导转换器。对于我们的目的，我建议使用向导界面进行转换，这样您可以利用新功能。
- en: You run the wizard by calling your newly installed `tensorflowjs_wizard` command
    from the command line, and you’ll be prompted with questions like you see in [Figure 7-1](#tfjs_convert_wizard).
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过在命令行中调用您新安装的`tensorflowjs_wizard`命令来运行向导，然后您将被提示类似于您在[图7-1](#tfjs_convert_wizard)中看到的问题。
- en: '![Example conversion wizard](assets/ltjs_0701.png)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
  zh: '![示例转换向导](assets/ltjs_0701.png)'
- en: Figure 7-1\. The wizard starts asking questions
  id: totrans-36
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图7-1. 向导开始询问问题
- en: 'This wizard will ask you for your input model format and your desired output
    model format. It will also ask quite a few questions depending on your answers.
    While the wizard will continue to be updated, here are some concepts you should
    keep in mind while selecting your desired settings:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 这个向导将询问您的输入模型格式和所需的输出模型格式。根据您的答案，它还会询问一些问题。虽然向导将继续更新，但在选择所需设置时，这里有一些概念您应该牢记：
- en: When choosing between Graph/Layers models
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 在图/层模型之间进行选择
- en: Remember, Graph models are faster but lack some of the introspective and customization
    properties that Layers models provide.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，图模型更快，但缺少一些内省和自定义属性，这些属性由层模型提供。
- en: Compression (via quantization)
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 压缩（通过量化）
- en: This moves your model from storing 32-bit accuracy weights down to 16- or even
    8-bit accuracy weight values. Using fewer bits means your model is substantially
    smaller in a possible sacrifice for accuracy. You should retest your model after
    quantization. Most of the time, this compression is worth it for client-side models.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 这将使您的模型从存储32位精度权重降至16位甚至8位精度权重值。使用更少的位数意味着您的模型在可能牺牲精度的情况下更小。量化后，您应该重新测试您的模型。大多数情况下，这种压缩对于客户端模型是值得的。
- en: Shard size
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 分片大小
- en: The suggested shard size is to optimize your model for client-side browser caching.
    This should stay the recommended size unless you’re not using the model in the
    client browser.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 建议的分片大小是为了优化您的模型以用于客户端浏览器缓存。除非您不在客户端浏览器中使用该模型，否则应保持推荐的大小。
- en: Note
  id: totrans-44
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: The quantization affects the model size on disk only. This provides significant
    network transfer benefits for websites, but when the model is loaded into RAM,
    the values are returned to 32-bit variables in the current TensorFlow.js.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 量化仅影响磁盘上的模型大小。这为网站提供了显著的网络传输优势，但当模型加载到RAM中时，值将返回到当前TensorFlow.js中的32位变量。
- en: Features continue to show up in the wizard interface. If a new feature shows
    up that confuses you, keep in mind documentation for converting models will be
    available in the [tfjs-converter README source code](https://oreil.ly/ldAPf).
    Your experience will be similar to [Figure 7-2](#tfjs_convert).
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 功能将继续出现在向导界面中。如果出现了一个让您困惑的新功能，请记住，转换模型的文档将在[tfjs-converter README源代码](https://oreil.ly/ldAPf)中提供。您的体验将类似于[图7-2](#tfjs_convert)。
- en: '![Example conversion](assets/ltjs_0702.png)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![示例转换](assets/ltjs_0702.png)'
- en: Figure 7-2\. An example wizard walk-through on Windows
  id: totrans-48
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图7-2. Windows上的示例向导演练
- en: The resulting folder contains a converted TensorFlow.js model, ready for use.
    The h5 file is now a *model.json* and the cachable bin files in chunks. You can
    see the resulting conversion in [Figure 7-3](#resulting_conversion).
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 生成的文件夹包含一个转换后的TensorFlow.js模型，准备就绪。h5文件现在是*model.json*，而可缓存的bin文件以块形式存在。您可以在[图7-3](#resulting_conversion)中看到转换结果。
- en: '![Example conversion](assets/ltjs_0703.png)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![示例转换](assets/ltjs_0703.png)'
- en: Figure 7-3\. The TensorFlow.js model result
  id: totrans-51
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图7-3. TensorFlow.js模型结果
- en: Intermediate models
  id: totrans-52
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 中间模型
- en: If you find a model you’d like to convert to TensorFlow.js, you can now check
    if there’s a converter to move that model to the format Keras HDF5, and then you
    know you can convert it to TensorFlow.js. It’s worth noting that there’s a significant
    effort to standardize models converting to and from a format called [Open Neural
    Network Exchange (ONNX)](https://onnx.ai). Currently, Microsoft and many other
    partners are working on the proper conversion of models in and out of ONNX format,
    which will allow for a framework-independent model format.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您找到一个想要转换为TensorFlow.js的模型，现在可以检查是否有转换器将该模型移动到Keras HDF5格式，然后您就可以将其转换为TensorFlow.js。值得注意的是，目前正在大力努力将模型转换为和从一个称为[开放神经网络交换（ONNX）](https://onnx.ai)的格式标准化。目前，微软和许多其他合作伙伴正在努力正确地转换模型进出ONNX格式，这将允许一个独立于框架的模型格式。
- en: If you find a published model that you’d like to utilize in TensorFlow.js, but
    it wasn’t trained in TensorFlow, don’t give up hope. You should check if there’s
    ONNX support for that model type.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您找到了一个已发布的模型，想要在TensorFlow.js中使用，但它并不是在TensorFlow中训练的，不要放弃希望。您应该检查该模型类型是否有ONNX支持。
- en: Some models do not have a direct conversion to TensorFlow, and because of that,
    you might need a more circuitous route through other conversion services. Outside
    of TensorFlow, the other popular framework library most machine learning enthusiasts
    use is called PyTorch. While ONNX is getting closer every day, currently the best
    way to convert from PyTorch to TensorFlow.js is to convert through a chain of
    tools, as shown in [Figure 7-4](#conversion_path).
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 有些模型无法直接转换为TensorFlow，因此您可能需要通过其他转换服务进行更多的迂回路线。除了TensorFlow之外，另一个受欢迎的框架库是PyTorch，大多数机器学习爱好者使用。虽然ONNX每天都在变得更接近，但目前从PyTorch转换为TensorFlow.js的最佳方法是通过一系列工具进行转换，如[图7-4](#conversion_path)所示。
- en: '![The flow diagram for converting models](assets/ltjs_0704.png)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![转换模型的流程图](assets/ltjs_0704.png)'
- en: Figure 7-4\. Converting models
  id: totrans-57
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图7-4. 转换模型
- en: While it might seem like a good bit of work to do a model conversion, converting
    models from existing formats to TensorFlow.js can save you days or even weeks
    of re-creating and retraining a model on the published data.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然对模型进行转换可能看起来是一项艰巨的工作，但将现有格式的模型转换为TensorFlow.js可以节省您几天甚至几周的时间，而不必重新创建和重新训练模型以适应已发布的数据。
- en: Your First Customized Model
  id: totrans-59
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 您的第一个定制模型
- en: If downloading existing models was all you needed to do, you’d be done. But
    we can’t all wait for Google to release models that classify what we need. You
    might have an idea that requires an AI to have an intimate knowledge of pastries.
    Even Google’s Inception v3 might not be strong enough if you need to know the
    difference between a variety of items in a single domain.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 如果只需下载现有模型，那么您就完成了。但我们不能等待谷歌发布能够分类我们所需内容的模型。您可能有一个需要AI对糕点有深入了解的想法。即使是谷歌的Inception
    v3，如果您需要区分单个领域中各种物品之间的区别，可能也不够强大。
- en: Fortunately for you, there’s a trick that allows us to ride the coattails of
    existing models. Some models can be slightly adjusted so they classify new things!
    Rather than retraining the entire model, we train the last few layers to look
    for different features. This allows us to take an advanced model like Inception
    or MobileNet and turn it into a model that identifies things we want. As a bonus,
    this method allows us to retrain a model with a minuscule amount of data. This
    is called *transfer learning*, and it’s one of the most common methods for (re)training
    models on new classes.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 幸运的是，有一个技巧可以让我们利用现有模型的成果。一些模型可以稍作调整，以分类新事物！我们不需要重新训练整个模型，只需训练最后几层以寻找不同的特征。这使我们能够将像Inception或MobileNet这样的高级模型转变为识别我们想要的东西的模型。作为一个额外的好处，这种方法允许我们用极少量的数据重新训练模型。这被称为*迁移学习*，是在新类别上(重新)训练模型的最常见方法之一。
- en: We’ll cover the code for transfer learning in [Chapter 11](ch11.html#the_chapter_11),
    but there’s no reason you can’t experience it right now. Google has an entire
    transfer learning UI built for people to try training models.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在[第11章](ch11.html#the_chapter_11)中介绍迁移学习的代码，但现在您也可以体验它。谷歌为人们尝试训练模型构建了一个完整的迁移学习UI。
- en: Meet Teachable Machine
  id: totrans-63
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 见见Teachable Machine
- en: To start things off, you’ll use a tool provided by Google called Teachable Machine.
    This tool is a simple website that is powered by TensorFlow.js, and it lets you
    upload images, upload audio, or even use your webcam for training, capturing data,
    and creating TensorFlow.js models. The models are trained directly in your browser
    and then hosted for you to try your code immediately. Your resulting model is
    a transfer learning version of MobileNet, PoseNet, or some other practical model
    that fits your needs. Because it uses transfer learning, you don’t need much data
    at all.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，您将使用谷歌提供的一个名为Teachable Machine的工具。这个工具是由TensorFlow.js提供支持的简单网站，它允许您上传图像、上传音频，甚至使用网络摄像头进行训练、捕获数据和创建TensorFlow.js模型。这些模型直接在您的浏览器中进行训练，然后为您托管，以便您立即尝试您的代码。您得到的模型是MobileNet、PoseNet或其他实用模型的迁移学习版本，适合您的需求。由于它使用迁移学习，您根本不需要太多数据。
- en: Warning
  id: totrans-65
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 警告
- en: Models created with a small amount of data will appear to work wonders but have
    a significant bias. That means they will work well with the conditions they were
    trained in, but they will error with background, lighting, or positional changes.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 使用少量数据创建的模型似乎效果神奇，但存在显著的偏见。这意味着它们在训练时表现良好，但在背景、光线或位置变化时会出错。
- en: The website for training a model is located at [*teachablemachine.withgoogle.com*](https://oreil.ly/CAy4H).
    When you access the site, you can get started with various projects, like audio,
    image, and even body poses. While you can and should experiment with each of these,
    this book will cover the Image Project option. This is the first option shown
    in [Figure 7-5](#teachable_image).
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 训练模型的网站位于[*teachablemachine.withgoogle.com*](https://oreil.ly/CAy4H)。访问该网站后，您可以开始各种项目，如音频、图像，甚至身体姿势。虽然您可以并且应该尝试每一个，但本书将介绍图像项目选项。这是[图7-5](#teachable_image)中显示的第一个选项。
- en: '![Teachable Machine UI](assets/ltjs_0705.png)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
  zh: '![Teachable Machine UI](assets/ltjs_0705.png)'
- en: Figure 7-5\. Awesome Teachable Machine options
  id: totrans-69
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图7-5\. 令人惊叹的Teachable Machine选项
- en: On the resulting page, you’re given the option to either upload or use your
    webcam to collect sample images for each class.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 在生成的页面上，您可以选择上传或使用网络摄像头收集每个类别的样本图像。
- en: 'Here are a few ideas you can use to create your first classifier:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一些您可以使用的想法，用于创建您的第一个分类器：
- en: Thumbs up or thumbs down?
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 竖起大拇指还是竖起食指？
- en: Am I drinking water?
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我在喝水吗？
- en: Which cat is this?
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这是哪只猫？
- en: Secret hand signal to unlock something?
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 秘密手势解锁某物？
- en: Book or banana!?
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 书还是香蕉！？
- en: Use your creativity! Whatever model you create could be something easy to show
    off to friends and social media or something that could be turned into a web page
    to help you. For instance, the “Am I drinking water?” classifier could be hooked
    up to a timer for your self-hydration project. You can come up with all kinds
    of fun projects as long as you train the model with a few samples.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 发挥您的创造力！您创建的任何模型都可以轻松展示给朋友和社交媒体，或者可以转变为一个帮助您的网页。例如，“我在喝水吗？”分类器可以连接到一个计时器，用于您的自我补水项目。只要您用一些样本训练模型，您可以想出各种有趣的项目。
- en: Personally, I’ll be training a “Is Daddy working?” classifier. Many of you might
    have experienced difficulty with family in a remote work environment. If I’m sitting
    at my desk and the door is closed, you’d think that would tell people I’m working,
    right? But if the door is open, “come on in!” I’ll ask Teachable Machine to use
    my webcam to classify what I look like when I’m working and what I look like when
    I’m not working.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 就我个人而言，我将训练一个“爸爸在工作吗？”分类器。你们中的许多人可能在远程工作环境中遇到了家庭问题。如果我坐在桌子前，门是关着的，你会认为这会告诉别人我在工作，对吧？但如果门是开着的，“请进！”我会让Teachable
    Machine使用我的网络摄像头来分类我在工作时的样子和我不工作时的样子。
- en: The cool part is that since the detector will be tied to a website, “Is Daddy
    working?” could be expanded to do all kinds of awesome things. It could send text
    messages, turn on an “unavailable” light, or even tell my Amazon Echo devices
    to answer “yes” when asked if I am working. There’s a whole world of opportunity
    as long as I can make a quick AI image classifier that is dependable.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 很酷的一点是，由于检测器将与网站绑定，“爸爸在工作吗？”可以扩展到做各种令人惊叹的事情。它可以发送短信，打开“不可用”灯，甚至告诉我的亚马逊Echo设备在被问及我是否在工作时回答“是”。只要我能制作一个快速可靠的AI图像分类器，就有无限的机会。
- en: Training from scratch is a scalable solution, but the task at hand is to train
    my presence in my office, and for that, we’ll use Teachable Machine.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 从头开始训练是一个可扩展的解决方案，但目前的任务是训练我在办公室的存在，为此我们将使用Teachable Machine。
- en: Use Teachable Machine
  id: totrans-81
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用Teachable Machine
- en: Let’s take a quick tour through the UI for creating a model with Teachable Machine.
    The UI is set up like a network graph where information is filled in top-down
    from left to right. Utilizing the site is easy. Follow along as we review [Figure 7-6](#teachable_tour).
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们快速浏览一下使用Teachable Machine创建模型的用户界面。用户界面设置为网络图，信息从左到右自上而下填写。使用该网站很容易。跟随我们一起查看[图7-6](#teachable_tour)。
- en: '![Teachable Machine UI Tour](assets/ltjs_0706.png)'
  id: totrans-83
  prefs: []
  type: TYPE_IMG
  zh: '![Teachable Machine用户界面导览](assets/ltjs_0706.png)'
- en: Figure 7-6\. Image project UI tour
  id: totrans-84
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图7-6。图像项目用户界面导览
- en: This upper header is meant to be small and stay out of the way on larger monitors.
    From the header, you can use Google Drive to manage your data and your results,
    so you can pick up where you left off or share the training of your model with
    others.
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这个上部标题应该很小，在较大的监视器上不会妨碍。从标题中，您可以使用Google Drive来管理您的数据和结果，这样您就可以从上次离开的地方继续或与他人分享您的模型训练。
- en: The top item is called “Class 1” and indicates one of the classes for your classification.
    Of course, you can rename it! I’ve renamed mine to “Working.” Inside this workflow
    card, you can provide access to your webcam or upload image files that would fit
    this classification.
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 顶部项目称为“类别1”，表示您分类的一个类别。当然，您可以重命名它！我已将我的重命名为“工作”。在这个工作流卡中，您可以提供访问您的网络摄像头或上传符合此分类的图像文件。
- en: This second workflow card is any second class. This could be “Free” or “Not
    Working” in the case of my example I’m trying to build. Here you provide the data
    that fits your secondary classification.
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这个第二个工作流卡是任何第二类。在我的示例中，这可能是“免费”或“不工作”。在这里，您提供适合您的次要分类的数据。
- en: All classes feed into the training workflow. When you have examples of what
    you want to build, you can click the Train Model button and actively train the
    model. We’ll dig deeper into what this is doing with the Advanced tab when we
    get to it.
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 所有类别都进入训练工作流程。当您有要构建的示例时，您可以点击“训练模型”按钮并积极训练模型。当我们到达高级选项卡时，我们将深入了解这是如何进行的。
- en: The Preview section immediately displays the model’s real-time classifications
    in action.
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 预览部分立即显示模型实时分类的结果。
- en: Gathering Data and Training
  id: totrans-90
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 收集数据和训练
- en: You can hold down the webcam’s “Hold to Record” button and instantly provide
    hundreds of images for example data. It’s crucial that you evaluate and include
    variation as much as possible in your dataset. For example, if you’re doing “Thumbs
    up or thumbs down,” it’s important that you move your hands around the screen,
    catch different angles, and put your hands in front of your face, shirt, and any
    other complex background.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以按住网络摄像头的“按住录制”按钮，立即提供数百张示例数据的图像。在您的数据集中尽可能评估和包含变化是至关重要的。例如，如果您正在做“竖起大拇指还是竖下大拇指”，重要的是您在屏幕周围移动手部，捕捉不同角度，并将手放在面部、衬衫和任何其他复杂背景前。
- en: For me, I adjusted my lighting, as sometimes I have a camera keylight, and sometimes
    I have backlights. Within a few seconds, I had hundreds of various conditions
    with my office door open and closed. I even did some photos where my door is closed
    but I’m not sitting at my desk.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 对我来说，我调整了我的照明，因为有时我有一个摄像头主灯，有时我有背光。几秒钟内，我有了数百种不同条件的办公室门开着和关着的照片。我甚至拍了一些照片，我的门是关着的，但我没有坐在桌子前。
- en: One of the great things about Teachable Machine is that it gives you the results
    quickly in your browser, so if the model needs more data, you can always come
    back and add more right away.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: Teachable Machine的一个很棒的地方是它可以在浏览器中快速给出结果，因此如果模型需要更多数据，您可以随时回来并立即添加更多数据。
- en: Once you have a few hundred photos, you can click the Train Model button, and
    you’ll see a “Training…” progress graph (see [Figure 7-7](#training_tm)).
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您有几百张照片，您可以点击“训练模型”按钮，您将看到一个“训练…”进度图（参见[图7-7](#training_tm)）。
- en: '![Training in action screenshot](assets/ltjs_0707.png)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
  zh: '![训练截图](assets/ltjs_0707.png)'
- en: Figure 7-7\. Teachable Machine active training
  id: totrans-96
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图7-7。Teachable Machine活动训练
- en: So what’s happening now? Succinctly put, Teachable Machine is using your images
    to perform transfer learning to retrain the MobileNet model. A random 85% of your
    data has been used to train the model, and the other 15% is reserved for testing
    the model’s performance.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 那么现在发生了什么？简而言之，Teachable Machine正在使用您的图像执行迁移学习来重新训练MobileNet模型。您的数据中随机选择了85%用于训练模型，另外15%用于测试模型的性能。
- en: Click the Advanced tab to view the details of this particular configuration.
    This will expose some of what are often called the *hyperparameters* for machine
    learning training (see [Figure 7-8](#advanced_training_card)). These hyperparameters
    are parameters tunable to the model training.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 点击高级选项卡查看此特定配置的详细信息。这将暴露出通常称为*超参数*的机器学习训练的一些内容（参见[图7-8](#advanced_training_card)）。这些超参数是可调整的模型训练参数。
- en: '![Tunable parameters to the training](assets/ltjs_0708.png)'
  id: totrans-99
  prefs: []
  type: TYPE_IMG
  zh: '![训练的可调参数](assets/ltjs_0708.png)'
- en: Figure 7-8\. Teachable Machine hyperparameters
  id: totrans-100
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图7-8。Teachable Machine超参数
- en: In here, you’ll see some new terminology. While it’s not critical for you to
    learn these terms now, you’ll need to learn them eventually, so we’ll go over
    them quickly. Each of these concepts will show up when you get into coding your
    own models in [Chapter 8](ch08.html#the_chapter_8).
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，您将看到一些新术语。虽然现在学习这些术语并不是必要的，但您最终需要学习它们，因此我们将快速介绍它们。当您开始编写自己的模型时，每个概念都会出现在[第8章](ch08.html#the_chapter_8)中。
- en: Epochs
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 纪元
- en: If you’re coming from coding, especially JavaScript coding, the epoch was January
    1, 1970\. That is *not* what epoch means in this domain. An epoch in machine learning
    training is one full pass through the training data. At the end of an epoch, the
    AI has seen all the training data at least once. Fifty epochs means the model
    will have to see the data 50 times. A good analogy is flashcards. This number
    is how many times you’re going through the entire deck of flashcards with the
    model for it to learn.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您来自编码背景，尤其是JavaScript编码，那么纪元是1970年1月1日。这 *不是* 在这个领域中纪元的含义。在机器学习训练中，一个纪元是对训练数据的完整遍历。在一个纪元结束时，AI至少已经看到了所有的训练数据一次。五十个纪元意味着模型将不得不看到数据50次。一个很好的类比是单词卡。这个数字表示您与模型一起浏览整个单词卡组的次数，以便它学习。
- en: Batch size
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 批量大小
- en: The model is trained in batches that are loaded into memory. With a few hundred
    photos, you can easily handle all of the images in memory at the same time, but
    it’s nicer to batch in reasonable increments.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 模型是以加载到内存中的批次进行训练的。有了几百张照片，您可以轻松处理所有图像，但最好按合理的增量进行批处理。
- en: Learning rate
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 学习率
- en: The learning rate affects how much the machine learning model should adapt with
    each prediction. You might assume higher learning rates are always better, but
    you’d be wrong. Sometimes, especially when fine-tuning a transfer learning model,
    it’s about the details (as covered in [Chapter 11](ch11.html#the_chapter_11)).
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 学习率影响机器学习模型在每次预测时应该如何调整。您可能会认为更高的学习率总是更好，但您会错。有时，特别是在微调迁移学习模型时，关键在于细节（如[第11章](ch11.html#the_chapter_11)中所述）。
- en: There’s also a button at the bottom of the card with the text “Under the hood,”
    which will give you lots of detailed information on the progress of the trained
    model. Feel free to look at the reports. You’ll implement metrics like these later.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 卡片底部还有一个带有“Under the hood”文本的按钮，点击它将为您提供有关训练模型进度的详细信息。随时查看报告。您将在以后实施这些指标。
- en: Verifying the Model
  id: totrans-109
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 验证模型
- en: Once Teachable Machine is done, it immediately hooks the model up to your webcam
    and shows you what the model predicts. This is a great opportunity for you to
    test the results of the model.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦Teachable Machine完成，它会立即将模型连接到您的网络摄像头，并显示模型的预测结果。这是一个很好的机会让您测试模型的结果。
- en: For me, when I’m at my desk and my door is closed, the model predicted I was
    working. Hurray! I have a usable model ready to go. Both classes were performing
    impressively well, as illustrated in [Figure 7-9](#success_tm).
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 对我来说，当我坐在办公桌前，门是关着的时候，模型预测我正在工作。万岁！我有一个可用的模型准备好了。两个类的表现都非常出色，如[图7-9](#success_tm)所示。
- en: '![The preview section showing the model working](assets/ltjs_0709.png)'
  id: totrans-112
  prefs: []
  type: TYPE_IMG
  zh: '![显示模型工作的预览部分](assets/ltjs_0709.png)'
- en: Figure 7-9\. The model works
  id: totrans-113
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图7-9。模型运行
- en: Ideally, your training went just as well. Now it’s essential to retrieve the
    trained model so it can be implemented in your more extensive project. If you’d
    like to share your model with your friends, you can click the Export Model button
    in the preview, where you’re given a variety of options. The new modal window
    provides paths for applying your model in TensorFlow, TensorFlow Lite, and TensorFlow.js.
    There’s even an option for hosting your trained model for free, rather than downloading
    and hosting your model yourself. We get all these friendly options and some nifty
    copy-and-paste code for you to quickly implement these models. The export code
    screen should be similar to [Figure 7-10](#tm_code).
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 理想情况下，您的训练进展顺利。现在，检索训练好的模型是至关重要的，这样它就可以在您更广泛的项目中实施。如果您想与朋友分享您的模型，可以在预览中点击“导出模型”按钮，您将获得各种选项。新的模态窗口提供了在TensorFlow、TensorFlow
    Lite和TensorFlow.js中应用您的模型的路径。甚至还有一个选项可以免费托管您的训练模型，而不是自己下载和托管模型。我们提供了所有这些友好的选项以及一些巧妙的复制粘贴代码，让您快速实施这些模型。导出代码屏幕应该类似于[图7-10](#tm_code)。
- en: '![The Teachable Machine export dialogue.](assets/ltjs_0710.png)'
  id: totrans-115
  prefs: []
  type: TYPE_IMG
  zh: '![Teachable Machine导出对话框。](assets/ltjs_0710.png)'
- en: Figure 7-10\. Teachable Machine export options
  id: totrans-116
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图7-10。Teachable Machine导出选项
- en: When your model is downloaded or published, your data is not published with
    it. To save the dataset, you’ll have to save your project in Google Drive. Keep
    this in mind if you plan on advancing your model or growing your dataset over
    time. Identifying and handling edge cases is part of the data science process.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 当您的模型被下载或发布时，您的数据不会随之发布。要保存数据集，您需要将项目保存在Google Drive中。如果您计划随着时间推进模型或扩大数据集，请记住这一点。识别和处理边缘情况是数据科学过程的一部分。
- en: The code provided for free in the copy-and-paste section of Teachable Machine
    hides the nitty-gritty of webcams and tensors with an NPM package called [@teachablemachine/image](https://oreil.ly/kY7YJ).
    While this is great for people who don’t understand webcams and tensors, it’s
    pretty useless for a finalized product. Your advanced UI skills from [Chapter 6](ch06.html#the_chapter_6)
    make your creative potential far superior to the copy-and-paste code option.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 在Teachable Machine的复制粘贴部分提供的免费代码隐藏了名为[@teachablemachine/image](https://oreil.ly/kY7YJ)的NPM包中的网络摄像头和张量的细节。虽然这对于不了解网络摄像头和张量的人来说很好，但对于最终产品来说却毫无用处。您从[第6章](ch06.html#the_chapter_6)中获得的高级UI技能使您的创造潜力远远超过了复制粘贴代码选项。
- en: Tip
  id: totrans-119
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 提示
- en: Each Teachable Machine model will be different; the visual model you just trained
    is built on top of our old friend MobileNet classifier. So when you implement
    the model, resize the input to 224 x 224.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 每个Teachable Machine模型都是不同的；您刚刚训练的视觉模型是建立在我们的老朋友MobileNet分类器之上的。因此，当您实施模型时，将输入调整为224
    x 224。
- en: You’ve just trained your first model. However, we cut as many corners as we
    could. Training models with a UI is going to be a large part of machine learning,
    and it helps everyone new to machine learning to get a fantastic start. But a
    tensor wizard like yourself can train a much more dynamic model. You’re obviously
    looking to command your machines with explicit instructions like code. So let’s
    get started on training a model by writing some JavaScript.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 你刚刚训练了你的第一个模型。然而，我们尽可能地省略了很多步骤。使用用户界面训练模型将成为机器学习的一个重要部分，它可以帮助每个新手获得一个出色的开始。但像你这样的张量巫师可以训练一个更加动态的模型。你显然希望通过编写一些JavaScript命令你的机器。所以让我们开始通过编写一些JavaScript来训练一个模型。
- en: Machine Learning Gotchas
  id: totrans-122
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 机器学习陷阱
- en: When coding, there are a wide variety of issues any developer might have to
    face. Even as programming languages vary, there’s a core set of potholes that
    carries over to every infrastructure. Machine learning is no different. While
    there are issues that might be specific to any chosen genre and problem, it’s
    important to identify these early so you can spot some of the most common complications
    with data-driven algorithms.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 在编码时，任何开发人员可能会面临各种问题。尽管编程语言各不相同，但有一组核心的陷阱会延续到每个基础设施。机器学习也不例外。虽然可能会有特定于任何选择的类型和问题的问题，但早期识别这些问题很重要，这样你就可以发现数据驱动算法中最常见的一些复杂问题。
- en: 'We’ll quickly elaborate on a few concepts now, but each of these will be revisited
    when they apply to the work in the rest of this book:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在将快速阐述一些概念，但每个概念在本书的其余部分涉及到工作时都会重新讨论：
- en: Small amounts of data
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 少量数据
- en: Poor data
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 糟糕的数据
- en: Data bias
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据偏差
- en: Overfitting
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 过拟合
- en: Underfitting
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 欠拟合
- en: Let’s review these so we can look out for them in upcoming chapters.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们回顾一下这些，这样我们就可以在接下来的章节中留意它们。
- en: Small Amounts of Data
  id: totrans-131
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 少量数据
- en: I’ve had people come to me with an excellent idea for a machine learning solution,
    and they have three labeled samples. Few things in this world could benefit from
    such a small training set. When data is how you train an algorithm, you’ll need
    a fair amount of data. How much? There’s never an answer that fits every problem,
    but you should lean toward more data over less.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 有人给我提出了一个关于机器学习解决方案的绝妙想法，他们有三个标记样本。这个世界上很少有东西能从这么小的训练集中受益。当数据是你训练算法的方式时，你需要相当数量的数据。有多少？没有一个适用于每个问题的答案，但你应该倾向于更多的数据而不是更少。
- en: Poor Data
  id: totrans-133
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 糟糕的数据
- en: Some people have clean, situated, and organized lives, but in the real world,
    data doesn’t end up that way by accident. If your data has missing, mislabeled,
    or downright outrageous data, it can cause problems in your training. Lots of
    times, data needs to be scrubbed, and outliers need to be removed. Just getting
    the data ready is a big and critical step.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 有些人的生活干净、有序，但在现实世界中，数据不会无意中变得如此。如果你的数据缺失、标记错误，或者完全不合理，它可能会在训练中造成问题。很多时候，数据需要被清理，异常值需要被移除。准备好数据只是一个重要且关键的步骤。
- en: Data Bias
  id: totrans-135
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据偏差
- en: Your data can be clearly labeled, with every detail in the correct place, but
    it might be missing information that would make it work in a real-world case.
    In some cases, this can cause severe ethical issues, and in other cases, this
    can cause your model to perform poorly in various conditions. For instance, my
    “Is Daddy working?” model that I trained earlier ([Figure 7-9](#success_tm)) probably
    won’t work for other people’s office configurations because the data was only
    for my office.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 你的数据可能被清晰地标记，每个细节都在正确的位置，但它可能缺少使其在实际情况下工作的信息。在某些情况下，这可能会引起严重的道德问题，而在其他情况下，这可能会导致你的模型在各种条件下表现不佳。例如，我之前训练的“爸爸在工作吗？”模型（[图7-9](#success_tm)）可能不适用于其他人的办公室配置，因为数据只针对我的办公室。
- en: Overfitting
  id: totrans-137
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 过拟合
- en: Sometimes a model is trained to the point where it only works well on the training
    set data. In some cases, a more straightforward but lower-scoring accuracy would
    generalize better to fit new data points.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 有时模型被训练到只在训练集数据上表现良好。在某些情况下，一个更直接但得分较低的准确性可能更好地适应新数据点。
- en: See how this separation graph in [Figure 7-11](#overfitting) is overfitting
    the data? While it solves the given problem perfectly, it’s likely to be slower
    and fail as new points it’s never seen get added.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 看看这个分离图在[图7-11](#overfitting)中是如何过拟合数据的？虽然它完美地解决了给定的问题，但当添加新的从未见过的点时，它可能会变得更慢并失败。
- en: '![Overfitting Graph](assets/ltjs_0711.png)'
  id: totrans-140
  prefs: []
  type: TYPE_IMG
  zh: '![过拟合图](assets/ltjs_0711.png)'
- en: Figure 7-11\. Overfitting data
  id: totrans-141
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图7-11\. 过拟合数据
- en: Sometimes you’ll hear overfitting called *high variance*, which means the fluctuations
    you have in your training data cause the model to randomly fail on new data.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 有时你会听到过拟合被称为*高方差*，这意味着你在训练数据中的波动会导致模型在新数据上随机失败。
- en: If your goal is to have your model work on new, never-before-seen data, overfitting
    can be a real concern. Fortunately, we have the test and validation sets to help.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你的目标是让你的模型在新的、以前从未见过的数据上工作，过拟合可能是一个真正的问题。幸运的是，我们有测试和验证集来帮助。
- en: Underfitting
  id: totrans-144
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 欠拟合
- en: If your model wasn’t trained enough or it’s structured in a way that’s incapable
    of adapting to the data, the solution might fail or even completely diverge from
    any extrapolated or additional data. This is the opposite of overfitting, but
    in the same sense, it creates a poor model.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你的模型没有被充分训练，或者它的结构无法适应数据，解决方案可能会失败，甚至完全偏离任何外推或额外数据。这是过拟合的反面，但在同样的意义上，它会产生一个糟糕的模型。
- en: See how the separation graph in [Figure 7-12](#underfitting) underfits the subtle
    curve of the data?
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 看看[图7-12](#underfitting)中的分离图是如何欠拟合数据的？
- en: '![Underfitting Graph](assets/ltjs_0712.png)'
  id: totrans-147
  prefs: []
  type: TYPE_IMG
  zh: '![欠拟合图](assets/ltjs_0712.png)'
- en: Figure 7-12\. Underfitting data
  id: totrans-148
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图7-12\. 欠拟合数据
- en: When a model underfits, it is said that the model has *high bias* because of
    grand assumptions on data that are effectively wrong. While similar, do not confuse
    this term with *data bias*, covered earlier.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 当模型欠拟合时，就说模型具有*高偏差*，因为对数据的基本假设实际上是错误的。虽然类似，但不要将这个术语与之前讨论的*数据偏差*混淆。
- en: Datasets Shopping
  id: totrans-150
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据集购物
- en: Now you understand why having diverse data is essential. While the Teachable
    Machine “Is Daddy working?” model is useful for me, it’s far from diverse enough
    to be used with other offices. Happily, one of the most impressive aspects of
    the machine learning community is how generous everyone is with their hard-earned
    datasets.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你明白为什么拥有多样化的数据是至关重要的。虽然Teachable Machine的“爸爸在工作吗？”模型对我很有用，但远远不够多样化，无法用于其他办公室。令人高兴的是，机器学习社区最令人印象深刻的一点是大家都愿意分享他们辛苦获得的数据集。
- en: Before collecting your data, it’s helpful to research if others have published
    usable and labeled data. It’s also beneficial to see how expert machine learning
    datasets are organized.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 在收集数据之前，研究一下其他人是否已经发布了可用的标记数据是很有帮助的。了解专家机器学习数据集是如何组织的也是有益的。
- en: 'Datasets are like JavaScript libraries: they can seem quite unique at first,
    but after a while, you start to see the same ones referenced time and again. Universities
    around the world have excellent [catalogs of useful datasets](https://oreil.ly/lbvkW),
    and even [Google has a dataset-hosting service](https://oreil.ly/BnddO) similar
    to TensorFlow Hub, but none comes close to the dataset residence known as Kaggle.'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 数据集就像JavaScript库：一开始可能看起来很独特，但过一段时间后，你会发现同样的数据集一再被引用。世界各地的大学都有出色的[有用数据集目录](https://oreil.ly/lbvkW)，甚至[谷歌也有一个类似TensorFlow
    Hub的数据集托管服务](https://oreil.ly/BnddO)，但没有一个能与Kaggle这个数据集居所相提并论。
- en: '[Kaggle](https://www.kaggle.com) has a significant collection of datasets for
    all types of data. From bird songs to IMDb reviews, you can train all kinds of
    models with a wide variety of data from Kaggle. [Figure 7-13](#kaggle) shows a
    friendly and searchable interface for datasets.'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: '[Kaggle](https://www.kaggle.com)拥有大量各种类型的数据集。从鸟鸣到IMDb评论，你可以使用Kaggle提供的各种数据训练各种模型。[图7-13](#kaggle)展示了一个友好且可搜索的数据集界面。'
- en: '![Your chapter challenge](assets/ltjs_0713.png)'
  id: totrans-155
  prefs: []
  type: TYPE_IMG
  zh: '![你的章节挑战](assets/ltjs_0713.png)'
- en: Figure 7-13\. Kaggle provides more than 60,000 free datasets
  id: totrans-156
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图7-13。Kaggle提供了超过60,000个免费数据集
- en: Whether you’re researching data for training your model or you’re looking for
    ideas of what kind of crazy new thing you can make with machine learning, Kaggle
    has you covered.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 无论你是在研究用于训练模型的数据，还是在寻找使用机器学习制作新奇事物的想法，Kaggle都能满足你的需求。
- en: Note
  id: totrans-158
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: Kaggle does more than just provide datasets. It’s also a community for sharing,
    competing, and winning prizes.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: Kaggle不仅提供数据集，还是一个分享、竞争和赢取奖品的社区。
- en: 'If you’re not interested in the extracurricular aspect of Kaggle, you can generally
    use Google’s dataset search site and most likely find your Kaggle datasets and
    others: [*https://datasetsearch.research.google.com*](https://datasetsearch.research.google.com).'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你对Kaggle的课外活动不感兴趣，你通常可以使用谷歌的数据集搜索网站，很可能会找到你的Kaggle数据集和其他数据集：[*https://datasetsearch.research.google.com*](https://datasetsearch.research.google.com)。
- en: The Popular Datasets
  id: totrans-161
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 流行数据集
- en: 'While the list of datasets grows every day, for a long time, there weren’t
    many to choose from. Published datasets were rare, so a few became the fundamentals
    of training examples. Other datasets were published as the first of their kind
    and unwittingly became the brand ambassador for a type of machine learning. Like
    secret passphrases, these popular datasets get used casually in talks and documentation.
    It’s good to know some of the most common and famous:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然数据集的列表每天都在增长，但很长一段时间内可供选择的数据集并不多。已发布的数据集很少，因此一些数据集成为训练示例的基础。其他数据集作为其类别的第一个发布，并不知不觉地成为某种机器学习的品牌大使。就像秘密口令一样，这些流行数据集在演讲和文档中被随意使用。了解一些最常见和著名的数据集是很有益的：
- en: '[ImageNet](https://oreil.ly/Et6TH)'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: '[ImageNet](https://oreil.ly/Et6TH)'
- en: ImageNet was used to train some of the most popular computer vision models.
    This large dataset of images is consistently used by academic researchers to benchmark
    models.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: ImageNet被用来训练一些最流行的计算机视觉模型。这个大型图像数据集一直被学术研究人员用来评估模型。
- en: '[MNIST](https://oreil.ly/Rb9Ru)'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: '[MNIST](https://oreil.ly/Rb9Ru)'
- en: This is a collection of 28 x 28 grayscale handwritten digits to train a model
    on reading numbers. It is often the “Hello World” of computer vision models. The
    name comes from its source, a modified dataset from the National Institute of
    Standards and Technology.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个28 x 28灰度手写数字的集合，用于训练一个读取数字的模型。它通常是计算机视觉模型的“Hello World”。其名称来源于其来源，即来自国家标准与技术研究所的修改数据集。
- en: '[Iris](https://oreil.ly/EWvgs)'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: '[Iris](https://oreil.ly/EWvgs)'
- en: In 1936, Ronald Fisher figured out you can identify the genus and species of
    iris flowers with three physical measurements. The dataset is a classic for nonvisual
    classification.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 1936年，罗纳德·费舍尔发现可以通过三个物理测量来识别鸢尾花的属种。这个数据集是非视觉分类的经典。
- en: '[Boston Housing Prices](https://oreil.ly/RHD65)'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: '[波士顿房价](https://oreil.ly/RHD65)'
- en: This dataset contains median home values with their associated attributes for
    solving a line of best fit (linear regression) model.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 这个数据集包含了中位数房屋价值及其相关属性，用于解决最佳拟合线（线性回归）模型。
- en: '[The *Titanic*](https://oreil.ly/RtzuS)'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: '[*泰坦尼克号*](https://oreil.ly/RtzuS)'
- en: This is the collected passenger log from the “unsinkable” RMS *Titanic* that
    sank on April 15, 1912\. We will use this dataset to create a model in [Chapter 9](ch09.html#the_chapter_9).
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 这是“不沉”RMS *泰坦尼克号*于1912年4月15日沉没的乘客日志。我们将使用这个数据集在[第9章](ch09.html#the_chapter_9)中创建一个模型。
- en: '[Wine Quality](https://oreil.ly/K1ekn)'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: '[葡萄酒质量](https://oreil.ly/K1ekn)'
- en: For brewers and crafters, the idea of using machine learning to identify what
    makes a tasty drink is exhilarating. This dataset contains the physicochemical
    properties of each wine and its score.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 对于酿酒师和手工艺者来说，利用机器学习来识别什么使一种美味饮料是令人振奋的。这个数据集包含每种葡萄酒的物理化学性质及其评分。
- en: '[Pima Indians Diabetics](https://oreil.ly/AZh6O)'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: '[Pima印第安人糖尿病患者](https://oreil.ly/AZh6O)'
- en: Quite a few datasets are available for health care. This is a small and approachable
    diabetes dataset based on patient history.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 有很多健康护理数据集可用。这是一个基于患者病史的小型且易接近的糖尿病数据集。
- en: '[CIFAR](https://oreil.ly/JgIsD)'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: '[CIFAR](https://oreil.ly/JgIsD)'
- en: While ImageNet is a gold standard, it’s a bit unapproachable and complicated.
    The CIFAR dataset is a low-resolution and friendly collection of images for classification.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然ImageNet是一个金标准，但有点难以接近和复杂。CIFAR数据集是一个低分辨率且友好的图像集合，用于分类。
- en: '[Amazon Reviews](https://oreil.ly/cM80L)'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: '[亚马逊评论](https://oreil.ly/cM80L)'
- en: This is a collection of product reviews from Amazon.com over many years. The
    dataset has been used to train the emotional sentiment of text, as you have the
    user’s comments and their ratings. A close second to this would be the IMDb review
    dataset.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 这是来自Amazon.com多年来的产品评论集合。该数据集已被用来训练文本的情感倾向，因为你有用户的评论和他们的评分。与此相近的是IMDb评论数据集。
- en: '[COCO](https://oreil.ly/qSn9z)'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: '[COCO](https://oreil.ly/qSn9z)'
- en: This is a large-scale object detection, segmentation, and captioning dataset.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个大规模的目标检测、分割和字幕数据集。
- en: These 10 are a good start for standard reference datasets. Machine learning
    enthusiasts will cite these in tweets, talks, and blog posts at will.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 这10个是标准参考数据集的很好起点。机器学习爱好者会在推特、演讲和博客文章中随意引用这些数据集。
- en: Chapter Review
  id: totrans-184
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 章节复习
- en: Of course, you don’t have a diverse collection of photos of volcanoes on Venus.
    How would you? That doesn’t mean you can’t take a model trained for it and move
    it to your new browser game. Just download the dataset off Kaggle and upload the
    images to Teachable Machine to create a decent “Volcano or Not” astronomy model.
    The same way TensorFlow.js launches you into machine learning orbit, these existing
    models and datasets build a foundation for your application mastery.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，你没有金星火山的各种照片。你怎么可能有呢？这并不意味着你不能拿一个为此训练过的模型，移植到你的新浏览器游戏中。只需从Kaggle下载数据集并上传图片到Teachable
    Machine，创建一个体面的“火山还是非火山”天文模型。就像TensorFlow.js将你带入机器学习轨道一样，这些现有模型和数据集为你的应用程序掌握打下了基础。
- en: Like web development, machine learning contains a variety of specializations.
    Machine learning relies on a variety of skills across data, models, training,
    and tensors.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 像Web开发一样，机器学习包含各种专业化。机器学习依赖于数据、模型、训练和张量等多种技能。
- en: 'Chapter Challenge: R.I.P. You Will Be MNIST'
  id: totrans-187
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 章节挑战：再见MNIST
- en: It’s your turn to take a model from Keras HDF5 to TensorFlow.js. In the code
    associated with this book, you’ll find a *mnist.h5* file, which contains the model
    for identifying handwritten digits.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 现在轮到你将一个模型从Keras HDF5转换到TensorFlow.js了。在与本书相关的代码中，你会找到一个*mnist.h5*文件，其中包含了用于识别手写数字的模型。
- en: Create a Graph TensorFlow.js model.
  id: totrans-189
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个图形TensorFlow.js模型。
- en: Quantize the model with `uint8` to make it small.
  id: totrans-190
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 用`uint8`量化模型使其变小。
- en: Use the wild card to access all weights in the model.
  id: totrans-191
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用通配符访问模型中的所有权重。
- en: Set the shard size to 12,000.
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将分片大小设置为12,000。
- en: Save to a folder *./minist* (*min* because it was quantized, get it!?).
  id: totrans-193
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存到一个文件夹*./minist*（*min*因为它被量化了，明白吗！）。
- en: 'Answer these questions:'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 回答以下问题：
- en: How many bin files and groups were generated?
  id: totrans-195
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 生成了多少个二进制文件和组？
- en: What was the final output size?
  id: totrans-196
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最终输出大小是多少？
- en: If you used the default shard size, how many bin files would have been made?
  id: totrans-197
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你使用默认的分片大小，会生成多少个二进制文件？
- en: You can find the answer to this challenge in [Appendix B](app02.html#appendix_b).
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在[附录B](app02.html#appendix_b)中找到这个挑战的答案。
- en: Review Questions
  id: totrans-199
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 复习问题
- en: 'Let’s review the lessons you’ve learned from the code you’ve written in this
    chapter. Take a moment to answer the following questions:'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们回顾一下你在本章编写的代码中学到的教训。花点时间回答以下问题：
- en: If you’re given gigs of data for a specific task, what are some concerns and
    thoughts you would have before training?
  id: totrans-201
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你为特定任务提供了大量数据，训练之前你会有哪些担忧和想法？
- en: If a model is trained and gets 99% accuracy, but then when you use it in the
    field, it does terribly, what would you say happened?
  id: totrans-202
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果一个模型经过训练，准确率达到了99%，但是当你在现场使用它时，表现很糟糕，你会说发生了什么？
- en: What is the name of the website Google created to help you train your own model?
  id: totrans-203
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 谷歌创建的帮助您训练自己模型的网站的名称是什么？
- en: What is the drawback to using Google’s website?
  id: totrans-204
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用谷歌网站的缺点是什么？
- en: What is the image dataset used to train MobileNet and other popular machine
    learning models?
  id: totrans-205
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 用来训练MobileNet和其他流行的机器学习模型的图像数据集是什么？
- en: Solutions to these exercises are available in [Appendix A](app01.html#book_appendix).
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 这些练习的解决方案可以在[附录A](app01.html#book_appendix)中找到。
