- en: appendix A The Neo4j environment
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 附录 A Neo4j 环境
- en: In this book, you will learn graph theory and algorithms through practical examples
    using Neo4j. I (Oskar) chose Neo4j because I have more than five years of experience
    with it, building and analyzing graphs.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在这本书中，你将通过使用 Neo4j 的实际示例学习图论和算法。我（Oskar）选择 Neo4j 是因为我有超过五年的使用经验，构建和分析图。
- en: Neo4j is a native graph database, built from the ground up to store, query,
    and manipulate graph data. It is implemented in Java and accessible from software
    written in other languages using the Cypher query language, through a transactional
    HTTP endpoint or the binary Bolt Protocol. In Neo4j, data is stored as nodes and
    relationships, which are both first-class citizens in the database. Nodes represent
    entities, such as people or businesses, and relationships represent the connections
    between these entities. Nodes and relationships can have properties, which are
    key–value pairs that provide additional information about the nodes and relationships.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: Neo4j 是一个原生图数据库，从头开始构建以存储、查询和操作图数据。它使用 Java 实现，可以通过 Cypher 查询语言从其他语言编写的软件中访问，通过事务性
    HTTP 端点或二进制 Bolt 协议。在 Neo4j 中，数据以节点和关系的形式存储，它们在数据库中都是一等公民。节点代表实体，如人或企业，而关系代表这些实体之间的连接。节点和关系可以具有属性，这些属性是键值对，提供了关于节点和关系的额外信息。
- en: Neo4j is designed to be highly scalable. It uses a flexible indexing system
    to efficiently query and manipulate data and supports atomicity, consistency,
    isolation, and durability transactions to ensure data consistency. It also has
    a built-in query language, called Cypher, which is designed to be expressive and
    easy to use for querying and manipulating graph data.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: Neo4j 设计为高度可扩展。它使用灵活的索引系统来高效地查询和操作数据，并支持原子性、一致性、隔离性和持久性事务，以确保数据一致性。它还内置了一种查询语言，称为
    Cypher，该语言旨在易于表达且易于使用，用于查询和操作图数据。
- en: 'Another benefit of using Neo4j is that it has two useful plugins you will be
    using:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 Neo4j 的另一个好处是它有两个有用的插件，你将使用它们：
- en: '*The Awesome Procedures on Cypher (APOC) plugin*—A library of procedures, functions,
    and plugins for Neo4j that provide a wide range of capabilities, including data
    import and export, data transformation and manipulation, date–time–interval processing,
    geospatial processing, text processing, and more.'
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Cypher 神奇过程 (APOC) 插件*——一个为 Neo4j 提供各种功能的程序、函数和插件库，包括数据导入和导出、数据转换和处理、日期时间区间处理、地理空间处理、文本处理等。'
- en: '*The Graph Data Science (GDS) plugin*—A set of graph algorithms and procedures
    for Neo4j that allow users to perform advanced analytics on their graph data.
    GDS provides efficient, parallel implementations of common graph algorithms, such
    as shortest path, PageRank, and community detection. In addition, the plugin also
    includes node-embedding algorithms and machine learning workflows that support
    node classification and link prediction workflows.'
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*图数据科学 (GDS) 插件*——一组针对 Neo4j 的图算法和程序，允许用户对其图数据进行高级分析。GDS 提供了常见图算法（如最短路径、PageRank
    和社区检测）的高效并行实现。此外，该插件还包括节点嵌入算法和机器学习工作流程，支持节点分类和链接预测工作流程。'
- en: A.1 Cypher query language
  id: totrans-7
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: A.1 Cypher 查询语言
- en: Cypher is a declarative query language for graph databases used to retrieve
    and manipulate data stored in a graph database. Cypher queries are written in
    a simple, human-readable syntax. The following listing is an example of a simple
    Cypher query that uses ASCII-art-style diagramming to illustrate the relationships
    being queried.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: Cypher 是一种用于图数据库的声明式查询语言，用于检索和操作存储在图数据库中的数据。Cypher 查询使用简单、易于阅读的语法编写。以下列表是一个简单的
    Cypher 查询示例，它使用 ASCII 艺术风格的图表来展示所查询的关系。
- en: Listing A.1 A sample Cypher statement
  id: totrans-9
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表 A.1 一个示例 Cypher 语句
- en: '[PRE0]'
  id: totrans-10
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The openCypher initiative is a collaboration between Neo4j and several other
    organizations to promote the use of the Cypher query language as a standard for
    working with graph data. The goal of the initiative is to create a common language
    that can be used to query any graph database, regardless of the underlying technology.
    To achieve this goal, the openCypher initiative is making the Cypher language
    specification and related resources available under an open source license and
    is encouraging the development of Cypher implementations by a variety of organizations.
    So far, the Cypher query language has been adopted by Amazon, AgensGraph, Katana
    Graph, Memgraph, RedisGraph, and SAP HANA (openCypher Implementers Group, n.d.).
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: openCypher 创新项目是 Neo4j 与其他几个组织之间的合作，旨在推广 Cypher 查询语言作为处理图数据的标准。该项目的目标是创建一种通用的语言，可以用于查询任何图数据库，无论其底层技术如何。为了实现这一目标，openCypher
    创新项目正在将 Cypher 语言规范和相关资源以开源许可证的形式提供，并鼓励各种组织开发 Cypher 实现。到目前为止，Cypher 查询语言已被 Amazon、AgensGraph、Katana
    Graph、Memgraph、RedisGraph 和 SAP HANA（openCypher Implementers Group，n.d.）采用。
- en: There is also an official ISO project to propose a unified graph query language
    (GQL) to interact with graph databases (GQL Standards Committee, n.d.). The GQL
    aims to build on the foundation of SQL and integrate proven ideas from existing
    graph query languages, including Cypher. That makes learning Cypher a great start
    to interact with graph databases, as it is already integrated with many of them
    and will also be part of the official ISO Graph Query Language. Take a look at
    the graph pattern matching proposal for GQL (Deutsch et al., 2022) for more information.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，还有一个官方的 ISO 项目提议一个统一的图查询语言（GQL）来与图数据库交互（GQL 标准委员会，n.d.）。GQL 的目标是建立在 SQL 的基础上，并整合现有图查询语言中的成熟想法，包括
    Cypher。这使得学习 Cypher 成为与图数据库交互的绝佳起点，因为它已经与许多数据库集成，并将成为官方 ISO 图查询语言的一部分。有关更多信息，请参阅
    GQL 的图模式匹配提案（Deutsch 等人，2022）。
- en: A.2 Neo4j installation
  id: totrans-13
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: A.2 Neo4j 安装
- en: 'There are a few different options to set up your Neo4j environment:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 设置您的 Neo4j 环境有几种不同的选项：
- en: Neo4j Desktop
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Neo4j Desktop
- en: Neo4j Docker
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Neo4j Docker
- en: Neo4j Aura
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Neo4j Aura
- en: A.2.1 Neo4j Desktop installation
  id: totrans-18
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.2.1 Neo4j Desktop 安装
- en: 'Neo4j Desktop is a local Neo4j graph database management application. It allows
    you to create database instances and install official plugins with only a few
    clicks. If you decide to use Neo4j Desktop, follow these steps to successfully
    start a Neo4j database instance with installed APOC and GDS plugins:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: Neo4j Desktop 是一个本地的 Neo4j 图数据库管理应用程序。它允许您只需几步点击即可创建数据库实例和安装官方插件。如果您决定使用 Neo4j
    Desktop，请按照以下步骤成功启动一个已安装 APOC 和 GDS 插件的 Neo4j 数据库实例：
- en: Download the Neo4j desktop application from the official website ([https://neo4j.com/download](https://neo4j.com/download);
    figure A.1).
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从官方网站下载 Neo4j 桌面应用程序（[https://neo4j.com/download](https://neo4j.com/download)；图
    A.1）。
- en: '![figure](../Images/A-1.png)'
  id: totrans-21
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/A-1.png)'
- en: Figure A.1 Download Neo4j Desktop.
  id: totrans-22
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 A.1 下载 Neo4j Desktop。
- en: 2\. Install the Neo4j Desktop application on your computer and then open it.
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 2. 在您的计算机上安装 Neo4j Desktop 应用程序，然后打开它。
- en: 3\. Complete the registration step. You can enter the software key you were
    assigned when you downloaded the application or skip this step by clicking Register
    Later (figure A.2).
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 3. 完成注册步骤。您可以在下载应用程序时分配的软件密钥输入，或者通过点击“稍后注册”（图 A.2）跳过此步骤。
- en: '![figure](../Images/A-2.png)'
  id: totrans-25
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/A-2.png)'
- en: Figure A.2 Enter your personal information or skip the registration step.
  id: totrans-26
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 A.2 输入您的个人信息或跳过注册步骤。
- en: 4\. The Movies Database Management System (DBMS) is automatically started on
    the first execution of Neo4j Desktop. Stop the Movies DBMS if it is running (figure
    A.3).
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 4. 在首次执行 Neo4j Desktop 时，Movies 数据库管理系统（DBMS）会自动启动。如果正在运行，请停止 Movies DBMS（图
    A.3）。
- en: '![figure](../Images/A-3.png)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/A-3.png)'
- en: Figure A.3 Stop the default Movie DBMS database.
  id: totrans-29
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 A.3 停止默认的 Movie DBMS 数据库。
- en: 5\. Add a new local DBMS (figure A.4).
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 5. 添加一个新的本地 DBMS（图 A.4）。
- en: '![figure](../Images/A-4.png)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/A-4.png)'
- en: Figure A.4 Add a Local DBMS.
  id: totrans-32
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 A.4 添加本地 DBMS。
- en: 6\. Type in any values for the DBMS name and password. Make sure to select version
    5.9.0 or greater (figure A.5).
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 6. 为 DBMS 名称和密码输入任何值。请确保选择版本 5.9.0 或更高版本（图 A.5）。
- en: '![figure](../Images/A-5.png)'
  id: totrans-34
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/A-5.png)'
- en: Figure A.5 Define a DBMS password and version.
  id: totrans-35
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 A.5 定义 DBMS 密码和版本。
- en: 7\. Install APOC and GDS plugins by selecting the DBMS, which opens a right-hand
    pane with Details, Plugins, and Upgrade tabs. Select the Plugins tab, and then
    install the APOC and GDS plugins (figure A.6).
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 7. 通过选择 DBMS 安装 APOC 和 GDS 插件，这将打开一个包含详细信息、插件和升级标签的右侧面板。选择插件标签，然后安装 APOC 和 GDS
    插件（图 A.6）。
- en: '![figure](../Images/A-6.png)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/A-6.png)'
- en: Figure A.6 Install the APOC and GDS plugins.
  id: totrans-38
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 A.6 安装 APOC 和 GDS 插件。
- en: 8\. Start the database (figure A.7).
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 8. 启动数据库（图 A.7）。
- en: '![figure](../Images/A-7.png)'
  id: totrans-40
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/A-7.png)'
- en: Figure A.7 Start the database.
  id: totrans-41
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 A.7 启动数据库。
- en: 9\. Open Neo4j Browser (figure A.8).
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 9. 打开 Neo4j 浏览器（图 A.8）。
- en: '![figure](../Images/A-8.png)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/A-8.png)'
- en: Figure A.8 Open Neo4j Browser.
  id: totrans-44
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 A.8 打开 Neo4j 浏览器。
- en: 10\. Execute Cypher queries by typing them in the Cypher editor. For longer
    Cypher statements, you can use the full-screen editor option (figure A.9).
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 10. 通过在 Cypher 编辑器中键入它们来执行 Cypher 查询。对于较长的 Cypher 语句，你可以使用全屏编辑器选项（图 A.9）。
- en: '![figure](../Images/A-9.png)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/A-9.png)'
- en: Figure A.9 The Cypher query editor in Neo4j Browser
  id: totrans-47
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 A.9 Neo4j 浏览器中的 Cypher 查询编辑器
- en: A.2.2 Neo4j Docker installation
  id: totrans-48
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.2.2 Neo4j Docker 安装
- en: If you select the Neo4j Docker installation, you need to run the command in
    the following listing in your command prompt.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你选择了 Neo4j Docker 安装，你需要在命令提示符中运行以下列表中的命令。
- en: Listing A.2 Starting a Neo4j Docker
  id: totrans-50
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表 A.2 启动 Neo4j Docker
- en: '[PRE1]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: This command starts a Dockerized Neo4j in the background. The APOC and GDS plugins
    are automatically added by defining the `NEO4J_PLUGINS` environment variable.
    It is a good practice to mount the `data` volume to persist the database files.
    The database username and password are specified with the `NEO4J_AUTH` variable.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 此命令在后台启动 Docker 化的 Neo4j。通过定义 `NEO4J_PLUGINS` 环境变量，APOC 和 GDS 插件会自动添加。将 `data`
    卷挂载以持久化数据库文件是一个好习惯。数据库用户名和密码由 `NEO4J_AUTH` 变量指定。
- en: Visit http://localhost:7474 in your web browser after you have executed the
    command in listing A.2\. Type in the password, specified with the `NEO4J_AUTH`
    variable. The password in the example is `password`.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 在执行了列表 A.2 中的命令后，在你的网页浏览器中访问 http://localhost:7474。输入由 `NEO4J_AUTH` 变量指定的密码。示例中的密码是
    `password`。
- en: A.2.3 Neo4j Aura
  id: totrans-54
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.2.3 Neo4j Aura
- en: 'Neo4j Aura is a hosted cloud instance of the Neo4j database. You can use it
    for all the chapters except for chapter 7, which requires GDS library. Unfortunately,
    the free version does not provide the GDS library. If you want to use the cloud-hosted
    Neo4j Aura to follow the examples in this book, you will need to use the AuraDS
    version, which provides support for GDS algorithms. You can find more information
    on Neo4j’s official website: [https://neo4j.com/product/auradb/](https://neo4j.com/product/auradb/).'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: Neo4j Aura 是 Neo4j 数据库的托管云实例。你可以用它来学习所有章节，除了第 7 章，它需要 GDS 库。不幸的是，免费版本不提供 GDS
    库。如果你想使用云托管的 Neo4j Aura 来跟随本书中的示例，你需要使用 AuraDS 版本，它提供了对 GDS 算法的支持。你可以在 Neo4j 的官方网站上找到更多信息：[https://neo4j.com/product/auradb/](https://neo4j.com/product/auradb/).
- en: A.3 Neo4j Browser configuration
  id: totrans-56
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: A.3 Neo4j 浏览器配置
- en: Neo4j Browser has a beginner-friendly feature that visualizes all the relationships
    between resulting nodes, even when the relationships are not part of the query
    results. To avoid confusion, untick the Connect Result Nodes feature, as shown
    in figure A.10\.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: Neo4j 浏览器有一个面向初学者的功能，可以可视化所有结果节点之间的关系，即使这些关系不是查询结果的一部分。为了避免混淆，请取消选中连接结果节点功能，如图
    A.10 所示。
- en: '![sidebar figure](../Images/A-10.png)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![sidebar figure](../Images/A-10.png)'
- en: Figure A.10 Untick Connect Result Nodes in Neo4j Browser.
  id: totrans-59
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 A.10 在 Neo4j 浏览器中取消选中连接结果节点。
- en: A.4 Movies dataset
  id: totrans-60
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: A.4 电影数据集
- en: In some chapters, we use the Movies dataset, which is a sample dataset that’s
    small and easy to load. In the following, we provide the instructions on how to
    load the Movies dataset into your Neo4j instance.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 在某些章节中，我们使用了电影数据集，这是一个小型且易于加载的示例数据集。以下是如何将电影数据集加载到你的 Neo4j 实例中的说明。
- en: A.4.1 Loading via the Neo4j Query Guide
  id: totrans-62
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.4.1 通过 Neo4j 查询指南加载数据
- en: When you’re in Neo4j Query or Neo4j Browser, you can load the movies dataset
    by going through the “Movie Graph Guide” found in the guides sidebar or by executing
    `:play movies` in Neo4j Browser.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 当你在 Neo4j 查询或 Neo4j 浏览器中时，你可以通过在指南侧边栏中找到的“电影图指南”或通过在 Neo4j 浏览器中执行 `:play movies`
    来加载电影数据集。
- en: A.4.2 Trying the online version
  id: totrans-64
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.4.2 尝试在线版本
- en: There’s also an online read-only version of this dataset available at [https://demo.neo4jlabs.com:7473/browser/](https://demo.neo4jlabs.com:7473/browser/)
    (alternatively, using Bolt, [https://demo.neo4jlabs.com:7687](https://demo.neo4jlabs.com:7687)).
    The database name, username, and password are “movies.”
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 该数据集还有一个在线只读版本，可在[https://demo.neo4jlabs.com:7473/browser/](https://demo.neo4jlabs.com:7473/browser/)（或者使用
    Bolt，[https://demo.neo4jlabs.com:7687](https://demo.neo4jlabs.com:7687)）访问。数据库名称、用户名和密码均为“movies”。
- en: A.4.3 Loading via Cypher
  id: totrans-66
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.4.3 通过 Cypher 加载
- en: If you want to load the movies dataset directly using Cypher, use the query
    in the following listing.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您想直接使用 Cypher 加载数据集，请使用以下列表中的查询。
- en: Listing A.3 Loading the Movies dataset via Cypher
  id: totrans-68
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表 A.3 通过 Cypher 加载电影数据集
- en: '[PRE2]'
  id: totrans-69
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
