- en: Chapter 15\. Using ChatGPT to Call Your API
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第 15 章。使用 ChatGPT 调用您的 API
- en: In the previous chapter, you built a basic generative AI application that could
    chat with a model in natural language and retrieve data from the SportsWorldCentral
    API. You created quite a bit of Python code to accomplish that.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，你构建了一个基本的生成式 AI 应用程序，它可以与模型进行自然语言聊天，并从 SportsWorldCentral API 中检索数据。你编写了大量的
    Python 代码来完成这项任务。
- en: In this chapter, you will use custom GPTs from OpenAI to accomplish this task
    without creating any Python code other than the SportsWorldCentral API. You can
    think of a custom GPT as a low-code method for creating a generative AI application
    that connects to your API.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你将使用 OpenAI 的自定义 GPT 来完成这项任务，而无需创建任何除 SportsWorldCentral API 之外的 Python
    代码。你可以将自定义 GPT 视为创建一个连接到你的 API 的生成式 AI 应用程序的低代码方法。
- en: Architecture of Your Application
  id: totrans-3
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 您的应用程序架构
- en: '[Figure 15-1](#chatgpt_architecture_ch15) shows the high-level architecture
    of the project you will create in this chapter.'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 15-1](#chatgpt_architecture_ch15) 展示了本章中你将创建的项目的高级架构。'
- en: If you compare this diagram to [Figure 14-1](ch14.html#langgraph_architecture_ch14),
    you will see a few similarities. In both cases, a user is using natural language
    chat to retrieve data from the SportsWorldCentral API. In both cases, a function-calling
    LLM is used to chat with the user and decide when to call the API for additional
    information. Although you used an Anthropic model in [Chapter 14](ch14.html#chapter_14),
    you could have used the same OpenAI GPT-4o model that you will use in this chapter.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你将此图与 [图 14-1](ch14.html#langgraph_architecture_ch14) 进行比较，你会看到一些相似之处。在两种情况下，用户都在使用自然语言聊天来从
    SportsWorldCentral API 中检索数据。在两种情况下，都使用了功能调用的 LLM 来与用户聊天并决定何时调用 API 以获取更多信息。尽管你在第
    14 章中使用了 Anthropic 模型，但你也可以使用本章中将要使用的相同的 OpenAI GPT-4o 模型。
- en: However, there are also large differences from [Chapter 14](ch14.html#chapter_14)’s
    architecture. Where [Chapter 14](ch14.html#chapter_14) required many different
    Python components to be developed and run on GitHub Codespaces, in this chapter,
    only the SportsWorldCentral API will be running there. As you continue through
    this chapter, I will share more contrasts with [Chapter 14](ch14.html#chapter_14).
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，与第 14 章的架构也有很大的不同。在第 14 章中，需要开发并运行在 GitHub Codespaces 上的许多不同的 Python 组件，而本章中，只有
    SportsWorldCentral API 将在那里运行。随着你继续阅读本章，我会分享更多与第 14 章的对比。
- en: '![High-level architecture](assets/haad_1501.png)'
  id: totrans-7
  prefs: []
  type: TYPE_IMG
  zh: '![高级架构](assets/haad_1501.png)'
- en: Figure 15-1\. High-level architecture
  id: totrans-8
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 15-1。高级架构
- en: Warning
  id: totrans-9
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 警告
- en: As with the model used in [Chapter 14](ch14.html#chapter_14), you should be
    aware of the limitations and risks of the model you are using. The [GPT-4o System
    Card](https://oreil.ly/v8SNX) states risks that include misinformation, violent
    speech, and others.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 与第 14 章中使用的模型一样，你应该了解你所使用模型的局限性和风险。[GPT-4o 系统卡片](https://oreil.ly/v8SNX) 列出了包括虚假信息、暴力言论在内的风险。
- en: Getting Started with ChatGPT
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 开始使用 ChatGPT
- en: The first step is to sign up for a ChatGPT user account, from the [OpenAI home
    page](https://chat.openai.com). You need to select a plan that includes the Create
    GPTs capability. At the time of this writing, the [ChatGPT pricing page](https://oreil.ly/gptpri)
    shows that Plus, Team, and Enterprise accounts have that option. Follow the sign-up
    instructions to activate your account. Once you have signed up, log in and navigate
    back to the [ChatGPT home page](https://chat.openai.com).
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 第一步是注册一个 ChatGPT 用户账户，从 [OpenAI 主页](https://chat.openai.com) 开始。你需要选择一个包含创建
    GPT 功能的计划。在撰写本文时，[ChatGPT 定价页面](https://oreil.ly/gptpri) 显示，Plus、Team 和 Enterprise
    账户都有这个选项。按照注册说明激活你的账户。一旦注册，登录并导航回 [ChatGPT 主页](https://chat.openai.com)。
- en: Tip
  id: totrans-13
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 小贴士
- en: If you would like to prevent OpenAI from using your chats to train its models,
    you can request this through the [OpenAI privacy portal](https://oreil.ly/2qLwN).
    Doing so reduces the possibility that information you enter in ChatGPT or custom
    GPTs will be shown to other users accidentally.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你希望阻止 OpenAI 使用你的聊天记录来训练其模型，你可以通过 [OpenAI 隐私门户](https://oreil.ly/2qLwN) 提出此请求。这样做可以降低你输入到
    ChatGPT 或自定义 GPT 中的信息意外显示给其他用户的风险。
- en: Creating a Custom GPT
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建自定义 GPT
- en: To create your first GPT, click your profile photo and select My GPTs. You will
    see the My GPTs page, as shown in [Figure 15-2](#my_gpts_ch15).
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建你的第一个 GPT，点击你的个人照片并选择“我的 GPT”。你将看到“我的 GPT”页面，如图 [图 15-2](#my_gpts_ch15) 所示。
- en: '![My GPTs page](assets/haad_1502.png)'
  id: totrans-17
  prefs: []
  type: TYPE_IMG
  zh: '![我的 GPT 页面](assets/haad_1502.png)'
- en: Figure 15-2\. My GPTs page
  id: totrans-18
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 15-2\. 我的 GPT 页面
- en: Click Create a GPT. The New GPT page will be displayed with the Configure option
    selected, as shown in [Figure 15-3](#new_gpt_ch15).
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 点击创建 GPT。新 GPT 页面将显示，配置选项被选中，如图 [图 15-3](#new_gpt_ch15) 所示。
- en: '![Creating a new GPT](assets/haad_1503.png)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![创建新的 GPT](assets/haad_1503.png)'
- en: Figure 15-3\. Creating a new GPT
  id: totrans-21
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 15-3\. 创建新的 GPT
- en: The large button with the plus sign on it is used to select an image for your
    custom GPT. Download a public-domain image to your computer, then click that button.
    Select Upload Photo and upload the local file. You can view an example of a public
    domain image of a football and helmet at [*https://oreil.ly/dItdO*](https://oreil.ly/dItdO).
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 带有加号的大按钮用于选择你自定义 GPT 的图片。将公有领域图片下载到你的电脑上，然后点击该按钮。选择上传照片并上传本地文件。你可以在 [*https://oreil.ly/dItdO*](https://oreil.ly/dItdO)
    上查看足球和头盔的公有领域图片示例。
- en: To configure the GPT, fill out the options on the New GPT page as shown in [Figure 15-4](#completed_new_gpt_part1_ch15).
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 要配置 GPT，请填写新 GPT 页面上的选项，如图 [图 15-4](#completed_new_gpt_part1_ch15) 所示。
- en: '![New GPT information part one](assets/haad_1504.png)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![新 GPT 信息第一部分](assets/haad_1504.png)'
- en: Figure 15-4\. New GPT information, part 1
  id: totrans-25
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 15-4\. 新 GPT 信息，第一部分
- en: Scroll down the page to see additional options. Leave the conversation starters
    empty at this time. Under the Capabilities section, do not select any capabilities.
    The display should look like [Figure 15-5](#completed_new_gpt_part2_ch15).
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 将页面向下滚动以查看更多选项。在此阶段，请保持对话开始者为空。在功能部分，不要选择任何功能。显示应类似于 [图 15-5](#completed_new_gpt_part2_ch15)。
- en: '![New GPT information part two](assets/haad_1505.png)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![新 GPT 信息第二部分](assets/haad_1505.png)'
- en: Figure 15-5\. New GPT information, part 2
  id: totrans-28
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 15-5\. 新 GPT 信息，第二部分
- en: 'Take a minute to see what your custom GPT can do with what you have given it
    so far. In the Preview pane, enter the following prompt: **`What are the specific
    league names from the SportsWorldCentral fantasy football platform?`**'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 花一分钟时间看看你的自定义 GPT 能用你目前给出的信息做什么。在预览窗格中，输入以下提示：**`What are the specific league
    names from the SportsWorldCentral fantasy football platform?`**
- en: The response you get when you perform this task may be different from what another
    user would receive. That is because generative AI responses are nondeterministic.
    (If you make your query too broad, your GPT may hallucinate and provide information
    that isn’t valid.) [Figure 15-6](#prompt_response1_ch15) displays an example where
    the GPT states that it doesn’t have specific information about team names, because
    they are not publicly available. That is correct; to get the team names, it will
    need to call an API.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 执行此任务时获得的响应可能与另一个用户收到的不同。这是因为生成式 AI 响应是非确定性的。（如果你提出的问题太宽泛，你的 GPT 可能会幻想并提供不正确的信息。）[图
    15-6](#prompt_response1_ch15) 展示了一个例子，其中 GPT 表示它没有关于团队名称的具体信息，因为它们不是公开可用的。这是正确的；要获取团队名称，它将需要调用一个
    API。
- en: '![Prompt and response from Custom GPT](assets/haad_1506.png)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
  zh: '![自定义 GPT 的提示和响应](assets/haad_1506.png)'
- en: Figure 15-6\. Prompt and response from custom GPT
  id: totrans-32
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 15-6\. 自定义 GPT 的提示和响应
- en: This reflects a *knowledge gap*, which means that the model has not been trained
    on the information it needs to answer your prompt. To overcome this knowledge
    gap, you will create a custom action that enables your GPT to call the SWC API.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 这反映了**知识差距**，意味着模型尚未在需要回答你提示的信息上进行训练。为了克服这个知识差距，你需要创建一个自定义操作，使你的 GPT 能够调用 SWC
    API。
- en: First, you need to launch your API in GitHub Codespaces with a public endpoint
    and update it to include the server URL in the OAS file.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，你需要使用公开端点在你的 GitHub Codespaces 中启动你的 API，并将其更新到 OAS 文件中包含服务器 URL。
- en: Launching Your GitHub Codespace
  id: totrans-35
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 启动您的 GitHub Codespace
- en: You will be working with the Part III GitHub Codespace that you created in [“Cloning
    the Part III Repository”](ch12.html#cloning_part_3_sect). If you haven’t created
    your Part III Codespace yet, you can complete that section now.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 你将使用你在 [“克隆第三部分存储库”](ch12.html#cloning_part_3_sect) 中创建的 Part III GitHub Codespace
    进行工作。如果你还没有创建你的 Part III Codespace，你现在可以完成该部分。
- en: Running the SportsWorldCentral (SWC) API in GitHub Codespaces
  id: totrans-37
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在 GitHub Codespaces 中运行 SportsWorldCentral (SWC) API
- en: 'In the Terminal of your Codespace, install the required libraries using the
    provided *requirements.txt* file as follows:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 在你的 Codespace 终端中，使用提供的 *requirements.txt* 文件安装所需的库，如下所示：
- en: '[PRE0]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Launch the API from the command line as shown:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 按如下所示从命令行启动 API：
- en: '[PRE1]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'You will see several messages, ending with the following:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 你将看到几条消息，最后一条如下所示：
- en: '[PRE2]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: You will see a dialog stating “Your application running on port 8000 is available”
    as shown in [Figure 15-7](#make_api_public_ch15). Click Make Public.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 您将看到一个对话框，显示“您的应用程序正在端口8000上运行”，如图15-7所示。点击“公开”。
- en: '![Make API Public](assets/haad_1507.png)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![使API公开](assets/haad_1507.png)'
- en: Figure 15-7\. Making the API public
  id: totrans-46
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图15-7\. 使API公开
- en: The API is now running in Codespaces with a public port. To view the API in
    the browser, click Ports in the terminal and hover over Port 8000 (see [Figure 15-8](#api_running_public_port_15)).
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: API现在在Codespaces中以公共端口运行。要在浏览器中查看API，请点击终端中的“端口”，并将鼠标悬停在端口8000上（见图15-8）。
- en: '![API on public address](assets/haad_1508.png)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![API在公共地址上](assets/haad_1508.png)'
- en: Figure 15-8\. API on a public address
  id: totrans-49
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图15-8\. API在公共地址上
- en: Click the globe icon to open in the browser. If you receive the message “You
    are about to access a development port served by someone’s codespace,” click Continue.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 点击地球图标以在浏览器中打开。如果您收到消息“您即将访问由某人的codespace提供的服务器上的开发端口”，请点击继续。
- en: 'The browser will open to a URL that ends in *app.github.dev*, and you should
    see the following health check message in your web browser:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 浏览器将打开以*app.github.dev*结尾的URL，您应该在您的网页浏览器中看到以下健康检查消息：
- en: '[PRE3]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Your API is running publicly in the cloud.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 您的API正在云中公开运行。
- en: Next, you need to capture the public URL of your API so that you can use it
    in the next section. Copy the URL in the address bar and save that value.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，您需要捕获您API的公共URL，以便您可以在下一节中使用它。复制地址栏中的URL并保存该值。
- en: Stop the API by pressing Ctrl-C at the terminal.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 通过在终端中按Ctrl-C停止API。
- en: Adding the Servers Section to Your OAS File
  id: totrans-56
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将服务器部分添加到您的OAS文件中
- en: 'To update your OAS file, you need to update your FastAPI code. Open the *main.py*
    file and update the constructor so that it matches the following:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 要更新您的OAS文件，您需要更新您的FastAPI代码。打开*main.py*文件并更新构造函数，使其与以下内容匹配：
- en: '[PRE4]'
  id: totrans-58
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '[![1](assets/1.png)](#co_using_chatgpt_to_call_your_api_CO1-1)'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: '[![1](assets/1.png)](#co_using_chatgpt_to_call_your_api_CO1-1)'
- en: The value inside the quote marks should be the full public URL you copied in
    the previous step.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 引号内的值应该是您在上一步中复制的完整公共URL。
- en: 'Adding this section in the code makes two changes that you can verify:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 在代码中添加此部分会导致两个更改，您可以验证：
- en: The `Servers` section will be added to the OAS file.
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Servers`部分将被添加到OAS文件中。'
- en: The `Servers` section will be added to the API documentation (which is auto-generated
    from the OAS file).
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Servers`部分将被添加到API文档中（该文档是从OAS文件自动生成的）。'
- en: 'To verify these, start your API again from the Terminal:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 为了验证这些，请在终端中再次启动您的API：
- en: '[PRE5]'
  id: totrans-65
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Navigate to the API documentation by adding */docs* to the URL. Below the General
    section, you should see a Servers select box as shown in [Figure 15-9](#servers_section_ch15).
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 通过将*/docs*添加到URL中，导航到API文档。在常规部分下方，您应该看到一个如图15-9所示的服务器选择框。
- en: '![Servers section added to API documentation](assets/haad_1509.png)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![服务器部分添加到API文档](assets/haad_1509.png)'
- en: Figure 15-9\. Servers section added to API documentation
  id: totrans-68
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图15-9\. 服务器部分添加到API文档
- en: 'To view the OAS file, click the *openapi.json* link at the top of the documentation
    page. (You may need to add a browser extension to format the JSON for readability.)
    Below the `info` section of the OAS file, you should see a new `servers` section
    that looks like the following:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 要查看OAS文件，请点击文档页面顶部的*openapi.json*链接。（您可能需要添加浏览器扩展来格式化JSON以便阅读。）在OAS文件的`info`部分下方，您应该看到一个看起来如下所示的新`servers`部分：
- en: '[PRE6]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Copy the full path of the OAS file from the browser, including *openapi.json*.
    You will use it in the next step.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 从浏览器中复制OAS文件的完整路径，包括*openapi.json*。您将在下一步中使用它。
- en: Creating a GPT Action
  id: totrans-72
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建GPT动作
- en: As shown in [Figure 15-1](#chatgpt_architecture_ch15), your custom GPT will
    contain a custom action inside it. This is the component that calls your API.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 如[图15-1](#chatgpt_architecture_ch15)所示，您的自定义GPT将包含一个自定义动作。这是调用您的API的组件。
- en: At the bottom of the Configure tab, click the “Create new action” button. The
    Add Actions page will be displayed. Leave the Authentication entry as None, because
    your API does not require authentication.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 在配置标签页的底部，点击“创建新动作”按钮。将显示添加动作页面。将认证条目保留为无，因为您的API不需要认证。
- en: Click Import URL, and then paste the full address of your OAS file from the
    previous step. Your display should look like [Figure 15-10](#oas_file_import_ch15)
    at this point.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 点击“导入URL”，然后粘贴上一步中从您的OAS文件复制的完整地址。此时，您的显示应该看起来像[图15-10](#oas_file_import_ch15)。
- en: '![Importing OAS file](assets/haad_1510.png)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![导入OAS文件](assets/haad_1510.png)'
- en: Figure 15-10\. Importing the OAS file
  id: totrans-77
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图15-10\. 导入OAS文件
- en: Click Import. The Schema section will be populated with the contents of your
    OAS file, as shown in [Figure 15-11](#oas_file_populated_ch15).
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 点击导入。模式部分将填充您的OAS文件内容，如[图15-11](#oas_file_populated_ch15)所示。
- en: '![OAS file populated](assets/haad_1511.png)'
  id: totrans-79
  prefs: []
  type: TYPE_IMG
  zh: '![已填充的OAS文件](assets/haad_1511.png)'
- en: Figure 15-11\. OAS file populated
  id: totrans-80
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图15-11\. 已填充的OAS文件
- en: Scroll down below the text of the OAS file and you will see a list of available
    actions. [Figure 15-12](#available_actions_ch15) shows the top of this list.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 在OAS文件文本下方滚动，您将看到可用操作的列表。[图15-12](#available_actions_ch15)显示了列表的顶部。
- en: '![Available actions list](assets/haad_1512.png)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![可用操作列表](assets/haad_1512.png)'
- en: Figure 15-12\. Available actions list
  id: totrans-83
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图15-12\. 可用操作列表
- en: Testing the APIs in Your GPT
  id: totrans-84
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在您的GPT中测试API
- en: You will notice that the “Available actions” section lists all of the endpoints
    in your OAS file. If you wanted to restrict the GPT to a subset of the endpoints
    in your API, you could manually edit this schema to remove any endpoints you did
    not want it to use. All of these endpoints are public read-only, so you will leave
    them in the schema.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 您会注意到“可用操作”部分列出了您OAS文件中的所有端点。如果您想限制GPT只使用API中的一部分端点，您可以手动编辑此模式以删除您不希望它使用的任何端点。所有这些端点都是公开只读的，所以您将保留它们在模式中。
- en: To verify that the connection to your API is set up properly, click the Test
    button next to *v0_health_check*. Your GPT will call the API’s health check endpoint
    and give a status of the API, as shown in [Figure 15-13](#health_check_endpoint_test_ch15).
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 要验证您的API连接是否设置正确，请点击*v0_health_check*旁边的测试按钮。您的GPT将调用API的健康检查端点并给出API的状态，如图[图15-13](#health_check_endpoint_test_ch15)所示。
- en: '![GPT calling health check endpoint](assets/haad_1513.png)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![GPT调用健康检查端点](assets/haad_1513.png)'
- en: Figure 15-13\. GPT calling health check endpoint
  id: totrans-88
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图15-13\. GPT调用健康检查端点
- en: You are ready to add this action to your GPT. Click the Save button. The Share
    GPT dialog will be displayed as shown in [Figure 15-14](#gpt_sharing_options_ch15).
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以将此操作添加到您的GPT中。点击保存按钮。将显示如[图15-14](#gpt_sharing_options_ch15)所示的分享GPT对话框。
- en: '![Share GPT dialog](assets/haad_1514.png)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
  zh: '![分享GPT对话框](assets/haad_1514.png)'
- en: Figure 15-14\. Share GPT dialog
  id: totrans-91
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图15-14\. 分享GPT对话框
- en: Select “Only me” to keep this GPT private. Click Save.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 选择“仅我”以保持此GPT私密。点击保存。
- en: The Settings Saved dialog will be displayed with a direct link to the GPT. You
    do not need to use the link at this time. Click View GPT.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 设置保存对话框将显示一个直接链接到GPT。您现在不需要使用此链接。点击查看GPT。
- en: Chatting with Your Custom GPT
  id: totrans-94
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 与您的自定义GPT聊天
- en: Now that you have created a custom GPT, you will see it displayed in the navigation
    sidebar beneath ChatGPT. As shown in [Figure 15-1](#chatgpt_architecture_ch15),
    your GPT is a separate application from ChatGPT. Now your GPT has the ability
    to access the SWC Fantasy Football API to get information.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经创建了一个自定义GPT，您将在导航侧边栏中看到它位于ChatGPT下方。如图[图15-1](#chatgpt_architecture_ch15)所示，您的GPT是ChatGPT的一个独立应用程序。现在您的GPT有了访问SWC幻想足球API以获取信息的能力。
- en: Select the SWC Fantasy Football Advisor in the navigation. The display should
    look like [Figure 15-15](#swc_fantasy_advisor_ch15).
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 在导航中选择SWC幻想足球顾问。显示应类似于[图15-15](#swc_fantasy_advisor_ch15)。
- en: '![Fantasy advisor ready to chat](assets/haad_1515.png)'
  id: totrans-97
  prefs: []
  type: TYPE_IMG
  zh: '![准备聊天的幻想顾问](assets/haad_1515.png)'
- en: Figure 15-15\. Fantasy Football advisor ready to chat
  id: totrans-98
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图15-15\. 准备聊天的幻想足球顾问
- en: Warning
  id: totrans-99
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 警告
- en: 'Don’t miss the note at the bottom of this page: “ChatGPT can make mistakes.
    Check important info.” It bears repeating that conversations with GPTs are impressive
    and quite convincing, but OpenAI is transparent that LLMs can provide unreliable
    information and hallucinate in their responses.'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 不要错过此页底部的注释：“ChatGPT可能会出错。检查重要信息。”需要重申的是，与GPT的对话令人印象深刻且相当令人信服，但OpenAI明确表示，LLMs可能会提供不可靠的信息并在其响应中产生幻觉。
- en: Some developers have found that GPTs [struggle to process statistics accurately
    for APIs that return large amounts of data](https://oreil.ly/Pncx5). For fantasy
    sports, the stakes are fairly low. But if your usage expands to tasks where accuracy
    is more important, don’t overlook the warnings that OpenAI is clearly publishing.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 一些开发者发现，GPTs [在处理返回大量数据的API的统计数据时准确性存在困难](https://oreil.ly/Pncx5)。对于幻想体育来说，风险相对较低。但如果你的使用扩展到对准确性要求更高的任务，不要忽视OpenAI明确发布的警告。
- en: 'Start your conversation by repeating the question you asked before: **`What
    are the specific league names from the SportsWorldCentral Fantasy Football platform?`**'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 通过重复您之前提出的问题开始您的对话：**`SportsWorldCentral Fantasy Football平台中具体的联赛名称是什么？`**
- en: The GPT will state that it wants permission to call your API. Click Always Allow.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: GPT会声明它想要调用您的API的权限。点击“始终允许”。
- en: The GPT will state that it talked to your API. It also will show that it found
    the `limit` parameter and used a value of 10 to limit the number of results.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: GPT会声明它已经与您的API进行了交流。它还会显示它找到了`limit`参数并使用值为10来限制结果数量。
- en: Then, it will answer the questions using the information returned from your
    API, as shown in [Figure 15-16](#api_call_results_ch15). It has overcome the knowledge
    gap by accessing data from your API.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，它将使用从您的API返回的信息来回答问题，如图[图15-16](#api_call_results_ch15)所示。它通过访问您的API数据来克服了知识差距。
- en: '![Results from API call](assets/haad_1516.png)'
  id: totrans-106
  prefs: []
  type: TYPE_IMG
  zh: '![API调用结果](assets/haad_1516.png)'
- en: Figure 15-16\. Results from API call
  id: totrans-107
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图15-16. API调用结果
- en: 'To see the API calls that the GPT made, look at the Terminal output in your
    Codespace. You will see the API calls made:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 要查看GPT做出的API调用，请查看您的Codespace中的终端输出。您将看到以下API调用：
- en: '[PRE7]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '[![1](assets/1.png)](#co_using_chatgpt_to_call_your_api_CO2-1)'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: '[![1](assets/1.png)](#co_using_chatgpt_to_call_your_api_CO2-1)'
- en: This is a call to the health check endpoint.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个调用health check端点的请求。
- en: '[![2](assets/2.png)](#co_using_chatgpt_to_call_your_api_CO2-2)'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: '[![2](assets/2.png)](#co_using_chatgpt_to_call_your_api_CO2-2)'
- en: This is a call to the get leagues endpoint.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个调用get leagues端点的请求。
- en: 'In this case, the custom GPT made the right choices: it used the health check
    endpoint to make sure the API was available, and it used the get leagues endpoint
    to see available SWC leagues.'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，定制的GPT做出了正确的选择：它使用健康检查端点来确保API可用，并使用get leagues端点来查看可用的SWC联赛。
- en: Congratulations! You have created a custom GPT and provided it access to your
    API through a custom action.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 恭喜！您已经创建了一个定制的GPT，并通过自定义操作提供了对您的API的访问权限。
- en: Take time and experiment with questions that will encourage the agent to use
    more of your API endpoints. Look at the Terminal output to see the API calls that
    are generated. How can you influence which API it calls? How can you guide it
    to answer more difficult questions using the tools? How can you stump it?
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 花时间并尝试一些能够鼓励代理使用更多您API端点的问题。查看终端输出以查看生成的API调用。您如何影响它调用哪个API？您如何指导它使用工具回答更难的问题？您如何使其陷入困境？
- en: Completing Your Part III Portfolio Project
  id: totrans-117
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 完成您的第三部分组合项目
- en: You have reached the end of Part III, congratulations! As with Parts I and II,
    there is some housekeeping required to get the portfolio project ready to share.
    You’ll move the code out of the chapter folders and into functional folders, then
    update *README.md*.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 您已经完成了第三部分，恭喜！与第一部分和第二部分一样，需要做一些整理工作以使组合项目准备好分享。您将把代码从章节文件夹移到功能文件夹中，然后更新*README.md*。
- en: Before you make these changes, you’ll save a copy of your files to a separate
    GitHub branch, named *learning-branch*, so that it’s still available if you want
    to continue working through the code.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 在进行这些更改之前，您将保存您文件的副本到名为*learning-branch*的单独GitHub分支，以便在您想要继续处理代码时仍然可用。
- en: 'Create the new branch from the command line as follows:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下命令从命令行创建新分支：
- en: '[PRE8]'
  id: totrans-121
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '[![1](assets/1.png)](#co_using_chatgpt_to_call_your_api_CO3-1)'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: '[![1](assets/1.png)](#co_using_chatgpt_to_call_your_api_CO3-1)'
- en: Create a new branch named *learning-branch* locally based on the *main* branch.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 在本地基于*main*分支创建一个名为*learning-branch*的新分支。
- en: '[![2](assets/2.png)](#co_using_chatgpt_to_call_your_api_CO3-2)'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: '[![2](assets/2.png)](#co_using_chatgpt_to_call_your_api_CO3-2)'
- en: Push this new branch to your remote repository on GitHub.com.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 将这个新分支推送到GitHub.com上的远程仓库。
- en: 'Next, you will make some changes to the directory structure. Enter the following
    commands:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，您将对目录结构进行一些更改。输入以下命令：
- en: '[PRE9]'
  id: totrans-127
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '[![1](assets/1.png)](#co_using_chatgpt_to_call_your_api_CO4-1)'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: '[![1](assets/1.png)](#co_using_chatgpt_to_call_your_api_CO4-1)'
- en: Switch your Codespace back to the *main* branch of your repository.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 将您的Codespace切换回仓库的*main*分支。
- en: '[![2](assets/2.png)](#co_using_chatgpt_to_call_your_api_CO4-2)'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: '[![2](assets/2.png)](#co_using_chatgpt_to_call_your_api_CO4-2)'
- en: Make a new directory for the files from Chapter 13.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 为第13章的文件创建一个新的目录。
- en: '[![3](assets/3.png)](#co_using_chatgpt_to_call_your_api_CO4-3)'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: '[![3](assets/3.png)](#co_using_chatgpt_to_call_your_api_CO4-3)'
- en: Move Chapter 13’s files to the new folder.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 将第13章的文件移动到新文件夹中。
- en: '[![4](assets/4.png)](#co_using_chatgpt_to_call_your_api_CO4-4)'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: '[![4](assets/4.png)](#co_using_chatgpt_to_call_your_api_CO4-4)'
- en: Make a new directory for the files from Chapter 14.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 为第 14 章的文件创建一个新的目录。
- en: '[![5](assets/5.png)](#co_using_chatgpt_to_call_your_api_CO4-5)'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: '[![5](assets/5.png)](#co_using_chatgpt_to_call_your_api_CO4-5)'
- en: Move Chapter 14’s files to the new folder.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 将第 14 章的文件移动到新文件夹。
- en: '[![6](assets/6.png)](#co_using_chatgpt_to_call_your_api_CO4-6)'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: '[![6](assets/6.png)](#co_using_chatgpt_to_call_your_api_CO4-6)'
- en: Remove all the subdirectories and their files.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 删除所有子目录及其文件。
- en: 'To see the directory structure of the completed project, run the following
    command:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 要查看完成项目的目录结构，请运行以下命令：
- en: '[PRE10]'
  id: totrans-141
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'Now update the *README.md* file to showcase your work. Here is a start, and
    then you can add your own thoughts:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 现在更新 *README.md* 文件以展示你的工作。这是一个开始，然后你可以添加你自己的想法：
- en: '[PRE11]'
  id: totrans-143
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Now commit these changes to GitHub, and your Part III portfolio project is ready
    to share with the world. Congratulations on completing your Part III capstone!
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 现在将这些更改提交到 GitHub，你的第三部分项目组合就准备好与世界分享了。恭喜你完成第三部分的项目！
- en: Summary
  id: totrans-145
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: 'In this chapter, you used OpenAI’s ChatGPT to interact with your API:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你使用了 OpenAI 的 ChatGPT 与你的 API 进行交互：
- en: You created a custom GPT.
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你创建了一个自定义 GPT。
- en: You created a custom action to give your GPT access to the SWC API.
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你创建了一个自定义操作，以便你的 GPT 可以访问 SWC API。
- en: You updated the contents of your Part III portfolio project.
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你更新了你的第三部分项目组合的内容。
