- en: Chapter 14\. Using APIs with LangChain
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第 14 章\. 使用 LangChain 与 API 一起使用
- en: A system is more “agentic” the more an LLM decides how the system can behave.
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 一个系统越“具有代理性”，LLM 决定系统如何行为的情况就越多。
- en: ''
  id: totrans-2
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Harrison Chase, LangChain creator
  id: totrans-3
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 哈里森·蔡斯，LangChain 创建者
- en: AI applications use LLMs as a natural language interface with users, and researchers
    are exploring ways to use the LLMs to perform multistep tasks. This chapter examines
    two important ways that APIs and LLMs are used together to create AI applications.
    First, you will look at calling LLMs using APIs, and then you will reverse the
    roles and call APIs with LLMs. You will use LangChain for both of these tasks.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: AI 应用程序使用 LLM 作为与用户的自然语言界面，研究人员正在探索使用 LLM 来执行多步任务的方法。本章将探讨两种重要的方法，API 和 LLM
    如何结合使用来创建 AI 应用程序。首先，您将查看使用 API 调用 LLM，然后您将反转角色并使用 LLM 调用 API。您将使用 LangChain 来完成这两个任务。
- en: LangChain and its related project, LangGraph, are open source frameworks for
    creating *agentic* applications—applications that use LLMs to control the system
    behavior. Although many developers build these applications by calling the LLM
    APIs directly and performing custom coding to interact with them, LangChain and
    LangGraph standardize many of the tasks required. You can think of them as frameworks
    that sit on top of the APIs or models.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: LangChain 及其相关项目 LangGraph 是用于创建 *具有代理性* 应用程序的开放源代码框架——这些应用程序使用 LLM 来控制系统行为。尽管许多开发者通过直接调用
    LLM API 并执行自定义编码来与它们交互来构建这些应用程序，但 LangChain 和 LangGraph 标准化了所需的大部分任务。您可以将它们视为位于
    API 或模型之上的框架。
- en: 'Here are a few new terms:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有一些新术语：
- en: Agent
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 代理
- en: Harrison Chase defines an agent as “a system that uses an LLM to decide the
    control flow of an application.” Agents are not preprogrammed, like traditional
    software—they use a model to reason and decide the flow of a conversation. They
    can execute tool calls that are suggested by function-calling models.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 哈里森·蔡斯将代理定义为“一个使用 LLM 来决定应用程序控制流的系统。”代理不是预先编程的，就像传统软件一样——它们使用模型进行推理并决定对话的流程。它们可以执行由函数调用模型建议的工具调用。
- en: Function-calling model
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 函数调用模型
- en: This is a specialized type of model that considers available *functions* or
    *tools* and suggests when they should be used. Despite the name, the models don’t
    call the tool directly; they give that suggestion to *agents*, who do the calling.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一种特殊的模型，它考虑可用的 *函数* 或 *工具* 并建议何时使用它们。尽管名称如此，这些模型并不直接调用工具；它们将建议提供给 *代理*，由代理进行调用。
- en: Models
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 模型
- en: These are the AI models that LangChain users call. LangChain can use models
    that are downloaded locally or called via web APIs provided by model providers.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 这些是 LangChain 用户调用的 AI 模型。LangChain 可以使用本地下载的模型或通过模型提供商提供的 Web API 调用的模型。
- en: Model families
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 模型系列
- en: These are multiple models that share a name and architecture.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 这些是具有相同名称和架构的多个模型。
- en: Toolkit
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 工具包
- en: This is a collection of multiple tools that an agent will use to perform tasks.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个集合，包含代理将用于执行任务的多个工具。
- en: Tools or functions
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 工具或函数
- en: This is code that provides extra skills to an agent. A simple Python function
    might perform mathematical operations. You will create a tool that calls the SWC
    API.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 这是为代理提供额外技能的代码。一个简单的 Python 函数可能执行数学运算。您将创建一个调用 SWC API 的工具。
- en: The software introduced in this chapter will focus on using the LangChain ecosystem
    with APIs. [Table 14-1](#tools_table_chapter_14) displays the new tools you will
    use.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 本章中介绍的应用软件将专注于使用 LangChain 生态系统与 API 一起使用。[表 14-1](#tools_table_chapter_14)
    显示了您将使用的新工具。
- en: Table 14-1\. Tools used in this chapter
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 表 14-1\. 本章使用的工具
- en: '| Software name | Version | Purpose |'
  id: totrans-21
  prefs: []
  type: TYPE_TB
  zh: '| 软件名称 | 版本 | 用途 |'
- en: '| --- | --- | --- |'
  id: totrans-22
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| LangChain | 0.3 | Python library used to create tools and toolkits that allow
    agents to use your API |'
  id: totrans-23
  prefs: []
  type: TYPE_TB
  zh: '| LangChain | 0.3 | 用于创建工具和工具包的 Python 库，允许代理使用您的 API |'
- en: '| LangGraph | 0.2 | Python library used to create an agent |'
  id: totrans-24
  prefs: []
  type: TYPE_TB
  zh: '| LangGraph | 0.2 | 用于创建代理的 Python 库 |'
- en: '| Anthropic Claude | 3.5 Sonnet | Model used to provide reasoning to the LangGraph
    agent |'
  id: totrans-25
  prefs: []
  type: TYPE_TB
  zh: '| Anthropic Claude | 3.5 Sonnet | 用于向 LangGraph 代理提供推理的模型 |'
- en: '| Pydantic | 2 | Python library used to perform validation in your toolkit
    |'
  id: totrans-26
  prefs: []
  type: TYPE_TB
  zh: '| Pydantic | 2 | 用于在您的工具包中执行验证的 Python 库 |'
- en: '| swcpy | NA | SDK created in [Chapter 7](ch07.html#chapter_7) for your API
    |'
  id: totrans-27
  prefs: []
  type: TYPE_TB
  zh: '| swcpy | NA | SDK 创建于 [第 7 章](ch07.html#chapter_7) 用于您的 API |'
- en: Calling AI Using APIs (via LangChain)
  id: totrans-28
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 通过 LangChain 使用 API 调用 AI
- en: '[Figure 14-1](#langgraph_architecture_ch14) shows the high-level architecture
    of the project you will create in this chapter.'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 14-1](#langgraph_architecture_ch14) 展示了您在本章中创建的项目的高级架构。'
- en: To understand the capabilities that LangChain is harnessing, it is helpful to
    look at the APIs that LangChain interacts with. The [LangChain “Chat Models” page](https://oreil.ly/2elFn)
    lists more than 60 providers of chat models. The list also displays which models
    are function-calling, which will be important in this chapter because they are
    capable of using tools to call APIs.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 要了解LangChain正在利用的能力，查看LangChain交互的API很有帮助。LangChain的“聊天模型”页面[“Chat Models”](https://oreil.ly/2elFn)列出了60多个聊天模型提供者。列表还显示了哪些模型可以进行函数调用，这在本章中非常重要，因为它们能够使用工具调用API。
- en: '![High-level architecture](assets/haad_1401.png)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
  zh: '![高级架构](assets/haad_1401.png)'
- en: Figure 14-1\. High-level architecture
  id: totrans-32
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图14-1\. 高级架构
- en: 'If you look at the documentation for these model providers, they typically
    provide documentation for their APIs and allow you to register for an API key
    (for a fee). These companies follow many of the best practices from [Chapter 6](ch06.html#chapter_6):
    interactive API documentation, SDKs in Python and other languages, methods of
    contacting support, and many other features. For these providers, APIs are not
    a side business—they *are* the business.'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你查看这些模型提供者的文档，它们通常会提供其API的文档，并允许你注册API密钥（可能需要付费）。这些公司遵循了[第6章](ch06.html#chapter_6)中的许多最佳实践：交互式API文档、Python和其他语言的SDK、联系支持的方法以及许多其他功能。对于这些提供者来说，API不是一项副业——*它是业务的核心*。
- en: Warning
  id: totrans-34
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 警告
- en: 'While it’s tempting to focus only on the potential of LLMs, the model providers
    also publish some sobering warnings. The providers often provide a *model card*
    or *system card* that describes the intended use and limitations of their models.
    At the time of this writing, these cards of major LLMs list risks such as bias,
    hallucinations, mistakes, and harmful content. For example, Anthropic states in
    their article, [“The Claude 3 Model Family: Opus, Sonnet, Haiku”: “The models
    should not be used on their own in high-stakes situations”](https://oreil.ly/vq7FK).'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: '虽然专注于LLM（大型语言模型）的潜力很有吸引力，但模型提供者也发布了一些令人清醒的警告。提供者通常会提供一份*模型卡*或*系统卡*，描述其模型的使用意图和限制。在撰写本文时，这些主要LLM的卡片列出了风险，如偏见、幻觉、错误和有害内容。例如，Anthropic在其文章[“The
    Claude 3 Model Family: Opus, Sonnet, Haiku”](https://oreil.ly/vq7FK)中提到：“这些模型不应在高风险情况下单独使用”。'
- en: In this chapter, you will be using a read-only fantasy football API, which is
    low risk.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你将使用一个只读的幻想足球API，风险较低。
- en: Creating a LangGraph Agent
  id: totrans-37
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建LangGraph代理
- en: Letting an LLM decide the control flow of an application (i.e. what we call
    agents) is attractive, as they can unlock a variety of tasks that couldn’t previously
    be automated. In practice, however, it is incredibly difficult to build systems
    that reliably execute on these tasks.
  id: totrans-38
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 让LLM决定应用程序的控制流程（即我们所说的代理）很有吸引力，因为它们可以解锁以前无法自动化的各种任务。然而，在实践中，构建能够可靠执行这些任务的系统极其困难。
- en: ''
  id: totrans-39
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'LangChain blog post, [“Announcing LangGraph v0.1 & LangGraph Cloud: Running
    agents at scale, reliably”](https://oreil.ly/KoxAw), June 2024'
  id: totrans-40
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 'LangChain博客文章，[“Announcing LangGraph v0.1 & LangGraph Cloud: Running agents
    at scale, reliably”](https://oreil.ly/KoxAw)，2024年6月'
- en: LangGraph is a LangChain-related project focused on creating applications that
    have one or more agents working together. LangChain has methods for using agents,
    which have recently been labeled as *legacy methods*, at the time of this writing.
    LangGraph is intended to be an improvement on these methods by allowing more developer
    control and supporting multiagent applications.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: LangGraph是一个与LangChain相关的项目，专注于创建一个或多个代理协同工作的应用程序。LangChain有使用代理的方法，这些方法在撰写本文时被标记为*遗留方法*。LangGraph旨在通过提供更多开发者控制和支持多代理应用程序来改进这些方法。
- en: LangGraph uses some terminology from mathematical graph theory (see [“Orchestrating
    the Data Pipeline with Apache Airflow”](ch10.html#data_pipeline_apache_airflow)).
    The logical flow of LangGraph agents is represented by *nodes*, which are processes
    that update the *state* of the application. The nodes are connected by *edges*,
    which are one-way flows between one node and another. Where Airflow had *acyclic*
    graphs that begin at a start node and go in one direction to an end node, LangGraph
    allows *cyclical* graphs, where nodes and edges can loop multiple times. For example,
    a loop may allow a user to ask multiple questions to a model before getting the
    final answer.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: LangGraph使用了一些来自数学图论的专业术语（参见[“使用Apache Airflow编排数据管道”](ch10.html#data_pipeline_apache_airflow)）。LangGraph代理的逻辑流程由*节点*表示，这些节点是更新应用程序*状态*的过程。节点通过*边*连接，这些边是节点之间的一向流。与Airflow中的*无环*图不同，它从起始节点开始，单向流向结束节点，LangGraph允许*循环*图，其中节点和边可以多次循环。例如，一个循环可能允许用户在得到最终答案之前向模型提出多个问题。
- en: '[Figure 14-2](#directed_cyclic_graph_ch14) shows how nodes and edges relate
    to each other in a *directed cyclic graph* that contains loops.'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: '[图14-2](#directed_cyclic_graph_ch14)显示了包含循环的有向循环图中节点和边之间的关系。'
- en: '![Directed cyclic graph](assets/haad_1402.png)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
  zh: '![有向循环图](assets/haad_1402.png)'
- en: Figure 14-2\. Directed cyclic graph
  id: totrans-45
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图14-2\. 有向循环图
- en: You will be creating an agent in this chapter that can be represented by a directed
    cyclic graph.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您将创建一个可以用有向循环图表示的代理。
- en: Signing Up for Anthropic
  id: totrans-47
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 注册Anthropic
- en: You will be using a model from Anthropic, so you need to sign up for an Anthropic
    account at the [“Build with Claude” web page](https://console.anthropic.com/login).
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 您将使用Anthropic的一个模型，因此您需要在[“使用Claude构建”网页](https://console.anthropic.com/login)上注册一个Anthropic账户。
- en: To use the Anthropic API, you will need to upgrade your initial account to a
    Build Plan and add funds to your account. To limit potential overspending, I suggest
    initially adding $5 and disabling auto-reload. This means the maximum amount you
    can spend is $5, even if your API key is misused.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用Anthropic API，您需要将您的初始账户升级到构建计划，并向您的账户添加资金。为了限制潜在的过度支出，我建议最初添加5美元并禁用自动重新加载。这意味着即使您的API密钥被误用，您最多也只能花费5美元。
- en: Next, navigate to the [Anthropic API keys page](https://oreil.ly/fcaYA) and
    select Create Key. Give the key a name such as **`secret-api-key`** and select
    the Default workspace. Your display should look like [Figure 14-3](#anthropic_api_key_ch14).
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，导航到[Anthropic API密钥页面](https://oreil.ly/fcaYA)并选择创建密钥。给密钥起一个像**`secret-api-key`**这样的名字，并选择默认工作区。您的显示应该看起来像[图14-3](#anthropic_api_key_ch14)。
- en: '![Creating Anthropic API key](assets/haad_1403.png)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![创建Anthropic API密钥](assets/haad_1403.png)'
- en: Figure 14-3\. Creating an Anthropic API key
  id: totrans-52
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图14-3\. 创建Anthropic API密钥
- en: Click Add. You will be prompted to “Save Your API key.” This is the only time
    the key will be displayed. Store this key in a secure location.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 点击添加。您将被提示“保存您的API密钥”。这是唯一一次密钥会被显示。请将此密钥存储在安全的位置。
- en: Note
  id: totrans-54
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: If you lose your Anthropic API key or think it may have been exposed, delete
    it from the keys page and create a new one. This is called *rotating* a credential,
    and it is a convenient way to lower the risk of your API key being abused.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您丢失了Anthropic API密钥或认为它可能已被泄露，请从密钥页面删除它并创建一个新的。这被称为*轮换*凭证，这是一种降低API密钥被滥用的风险的便捷方式。
- en: Launching Your GitHub Codespace
  id: totrans-56
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 启动您的GitHub Codespace
- en: Before you launch the GitHub Codespace for this chapter, you want to add the
    Anthropic API key as a secret in your Codespace. This will allow you to use the
    Anthropic models with LangGraph.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 在您启动本章的GitHub Codespace之前，您想在您的Codespace中添加Anthropic API密钥作为秘密。这将允许您使用LangGraph与Anthropic模型。
- en: 'Follow the instructions for [“Adding a secret”](https://oreil.ly/VGSJ3) and
    create a new secret with the following information:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 按照说明进行[“添加一个秘密”](https://oreil.ly/VGSJ3)并使用以下信息创建一个新的秘密：
- en: '*Name*: `ANTHROPIC_API_KEY`'
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*名称*：`ANTHROPIC_API_KEY`'
- en: '*Value*: Use the value of the Anthropic API key you created in the previous
    section.'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*值*：使用上一节中创建的Anthropic API密钥的值。'
- en: '*Repository access:* Select the `ai-project` repository.'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*仓库访问*：选择`ai-project`仓库。'
- en: When completed, you should see the key saved as shown in [Figure 14-4](#codespaces_secret_ch14).
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 完成后，您应该会看到密钥已保存，如图[图14-4](#codespaces_secret_ch14)所示。
- en: '![Codespaces secrets](assets/haad_1404.png)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![Codespaces秘密](assets/haad_1404.png)'
- en: Figure 14-4\. Codespaces secrets
  id: totrans-64
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图14-4\. Codespaces秘密
- en: Installing the New Libraries in Your Codespace
  id: totrans-65
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在您的Codespace中安装新库
- en: 'Now launch your Codespace. You will be working with the Part III GitHub Codespace
    that you created in [“Cloning the Part III Repository”](ch12.html#cloning_part_3_sect).
    If you haven’t created your Part III Codespace yet, you can complete that section
    now. To install the libraries you need for this chapter, create a file named *chapter14/requirements.txt*:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 现在启动你的 Codespace。你将使用你在 [“克隆第三部分仓库”](ch12.html#cloning_part_3_sect) 中创建的 Part
    III GitHub Codespace。如果你还没有创建你的 Part III Codespace，你现在可以完成该部分。要安装本章所需的库，创建一个名为
    *chapter14/requirements.txt* 的文件：
- en: '[PRE0]'
  id: totrans-67
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Update *chapter14/requirements.txt* with the following contents:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 使用以下内容更新 *chapter14/requirements.txt*：
- en: '[PRE1]'
  id: totrans-69
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '[![1](assets/1.png)](#co_using_apis_with_langchain_CO1-1)'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: '[![1](assets/1.png)](#co_using_apis_with_langchain_CO1-1)'
- en: This installs the base LangChain library and its dependencies.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 这将安装基础 LangChain 库及其依赖项。
- en: '[![2](assets/2.png)](#co_using_apis_with_langchain_CO1-2)'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: '[![2](assets/2.png)](#co_using_apis_with_langchain_CO1-2)'
- en: This library is used for the specific model you use in this chapter.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 这个库用于本章中你使用的特定模型。
- en: '[![3](assets/3.png)](#co_using_apis_with_langchain_CO1-3)'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: '[![3](assets/3.png)](#co_using_apis_with_langchain_CO1-3)'
- en: This is the LangGraph library used to define your agent.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 这是用于定义你的代理的 LangGraph 库。
- en: 'Execute the following command to install the new libraries in your Codespace,
    and make sure to upgrade to the latest version available:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下命令以在你的 Codespace 中安装新库，并确保升级到最新版本：
- en: '[PRE2]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: You should see a message that states that these libraries were successfully
    installed.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该会看到一个消息，表明这些库已成功安装。
- en: Creating Your Jupyter Notebook
  id: totrans-79
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建您的 Jupyter Notebook
- en: You will be using a Jupyter Notebook to implement a conversational chat agent,
    based on an example from the [LangChain GitHub repository](https://oreil.ly/U-TJF).
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 你将使用 Jupyter Notebook 来实现一个基于 [LangChain GitHub 仓库](https://oreil.ly/U-TJF)示例的对话聊天代理。
- en: 'To get started, run the following commands in the Terminal window to create
    the new directory and the Jupyter Notebook you will be using in this chapter:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始，请在终端窗口中运行以下命令以创建新目录和本章中你将使用的 Jupyter Notebook：
- en: '[PRE3]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Click the *langgraph_notebook.ipynb* file to open it. In the top-right of the
    file, click Select Kernel. Codespaces should prompt you to “Install/Enable suggested
    extensions Python + Jupyter”—select this. Click Install in the additional pop-up
    window, if prompted. This will install some extensions to VS Code.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 点击 *langgraph_notebook.ipynb* 文件以打开它。在文件右上角，点击选择内核。Codespaces 应会提示你“安装/启用建议的扩展
    Python + Jupyter”——选择此选项。如果提示，点击安装按钮。这将安装一些 VS Code 的扩展。
- en: After the installation completes, the title of the window will change to Select
    Another Kernel. Select Python Environments. The title of the window will change
    to Select a Python Environment. One Python version should be listed with a star
    next to it—select this Python version.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 安装完成后，窗口标题将更改为选择另一个内核。选择 Python 环境。窗口标题将更改为选择 Python 环境。应该列出一个带有星号的 Python 版本——选择此
    Python 版本。
- en: 'Click “+ Markdown” to create a new Markdown cell. Enter the following title
    in the Markdown cell:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 点击“+ Markdown”以创建一个新的 Markdown 单元格。在 Markdown 单元格中输入以下标题：
- en: '[PRE4]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Run this cell by clicking the play icon on the left of the cell or by pressing
    Shift-Enter. You should see your message formatted as a title.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 通过点击单元格左侧的播放图标或按 Shift-Enter 运行此单元格。你应该看到你的消息格式化为标题。
- en: 'Create another Markdown cell and run it with the following:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 创建另一个 Markdown 单元格，并使用以下内容运行它：
- en: '[PRE5]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Hover your cursor below this cell and click “+ Code” to create a new Python
    cell. Enter the following code in the Python cell:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 将鼠标悬停在下面的单元格下方并点击“+ Code”以创建一个新的 Python 单元格。在 Python 单元格中输入以下代码：
- en: '[PRE6]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '[![1](assets/1.png)](#co_using_apis_with_langchain_CO2-1)'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: '[![1](assets/1.png)](#co_using_apis_with_langchain_CO2-1)'
- en: This import defines the messages you’ll use to communicate with the agent.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 这个导入定义了你将用于与代理通信的消息。
- en: '[![2](assets/2.png)](#co_using_apis_with_langchain_CO2-2)'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: '[![2](assets/2.png)](#co_using_apis_with_langchain_CO2-2)'
- en: This is the library for using the Anthropic model.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 这是用于使用 Anthropic 模型的库。
- en: '[![3](assets/3.png)](#co_using_apis_with_langchain_CO2-3)'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: '[![3](assets/3.png)](#co_using_apis_with_langchain_CO2-3)'
- en: The following libraries enable different parts of the LangGraph framework.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 以下库使 LangGraph 框架的不同部分得以实现。
- en: '[![4](assets/4.png)](#co_using_apis_with_langchain_CO2-4)'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: '[![4](assets/4.png)](#co_using_apis_with_langchain_CO2-4)'
- en: This will be used for the formatting of the messages returned by the agent.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 这将用于格式化代理返回的消息。
- en: '[![5](assets/5.png)](#co_using_apis_with_langchain_CO2-5)'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: '[![5](assets/5.png)](#co_using_apis_with_langchain_CO2-5)'
- en: This will be used to display a visual view of the graph.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 这将用于显示图形的视觉视图。
- en: Placing all the imports at the top of your notebook helps keep track of the
    libraries you are using. These imports will work for all the cells in this Jupyter
    Notebook.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 将所有导入放在笔记本的顶部有助于跟踪你正在使用的库。这些导入将适用于此Jupyter Notebook中的所有单元格。
- en: 'Add another Markdown cell with the following text:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 添加另一个Markdown单元格，内容如下：
- en: '[PRE7]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Add and run a Python code cell with the following:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 添加并运行以下Python代码单元格：
- en: '[PRE8]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '[![1](assets/1.png)](#co_using_apis_with_langchain_CO3-1)'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: '[![1](assets/1.png)](#co_using_apis_with_langchain_CO3-1)'
- en: This statement removes any existing logging handlers configured by Codespaces.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 此语句删除由Codespaces配置的任何现有日志处理程序。
- en: '[![2](assets/2.png)](#co_using_apis_with_langchain_CO3-2)'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: '[![2](assets/2.png)](#co_using_apis_with_langchain_CO3-2)'
- en: This sets the logging level to record in the log. Review [Table 7-1](ch07.html#python_logging_levels_ch7)
    for more details about Python logging.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 这将设置日志级别以记录到日志中。请参阅[表7-1](ch07.html#python_logging_levels_ch7)以获取有关Python日志的更多详细信息。
- en: 'Add another Markdown cell with the following text:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 添加另一个Markdown单元格，内容如下：
- en: '[PRE9]'
  id: totrans-112
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Add and run a Python code cell with the following:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 添加并运行以下Python代码单元格：
- en: '[PRE10]'
  id: totrans-114
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '[![1](assets/1.png)](#co_using_apis_with_langchain_CO4-1)'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: '[![1](assets/1.png)](#co_using_apis_with_langchain_CO4-1)'
- en: This initializes the Anthropic model. The `temperature` sets how creative the
    responses are. Lower is less creative and more predictable.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 这初始化了Anthropic模型。`temperature`设置响应的创造力。数值越低，创造力越低，可预测性越高。
- en: '[![2](assets/2.png)](#co_using_apis_with_langchain_CO4-2)'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: '[![2](assets/2.png)](#co_using_apis_with_langchain_CO4-2)'
- en: This function is used to send messages to the model using the `state` object.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 此函数用于使用`state`对象向模型发送消息。
- en: '[![3](assets/3.png)](#co_using_apis_with_langchain_CO4-3)'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: '[![3](assets/3.png)](#co_using_apis_with_langchain_CO4-3)'
- en: The `workflow` is used to define the tasks available to the agent.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: '`workflow`用于定义代理可用的任务。'
- en: '[![4](assets/4.png)](#co_using_apis_with_langchain_CO4-4)'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: '[![4](assets/4.png)](#co_using_apis_with_langchain_CO4-4)'
- en: The `agent` node will use the `call_model` function defined above.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: '`agent`节点将使用上面定义的`call_model`函数。'
- en: '[![5](assets/5.png)](#co_using_apis_with_langchain_CO4-5)'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: '[![5](assets/5.png)](#co_using_apis_with_langchain_CO4-5)'
- en: This defines the start of the graph, which will directly call the `agent` node.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 这定义了图的开始，它将直接调用`agent`节点。
- en: '[![6](assets/6.png)](#co_using_apis_with_langchain_CO4-6)'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: '[![6](assets/6.png)](#co_using_apis_with_langchain_CO4-6)'
- en: This statement compiles the graph into a LangChain `Runnable` object named `app`.
    (For more information, see the [documentation for the Runnable interface](https://oreil.ly/UJJzq).)
    The `app` object will act as the agent.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 此语句将图编译成一个名为`app`的LangChain `Runnable`对象。（有关更多信息，请参阅[Runnable接口的文档](https://oreil.ly/UJJzq)。）`app`对象将充当代理。
- en: 'Viewing a visual representation of the graph will help you see the nodes and
    edges that were created in this code, and the flow of the agent you created. Add
    another Markdown cell with the following text:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 查看图的视觉表示将帮助你看到在此代码中创建的节点和边，以及你创建的代理的流程。添加另一个Markdown单元格，内容如下：
- en: '[PRE11]'
  id: totrans-128
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Add and run a Python code cell with the following:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 添加并运行以下Python代码单元格：
- en: '[PRE12]'
  id: totrans-130
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Displaying an image of the graph demonstrates the flow of your agent. You should
    see an image that matches [Figure 14-5](#graph_visual_1_ch14). This shows that
    the graph will start and a message will be sent to the agent without referencing
    any other nodes.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 显示图的图像展示了你的代理的流程。你应该看到一个与[图14-5](#graph_visual_1_ch14)匹配的图像。这表明图将开始，并将向代理发送消息，而不引用任何其他节点。
- en: '![Graph of the basic agent](assets/haad_1405.png)'
  id: totrans-132
  prefs: []
  type: TYPE_IMG
  zh: '![基本代理的图](assets/haad_1405.png)'
- en: Figure 14-5\. Graph of the basic agent
  id: totrans-133
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图14-5。基本代理的图
- en: Chatting with the LangGraph Agent
  id: totrans-134
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 与LangGraph代理聊天
- en: You are ready to have a conversation with the agent you have created. You will
    accomplish this by using the `app.invoke()` method along with a `messages` object.
    The call to the `invoke()` method also includes a `config` object with a `thread_id`
    value. The `thread_id` allows the agent to remember previous messages in the conversation.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 你现在可以与创建的代理进行对话了。你将通过使用`app.invoke()`方法和`messages`对象来完成此操作。对`invoke()`方法的调用还包括一个包含`thread_id`值的`config`对象。`thread_id`允许代理记住对话中的先前消息。
- en: 'Add another Markdown cell with the following text:'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 添加另一个Markdown单元格，内容如下：
- en: '[PRE13]'
  id: totrans-137
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Add and run a Python code cell with the following:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 添加并运行以下Python代码单元格：
- en: '[PRE14]'
  id: totrans-139
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: This is how you will chat with your agent. The `app.invoke` command sends the
    `messages` object and adds a question as a `HumanMessage`. The `config` object
    passes a `thread_id` so that the agent knows you are in the same conversation.
    While you are using this `thread_id`, the agent will remember the previous messages
    in the same conversation. After each `invoke()` statement, the `final_state` object
    contains a list of messages between the model and the human.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是你将与你的代理进行聊天的方式。`app.invoke` 命令发送 `messages` 对象，并将一个问题作为 `HumanMessage` 添加。`config`
    对象传递一个 `thread_id`，以便代理知道你处于同一个对话中。当你使用这个 `thread_id` 时，代理将记住同一对话中的先前消息。在每个 `invoke()`
    语句之后，`final_state` 对象包含模型和人类之间的消息列表。
- en: To get the most recent message in the conversation, you will display `final_state["messages"][-1].content`.
    The messages will have Markdown formatting, so you can use the `display(Markdown())`
    statement to format them correctly.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 要获取对话中最新的消息，你将显示 `final_state["messages"][-1].content`。这些消息将具有 Markdown 格式，因此你可以使用
    `display(Markdown())` 语句来正确地格式化它们。
- en: 'Remember that models are *nondeterministic*, even with a temperature setting
    of zero. This means that each interaction may be slightly different. But if your
    call to the graph is successful, you should see a message similar to this:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 记住，模型是 *非确定性的*，即使温度设置为零也是如此。这意味着每次交互可能略有不同。但如果你对图的成功调用，你应该看到一条类似以下的消息：
- en: '[PRE15]'
  id: totrans-143
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Note
  id: totrans-144
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: If you receive an error at this step related to the API key, check to make sure
    that you have added funds to your Anthropic account, created an API key, and set
    it in your Codespaces secrets. If any of these steps were skipped, you won’t be
    able to use the Anthropic model in this example.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你在这一步遇到与 API 密钥相关的错误，请检查你是否已经向你的 Anthropic 账户充值，创建了一个 API 密钥，并将其设置在你的 Codespaces
    机密中。如果这些步骤中的任何一个被跳过了，你将无法使用本例中的 Anthropic 模型。
- en: 'It appears that the Anthropic model has been trained with historical information
    about the NFL. Let’s see how it does when we ask questions about the SportsWorldCentral
    app. Add and run a Python code cell with the following:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 看起来 Anthropic 模型已经用关于 NFL 的历史信息进行了训练。让我们看看当我们询问关于 SportsWorldCentral 应用的问题时，它的表现如何。添加并运行一个具有以下内容的
    Python 代码单元：
- en: '[PRE16]'
  id: totrans-147
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'You will receive a message similar to the following:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 你将收到一条类似以下的消息：
- en: '[PRE17]'
  id: totrans-149
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: The model apparently suspects that SportsWorldCentral may not be “a real platform,”
    but even for real-world platforms like Sleeper or MyFantasyLeague.com, the model
    doesn’t contain information about specific leagues and teams.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 模型显然怀疑 SportsWorldCentral 可能不是一个“真正的平台”，但对于像 Sleeper 或 MyFantasyLeague.com 这样的现实世界平台，模型中也不包含关于特定联盟和球队的信息。
- en: To solve this knowledge gap, you will create a toolkit that provides access
    to the SportsWorldCentral API.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 为了解决这个知识差距，你将创建一个工具包，该工具包提供对 SportsWorldCentral API 的访问权限。
- en: Running the SportsWorldCentral (SWC) API Locally
  id: totrans-152
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在本地运行 SportsWorldCentral (SWC) API
- en: 'The code and database files for the SWC API are in the */api* folder of your
    Codespace. Start a second session in the Terminal and install the required libraries
    for the API in your Codespace as shown, using the *requirements.txt* file that
    is provided:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: SWC API 的代码和数据库文件位于你的 Codespace 的 */api* 文件夹中。在终端中启动第二个会话，并按照以下所示在你的 Codespace
    中安装 API 所需的库，使用提供的 *requirements.txt* 文件：
- en: '[PRE18]'
  id: totrans-154
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'Now launch the API from the command line as shown:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 现在从命令行启动 API，如下所示：
- en: '[PRE19]'
  id: totrans-156
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'You will see several messages from the FastAPI CLI, ending with the following:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 你将看到来自 FastAPI CLI 的几条消息，最后以以下内容结束：
- en: '[PRE20]'
  id: totrans-158
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: The API is now running in Codespaces. Copy the URL shown in the Terminal (in
    this example it is `[*http://0.0.0.0:8000*](http://0.0.0.0:8000)`, and it may
    be in yours too).
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: API 现在正在 Codespaces 中运行。复制终端中显示的 URL（在本例中为 `[*http://0.0.0.0:8000*](http://0.0.0.0:8000)`，它可能也适用于你的情况）。
- en: 'In the primary Terminal session, create a file named *.env* in the base project
    directory as shown:'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 在主终端会话中，在基本项目目录中创建一个名为 *.env* 的文件，如下所示：
- en: '[PRE21]'
  id: totrans-161
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'Update this file with the following contents:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 使用以下内容更新此文件：
- en: '[PRE22]'
  id: totrans-163
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: This will be used in the Jupyter Notebook you create later.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 这将在你稍后创建的 Jupyter Notebook 中使用。
- en: Installing the swcpy Software Development Kit (SDK)
  id: totrans-165
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装 swcpy 软件开发工具包 (SDK)
- en: 'To build the toolkit for using your API, you will first install the swcpy SDK
    that you created in [Chapter 7](ch07.html#chapter_7). If you completed that project
    already, you can copy that code to this repository and install it locally using
    `pip3 install -e` in the */sdk* directory. If you have not completed that yet,
    execute the following command to install the SDK from the Part I GitHub repository:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 要构建用于使用您的 API 的工具包，您首先需要安装您在[第 7 章](ch07.html#chapter_7)中创建的 swcpy SDK。如果您已经完成了该项目，您可以将该代码复制到这个存储库中，并在
    */sdk* 目录中使用 `pip3 install -e` 本地安装它。如果您还没有完成，请执行以下命令从 Part I GitHub 存储库安装 SDK：
- en: '[PRE23]'
  id: totrans-167
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'If the installation is successful, you should see the following:'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 如果安装成功，您应该看到以下内容：
- en: '[PRE24]'
  id: totrans-169
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: Note
  id: totrans-170
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: You will be creating a tool that uses the swcpy SDK, which gives the most robust
    way to interact with your API. There are other methods you could use to interact
    with your API. For example, you could also build a tool that is based on the simple
    API client that you created in [Chapter 9](ch09.html#chapter_9). Or you could
    create a tool that directly calls individual API endpoints using httpx or requests.
    You may want to experiment with different methods to see which you prefer.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 您将创建一个使用 swcpy SDK 的工具，这是与您的 API 交互最稳健的方式。您还可以使用其他方法与您的 API 交互。例如，您也可以构建一个基于您在[第
    9 章](ch09.html#chapter_9)中创建的简单 API 客户端的工具。或者，您可以直接使用 httpx 或 requests 调用单个 API
    端点。您可能想尝试不同的方法，看看您更喜欢哪种。
- en: Creating a LangChain Toolkit
  id: totrans-172
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建 LangChain 工具包
- en: A LangChain toolkit contains multiple tools. LangChain provides multiple ways
    to create tools, as shown in [“How to Create Tools”](https://oreil.ly/V8tBi).
    You will create tools by subclassing the `BaseTool` class. According to the documentation,
    this method “provides maximal control over the tool definition.”
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: LangChain 工具包包含多个工具。LangChain 提供了多种创建工具的方法，如[“如何创建工具”](https://oreil.ly/V8tBi)中所示。您将通过继承
    `BaseTool` 类来创建工具。根据文档，此方法“提供了对工具定义的最大控制。”
- en: 'Create a Python file named *swc_toolkit.py* as shown:'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 创建一个名为 *swc_toolkit.py* 的 Python 文件，如下所示：
- en: '[PRE25]'
  id: totrans-175
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'At the top of your toolkit file, you will add your imports and load the Codespace
    secret. Add the following contents to *swc_toolkit.py*:'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 在您的工具包文件顶部，您将添加您的导入并加载 Codespace 密钥。将以下内容添加到 *swc_toolkit.py*：
- en: '[PRE26]'
  id: totrans-177
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: '[![1](assets/1.png)](#co_using_apis_with_langchain_CO5-1)'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: '[![1](assets/1.png)](#co_using_apis_with_langchain_CO5-1)'
- en: These imports use the LangChain libraries for defining tools and toolkits.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 这些导入使用 LangChain 库来定义工具和工具包。
- en: '[![2](assets/2.png)](#co_using_apis_with_langchain_CO5-2)'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: '[![2](assets/2.png)](#co_using_apis_with_langchain_CO5-2)'
- en: This statement checks to see if the swcpy SDK has been installed in the environment.
    If not, an error is generated.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 此语句检查 swcpy SDK 是否已安装到环境中。如果没有，将生成错误。
- en: '[![3](assets/3.png)](#co_using_apis_with_langchain_CO5-3)'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: '[![3](assets/3.png)](#co_using_apis_with_langchain_CO5-3)'
- en: This instantiates the SDK. For more information about how this works, see [Chapter 7](ch07.html#chapter_7).
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 这将实例化 SDK。有关此功能如何工作的更多信息，请参阅[第 7 章](ch07.html#chapter_7)。
- en: 'The swcpy SDK has multiple functions, which call API endpoints in different
    ways. For each of the SDK functions you make available to the agent, create an
    instance of the Pydantic `BasesModel` class for input values and an instance of
    the LangChain `BaseTool` class to call the SDK. You will create the following
    tools:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: swcpy SDK 具有多种功能，以不同的方式调用 API 端点。对于您为代理提供的每个 SDK 函数，创建一个 Pydantic `BasesModel`
    类的实例用于输入值，并创建一个 LangChain `BaseTool` 类的实例来调用 SDK。您将创建以下工具：
- en: '`HealthCheckTool`: Allows the agent to check if the API is up and running'
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`HealthCheckTool`：允许代理检查 API 是否正常运行'
- en: '`ListLeaguesTool`: Allows the agent to get a list of leagues'
  id: totrans-186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ListLeaguesTool`：允许代理获取联赛列表'
- en: '`ListTeamsTool`: Allows the agent to get a list of teams'
  id: totrans-187
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ListTeamsTool`：允许代理获取团队列表'
- en: 'Add the following contents to the bottom of *swc_toolkit.py*, which add the
    `HealthCheckTool` and `ListLeaguesTool`:'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 将以下内容添加到 *swc_toolkit.py* 的底部，添加 `HealthCheckTool` 和 `ListLeaguesTool`：
- en: '[PRE27]'
  id: totrans-189
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: '[![1](assets/1.png)](#co_using_apis_with_langchain_CO6-1)'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: '[![1](assets/1.png)](#co_using_apis_with_langchain_CO6-1)'
- en: For each tool, you will define an input object, which is a subclass of the Pydantic
    `BaseModel`. This tool does not accept parameters, so you are creating an empty
    object.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 对于每个工具，您将定义一个输入对象，它是 Pydantic `BaseModel` 的子类。此工具不接受参数，因此您正在创建一个空对象。
- en: '[![2](assets/2.png)](#co_using_apis_with_langchain_CO6-2)'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: '[![2](assets/2.png)](#co_using_apis_with_langchain_CO6-2)'
- en: This is the definition of the tool for the health check, and it is a subclass
    of the LangChain `BaseTool`. The information you provide in this section will
    be used by the model to decide how and when to use this tool.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 这是健康检查工具的定义，它是 LangChain `BaseTool` 的子类。你在此部分提供的信息将被模型用来决定如何以及何时使用此工具。
- en: '[![3](assets/3.png)](#co_using_apis_with_langchain_CO6-3)'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: '[![3](assets/3.png)](#co_using_apis_with_langchain_CO6-3)'
- en: The `args_schema` defines what inputs are expected, and the model will use this
    to send input to the tool.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: '`args_schema` 定义了预期的输入，模型将使用它向工具发送输入。'
- en: '[![4](assets/4.png)](#co_using_apis_with_langchain_CO6-4)'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: '[![4](assets/4.png)](#co_using_apis_with_langchain_CO6-4)'
- en: This is where the action occurs. It is calling the `get_health_check()` method
    from the SDK.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 这是动作发生的地方。它调用 SDK 的 `get_health_check()` 方法。
- en: '[![5](assets/5.png)](#co_using_apis_with_langchain_CO6-5)'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: '[![5](assets/5.png)](#co_using_apis_with_langchain_CO6-5)'
- en: This is the input defined for the `ListLeaguesTool`. It contains parameters
    used by that tool.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 这是为 `ListLeaguesTool` 定义的输入。它包含该工具使用的参数。
- en: '[![6](assets/6.png)](#co_using_apis_with_langchain_CO6-6)'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: '[![6](assets/6.png)](#co_using_apis_with_langchain_CO6-6)'
- en: This is the tool that will call the SDK’s `list_leagues()` function.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 这是将调用 SDK 的 `list_leagues()` 函数的工具。
- en: 'Now you will add the `ListTeamsTool` and create a `BaseToolkit` object that
    represents all of the tools that you will be providing to an agent. Add the following
    contents to the bottom of *swc_toolkit.py*:'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你将添加 `ListTeamsTool` 并创建一个 `BaseToolkit` 对象，该对象代表你将提供给代理的所有工具。将以下内容添加到 *swc_toolkit.py*
    的底部：
- en: '[PRE28]'
  id: totrans-203
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: '[![1](assets/1.png)](#co_using_apis_with_langchain_CO7-1)'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: '[![1](assets/1.png)](#co_using_apis_with_langchain_CO7-1)'
- en: This is the input defined for the `ListTeamsTool`. It contains parameters used
    by that tool.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 这是为 `ListTeamsTool` 定义的输入。它包含该工具使用的参数。
- en: '[![2](assets/2.png)](#co_using_apis_with_langchain_CO7-2)'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: '[![2](assets/2.png)](#co_using_apis_with_langchain_CO7-2)'
- en: This is the tool that will call the SDK’s `list_teams()` function.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 这是将调用 SDK 的 `list_teams()` 函数的工具。
- en: '[![3](assets/3.png)](#co_using_apis_with_langchain_CO7-3)'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: '[![3](assets/3.png)](#co_using_apis_with_langchain_CO7-3)'
- en: The toolkit is subclassed from the LangChain `BaseToolkit` class.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 工具包是从 LangChain 的 `BaseToolkit` 类派生的。
- en: '[![4](assets/4.png)](#co_using_apis_with_langchain_CO7-4)'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: '[![4](assets/4.png)](#co_using_apis_with_langchain_CO7-4)'
- en: The `get_tools()` method returns a list of the tools in the toolkit.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: '`get_tools()` 方法返回工具包中的工具列表。'
- en: '[![5](assets/5.png)](#co_using_apis_with_langchain_CO7-5)'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: '[![5](assets/5.png)](#co_using_apis_with_langchain_CO7-5)'
- en: This statement instantiates the tools and returns them in a list.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 这个语句实例化了工具并将它们以列表的形式返回。
- en: Calling APIs Using AI (with LangGraph)
  id: totrans-214
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 AI 调用 API（与 LangGraph 一起）
- en: 'In the *langgraph_notebook.ipynb* notebook, you created an agent that could
    chat, but the agent was unable to answer questions from the SWC API. Now you will
    make an improved version that can use tools to call the SWC API. First, make a
    copy of the Jupyter Notebook with the following commands:'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 在 *langgraph_notebook.ipynb* 笔记本中，你创建了一个能够聊天的代理，但该代理无法回答来自 SWC API 的问题。现在，你将创建一个改进版本，该版本可以使用工具调用
    SWC API。首先，使用以下命令复制包含以下内容的 Jupyter Notebook：
- en: '[PRE29]'
  id: totrans-216
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'Open *langgraph_notebook_with_toolkit.ipynb* and select the Python kernel as
    you did previously. Update the first Markdown cell with the following text for
    clarity:'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 打开 *langgraph_notebook_with_toolkit.ipynb* 并选择你之前使用的 Python 内核。更新第一个 Markdown
    单元，以便更清晰地显示以下文本：
- en: '[PRE30]'
  id: totrans-218
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'Add the following to the first Python cell that contains the `import` statements
    and re-run it:'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 将以下内容添加到包含 `import` 语句的第一个 Python 单元中，并重新运行它：
- en: '[PRE31]'
  id: totrans-220
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: '[![1](assets/1.png)](#co_using_apis_with_langchain_CO8-1)'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: '[![1](assets/1.png)](#co_using_apis_with_langchain_CO8-1)'
- en: This is the `import` statement for the toolkit that you created.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 这是为你创建的工具包的 `import` 语句。
- en: '[![2](assets/2.png)](#co_using_apis_with_langchain_CO8-2)'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: '[![2](assets/2.png)](#co_using_apis_with_langchain_CO8-2)'
- en: This `import` provides the LangChain tool functionality.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 这个 `import` 提供了 LangChain 工具功能。
- en: '[![3](assets/3.png)](#co_using_apis_with_langchain_CO8-3)'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: '[![3](assets/3.png)](#co_using_apis_with_langchain_CO8-3)'
- en: This `import` adds LangGraph support for toolkits.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 这个 `import` 为工具包添加了 LangGraph 支持。
- en: 'Find the Python cell that is used to configure logging. Beneath that cell,
    add the following Markdown cell:'
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 在用于配置日志的 Python 单元下方，添加以下 Markdown 单元：
- en: '[PRE32]'
  id: totrans-228
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'Now you will reference the toolkit you created and imported earlier. To instantiate
    your toolkit, add the following Python cell and run it:'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你将引用你之前创建和导入的工具包。要实例化你的工具包，添加以下 Python 单元并运行它：
- en: '[PRE33]'
  id: totrans-230
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: These statements create an instance of your toolkit class, then retrieve all
    of the tools from it and put those into the `tools` object.
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 这些语句创建了一个工具包类的实例，然后从其中检索所有工具并将它们放入 `tools` 对象中。
- en: For the main body of your agent, there will be many changes. You will be *binding*
    the tools to your model, which means making the model aware of the tools it has
    access to. Then, you will create a node for the tools and update the flow of the
    agent to use tools when needed to answer questions.
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 对于你的代理的主体，将会有很多变化。你将*绑定*工具到你的模型，这意味着让模型意识到它可以访问的工具。然后，你将为工具创建一个节点，并更新代理的流程，以便在需要回答问题时使用工具。
- en: 'Locate the Python cell following the title “Configure Agent and Model.” Replace
    the entire contents with the following, and run it:'
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 定位到标题“配置代理和模型”之后的Python单元格。将整个内容替换为以下内容，并运行它：
- en: '[PRE34]'
  id: totrans-234
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: '[![1](assets/1.png)](#co_using_apis_with_langchain_CO9-1)'
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: '[![1](assets/1.png)](#co_using_apis_with_langchain_CO9-1)'
- en: This adds the `bind_tools()` function to the model initialization so that the
    model can use the toolkit you created.
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 这将`bind_tools()`函数添加到模型初始化中，以便模型可以使用你创建的工具包。
- en: '[![2](assets/2.png)](#co_using_apis_with_langchain_CO9-2)'
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: '[![2](assets/2.png)](#co_using_apis_with_langchain_CO9-2)'
- en: This will be used as a *conditional edge*, which is a workflow that decides
    how to proceed based on the results. If the model suggests a tool call, this returns
    the literal “tools.”
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 这将被用作一个*条件边*，这是一个根据结果决定如何进行的流程。如果模型建议调用工具，则返回字面意义上的“工具”。
- en: '[![3](assets/3.png)](#co_using_apis_with_langchain_CO9-3)'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: '[![3](assets/3.png)](#co_using_apis_with_langchain_CO9-3)'
- en: This adds a new node in the graph to perform tool calls using the new toolkit.
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 这将在图中添加一个新的节点，用于使用新的工具包进行工具调用。
- en: '[![4](assets/4.png)](#co_using_apis_with_langchain_CO9-4)'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: '[![4](assets/4.png)](#co_using_apis_with_langchain_CO9-4)'
- en: This adds the conditional edge that uses the `should_continue` function defined
    earlier.
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 这添加了使用之前定义的`should_continue`函数的条件边。
- en: To see how the flow has been updated to add a tool node, rerun the Python cell
    under the “Visualize the Graph” heading.
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 要查看流程是如何更新的以添加工具节点，请重新运行“可视化图”标题下的Python单元格。
- en: You should see an image that matches [Figure 14-6](#graph_visual_2_ch14). This
    shows a loop between the agent and the available tools.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该看到一个与[图14-6](#graph_visual_2_ch14)相匹配的图像。这显示了代理和可用工具之间的循环。
- en: '![Graph of the agent with tools](assets/haad_1406.png)'
  id: totrans-245
  prefs: []
  type: TYPE_IMG
  zh: '![代理工具的图](assets/haad_1406.png)'
- en: Figure 14-6\. Graph of the agent with tools
  id: totrans-246
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图14-6\. 带有工具的代理图
- en: The agent will decide how many times it needs to use the tools to answer the
    question. Depending on the question asked and the reasoning of the agent, this
    may involve one API call, multiple API calls, or no API calls.
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 代理将决定需要使用工具多少次来回答问题。根据提出的问题和代理的推理，这可能涉及一次API调用、多次API调用，或者根本不进行API调用。
- en: Chatting with Your Agent (with Tools)
  id: totrans-248
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 与你的代理聊天（带有工具）
- en: 'Now it’s time to see if your effort to provide tools to the agent has improved
    its ability to answer questions about SportsWorldCentral. Let’s start with the
    question that stumped it before. Enter the following in a new Python cell and
    run it:'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 现在是时候看看你为代理提供工具的努力是否提高了其回答关于SportsWorldCentral问题的能力。让我们从之前使它陷入困境的问题开始。在一个新的Python单元格中输入以下内容并运行它：
- en: '[PRE35]'
  id: totrans-250
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: 'You will receive a message similar to the following:'
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 你将收到类似以下的消息：
- en: '[PRE36]'
  id: totrans-252
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: 'If you look at the Terminal window, you should see the following, which indicates
    that the agent used the `ListLeaguesTool` from the toolkit:'
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你查看终端窗口，你应该看到以下内容，这表明代理使用了工具包中的`ListLeaguesTool`：
- en: '[PRE37]'
  id: totrans-254
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: Congratulations! You have created a LangGraph agent and provided it a toolkit
    to call your custom API.
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 恭喜！你已经创建了一个LangGraph代理，并为其提供了一个可以调用的自定义API工具包。
- en: Take time and experiment with questions that will encourage the agent to use
    the `HealthCheckTool` and the `ListTeamsTool`. Look at the Terminal output or
    log file to see the API calls that are generated. How can you influence its tool
    use? How can you guide it to answer more difficult questions using the tools?
    How can you stump it?
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 花时间尝试一些问题，以鼓励代理使用`HealthCheckTool`和`ListTeamsTool`。查看终端输出或日志文件以查看生成的API调用。你如何影响其工具使用？你如何引导它使用工具来回答更难的问题？你如何使其陷入困境？
- en: Additional Resources
  id: totrans-257
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 其他资源
- en: LangChain is a recent framework, so published resources are having a hard time
    keeping up. As you look at online resources and demos, check the versions of libraries
    that are being discussed, because at the time of this writing, some of the resources
    contained deprecated code.
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: LangChain是一个较新的框架，因此发布的资源很难跟上。当你查看在线资源和演示时，请检查所讨论库的版本，因为在本写作时，一些资源包含了已过时的代码。
- en: With that caveat, the most up-to-date resource is the [official LangChain docs
    page](https://oreil.ly/jyC-I).
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 有这个前提，最新的资源是[官方LangChain文档页面](https://oreil.ly/jyC-I)。
- en: LangGraph is even newer than LangChain; the [LangGraph documentation](https://oreil.ly/WBOXF)
    has the most detailed information.
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: LangGraph甚至比LangChain更新；[LangGraph文档](https://oreil.ly/WBOXF)包含了最详细的信息。
- en: To see Anthropic’s advice on agents, including several recommended workflows,
    read [“Building Effective Agents”](https://oreil.ly/QvAKC).
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 要了解Anthropic关于代理的建议，包括几个推荐的流程，请阅读“构建有效的代理”（https://oreil.ly/QvAKC）。
- en: Google produced an [Agents Whitepaper](https://oreil.ly/M5hV_) that explains
    the key components in a fully functional agent. It has a strong emphasis on how
    agents can use tools, which includes APIs.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: Google发布了一份[代理白皮书](https://oreil.ly/M5hV_)，其中解释了功能齐全的代理的关键组件。它强调代理如何使用工具，其中包括API。
- en: Summary
  id: totrans-263
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, you used the LangChain and LangGraph frameworks to create an
    intelligent agent that interacted with an AI model and your SWC API. This allowed
    you to ask questions about SWC data with natural language in a Jupyter Notebook.
    These are the beginning steps to using APIs with AI applications.
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你使用了LangChain和LangGraph框架来创建一个与AI模型和你的SWC API交互的智能代理。这让你能够在Jupyter Notebook中使用自然语言提出关于SWC数据的问题。这些都是使用API与AI应用结合的初步步骤。
- en: In [Chapter 15](ch15.html#chapter_15), you will use ChatGPT, which is a full-featured
    application that uses LLMs and can call APIs like you did in this chapter. You
    will create a custom action and custom GPT that can interact with the SWC API.
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第15章](ch15.html#chapter_15)中，你将使用ChatGPT，这是一个功能齐全的应用程序，它使用LLMs并且可以调用API，就像你在本章中所做的那样。你将创建一个自定义操作和自定义GPT，它们可以与SWC
    API交互。
